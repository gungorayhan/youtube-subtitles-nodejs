1
0.84 --> 5.24
hey there my name is Antonio and today


2
3.719 --> 4.88
we're diving into the world of realtime


3
6.08 --> 6.36
collaboration with a project built using


4
8.599 --> 6.601
the newest nextjs 14 as you can see we


5
12.44 --> 4.88
have two browsers side by side both


6
15.2 --> 5.8
interacting with the same content in


7
17.32 --> 5.879
real time no delays no waiting let's


8
21 --> 3.519
jump right in and see exactly what we


9
23.199 --> 4.08
are going to


10
24.519 --> 5.281
build imagine a digital whiteboard where


11
27.279 --> 4.761
you can brainstorm plan and bring ideas


12
29.8 --> 5.12
to life with your team no matter where


13
32.04 --> 5.56
you are today we're creating a mirror


14
34.92 --> 5.56
clone a realtime collaborative


15
37.6 --> 5.4
whiteboard as you can see I'm simulating


16
40.48 --> 4.919
a sticky note meeting it's like being in


17
43 --> 5.239
an actual meeting room but better you


18
45.399 --> 5.081
can move ideas around add new ones and


19
48.239 --> 4.681
watch as everything updates instantly


20
50.48 --> 5.239
for everyone this is about bringing


21
52.92 --> 5.52
teams closer even when they're miles


22
55.719 --> 5.721
apart next up let's dwell into the


23
58.44 --> 5.719
creative aspects of our whiteboard here


24
61.44 --> 5.12
I'm demonstrating app wireframing it's


25
64.159 --> 5.121
not just about sticking notes it's about


26
66.56 --> 5.84
bringing your ideas to life visually we


27
69.28 --> 4.64
can draw layer reposition elements


28
72.4 --> 4.28
everything you need for a dynamic


29
73.92 --> 5.239
planning session imagine sketching your


30
76.68 --> 5.119
next big app idea and having your team


31
79.159 --> 5.161
contribute in real time refining and


32
81.799 --> 4.721
reshaping it as you go this is where


33
84.32 --> 4.4
creativity meets


34
86.52 --> 4.559
collaboration let's not forget about


35
88.72 --> 4.24
drawing in this this part you'll see me


36
91.079 --> 4.08
just having fun with the app I'm


37
92.96 --> 5.04
doodling playing with different colors


38
95.159 --> 5.6
and trying out various tools this isn't


39
98 --> 5.079
just about neat organized work it's also


40
100.759 --> 4.64
about letting lose and getting creative


41
103.079 --> 5.08
with our app you can draw whatever comes


42
105.399 --> 5.521
to mind mess around with designs and


43
108.159 --> 4.64
even brainstorm visually with your team


44
110.92 --> 4.119
it's a great way to break the ice and


45
112.799 --> 4.96
get those creative juices


46
115.039 --> 5.561
flowing when it comes to organizing your


47
117.759 --> 5.32
ideas the move to back and bring to


48
120.6 --> 5.199
front features are super handy


49
123.079 --> 4.921
especially for complex projects in this


50
125.799 --> 4.561
part I'm showing you how these features


51
128 --> 4.36
work in our app it's all about


52
130.36 --> 4.64
controlling the order of elements on


53
132.36 --> 5.04
your board you can easily send a drawing


54
135 --> 4.92
to the background or bring a sticky note


55
137.4 --> 4.76
to the Forefront this is great for when


56
139.92 --> 4.28
you're working on detailed diagrams or


57
142.16 --> 5
need to prioritize certain elements in


58
144.2 --> 4.96
your design it's a simple yet powerful


59
147.16 --> 6.2
way to manage your workspace and keep


60
149.16 --> 7.24
your ideas both visually tidy and well


61
153.36 --> 5.519
organized lastly let's talk organization


62
156.4 --> 5.32
and collaboration I'm demonstrating our


63
158.879 --> 5.321
favoriting system creating organizations


64
161.72 --> 5.12
and inviting team members it's about


65
164.2 --> 5.319
making this space yours tailoring it to


66
166.84 --> 5
fit your team's workflow you can set up


67
169.519 --> 4.601
different boards invite collaborators


68
171.84 --> 4.84
and manage everything seamlessly it's


69
174.12 --> 5.68
your workspace just the way you want


70
176.68 --> 5.08
it building on what we've just explored


71
179.8 --> 6.24
let's talk about the tech that powers


72
181.76 --> 8.039
our app we will be using NEX js14 react


73
186.04 --> 6.919
Tailwind shaten UI convex live blocks


74
189.799 --> 5.121
and clerk these aren't just buzzwords


75
192.959 --> 4.881
they are what make this app incredibly


76
194.92 --> 4.8
responsive and real time every single


77
197.84 --> 4.44
thing in this app from drawing on the


78
199.72 --> 5.2
Whiteboard to performing Crow operations


79
202.28 --> 5.48
Happens Live whether you're adding a new


80
204.92 --> 5
board updating the title or deleting


81
207.76 --> 4.32
something you no longer need it


82
209.92 --> 5.64
synchronizes in real time across all


83
212.08 --> 6.32
users this means no refreshing no delays


84
215.56 --> 6.959
just smooth continuous collaboration and


85
218.4 --> 6.64
now without further Ado let's get


86
222.519 --> 4.481
started everything that you just saw in


87
225.04 --> 4.88
the demo is going to be covered in this


88
227 --> 5.319
free tutorial that being said if 10


89
229.92 --> 4.72
hours of content is still not enough for


90
232.319 --> 4.041
you and you want to learn more take a


91
234.64 --> 3.92
look at the link in the description


92
236.36 --> 3.56
where you can unlock additional content


93
238.56 --> 3.879
where we are going to turn this this


94
239.92 --> 4.64
project into a software as a service by


95
242.439 --> 4.72
implementing stripe adding a pro


96
244.56 --> 5.239
subscription and a billing


97
247.159 --> 6.28
portal so let's get started and let's


98
249.799 --> 5.241
set up nextjs inside of our project so


99
253.439 --> 3.92
first of all confirm that you have the


100
255.04 --> 4.08
necessary system requirements you can do


101
257.359 --> 4.12
that quite easily by running this


102
259.12 --> 5.12
command in the terminal and seeing what


103
261.479 --> 4.28
it prints out for your current version


104
264.24 --> 3.84
next let's go ahead and run the


105
265.759 --> 4.121
automatic installation right here so I'm


106
268.08 --> 3.44
going to go inside of my terminal and


107
269.88 --> 3.96
I'm going to paste that


108
271.52 --> 4.399
command let's go ahead and give our


109
273.84 --> 5.079
project a name so for me this is going


110
275.919 --> 5.481
to be a board video tutorial for you it


111
278.919 --> 4.161
can be whatever you want uh for the


112
281.4 --> 3.359
option of typescript make sure you


113
283.08 --> 3.24
select yes because we are going to be


114
284.759 --> 4.641
using typescript throughout this


115
286.32 --> 6
tutorial same thing for the slint same


116
289.4 --> 5.44
thing for Tailwind CSS and for the


117
292.32 --> 4.2
source directory make sure you select no


118
294.84 --> 4.359
because we are not going to be using the


119
296.52 --> 5.119
source directory inside of this project


120
299.199 --> 4.641
and the most important of all make sure


121
301.639 --> 4
that you select yes for the app router


122
303.84 --> 3.919
options because we are going to be using


123
305.639 --> 5.12
react server components and the new app


124
307.759 --> 4.761
router inside of this tutorial uh you


125
310.759 --> 3.921
can customize the import alas if you


126
312.52 --> 4.56
know what you're doing otherwise you can


127
314.68 --> 5.92
just leave it exactly as it is the add


128
317.08 --> 6.16
sign suggest select no and now let's go


129
320.6 --> 5.039
ahead and install all of these


130
323.24 --> 4.399
packages after the packages have been


131
325.639 --> 3.961
installed go ahead and open the


132
327.639 --> 4.081
repository which you can see right here


133
329.6 --> 3.719
here so I'm going to go ahead and click


134
331.72 --> 4.479
open and I'm going to select the new


135
333.319 --> 5.081
folder which was just created if you get


136
336.199 --> 5.241
this prompt you can feel free to click


137
338.4 --> 4.799
this yes I trust the authors inside of


138
341.44 --> 5.12
here you should have the app folder with


139
343.199 --> 5.401
favicon globals layout and page. TSX


140
346.56 --> 4.359
inside you should have pre-installed


141
348.6 --> 5.96
node modules you should have some config


142
350.919 --> 6.441
files like Tailwind TS config post CSS


143
354.56 --> 4.919
and next config before we run this


144
357.36 --> 4.24
project I want to add our component live


145
359.479 --> 5.361
library inside for that we're going to


146
361.6 --> 6.28
be using shat C nuui but shat cnii is


147
364.84 --> 5.28
not a component Library per se it is a


148
367.88 --> 4.319
collection of reusable components that


149
370.12 --> 4.04
we can copy and paste inside of our


150
372.199 --> 3.601
application which is perfect for us


151
374.16 --> 3.759
because we are not going to need all of


152
375.8 --> 4.04
these components here instead we're only


153
377.919 --> 4.521
going to need a couple of them and we're


154
379.84 --> 4.799
going to have to modify them to fit our


155
382.44 --> 4.36
design so let's go ahead and go inside


156
384.639 --> 5
of the installation here and let's click


157
386.8 --> 5.44
on the nextjs and as you can see we


158
389.639 --> 4.441
already have the nextjs project so we


159
392.24 --> 4.079
don't have to run this Command right


160
394.08 --> 5.8
here instead we can just run the command


161
396.319 --> 5.481
line interface inside of our new project


162
399.88 --> 4.08
so go ahead and copy this command or you


163
401.8 --> 4.56
can simply write out what you see on my


164
403.96 --> 5.16
screen make sure you're inside of your


165
406.36 --> 6.559
new project go inside of the terminal


166
409.12 --> 7.519
here and let's go ahead and do ntx shat


167
412.919 --> 5.72
n-i at latest in it like this go ahead


168
416.639 --> 3.881
and select the style which you want to


169
418.639 --> 3.641
use I recommend that you choose the


170
420.52 --> 5.16
default style because then you're going


171
422.28 --> 5.599
to have uh Lucid icons installed as a


172
425.68 --> 4.519
dependency if you select the New York


173
427.879 --> 4.561
style you can still work throughout the


174
430.199 --> 4.68
project with that but you are going to


175
432.44 --> 4.24
have to use different Imports for the


176
434.879 --> 4
icons which I will be using in this


177
436.68 --> 4.44
tutorial so I recommend that you do the


178
438.879 --> 5.241
same thing that I'm doing and select the


179
441.12 --> 4.479
default style and for the color it


180
444.12 --> 4.6
really doesn't matter I'm going to


181
445.599 --> 7.081
select the Slate as the base color and


182
448.72 --> 6.759
for the Cs variables select yes and that


183
452.68 --> 4.72
should automatically detect that we also


184
455.479 --> 4.601
have the typescript inside of our


185
457.4 --> 6.04
project and completely set up shat ceni


186
460.08 --> 6
for us great and now we're ready to do


187
463.44 --> 6.319
mpm runev which should which should


188
466.08 --> 5.36
start our application on Local Host 3000


189
469.759 --> 4.28
so I'm going to go ahead and refresh


190
471.44 --> 6
here and you should see something


191
474.039 --> 5.321
similar to this there we go perfect now


192
477.44 --> 4.159
let's go ahead and let's clean this up


193
479.36 --> 4.44
and let's add a first component from


194
481.599 --> 4.481
this shaten package so we can actually


195
483.8 --> 4
see how exactly we're going to work with


196
486.08 --> 4.6
components and how we're going to build


197
487.8 --> 5.2
our own component Library so the first


198
490.68 --> 4.359
thing I want to do is I want to go and


199
493 --> 3.199
find this page right here where we have


200
495.039 --> 4.72
the text


201
496.199 --> 5.28
nextjs inside of appj inside of nextjs


202
499.759 --> 4.241
there is something called file and


203
501.479 --> 4.84
folder based routing so if you want to


204
504 --> 5.08
find this root page you have to look for


205
506.319 --> 5.16
the file named page since we don't have


206
509.08 --> 4.72
any any other routes inside of this


207
511.479 --> 4.761
project because we just initialized it


208
513.8 --> 4.28
we know that it has to be this file


209
516.24 --> 4.279
right here so if you're coming from


210
518.08 --> 4.28
single page application or react World


211
520.519 --> 4.641
this would be the equivalent of an index


212
522.36 --> 5.4
inside of a router go inside of this


213
525.16 --> 4.04
page. DSX right here you can select


214
527.76 --> 3.88
everything which is inside of this


215
529.2 --> 4.36
return function and simply remove it


216
531.64 --> 4.199
like this so we have a clean slate to


217
533.56 --> 4.64
work with and let's go ahead and just


218
535.839 --> 6.841
add a little paragraph


219
538.2 --> 6.879
here hello board and let's go ahead and


220
542.68 --> 5.24
remove the import image since we no


221
545.079 --> 5.401
longer need that and once you save this


222
547.92 --> 5.76
you can refresh and you should see Hello


223
550.48 --> 5.68
board right here perfect so what I want


224
553.68 --> 5.719
to do now is I want to add a component


225
556.16 --> 5.52
from shaty nuui we can do that by going


226
559.399 --> 4.761
inside of the components


227
561.68 --> 4.56
here and let's find the button for


228
564.16 --> 3.919
example in here we can see how it's


229
566.24 --> 3.36
going to look like if you chose the New


230
568.079 --> 3.281
York style you can see that it looks


231
569.6 --> 4.76
slightly different but I'm working with


232
571.36 --> 4.96
a default style and now we can choose


233
574.36 --> 4.4
what how do we want to install it we can


234
576.32 --> 4.24
do it manually by installing the rics


235
578.76 --> 4.72
and then by adding this inside of our


236
580.56 --> 5.76
project or much simply much more simpler


237
583.48 --> 5.479
we can just run the CLI command like


238
586.32 --> 4.079
this so let's go ahead inside of our


239
588.959 --> 4.361
project


240
590.399 --> 4.841
here let's go inside of the terminal you


241
593.32 --> 2.639
can shut down the app or you can open a


242
595.24 --> 4.4
new


243
595.959 --> 6.281
one and go ahead and run npx shuts I add


244
599.64 --> 5.199
latest add button and this will add the


245
602.24 --> 5.64
new component inside of your project but


246
604.839 --> 4.521
not in the way that you're used to so


247
607.88 --> 4.12
usually when we install component


248
609.36 --> 5.56
libraries all we have is a node modules


249
612 --> 5.079
file right and then we import from that


250
614.92 --> 4.76
package uh that is not the case with


251
617.079 --> 5.2
chatsi and UI Instead This has now been


252
619.68 --> 5.32
added to our components folder UI


253
622.279 --> 6.161
button. PSX and in here you can see the


254
625 --> 5.48
exact code which is used for this button


255
628.44 --> 4.399
and you can see how it has all the types


256
630.48 --> 5.44
we need it has the variants predefined


257
632.839 --> 7.201
it uses Tailwind everything that we need


258
635.92 --> 6.52
and it's also uh of course uh accessible


259
640.04 --> 5.28
everything which you would want in a


260
642.44 --> 5.72
component Library button so how do we


261
645.32 --> 5.079
import it go inside of page. DSX and


262
648.16 --> 5.28
let's go ahead and remove this and let's


263
650.399 --> 6.041
add the button from add/ components UI


264
653.44 --> 5.36
button and I'm going to write click me


265
656.44 --> 4.839
now let's go inside of Local Host 3000


266
658.8 --> 4.68
and see that button and there we go it's


267
661.279 --> 4.161
right here and you can play around with


268
663.48 --> 3.799
it and you can uh take a look at the


269
665.44 --> 3.88
source code and you can see exactly what


270
667.279 --> 4.841
you can change so we have the variant


271
669.32 --> 6.44
and we have the size so if you try and


272
672.12 --> 5.92
give it a size of small you can see how


273
675.76 --> 5.6
it gets smaller if you go ahead and give


274
678.04 --> 5.56
it a variant of destructive you can see


275
681.36 --> 4.36
how it becomes destructive and here's


276
683.6 --> 4.44
the cool thing since we have the source


277
685.72 --> 5.44
code available Nothing is Stopping Us


278
688.04 --> 6.12
from actually adding our own variant or


279
691.16 --> 5.4
adding our own size or modifying the


280
694.16 --> 5.44
class names for already existing


281
696.56 --> 6.88
variants for example I can add success


282
699.6 --> 7.2
here I can give it a text primary and BG


283
703.44 --> 6.32
green 500 and then I can go inside of


284
706.8 --> 5.88
page. DSX and change the variant to be


285
709.76 --> 5.56
success and you can see how that changed


286
712.68 --> 5.399
the button right here so that's how


287
715.32 --> 5.92
we're going to use shaty and library to


288
718.079 --> 6.121
add our own components and to slowly


289
721.24 --> 4.64
modify them and style them uh according


290
724.2 --> 4.04
to our design and you can see how the


291
725.88 --> 4.48
moment I removed that success variant


292
728.24 --> 5.959
from the source code of the button it


293
730.36 --> 6.12
also throws an error here great so that


294
734.199 --> 5.681
this was a small introduction into our


295
736.48 --> 6.719
framework nextjs and also our component


296
739.88 --> 5.88
Library chat c nuui in the next chapter


297
743.199 --> 5.2
we're going to do a small demonstration


298
745.76 --> 4.6
of how routing Works inside of nextjs


299
748.399 --> 5.041
and then we're going to start by adding


300
750.36 --> 5.36
authentication to our


301
753.44 --> 4.6
project so now let's go ahead and


302
755.72 --> 4.72
explain the project structure a bit more


303
758.04 --> 5.4
and let's talk about routing inside of


304
760.44 --> 4.88
nextjs so first things first it's quite


305
763.44 --> 4.16
important to understand the top level


306
765.32 --> 4.959
folders which are available which is the


307
767.6 --> 5.52
app folder Pages folder public folder


308
770.279 --> 5.201
and the source folder in our project we


309
773.12 --> 4.48
only have the app folder and the public


310
775.48 --> 4.96
folder so we don't have the source


311
777.6 --> 5.239
folder because once we initialize the


312
780.44 --> 4.88
application I told you to select no for


313
782.839 --> 6.081
the source option so all that would do


314
785.32 --> 5.879
is be additional or optional application


315
788.92 --> 4.56
Source folder but I have no preference


316
791.199 --> 4.601
around that so I don't use it inside of


317
793.48 --> 4.28
my project the next one is the app


318
795.8 --> 4.56
folder the app folder is where we're


319
797.76 --> 4.6
going to have all of our routing system


320
800.36 --> 4
our react server components our


321
802.36 --> 3.4
interactive components basically


322
804.36 --> 4.479
everything that needs to be rendered


323
805.76 --> 5.439
under a specific route or a layout


324
808.839 --> 4.201
whereas this components folder is our


325
811.199 --> 3.76
custom named folder you can see that


326
813.04 --> 4.2
that is not reserved it's not


327
814.959 --> 5.041
specifically recognized in nextjs as


328
817.24 --> 5.36
something special this is our convention


329
820 --> 4.839
which was made by shaty nuui once we


330
822.6 --> 5.919
added the button using the npx shaty


331
824.839 --> 6.401
Andi add button command great and the


332
828.519 --> 5.961
pages folder are the old way of routing


333
831.24 --> 5.519
in nextjs so if you ever used nextjs in


334
834.48 --> 5
the past you've probably used the pages


335
836.759 --> 5.721
folder that has changed and today the


336
839.48 --> 5.76
default is the app folder that being


337
842.48 --> 5.52
said if for any reason you still want to


338
845.24 --> 4.959
you can always create the pages folder


339
848 --> 4.399
on the same level as app folder and then


340
850.199 --> 3.601
work as you are used to but keep in mind


341
852.399 --> 4.12
that you're not going to have server


342
853.8 --> 4.92
components inside of that great so we


343
856.519 --> 5.44
covered top level folders now let's talk


344
858.72 --> 6.6
about top level files so we only have a


345
861.959 --> 5.081
few of those here we have next config.js


346
865.32 --> 4.199
right here which you can see is


347
867.04 --> 4.919
completely empty for us in here you can


348
869.519 --> 5.041
for example extend webpack if you need


349
871.959 --> 4.481
that then we have package Json which


350
874.56 --> 3.76
you're probably familiar with in here


351
876.44 --> 3.519
you can see all of our scripts and


352
878.32 --> 4.28
dependencies which we have installed


353
879.959 --> 4.24
inside of our project we also going to


354
882.6 --> 4.359
have a middleware file but we're going


355
884.199 --> 4.961
to do that later middle can be used to


356
886.959 --> 4.281
intercept every single route and decide


357
889.16 --> 3.679
whether to block a user from showing


358
891.24 --> 3.8
that route so it can be used for


359
892.839 --> 4.961
authentication or it can also be used to


360
895.04 --> 5.4
detect Bots and IP addresses and block


361
897.8 --> 5.039
someone from your website then we have


362
900.44 --> 4.36
your usual environment files we're also


363
902.839 --> 4.481
going to be using those slin


364
904.8 --> 4.399
configuration G ignore basically all of


365
907.32 --> 4.639
the configuration files and you can read


366
909.199 --> 4.64
more about what they mean here and now


367
911.959 --> 3.961
let's talk about the routing conventions


368
913.839 --> 4.281
so how did I know that in order to


369
915.92 --> 4.52
change this page I needed to go inside


370
918.12 --> 5.24
of the app folder and specifically go


371
920.44 --> 5.72
inside of page. TSX that's because I


372
923.36 --> 5.479
know the app router routing conventions


373
926.16 --> 5.799
so I know that every file which is named


374
928.839 --> 5.521
page and ends in any of these uh


375
931.959 --> 5
extensions right here represents the


376
934.36 --> 5.56
page and I also know that every layout


377
936.959 --> 5.88
represents the layout and you can see


378
939.92 --> 6
all different reserved file names inside


379
942.839 --> 5.841
of the app router so layout page loading


380
945.92 --> 6.039
not found error Global error route


381
948.68 --> 4.92
template and default using this project


382
951.959 --> 4.88
we are only going to be working with the


383
953.6 --> 5.4
layout and page and perhaps loading and


384
956.839 --> 5.12
error we're not going to be using the


385
959 --> 6.24
other ones and the route is simply used


386
961.959 --> 5.24
if you want to create API endpoints and


387
965.24 --> 4.76
we are actually going to have one route


388
967.199 --> 4.961
my apologies right so how do we actually


389
970 --> 4.959
create a new route right we know that


390
972.16 --> 5.52
it's page. DSX but where do we put that


391
974.959 --> 4.68
well here's an example of nested routes


392
977.68 --> 5.839
right if you create a new folder and


393
979.639 --> 5.521
then inside put a convention page. DSX


394
983.519 --> 4.12
that folder is going to become a new


395
985.16 --> 4.119
route so let's try that out inside of


396
987.639 --> 4.281
the app folder I'm going to create a new


397
989.279 --> 6
one called test and then inside a new


398
991.92 --> 5.96
file page. DSX and here's what important


399
995.279 --> 5.521
every time you create a page. TSX it


400
997.88 --> 6.28
needs to export default so make sure


401
1000.8 --> 7.399
that when you write something like page


402
1004.16 --> 5.72
and return a div saying hello test page


403
1008.199 --> 4.08
you need to make sure that you write


404
1009.88 --> 4.72
export default page otherwise it's not


405
1012.279 --> 4.441
going to be registered as a route so


406
1014.6 --> 4.64
this is my structure inside of the app


407
1016.72 --> 5.96
folder I have a new folder called test


408
1019.24 --> 6.48
and inside of it page. DSX what I can do


409
1022.68 --> 5.56
now is go to Local Host 3000 test and


410
1025.72 --> 4.76
there we go we have hello test page and


411
1028.24 --> 4.04
you can try and comment out the export


412
1030.48 --> 3.559
default and you can see how it's


413
1032.28 --> 5.399
immediately going to break the page and


414
1034.039 --> 6.16
give us an error great so we know how to


415
1037.679 --> 4.36
create a very simple route now and


416
1040.199 --> 4.561
here's an example of how to create a


417
1042.039 --> 4.681
nested route so let's try that out


418
1044.76 --> 5.919
inside of the test folder create a new


419
1046.72 --> 6.04
folder called uh sub route and inside of


420
1050.679 --> 5.161
it let's go ahead and create a new file


421
1052.76 --> 7.68
page. DSX and let's do the exact same


422
1055.84 --> 6.12
thing const page and let's return a div


423
1060.44 --> 4.8
sub route


424
1061.96 --> 5.52
page and let's export default page and


425
1065.24 --> 4.84
you've probably noticed the name of the


426
1067.48 --> 5.28
component you are exporting does not


427
1070.08 --> 4.28
matter it can be named whatever you want


428
1072.76 --> 4.6
all that matters is that you do a


429
1074.36 --> 5.36
default export what does matter is the


430
1077.36 --> 5.04
file name and the the folder name the


431
1079.72 --> 4.24
folder name can be whatever you want but


432
1082.4 --> 5.639
keep in mind that that's going to be the


433
1083.96 --> 5.959
exact URL inside of your application so


434
1088.039 --> 3.801
make sure that inside of the test folder


435
1089.919 --> 4.721
you have another folder whatever you


436
1091.84 --> 5.28
called it and did a default export and


437
1094.64 --> 5.32
then I'm going to go on Local Host 3000


438
1097.12 --> 5.84
test/ sub route and there we go you can


439
1099.96 --> 5.92
see that now I'm on the sub route page


440
1102.96 --> 4.959
great and in here we have some


441
1105.88 --> 4.52
additional types of folders and routes


442
1107.919 --> 4.161
like d damic route segment this will


443
1110.4 --> 4.759
represent something that is not


444
1112.08 --> 5.56
hardcoded for example a user ID let's


445
1115.159 --> 4.121
check that out so I'm going to go ahead


446
1117.64 --> 3.88
inside of the app folder and I'm going


447
1119.28 --> 4.96
to create a new one inside of curly


448
1121.52 --> 4.68
brackets I'm going to write user ID like


449
1124.24 --> 4.439
that and perhaps it's better that we


450
1126.2 --> 4.839
actually create users first and then


451
1128.679 --> 4.801
let's drag and drop user ID inside of


452
1131.039 --> 5.681
the users like that so make sure you


453
1133.48 --> 6.16
have app folder users user ID and then


454
1136.72 --> 5.12
inside let's create a page do DSX right


455
1139.64 --> 3.88
here now in here we're going to have


456
1141.84 --> 5
something special we're going to have an


457
1143.52 --> 5.48
interface user ID page it doesn't matter


458
1146.84 --> 4.68
it can be named whatever you want and in


459
1149 --> 4.36
here we have access to the params and I


460
1151.52 --> 4.76
know that inside I'm going to have a


461
1153.36 --> 5.319
user ID which is a type of string so how


462
1156.28 --> 4.68
do I know that I have user ID here


463
1158.679 --> 4.601
because that's how I named the variable


464
1160.96 --> 4.839
inside of my square brackets that's why


465
1163.28 --> 6.56
naming is important and now what you can


466
1165.799 --> 6.76
do is write const page


467
1169.84 --> 6
let's go ahead and extract the params


468
1172.559 --> 7.401
and let's assign the types here user ID


469
1175.84 --> 8.16
page props and in here let's just not


470
1179.96 --> 8.68
misspell this let's return a div user ID


471
1184 --> 8.4
and let's write bars. user ID like


472
1188.64 --> 5.96
that so let's take a look at our routes


473
1192.4 --> 4.8
inside of the app folder I have users


474
1194.6 --> 5.88
and then I have user ID and inside of it


475
1197.2 --> 8.28
I have page do PSX what I can do now is


476
1200.48 --> 7.679
go to Local Host 3000 users sl12 3 4 and


477
1205.48 --> 4.76
let's go ahead and Export default so


478
1208.159 --> 4.041
there we go I forgot to do that always


479
1210.24 --> 4.319
make sure that whenever you are creating


480
1212.2 --> 4.04
a new route you add a default export I


481
1214.559 --> 3.921
forgot to do that my


482
1216.24 --> 4.48
apologies and there we go you can see


483
1218.48 --> 5.199
that now we have a user ID which exactly


484
1220.72 --> 5.72
matches what we have inside of our URL


485
1223.679 --> 5
perfect and you can also do a catch all


486
1226.44 --> 5.56
route segment or optional catch all


487
1228.679 --> 5.681
route segment uh and now here's an


488
1232 --> 5.08
important thing that you also have to


489
1234.36 --> 4.92
understand folders are not always


490
1237.08 --> 4.4
necessarily don't always necessarily


491
1239.28 --> 3.48
have to be used for routing right


492
1241.48 --> 3.8
sometimes we just want to create a


493
1242.76 --> 4.68
folder to organize something and we can


494
1245.28 --> 4.08
do that using this convention by adding


495
1247.44 --> 4.359
parenthesis this will group routes


496
1249.36 --> 4.96
without affecting the routing but that


497
1251.799 --> 5.081
is different from adding an underscore


498
1254.32 --> 4.96
this will completely opt folder and all


499
1256.88 --> 4.2
child segments out of routing so what is


500
1259.28 --> 5.36
the difference between those two let's


501
1261.08 --> 7.4
go ahead and quickly explain so let's go


502
1264.64 --> 6.72
ahead and create two examples in here so


503
1268.48 --> 6
inside of my app folder right now if I


504
1271.36 --> 6.48
want to access the sub route I have to


505
1274.48 --> 5.96
go through test like this so I have to


506
1277.84 --> 5.68
write SL test slub


507
1280.44 --> 5.52
route that is the only way I can access


508
1283.52 --> 3.96
this but here's an alternative way you


509
1285.96 --> 3.48
can do that so I'm going to remove the


510
1287.48 --> 5.199
test fold entirely and all of its


511
1289.44 --> 5.719
children and now this will be a 404 page


512
1292.679 --> 4.721
what I can do is I can wrap test inside


513
1295.159 --> 5.561
of parentheses like this and then create


514
1297.4 --> 8.399
a new folder sub route and then inside


515
1300.72 --> 8.68
create page. DSX let's create a con


516
1305.799 --> 8.841
page return and I'm going to write uh


517
1309.4 --> 8.32
rendered at SL sub


518
1314.64 --> 6.279
route and let's not forget to add expert


519
1317.72 --> 5.199
default page and how do you think we


520
1320.919 --> 4.161
access this sub rout now let's take a


521
1322.919 --> 4.24
look at what this says if something is


522
1325.08 --> 5.56
wrapped inside of parenthesis group


523
1327.159 --> 5.12
routes without affecting the routing but


524
1330.64 --> 4.72
that doesn't mean that the children are


525
1332.279 --> 5.921
not affected so all that we did here is


526
1335.36 --> 5.72
we changed this parent folder to not be


527
1338.2 --> 4.88
used as a part of the URL instead it's


528
1341.08 --> 4.4
just a useful folder if we want to


529
1343.08 --> 4.52
organize some things together because


530
1345.48 --> 3.04
when it comes to file and folder based


531
1347.6 --> 3.199
routing


532
1348.52 --> 5.36
when it comes to a very big project it


533
1350.799 --> 6.24
can get quite haptic so now what we can


534
1353.88 --> 6.48
do is simply go to Local Host 3000 slub


535
1357.039 --> 5.961
rout and there we go rendered at slub


536
1360.36 --> 6.36
rout because we are completely omitting


537
1363 --> 5.559
this uh parent folder right here and


538
1366.72 --> 4.76
what is the difference between this one


539
1368.559 --> 5.681
you might ask well that one is quite


540
1371.48 --> 4.24
simple that will completely remove


541
1374.24 --> 3.039
everything so I'm going to remove this


542
1375.72 --> 3.92
folder and I'm going to create a new one


543
1377.279 --> 5.121
underscore test and then inside I'm


544
1379.64 --> 8.32
going to create a normal route like this


545
1382.4 --> 10.04
page. DSX let's go ahead and Export


546
1387.96 --> 7.079
page div I am never


547
1392.44 --> 6.239
rendered so this is my folder structure


548
1395.039 --> 5.561
up folder undor test sub route page. TSX


549
1398.679 --> 4.081
very similar to the last two examples we


550
1400.6 --> 4.16
had but this time the parent route has


551
1402.76 --> 5.56
an underscore so let's see what happens


552
1404.76 --> 6.72
if I refresh here/ sub route is a 404


553
1408.32 --> 7.68
how about SL test/ sub route that is a


554
1411.48 --> 7.92
404 as well how about slore test/ sub


555
1416 --> 5.559
brout that is a 404 as well so whenever


556
1419.4 --> 4.32
you see me using the underscore which I


557
1421.559 --> 3.881
will most likely use for some internal


558
1423.72 --> 3.64
components which are not reused


559
1425.44 --> 4.8
throughout the project it means that I


560
1427.36 --> 5
am purposely doing that so that is in my


561
1430.24 --> 3.919
opinion the best way to hold components


562
1432.36 --> 3.96
inside of the app folder because


563
1434.159 --> 5.281
otherwise let's say that you have a


564
1436.32 --> 6.359
components folder inside of here and you


565
1439.44 --> 6.92
accidentally create a page component


566
1442.679 --> 5.801
like this for example like this you know


567
1446.36 --> 4.559
what you mean by this you don't expect


568
1448.48 --> 4.64
this to be a page right but since this


569
1450.919 --> 3.76
is a default export so I just copied and


570
1453.12 --> 3.76
paste it from here if you're confused


571
1454.679 --> 4.921
inside of my components here I've pasted


572
1456.88 --> 6.48
this and if I go to localhost 3000


573
1459.6 --> 5.76
components now this is all of a sudden a


574
1463.36 --> 4.08
uh file route well that's not what we


575
1465.36 --> 4.199
expected most likely if we have a folder


576
1467.44 --> 3.839
named components that's why that's why I


577
1469.559 --> 3.441
recommend that you hold your components


578
1471.279 --> 3.441
in underscore components and you can see


579
1473 --> 4.96
how that immediately turn this into a


580
1474.72 --> 5.12
404 page and you can still import use


581
1477.96 --> 4.04
from this folder in all your other


582
1479.84 --> 5.8
routes so it's not like they don't exist


583
1482 --> 5.799
they're just omitted from the actual uh


584
1485.64 --> 3.519
from the actual routing system and every


585
1487.799 --> 3.081
now and then if you play around with


586
1489.159 --> 3.841
these existing routes and change one


587
1490.88 --> 4.919
from an underscore then to a route group


588
1493 --> 4.76
with parentheses then to a dynamic one


589
1495.799 --> 5.161
uh you're often going to see this one


590
1497.76 --> 5.76
one unsaved file pop up which is located


591
1500.96 --> 4.48
inside of this nextext cache that is


592
1503.52 --> 4.399
very simple to fix you can either go


593
1505.44 --> 4.32
directly inside and click save but if


594
1507.919 --> 4.441
you if you think you've messed it up for


595
1509.76 --> 4.72
any reason you can very easily resolve


596
1512.36 --> 4.799
it so first go ahead inside of your


597
1514.48 --> 6
terminal and shut down your app and then


598
1517.159 --> 5.561
go ahead and remove next entirely like


599
1520.48 --> 4.96
that and here's where where the magic


600
1522.72 --> 5
happens all you have to do is mpm run


601
1525.44 --> 5.2
Dev and that is automatically going to


602
1527.72 --> 5.76
generate a newex folder so don't worry


603
1530.64 --> 5.2
you cannot mess that up it can happen


604
1533.48 --> 4.319
when during you know hot reloading and


605
1535.84 --> 4.28
actual development you change the type


606
1537.799 --> 5
of your folders it probably confuses


607
1540.12 --> 5.4
nextjs a little bit so that cache uh


608
1542.799 --> 5.6
happens great and just one more thing


609
1545.52 --> 5
that I want to cover is the layout file


610
1548.399 --> 4.201
because uh yes we have some more like


611
1550.52 --> 3.32
parallel and intercepted routes I'm not


612
1552.6 --> 2.84
going to talk about them in this


613
1553.84 --> 3.4
tutorial for I'm going to reserve that


614
1555.44 --> 4
for something else but I do want to talk


615
1557.24 --> 3.64
about layout file because that's another


616
1559.44 --> 3.599
file that I'm going to be using inside


617
1560.88 --> 3.799
of this project so that one is quite


618
1563.039 --> 4.081
simple let's take a look at an example


619
1564.679 --> 6.321
that we have so inside of this users


620
1567.12 --> 7.64
folder right now I can go to slash users


621
1571 --> 6.039
slash1 2 3 4 5 six


622
1574.76 --> 4.24
right there we go so that is working


623
1577.039 --> 4.801
normally so now let's go ahead and


624
1579 --> 6.52
inside of this users folder let's add a


625
1581.84 --> 7
separate page. DSX so now both my users


626
1585.52 --> 5.36
folder has its own page but also user ID


627
1588.84 --> 4.04
has its own page and in here I'm very


628
1590.88 --> 5.76
simply going to export a page saying


629
1592.88 --> 7.12
live user list so now I can go to


630
1596.64 --> 5.68
localhost 3000 SL users and there we go


631
1600 --> 4.72
now I have a user list so how does


632
1602.32 --> 4.719
layout work in here how are layouts


633
1604.72 --> 5.199
useful well let's say that I want to


634
1607.039 --> 6
have a specific nov bar whenever a user


635
1609.919 --> 5.24
is visiting the entire users route group


636
1613.039 --> 5.52
I don't care if they are in the specific


637
1615.159 --> 5.76
user ID page or on the user list or even


638
1618.559 --> 4.72
down further if I create more sub brows


639
1620.919 --> 5.041
like specific user settings I always


640
1623.279 --> 5.4
want them to have a specific Novar well


641
1625.96 --> 4.36
layout is a perfect file to put that so


642
1628.679 --> 4.12
we don't have to copy and paste that


643
1630.32 --> 5.599
Novar component every single time so


644
1632.799 --> 5.401
inside of your most top level uh route


645
1635.919 --> 4.24
group or I mean you will know where you


646
1638.2 --> 4.359
want that of course but this is just for


647
1640.159 --> 4.601
an example inside of the users here


648
1642.559 --> 5.281
alongside page. DSX we're going to


649
1644.76 --> 4.639
create layout. DSX file and this one


650
1647.84 --> 3.959
will immediately going to throw you an


651
1649.399 --> 4.76
error because we need to export default


652
1651.799 --> 5.041
the same way we do with the page folder


653
1654.159 --> 5.721
so let's go ahead and write const layout


654
1656.84 --> 5.199
again the name doesn't matter here and


655
1659.88 --> 5
let's just return I am a


656
1662.039 --> 6
layout ignore that typo of course and


657
1664.88 --> 5.6
let's export default layout and there we


658
1668.039 --> 4.88
go now it says I am a layout but where


659
1670.48 --> 4.72
is our content where is the user list


660
1672.919 --> 5.441
and if I go to SL


661
1675.2 --> 5.359
user123 where is the user I ID we cannot


662
1678.36 --> 4.039
see either of those well that's because


663
1680.559 --> 3.921
layouts work a bit differently every


664
1682.399 --> 3.921
time you use a layout you need to export


665
1684.48 --> 5.36
the children so let's create an


666
1686.32 --> 5.079
interface layout props here children


667
1689.84 --> 4.719
react react


668
1691.399 --> 6.241
node and in here all you have to do is


669
1694.559 --> 5.441
assign those layout props and you can


670
1697.64 --> 5.279
extract the children and then inside of


671
1700 --> 5.559
this div simply render the children and


672
1702.919 --> 4.841
there we go now our Pages work exactly


673
1705.559 --> 4.84
as they used to work before so so I can


674
1707.76 --> 6.279
see the user list on/ users and I can


675
1710.399 --> 5.52
see the exact user ID here perfect and


676
1714.039 --> 4.841
here's where the magic happens go inside


677
1715.919 --> 5.961
of your layout. DSX let's go ahead and


678
1718.88 --> 6.12
give this a class name of flex Flex call


679
1721.88 --> 5.48
and GAP y4 so we are going to order


680
1725 --> 5.08
these elements one below another with a


681
1727.36 --> 4.72
gap of four between them which is 16


682
1730.08 --> 4.24
pixels and in here I'm going to add a


683
1732.08 --> 6.199
little Navar element which is going to


684
1734.32 --> 6.4
say I am a reusable


685
1738.279 --> 5.561
navbar and in here I'm going to give it


686
1740.72 --> 5.36
a class name of text extra small padding


687
1743.84 --> 5.839
of one BG red


688
1746.08 --> 6.76
500 and text white I think that is more


689
1749.679 --> 6.281
than enough and here's the cool thing


690
1752.84 --> 5.679
this layout is reflecting every single


691
1755.96 --> 5.839
page inside of users So currently I'm on


692
1758.519 --> 5.241
user ID but if I go back to slash users


693
1761.799 --> 4.24
you can see that this is right here and


694
1763.76 --> 4.12
here's the cool thing this is not


695
1766.039 --> 3.921
rendering so


696
1767.88 --> 4.32
that's why these layout files are so


697
1769.96 --> 4.92
powerful whenever you want to create a


698
1772.2 --> 4.92
sidebar or a nov bar layout is the


699
1774.88 --> 4.039
perfect place to put that because then


700
1777.12 --> 4.24
all of the other content which is


701
1778.919 --> 5.88
changed by your routing will only be


702
1781.36 --> 6.96
rendered inside of this part right here


703
1784.799 --> 5.561
and the actual layout like the sidebar


704
1788.32 --> 4.88
or the knvb bar are never going to be


705
1790.36 --> 5.679
touched except if there is a refresh in


706
1793.2 --> 4.28
a server component inside of themselves


707
1796.039 --> 4.48
but we're going to talk about server


708
1797.48 --> 5.319
components when we encounter them first


709
1800.519 --> 3.841
great I hope this kind of cleared it up


710
1802.799 --> 3.12
and here's what I'm going to do just to


711
1804.36 --> 3.679
wrap this up I'm going to delete


712
1805.919 --> 4.561
everything here just because I want you


713
1808.039 --> 4.76
to be on a blank slate here so we don't


714
1810.48 --> 5.4
need the components the test or the


715
1812.799 --> 6
users like that so we just need page.


716
1815.88 --> 5.039
DSX and go back to Local Host 3000 and


717
1818.799 --> 4.76
you should have the click me button and


718
1820.919 --> 4.76
just to explain this layout is different


719
1823.559 --> 4.84
from the one that I just told you


720
1825.679 --> 4.521
because this is a root layout you need


721
1828.399 --> 3.241
to have this file you can see that this


722
1830.2 --> 4.56
one is quite important because it


723
1831.64 --> 5.32
renders the HTML and the body but other


724
1834.76 --> 6.399
than that it functions exactly the same


725
1836.96 --> 6.8
as our layout from the users great great


726
1841.159 --> 5.481
job now let's go ahead and let's set up


727
1843.76 --> 5.72
our database and our authentication to


728
1846.64 --> 5.159
our project first things first I want to


729
1849.48 --> 5.36
set up convex which is going to be our


730
1851.799 --> 5.641
backend and database for this project so


731
1854.84 --> 5.439
head to convex dodev or use the link in


732
1857.44 --> 5.479
the description and create an account


733
1860.279 --> 4.961
after you've successfully logged in once


734
1862.919 --> 4.801
you go to the dashboard you should see a


735
1865.24 --> 4.52
prompt similar to this as you can see I


736
1867.72 --> 4.6
already have a project right here which


737
1869.76 --> 4.279
I've used to develop this app initially


738
1872.32 --> 4.199
but you probably going to have an empty


739
1874.039 --> 4.841
screen and an option to create a project


740
1876.519 --> 4.721
like this if you want to you can create


741
1878.88 --> 3.84
a project from here but instead I'm


742
1881.24 --> 4.76
going to go ahead and follow the


743
1882.72 --> 6.079
documentation from convex for nextjs


744
1886 --> 6
quick start so let's go ahead and do


745
1888.799 --> 5.281
that as you can see we already have the


746
1892 --> 4.159
our next app so we don't have to run


747
1894.08 --> 4.319
this command instead we need to make


748
1896.159 --> 5.161
sure that we are inside of our project


749
1898.399 --> 4.921
and then run npm install convex so let's


750
1901.32 --> 4.319
go ahead and do that make sure you're


751
1903.32 --> 3.959
inside of your project here and I


752
1905.639 --> 4.361
recommend that you actually shut down


753
1907.279 --> 6.201
your local host and then just run npm


754
1910 --> 5.24
install convex like this after convex


755
1913.48 --> 4.199
has been installed you're going to go


756
1915.24 --> 4.88
ahead and run the next command which


757
1917.679 --> 6.081
will set up convex Dev deployment and


758
1920.12 --> 5.76
that command is npx convex Dev so let's


759
1923.76 --> 4.44
go ahead and run that so what this


760
1925.88 --> 4.72
command is going to do as you can see


761
1928.2 --> 5.319
right here this will prompt you to log


762
1930.6 --> 5.52
in with GitHub create a project and save


763
1933.519 --> 4.721
your production and deployment URLs it


764
1936.12 --> 5.08
will also create a convex folder for us


765
1938.24 --> 6.76
to write backend API functions so let's


766
1941.2 --> 6.4
go ahead and run npx convex Dev so I am


767
1945 --> 4.519
already logged in so it didn't prompt me


768
1947.6 --> 3.679
to sign in with GitHub but if this is


769
1949.519 --> 4.361
your first time running this command it


770
1951.279 --> 4.841
will give you a login link which you can


771
1953.88 --> 4.039
click which will simply synchronize your


772
1956.12 --> 4.519
new account which you just created from


773
1957.919 --> 4.681
convex with your terminal here so I'm


774
1960.639 --> 5.04
going to choose new project here because


775
1962.6 --> 5.319
I didn't create one from the UI so new


776
1965.679 --> 3.96
project and let's go ahead and give this


777
1967.919 --> 5.281
project a name as you can see it already


778
1969.639 --> 4.961
picked up the name of uh my repository


779
1973.2 --> 4
so I'm actually going to call it like


780
1974.6 --> 4.439
that board video tutorial or I could


781
1977.2 --> 3.88
just pressed enter but it doesn't matter


782
1979.039 --> 4.24
just give your new project a name and


783
1981.08 --> 4.36
there we go now it's creating a new


784
1983.279 --> 4.921
project right here and as you can see it


785
1985.44 --> 5.359
added some fields to our environment


786
1988.2 --> 5.079
variables right here and now it says


787
1990.799 --> 5.24
convex functions are ready so this


788
1993.279 --> 5.4
command npx convex Dev besides being


789
1996.039 --> 6.081
used to create and initialize a project


790
1998.679 --> 5.321
is also used to run our back end right


791
2002.12 --> 4.159
so this is like a separate back end


792
2004 --> 4.84
which we have but the cool thing is that


793
2006.279 --> 4.561
we can write it in a mono repo right


794
2008.84 --> 4.6
here we don't need another repository


795
2010.84 --> 5.64
for that so make sure that you have this


796
2013.44 --> 5.92
running and then open a new project here


797
2016.48 --> 4.64
sorry a new terminal and in here do npm


798
2019.36 --> 4.08
run Dev so you're going to need two


799
2021.12 --> 4.88
commands to run this project one to run


800
2023.44 --> 4.239
your back end which is MPX convex Dev


801
2026 --> 4
and one to run your front end which is


802
2027.679 --> 4.641
mpm run Dev keep in mind that the


803
2030 --> 4.919
project will work also if you don't run


804
2032.32 --> 4.8
npx convex Dev but every time you add


805
2034.919 --> 3.961
some changes to your database schema or


806
2037.12 --> 4.24
add some new API functions you need to


807
2038.88 --> 4.12
run this command again or you can simply


808
2041.36 --> 4.199
leave it running in the background and


809
2043 --> 5.119
that will synchronize everything uh with


810
2045.559 --> 3.961
the convex which is really a great


811
2048.119 --> 3.04
experience you're going to see that once


812
2049.52 --> 4.24
we start developing especially if you


813
2051.159 --> 4.2
see my old projects where I use Prisma a


814
2053.76 --> 3.76
lot where you know that every time I


815
2055.359 --> 4.641
change the schema I need to do the whole


816
2057.52 --> 4.639
migration process and DB push and npx


817
2060 --> 4.28
generate well here we didn't have to do


818
2062.159 --> 5.321
that it's all automatically run and it's


819
2064.28 --> 4.96
so fast to work with great so so now


820
2067.48 --> 3.679
once we've done this let's go ahead and


821
2069.24 --> 4.599
refresh our Local Host to make sure that


822
2071.159 --> 5.361
this is still working as it should great


823
2073.839 --> 4.24
and now let's go ahead inside of our uh


824
2076.52 --> 3.68
Team here and there we go you can see


825
2078.079 --> 4.28
that I have a new project here board


826
2080.2 --> 3.84
video tutorial and you can see that is


827
2082.359 --> 3.52
completely empty and we also have


828
2084.04 --> 4.44
instructions on how to create our first


829
2085.879 --> 4
mutation to create a task for example


830
2088.48 --> 4.08
and we're going to spend a lot of time


831
2089.879 --> 5.321
in this dashboard right here so in here


832
2092.56 --> 5.4
we can see our data and our tables just


833
2095.2 --> 5.12
like in MPX Prisma Studio for example


834
2097.96 --> 3.76
but the cool thing is we also have logs


835
2100.32 --> 4.6
so you're going to see that once we


836
2101.72 --> 5.76
create some API routes in convex logging


837
2104.92 --> 5.84
errors or some info is as simple as


838
2107.48 --> 5.8
adding console log to our API function


839
2110.76 --> 4.48
which sounds like a trivial thing but


840
2113.28 --> 4.24
it's actually so impressive how well it


841
2115.24 --> 4.64
works and how much it helps you debug in


842
2117.52 --> 4.92
development and also in production later


843
2119.88 --> 4.959
on and not to mention that this entire


844
2122.44 --> 6.08
thing is real time which will give our


845
2124.839 --> 5.841
app an amazing optimistic feel great so


846
2128.52 --> 4.52
now that we've set up our backend it's


847
2130.68 --> 5.04
time to set up Clerk and connect it with


848
2133.04 --> 5.799
convex using a jbt template so we can


849
2135.72 --> 6.52
actually add a login screen


850
2138.839 --> 6.601
here so the next thing we have to do is


851
2142.24 --> 6.64
we have to go inside of clerk.com and go


852
2145.44 --> 6.12
ahead and create an account or sign


853
2148.88 --> 5.479
in once you're signed in go ahead and


854
2151.56 --> 4.84
create a new application so in here I'm


855
2154.359 --> 3
going to give this application a name of


856
2156.4 --> 2.32
board


857
2157.359 --> 2.921
so you can see how that's going to look


858
2158.72 --> 4.44
like it's going to say right here


859
2160.28 --> 5
continue to board and make sure that you


860
2163.16 --> 3.919
select email address this is very


861
2165.28 --> 3.72
important because if you don't allow


862
2167.079 --> 4.881
email addresses you're not going to be


863
2169 --> 5.48
able to add invites for organizations


864
2171.96 --> 4.96
which also come from Clerk and besides


865
2174.48 --> 4.68
email addresses I also like to allow


866
2176.92 --> 4.12
Google so it doesn't matter what else


867
2179.16 --> 4.48
you allow here you can see you have a


868
2181.04 --> 5.48
ton of options what matters is that you


869
2183.64 --> 5.6
also include email address and then go


870
2186.52 --> 4.92
ahead and click create an application


871
2189.24 --> 5.92
and then inside of here let's go ahead


872
2191.44 --> 6.56
and let's set up our project uh so let's


873
2195.16 --> 5.64
go ahead and copy this right here and


874
2198 --> 5.359
let's create our environment. loc file


875
2200.8 --> 5.08
inside of the project so let me go ahead


876
2203.359 --> 6.601
and expand all of this and I'm going to


877
2205.88 --> 5.56
create a new file environment. local oh


878
2209.96 --> 3.639
my apologies we already have that


879
2211.44 --> 4.28
environment. loal because convex has


880
2213.599 --> 4.48
generated one for us as you can see this


881
2215.72 --> 5
is my convex URL and this is my convex


882
2218.079 --> 4.921
deployment great so just below that go


883
2220.72 --> 4.48
ahead and in your existing environment.


884
2223 --> 4.48
local simply add the next public clerk


885
2225.2 --> 3.879
publishable key and clerk secret key


886
2227.48 --> 4.52
which you can find right here after


887
2229.079 --> 4.481
you've successfully created your project


888
2232 --> 3.92
and then go ahead and click continue


889
2233.56 --> 5.96
indox and just make sure that nextjs is


890
2235.92 --> 6.48
selected right here great so let's go


891
2239.52 --> 6.24
ahead now and let's install this package


892
2242.4 --> 6.04
uh npm install clerk nextjs so for that


893
2245.76 --> 5.319
I'm going to go in side of my terminal


894
2248.44 --> 5.28
here let me just expand my screen as


895
2251.079 --> 5.081
much as I can and if you want to you can


896
2253.72 --> 5.399
shut down both terminals while you're


897
2256.16 --> 5.84
doing this so let's just do mpm install


898
2259.119 --> 5.441
clerk nextjs here and then let's go


899
2262 --> 5.2
ahead and see what else we have to do


900
2264.56 --> 4.799
after we've done that so we've already


901
2267.2 --> 5.28
added our environment keys so we can


902
2269.359 --> 5.24
skip step two and then what we have to


903
2272.48 --> 5
do is we have to wrap our application


904
2274.599 --> 5.121
inside of a clerk provider


905
2277.48 --> 6.24
but the way we are going to actually do


906
2279.72 --> 8.04
this is by creating a universal provider


907
2283.72 --> 6.24
with both convex and clerk so how do I


908
2287.76 --> 4.48
know that that's how we need to do that


909
2289.96 --> 4.359
well that's because I have the convex


910
2292.24 --> 3.92
clerk documentation right here which


911
2294.319 --> 3.881
shows us these exact steps you know sign


912
2296.16 --> 3.679
up to clerk create an application but


913
2298.2 --> 3.84
then we also need to create a jvt


914
2299.839 --> 4.24
template and then you're going to see


915
2302.04 --> 4.2
right here that we need to create a


916
2304.079 --> 4.52
convex provider with clerk which


917
2306.24 --> 4.04
actually uses that clerk provider which


918
2308.599 --> 4.921
we are seeing right here so I'm going to


919
2310.28 --> 4.68
skip this step for now and instead I'm


920
2313.52 --> 3.839
going to go immediately and create a


921
2314.96 --> 4.84
middleware file so our app becomes


922
2317.359 --> 5.041
protected so let's go ahead and copy


923
2319.8 --> 4.799
this from the middleware part so step


924
2322.4 --> 6.199
four require authentication to access


925
2324.599 --> 9.161
your app and let's go ahead and create a


926
2328.599 --> 8.441
new file here I'm going to call it


927
2333.76 --> 5.72
middleware DS and remember middleware is


928
2337.04 --> 5.039
part of reserved file names inside of


929
2339.48 --> 3.68
nextjs so please don't misspell this


930
2342.079 --> 3.481
otherwise it's not going to be


931
2343.16 --> 5.159
registered as the middleware and simply


932
2345.56 --> 5.279
paste this in inside what this is going


933
2348.319 --> 5.121
to do is it's going to protect every


934
2350.839 --> 4.601
single page inside of your app so right


935
2353.44 --> 4.72
now if you started the app I believe we


936
2355.44 --> 4.679
would have gotten we will get an error


937
2358.16 --> 3.76
because we didn't wrap our app inside of


938
2360.119 --> 3.841
clerk provider but don't worry we're


939
2361.92 --> 3.8
going to do that in a moment so just


940
2363.96 --> 4.96
make sure that you have your middleware


941
2365.72 --> 5.879
setup here so your app is protected and


942
2368.92 --> 5.52
that's actually it for this part of


943
2371.599 --> 4.76
clerk we can close this for now and


944
2374.44 --> 4.52
instead what I want to do is I want to


945
2376.359 --> 6.121
go back inside of my clerk dashboard and


946
2378.96 --> 6.76
create a jvt template so let's go ahead


947
2382.48 --> 6.599
right here inside of our clerk dashboard


948
2385.72 --> 5.8
and in the sidebar here you can find jvt


949
2389.079 --> 4.161
templates so go ahead and click on new


950
2391.52 --> 5.04
template here and here we have the


951
2393.24 --> 5.72
option for convex so select convex and


952
2396.56 --> 5.92
go ahead and give it a name of convex


953
2398.96 --> 6.84
like this and uh in here all that


954
2402.48 --> 5.8
matters is that AUD is also named convex


955
2405.8 --> 6.12
and you can see that right here when we


956
2408.28 --> 5.92
have to add our out conic out config for


957
2411.92 --> 5.6
convex we're going to have to read the


958
2414.2 --> 6
AUD field and that's going to be our


959
2417.52 --> 5.44
application ID for our configuration so


960
2420.2 --> 5.72
just make sure that AUD is convex right


961
2422.96 --> 5
here perfect and you basically don't


962
2425.92 --> 5.199
have to change anything here for now


963
2427.96 --> 4.639
later we're going to extend our jvt uh


964
2431.119 --> 2.921
template here with some other


965
2432.599 --> 3.401
information you can see that we can add


966
2434.04 --> 4.12
a bunch of things so whenever we


967
2436 --> 4.079
destructure our user we have some more


968
2438.16 --> 3.84
information like the organization and


969
2440.079 --> 3.921
stuff but for now you can just click


970
2442 --> 4.56
apply changes and make sure that you


971
2444 --> 4.64
have this convex right here so it's not


972
2446.56 --> 4.279
automatically created once you click new


973
2448.64 --> 4
template you need to click apply changes


974
2450.839 --> 3.601
and then you're going to have convex


975
2452.64 --> 4.52
template generated right


976
2454.44 --> 4.36
here great so now


977
2457.16 --> 4.6
let's go ahead and see what it says it


978
2458.8 --> 4.6
says copy the ISS URL from the ISS input


979
2461.76 --> 4.16
field but before we do that let's


980
2463.4 --> 4.56
actually copy this from convex out


981
2465.92 --> 4.439
config.js and you can see where that is


982
2467.96 --> 3.639
in the convex docs authentication clerk


983
2470.359 --> 3.401
right here I'm also going to leave the


984
2471.599 --> 3.76
link in the description but it's also a


985
2473.76 --> 4.16
very short piece of code so you can just


986
2475.359 --> 5.601
code along with me so let's create


987
2477.92 --> 6.48
inside the convex folder a new file out.


988
2480.96 --> 5.68
config.js let's go ahead and quickly do


989
2484.4 --> 4.84
that before we wrap our application in


990
2486.64 --> 7
the provider so inside of convex let's


991
2489.24 --> 6.68
create a new file out. config.js and


992
2493.64 --> 4.24
inside I'm simply going to paste this


993
2495.92 --> 4.52
right here and you can ignore the


994
2497.88 --> 4.8
warnings here and what we have to do now


995
2500.44 --> 4.84
is we have to change the domain to be


996
2502.68 --> 6.159
our actual issuer and the application ID


997
2505.28 --> 5.24
can change can stay the same uh well you


998
2508.839 --> 4.361
will know whether it can stay the same


999
2510.52 --> 6.839
or not so the application ID needs to


1000
2513.2 --> 6.8
match the AUD claims field so go back


1001
2517.359 --> 4.76
inside of your jvt templates here inside


1002
2520 --> 5.56
of your newly generated convex and


1003
2522.119 --> 5.641
confirm that the AUD is convex great and


1004
2525.56 --> 4.92
then in here you have the issuer field


1005
2527.76 --> 6.12
so just copy the issuer like that and


1006
2530.48 --> 5.879
replace this empty this dummy string


1007
2533.88 --> 6.36
where it should hold the domain with


1008
2536.359 --> 6.521
your uh account like this


1009
2540.24 --> 5.599
perfect and now that we've done this to


1010
2542.88 --> 4.719
ensure that this out. config.js is


1011
2545.839 --> 4.321
correct and that you don't have any


1012
2547.599 --> 5.081
typos or misspellings here what you can


1013
2550.16 --> 6.04
do is go inside of your terminal and you


1014
2552.68 --> 5.36
can attempt to run npx convex Dev and if


1015
2556.2 --> 3.56
it is successful it will just tell you


1016
2558.04 --> 4.039
that functions are ready there we go


1017
2559.76 --> 4.12
convex functions are ready but I believe


1018
2562.079 --> 4.321
that if you try and add something that


1019
2563.88 --> 4.439
doesn't exist like this there we go you


1020
2566.4 --> 3.8
can see how that will throw you an error


1021
2568.319 --> 4.681
because you have an invalid out.


1022
2570.2 --> 5.32
config.js so just make sure that this is


1023
2573 --> 4.2
application ID and that this is a domain


1024
2575.52 --> 3.28
and there we go if everything is okay


1025
2577.2 --> 3.68
you're just going to see conx functions


1026
2578.8 --> 4.68
are ready perfect so I'm going to shut


1027
2580.88 --> 5.6
this down for now and now let's go ahead


1028
2583.48 --> 5.68
and let's create our provider which we


1029
2586.48 --> 6.92
can find right here I believe it is in


1030
2589.16 --> 6.56
step five sorry step eight right here so


1031
2593.4 --> 4.32
configure convex provider with clerk but


1032
2595.72 --> 4.2
ours is going to be a little bit


1033
2597.72 --> 4.28
different so we're going to use a mix


1034
2599.92 --> 4.84
and match of the instructions from the


1035
2602 --> 5.119
documentation uh from clerk JS and the


1036
2604.76 --> 4.48
one right here but we actually don't


1037
2607.119 --> 5.121
need documentation for that you can just


1038
2609.24 --> 5.319
follow along exactly what I'm doing so


1039
2612.24 --> 4.48
let's go ahead and create a new folder


1040
2614.559 --> 4.76
in the root of our application called


1041
2616.72 --> 5.76
providers and then inside let's go ahead


1042
2619.319 --> 4.721
and create a new file px-


1043
2622.48 --> 4.359
client-provider


1044
2624.04 --> 5.319
DSX let's go ahead and Mark this as use


1045
2626.839 --> 6.641
client and let's go ahead and import


1046
2629.359 --> 8.601
clerk provider and let's import use out


1047
2633.48 --> 7.96
from at Clerk nextext JS now let's go


1048
2637.96 --> 7.08
ahead and import convex provider with


1049
2641.44 --> 6.04
clerk from convex SL react clerk like


1050
2645.04 --> 5.799
that and now let's go ahead and let's


1051
2647.48 --> 6.28
import the following from convex react


1052
2650.839 --> 4.72
that's going to be out loading


1053
2653.76 --> 4.68
authenticated and we're also going to


1054
2655.559 --> 6.28
have convex react


1055
2658.44 --> 6.04
client like that and now let's create an


1056
2661.839 --> 5.841
interface convex


1057
2664.48 --> 5.04
client uh provider props which is going


1058
2667.68 --> 3.72
to have the children which are a type of


1059
2669.52 --> 4.28
react. react node so this is going to be


1060
2671.4 --> 5.12
a wrapper around our entire application


1061
2673.8 --> 4.519
so it kind of works as a layout right


1062
2676.52 --> 4.72
but it's not exactly a layout this is


1063
2678.319 --> 6
just a provider which will protect all


1064
2681.24 --> 6.04
of our children which will be all of our


1065
2684.319 --> 6.121
app with authentication so now let's go


1066
2687.28 --> 6.96
ahead and let's get the convex URL to be


1067
2690.44 --> 6.159
process. environment. nextext corpu


1068
2694.24 --> 5
convex URL and you can put an


1069
2696.599 --> 5.52
exclamation point at the end here like


1070
2699.24 --> 4.879
that so it's never undefined uh great


1071
2702.119 --> 4.521
and you can just confirm this by going


1072
2704.119 --> 4.2
inside of your environment. loal and


1073
2706.64 --> 5.84
confirm that you didn't misspell it so


1074
2708.319 --> 7.161
nextore public _ convex uncore URL like


1075
2712.48 --> 5.359
this great and now let's add a convex


1076
2715.48 --> 5.24
instance so that's going to be new


1077
2717.839 --> 5.48
convex react client and pass in the


1078
2720.72 --> 4.24
convex URL like that and if you don't


1079
2723.319 --> 3.601
put the exclamation point you can see


1080
2724.96 --> 3.44
that then we have a little error here so


1081
2726.92 --> 3.399
you can just simply put an exclamation


1082
2728.4 --> 4.8
point here because we know that we have


1083
2730.319 --> 6.561
this inside of our environment local


1084
2733.2 --> 5.6
great and now let's export const convex


1085
2736.88 --> 5.8
client


1086
2738.8 --> 7.559
provider convex client provider like


1087
2742.68 --> 5.48
that and in here what we're going to do


1088
2746.359 --> 4.441
is we're going to destructure the


1089
2748.16 --> 5.56
children and let's also assign the types


1090
2750.8 --> 5.559
of convex client provider props here


1091
2753.72 --> 6.28
like that and then we're we're going to


1092
2756.359 --> 6.081
return a clerk provider at the top then


1093
2760 --> 6.319
inside convex


1094
2762.44 --> 7.56
provider with Clerk and to it we're


1095
2766.319 --> 6.081
going to pass use out to be use out and


1096
2770 --> 5.359
we're going to pass in the client to be


1097
2772.4 --> 6.76
convex and what we have to do inside is


1098
2775.359 --> 5.96
simply render the children for


1099
2779.16 --> 4.399
now like


1100
2781.319 --> 4.641
this there we go so you can see that we


1101
2783.559 --> 4.28
don't have out loading and authenticated


1102
2785.96 --> 4.92
being used but we're going to use that


1103
2787.839 --> 5.201
in a moment what I want to confirm now


1104
2790.88 --> 5.32
is that once I add this to my root


1105
2793.04 --> 5.48
layout page my app will become protected


1106
2796.2 --> 4.639
with authentication and once I start my


1107
2798.52 --> 5.36
Local Host 3000 I should be immediately


1108
2800.839 --> 5.24
redirected to a common login page from


1109
2803.88 --> 4.12
clerk so let's go ahead and do the


1110
2806.079 --> 5.201
following I'm going to go ahead and run


1111
2808 --> 5.359
npx convex Dev in one part of my


1112
2811.28 --> 5.559
terminal and in another I'm going to run


1113
2813.359 --> 6.401
mpm run Dev and and now let's just go


1114
2816.839 --> 6.681
ahead and go inside of our app folder


1115
2819.76 --> 6.28
layout. TSX right here and let's go


1116
2823.52 --> 4.72
ahead and wrap everything inside of body


1117
2826.04 --> 5.48
with our new


1118
2828.24 --> 6.24
provider so in here let's add


1119
2831.52 --> 5.2
convex client


1120
2834.48 --> 3.8
provider and let's wrap the children


1121
2836.72 --> 3.839
inside of it and let me just show you


1122
2838.28 --> 5.079
where I imported this so right here


1123
2840.559 --> 5.681
import convex client Provider from at/


1124
2843.359 --> 4.72
providers convex client provider


1125
2846.24 --> 4.079
so that's because it's located right


1126
2848.079 --> 4.801
here in the providers folder which is in


1127
2850.319 --> 5.961
the root of my application not inside of


1128
2852.88 --> 5.92
the app folder like that great and once


1129
2856.28 --> 4.839
I save this and if I go ahead and visit


1130
2858.8 --> 5.759
Local Host 3000 now I should be


1131
2861.119 --> 5.921
redirected to there we go my issuer URL


1132
2864.559 --> 4.641
you can see how my URL changed because


1133
2867.04 --> 5.16
we are using a jvt template so we can


1134
2869.2 --> 6.76
use our issuer URL because we've used it


1135
2872.2 --> 6.8
right here in the convex out config


1136
2875.96 --> 6.68
right here so we successfully set up our


1137
2879 --> 5.92
uh authentication with Clerk and convex


1138
2882.64 --> 6.24
at the same time so now let's go ahead


1139
2884.92 --> 3.96
and let's log in and see what


1140
2889.079 --> 4.441
happens so now once I'm logged in you


1141
2891.92 --> 3.88
can see that I'm redirected back to


1142
2893.52 --> 6.36
Local Host and there we go now I have


1143
2895.8 --> 6.519
full access to my application great so


1144
2899.88 --> 5.04
what I want to do now is I want to add a


1145
2902.319 --> 4.52
little loading State because there needs


1146
2904.92 --> 5.399
to be a kind of a synchronization


1147
2906.839 --> 5.361
between convex uh and clerk to decide


1148
2910.319 --> 4.841
whether they you are actually logged in


1149
2912.2 --> 6.56
or not and we also need to add a way to


1150
2915.16 --> 6.48
log out right so let's go ahead and do


1151
2918.76 --> 6.12
that so in order to create a nice little


1152
2921.64 --> 4.919
loading screen before convex and clerk


1153
2924.88 --> 4.56
uh decide whether you're logged in or


1154
2926.559 --> 5.04
not uh we need to find a logo for our


1155
2929.44 --> 4.44
application so you can use any image you


1156
2931.599 --> 4.161
want I highly recommend that you visit


1157
2933.88 --> 4.76
logo ion.com


1158
2935.76 --> 5.2
uh they have amazing placeholder logos


1159
2938.64 --> 4.32
uh just make sure you don't use it for


1160
2940.96 --> 4.399
you know your actual business so they


1161
2942.96 --> 4.68
are completely free and open sour I'm


1162
2945.359 --> 4.161
not sure if they're open source uh but


1163
2947.64 --> 4.04
you can use them for your demo apps


1164
2949.52 --> 4.4
right so I have one downloaded inside of


1165
2951.68 --> 4.36
my GitHub repository so you can just use


1166
2953.92 --> 4.8
the link in the description and find my


1167
2956.04 --> 5.92
public folder and in here you're going


1168
2958.72 --> 5.72
to find logo.svg so this is straight


1169
2961.96 --> 5.24
from logo ipsum you can visit that


1170
2964.44 --> 5.359
website to find even more logos so just


1171
2967.2 --> 4.56
download this picture or find any other


1172
2969.799 --> 4.361
logo you want to use for your


1173
2971.76 --> 5
application and go inside of the public


1174
2974.16 --> 4.919
folder and simply drag and drop that


1175
2976.76 --> 5.039
inside so if you remember from our first


1176
2979.079 --> 4.24
module uh you learn that public is the


1177
2981.799 --> 3.841
folder where we're going to keep our


1178
2983.319 --> 4.201
static assets so logo is the perfect


1179
2985.64 --> 4.04
place to put that folder in just make


1180
2987.52 --> 4.4
sure you rename it to


1181
2989.68 --> 4.919
logo.svg make sure it doesn't have any


1182
2991.92 --> 3.919
numbers besides that great so what we're


1183
2994.599 --> 6
going to do now is we're we're going to


1184
2995.839 --> 8.401
create uh our loading component right so


1185
3000.599 --> 6.96
let's go ahead inside of our components


1186
3004.24 --> 5.839
folder here and in here I'm going to


1187
3007.559 --> 4.961
create a new folder called out Simply to


1188
3010.079 --> 4.601
separate that from any other loading


1189
3012.52 --> 6.44
component which we might have and then


1190
3014.68 --> 6.679
inside create a loading. DSX and let's


1191
3018.96 --> 5.159
import the image component from next SL


1192
3021.359 --> 6.081
image and then let's go ahead and Export


1193
3024.119 --> 3.321
con loading


1194
3028.4 --> 7.719
and let's go ahead and return a div with


1195
3031.16 --> 11.159
a class name of full width full height


1196
3036.119 --> 9.921
Flex Flex call Gap y for justify Center


1197
3042.319 --> 6.8
and items Center so it's going to be a


1198
3046.04 --> 7.84
element which has full width full height


1199
3049.119 --> 7.68
and uses Flex to Simply Center our uh


1200
3053.88 --> 4.919
image and we actually don't need a gap


1201
3056.799 --> 4.76
y4 at all because it's just going to be


1202
3058.799 --> 5.201
a single image inside so let's render


1203
3061.559 --> 4.8
this image in a self closing tag let's


1204
3064 --> 5.92
give it a source of/


1205
3066.359 --> 5.641
logo.svg let's give it an ALT of logo


1206
3069.92 --> 6.159
and let's go ahead and give it a width


1207
3072 --> 7.48
of 120 let's give it a height of


1208
3076.079 --> 5.161
120 and let's give it a class name of


1209
3079.48 --> 5.48
animate


1210
3081.24 --> 6.72
pulse and duration 700 so it has kind of


1211
3084.96 --> 4.639
an in ation that it is loading so just


1212
3087.96 --> 4
confirm that this


1213
3089.599 --> 4.641
logo.svg matches what you've put in your


1214
3091.96 --> 5.44
public folder here


1215
3094.24 --> 6.079
logo.svg and then let's go ahead uh


1216
3097.4 --> 5.679
inside of our providers convex client


1217
3100.319 --> 5.52
provider and now we can use out loading


1218
3103.079 --> 5.28
and render that instead of the children


1219
3105.839 --> 6
here so let's go ahead and render the


1220
3108.359 --> 3.48
children only if we are


1221
3111.96 --> 5.8
authenticated like this and then below


1222
3115.2 --> 5.919
that that if we are out loading then


1223
3117.76 --> 5.64
render the loading from components out


1224
3121.119 --> 4.081
loading so make sure you have out


1225
3123.4 --> 3.719
loading and authenticated imported from


1226
3125.2 --> 4.28
comx react and make sure that you


1227
3127.119 --> 4.601
imported loading from at/ components out


1228
3129.48 --> 4.24
loading which is the component we have


1229
3131.72 --> 4.119
just created so let's see if we need to


1230
3133.72 --> 4.56
modify anything I'm going to zoom out


1231
3135.839 --> 4.401
just a bit to see if my logo is centered


1232
3138.28 --> 3.559
or not so it seems like my logo is not


1233
3140.24 --> 3.04
exactly in the center so can every time


1234
3141.839 --> 4.081
you refresh you should be seeing this


1235
3143.28 --> 4.319
loading component here uh if you are of


1236
3145.92 --> 4.12
course logged out it will redirect you


1237
3147.599 --> 3.841
to the login page for the issuer right


1238
3150.04 --> 3.079
but we currently don't have a log out


1239
3151.44 --> 3.359
button so it's kind of weird we don't


1240
3153.119 --> 3.521
even know whether we're logged in or not


1241
3154.799 --> 3.481
but we're going to fix that in a second


1242
3156.64 --> 4.24
so we need to do something to actually


1243
3158.28 --> 5.72
Center this and I think I know exactly


1244
3160.88 --> 4.88
what the culprate is so in here we use


1245
3164 --> 3.88
the full height and full width but I


1246
3165.76 --> 4.96
believe that inside of our app folder


1247
3167.88 --> 5.12
global. CSS we are missing some base


1248
3170.72 --> 5
Styles here to actually allow our app to


1249
3173 --> 5.359
use full height of our screen so go


1250
3175.72 --> 6.92
inside of the app folder global. CSS


1251
3178.359 --> 8.641
here and add HTML comma body and comma


1252
3182.64 --> 6.76
colum root and add a height of a 100%


1253
3187 --> 4.24
like that and simply save that file and


1254
3189.4 --> 3.959
now when I refresh there we go you can


1255
3191.24 --> 4.76
see how every time I refresh there is


1256
3193.359 --> 4.561
kind of a loading screen for our out and


1257
3196 --> 3.76
I think that it just looks really nice


1258
3197.92 --> 4.04
especially with this pulsing effect


1259
3199.76 --> 4.319
right here perfect and this is of course


1260
3201.96 --> 3.72
only going to be when the user initially


1261
3204.079 --> 4.48
visits our website it's not going to be


1262
3205.68 --> 4.84
on every route change right so it's only


1263
3208.559 --> 5.201
when you first time load the website


1264
3210.52 --> 5.36
like this on refresh great and now what


1265
3213.76 --> 5.48
I want to do is I want to go inside of


1266
3215.88 --> 5.679
the app folder page. PSX right here


1267
3219.24 --> 6.76
let's change this into a div saying this


1268
3221.559 --> 7.921
is a screen for authenticated users only


1269
3226 --> 6.16
and then in here I'm simply going to uh


1270
3229.48 --> 6.879
make this one below another so I'm going


1271
3232.16 --> 6.04
to do this Flex call Gap y4


1272
3236.359 --> 3.24
so it really doesn't matter right we're


1273
3238.2 --> 4.76
going to remove this either way I just


1274
3239.599 --> 6.321
want to kind of make a nice screen here


1275
3242.96 --> 5.8
in here we're going to add a user button


1276
3245.92 --> 2.84
from clerk


1277
3249.24 --> 5.44
nextjs like that and we can remove this


1278
3252.52 --> 4.68
button now and there we go it says this


1279
3254.68 --> 4
is a screen for authenticated users only


1280
3257.2 --> 3.879
and if I click here I can see more


1281
3258.68 --> 5.48
information about my account and I can


1282
3261.079 --> 6.161
also sign out completely there we go and


1283
3264.16 --> 5.199
if I go back to Local Host 3000 manually


1284
3267.24 --> 4.04
I'm redirected back here so now I'm


1285
3269.359 --> 4.72
going to log in


1286
3271.28 --> 4.2
again and there we go I'm redirected


1287
3274.079 --> 4.641
back you saw the little loading


1288
3275.48 --> 5.72
indicator and I can now see my other


1289
3278.72 --> 4.68
account and in here you can also see


1290
3281.2 --> 4
that you have the entire settings page


1291
3283.4 --> 3.84
where you can change your email you can


1292
3285.2 --> 3.96
connect another account you can log out


1293
3287.24 --> 4.079
from active devices you can delete your


1294
3289.16 --> 4.52
account and here's a cool thing about


1295
3291.319 --> 4.921
clerk so if you go to clerk.com you're


1296
3293.68 --> 4.8
going to find a bunch of uh


1297
3296.24 --> 4.52
customization options right here for


1298
3298.48 --> 5.68
example branding you can actually add


1299
3300.76 --> 6.48
any logo you want so right now when I


1300
3304.16 --> 5.36
log out uh my screen just says you know


1301
3307.24 --> 4.319
log in to continue to bardy which is my


1302
3309.52 --> 5.48
application name but you can also add a


1303
3311.559 --> 6.201
logo so I'm going to add our logo here


1304
3315 --> 4.64
uh it needs to be smaller than okay


1305
3317.76 --> 4.96
basically you can try and add a logo I


1306
3319.64 --> 5.959
picked the wrong image now uh and then


1307
3322.72 --> 5.48
it that logo is actually going to appear


1308
3325.599 --> 5
uh on the login page and here's a cool


1309
3328.2 --> 5.48
thing even though this is for pro users


1310
3330.599 --> 5.72
only while you're in development you can


1311
3333.68 --> 4.399
test out any pro feature there we go so


1312
3336.319 --> 3.641
it just says this is a premium feature


1313
3338.079 --> 3.881
and they are free to enable on


1314
3339.96 --> 4.599
development instances so you can just


1315
3341.96 --> 4.44
click close here and now you can see how


1316
3344.559 --> 3.28
in here it says secured by clerk but if


1317
3346.4 --> 3.76
you're wondering how it looks like once


1318
3347.839 --> 3.801
you go pro you can try it out and there


1319
3350.16 --> 3.36
we go you can see how now you have no


1320
3351.64 --> 3.52
clerk branding if that's something


1321
3353.52 --> 4.48
you're interested in so I really like


1322
3355.16 --> 5.879
when companies do that uh when they show


1323
3358 --> 4.96
us uh the pro features without as


1324
3361.039 --> 4.121
actually needing to purchase the pro


1325
3362.96 --> 6.119
features so we can decide whether it's


1326
3365.16 --> 5.919
worth it or not great so we wrapped up


1327
3369.079 --> 3.76
authentication we now have our app


1328
3371.079 --> 4.561
protected we have a nice little


1329
3372.839 --> 5.2
authentication loading uh and most


1330
3375.64 --> 5.52
importantly what we achieved here is we


1331
3378.039 --> 5.641
connected our convex which is a uh


1332
3381.16 --> 4.52
real-time database which has you know


1333
3383.68 --> 4.679
some custom API typings which you're


1334
3385.68 --> 5.72
going to see in a moment and we've


1335
3388.359 --> 5.44
completely secured convex backend and


1336
3391.4 --> 3.84
our nextjs application at the same time


1337
3393.799 --> 3.921
so that's why we needed to do the whole


1338
3395.24 --> 4.16
jbt template and the issuer and all of


1339
3397.72 --> 3.839
those things but all of that is going to


1340
3399.4 --> 3.959
become more clearer once we start


1341
3401.559 --> 3.28
actually building some queries inside of


1342
3403.359 --> 3
convex and you're going to see how we


1343
3404.839 --> 3.161
are going to have access to our


1344
3406.359 --> 5.361
currently logged in user using the


1345
3408 --> 5.96
identity there great great


1346
3411.72 --> 4.96
job so now that we have our


1347
3413.96 --> 5.28
Authentication and database ready I want


1348
3416.68 --> 4.879
to go ahead and create a basic layout


1349
3419.24 --> 4.16
for our application which will include


1350
3421.559 --> 4.361
the sidebar right here to pick and


1351
3423.4 --> 5.08
choose different organizations another


1352
3425.92 --> 5.76
sidebar here to pick between favorites


1353
3428.48 --> 5.119
or recent wordss and a knf bar right


1354
3431.68 --> 5.2
here and then the rest is going to be


1355
3433.599 --> 6.48
content inside so the first thing I want


1356
3436.88 --> 6.36
to do is I want to move my root page.


1357
3440.079 --> 5.72
THX inside of a route group folder so I


1358
3443.24 --> 5.119
don't want this page. THS XX to just be


1359
3445.799 --> 4.601
randomly laying around inside of my app


1360
3448.359 --> 4.521
folder and if you remember from the


1361
3450.4 --> 5.159
second chapter inside of this tutorial


1362
3452.88 --> 5.4
we learned about route groups so this is


1363
3455.559 --> 5.28
what I'm going to do I'm going to shut


1364
3458.28 --> 5.68
down my app because if you remember when


1365
3460.839 --> 5.441
you modify existing routes uh nextjs


1366
3463.96 --> 5.119
Cache can get confused so just make sure


1367
3466.28 --> 4.079
that you are no longer running your app


1368
3469.079 --> 4.28
and then let's go ahead and do the


1369
3470.359 --> 5.2
following you can remove page. vsx


1370
3473.359 --> 4.96
completely and then inside of the app


1371
3475.559 --> 5.321
folder create a new folder


1372
3478.319 --> 5.72
dashboard like that and then inside


1373
3480.88 --> 6.6
create a page. CSX and this is now going


1374
3484.039 --> 6.241
to become our new root page. DSX so this


1375
3487.48 --> 5.559
is the exact same thing as having page.


1376
3490.28 --> 5.079
DSX inside of the app folder but this


1377
3493.039 --> 5.441
way we are organizing it better so I


1378
3495.359 --> 5.76
know that this represents my dashboard


1379
3498.48 --> 5
and what I have to do here is simply


1380
3501.119 --> 5
export the dashboard


1381
3503.48 --> 4.96
page so I'm going to create a div


1382
3506.119 --> 5.281
dashboard root


1383
3508.44 --> 5.24
page like this so just make sure you do


1384
3511.4 --> 5.199
export default and make sure it's right


1385
3513.68 --> 4.96
here and then if you go ahead and do npm


1386
3516.599 --> 4.96
run Dev


1387
3518.64 --> 4.919
here you should not be seeing anything


1388
3521.559 --> 4.8
different except it should simply say


1389
3523.559 --> 4.961
dashboard root page right here after it


1390
3526.359 --> 4.76
loads there we


1391
3528.52 --> 5.839
go now let's go ahead and create a


1392
3531.119 --> 6.48
reusable layout file for our dashboard


1393
3534.359 --> 5.321
or organization sorry for our dashboard


1394
3537.599 --> 5.801
route group so inside of dashboard


1395
3539.68 --> 5.159
create layout. DSX like that and this


1396
3543.4 --> 3.08
will now throw an error so we're going


1397
3544.839 --> 5.52
to fix that quickly by creating an


1398
3546.48 --> 3.879
interface dashboard layout


1399
3550.559 --> 5.04
props and we are very simply only going


1400
3553.24 --> 6.16
to have the children which are a type of


1401
3555.599 --> 7.801
react node as the props so let's go


1402
3559.4 --> 7.32
ahead and write con dashboard


1403
3563.4 --> 5.76
layout and in here very simply let's


1404
3566.72 --> 5.359
extract the children and let's assign


1405
3569.16 --> 7.08
the dashboard layout props and let's


1406
3572.079 --> 6.201
simply return the children like this and


1407
3576.24 --> 5.559
then don't forget to export default


1408
3578.28 --> 5.12
dashboard layout like that perfect so


1409
3581.799 --> 3.481
now you should no longer be having any


1410
3583.4 --> 4.56
errors and you should still see the


1411
3585.28 --> 3.799
dashboard root page which we defined


1412
3587.96 --> 4.359
right


1413
3589.079 --> 5.401
here now let's go ahead and create our


1414
3592.319 --> 4.361
sidebar so for that we're going to go


1415
3594.48 --> 4.359
into inside of the layout. vsx and we're


1416
3596.68 --> 5.56
going to replace this wrapping div with


1417
3598.839 --> 5.361
a main element like that and then we're


1418
3602.24 --> 5.64
going to give this main element a class


1419
3604.2 --> 6.599
name of H full and then in here I'm


1420
3607.88 --> 5.239
going to render a sidebar component and


1421
3610.799 --> 6.401
I'm going to go ahead and wrap the


1422
3613.119 --> 6.561
children inside of a div and all I'm


1423
3617.2 --> 4.76
going to do for now is give the div


1424
3619.68 --> 6.879
which is wrapping the children a padding


1425
3621.96 --> 4.599
left of 60 pixels


1426
3627.2 --> 4.68
like that and let's also give it a full


1427
3629.96 --> 4.2
height and of course we have an error


1428
3631.88 --> 4
for the sidebar because it doesn't exist


1429
3634.16 --> 4.36
so inside of the dashboard I'm going to


1430
3635.88 --> 4.679
create an opted out folder underscore


1431
3638.52 --> 3.559
components like that because this


1432
3640.559 --> 3.52
components are only going to be used


1433
3642.079 --> 4.28
inside of the dashboard so that's why


1434
3644.079 --> 4.081
I'm not creating it inside of here so


1435
3646.359 --> 5.24
inside of this underscore components I'm


1436
3648.16 --> 5.72
going to create uh another folder called


1437
3651.599 --> 5.52
sidebar and let's go ahead and create an


1438
3653.88 --> 5.8
index. the SX inside of here and very


1439
3657.119 --> 4.641
simply let's just do con sidebar


1440
3659.68 --> 4.72
actually export con


1441
3661.76 --> 5.039
sidebar and let's go ahead and return a


1442
3664.4 --> 5.12
div saying


1443
3666.799 --> 4.8
sidebar now we can go back inside of the


1444
3669.52 --> 5.2
layout and we can use this underscore


1445
3671.599 --> 4.841
components sidebar to import the sidebar


1446
3674.72 --> 5
so I'm going to go ahead and import


1447
3676.44 --> 5.56
sidebar from do/ components slidebar


1448
3679.72 --> 5
like that perfect and there we go you


1449
3682 --> 5.68
can now see that we have a little side


1450
3684.72 --> 5.68
bar here so let's go ahead and style


1451
3687.68 --> 5.399
this sidebar just a bit so go back


1452
3690.4 --> 4.399
inside of components sidebar index. DSX


1453
3693.079 --> 4.48
and the reason I didn't just create a


1454
3694.799 --> 4.681
file named sidebar uh why did I create a


1455
3697.559 --> 3.641
folder well that's because sidebar is


1456
3699.48 --> 3.559
going to have multiple smaller


1457
3701.2 --> 4.839
components so it's just easier to keep


1458
3703.039 --> 5.441
that all in a folder and let's change


1459
3706.039 --> 4.601
this from a div to an aside element and


1460
3708.48 --> 7.52
let's give it a class name of


1461
3710.64 --> 8.76
fixed Z index of one left is going to be


1462
3716 --> 7.279
zero background is going to be blue


1463
3719.4 --> 7.879
950 like that height is going to be full


1464
3723.279 --> 8.441
width is going to be 60 pixels Flex


1465
3727.279 --> 6.8
padding three blackle skull and GAP y4


1466
3731.72 --> 4.359
like that then in here this will


1467
3734.079 --> 5.561
represent our sidebar so you can add a


1468
3736.079 --> 5.48
little Plus for example uh or whatever


1469
3739.64 --> 3.8
side something that you can see being


1470
3741.559 --> 4.121
rendered right here you can also give it


1471
3743.44 --> 4.679
a text of white if you want


1472
3745.68 --> 4.639
to there we go so now you can see that


1473
3748.119 --> 4.561
this is our sidebar right you can see


1474
3750.319 --> 5.04
even when I expand this is the sidebar


1475
3752.68 --> 5.28
and this is now the dashboard root page


1476
3755.359 --> 5.2
and even on mobile it is still visible


1477
3757.96 --> 5.04
here but that's how we want it what we


1478
3760.559 --> 4.681
have to do now is we have to create


1479
3763 --> 4.64
another sidebar which is going to be


1480
3765.24 --> 5.359
called organization sidebar which is


1481
3767.64 --> 7.159
going to take this space right here and


1482
3770.599 --> 6.24
then this will be pushed here instead so


1483
3774.799 --> 6.8
let's go ahead and do that so we have to


1484
3776.839 --> 7.681
go back inside of our main layout here


1485
3781.599 --> 4.68
and inside of this wrapping div let's


1486
3784.52 --> 8.44
create a new


1487
3786.279 --> 9.361
div with a class name of flex Gap X3 and


1488
3792.96 --> 4.56
H4 and that is also going to wrap the


1489
3795.64 --> 4.959
children so just make sure you add


1490
3797.52 --> 6.88
children inside of this new div right


1491
3800.599 --> 6.44
here uh and then let's go ahead inside


1492
3804.4 --> 5.84
and wrap the children simply one more


1493
3807.039 --> 8.201
time with a


1494
3810.24 --> 6.879
div and a class name of H full and flex


1495
3815.24 --> 3.28
one and I'm going to add a comment here


1496
3817.119 --> 5.16
add


1497
3818.52 --> 6.759
navbar and then in here we're going to


1498
3822.279 --> 5.84
go ahead and render the organization


1499
3825.279 --> 5.76
sidebar like that so Above This div


1500
3828.119 --> 5.321
which wraps the future Navar and the


1501
3831.039 --> 6.32
children so just the organization


1502
3833.44 --> 6.879
sidebar so let's go ahead and let's go


1503
3837.359 --> 5.601
inside of components again and for this


1504
3840.319 --> 4.881
one we can simply create a new file


1505
3842.96 --> 4.76
organization


1506
3845.2 --> 5.04
sidebar. TSX because it's going to be


1507
3847.72 --> 5.879
much simpler than this sidebar for which


1508
3850.24 --> 6.319
we need a folder so in here let's mark


1509
3853.599 --> 4.72
this as use client so we prepared this


1510
3856.559 --> 3.681
uh so use client means that this is


1511
3858.319 --> 3.681
going to be a client component and not a


1512
3860.24 --> 4.559
server component which means we are


1513
3862 --> 4.92
allowed to use Hooks and use


1514
3864.799 --> 4.841
and on click and other interactivity


1515
3866.92 --> 4.56
elements so let's just do export const


1516
3869.64 --> 4.28
organization sidebar


1517
3871.48 --> 5.72
here and let's


1518
3873.92 --> 5.48
return a div and now we're going to make


1519
3877.2 --> 4.879
it Dynamic so by default it's going to


1520
3879.4 --> 5.159
be hidden but on large devices is going


1521
3882.079 --> 7.24
to be flex and when it's Flex it's going


1522
3884.559 --> 8.161
to use a column Flex space y 6 width is


1523
3889.319 --> 5.361
going to be 206 pixels padding left is


1524
3892.72 --> 3.52
going to be five and padding top is


1525
3894.68 --> 4.439
going to be five so these are some just


1526
3896.24 --> 4.64
some arbitrary values like this width


1527
3899.119 --> 5.44
and this padding right I don't expect


1528
3900.88 --> 5.8
you to know how I got to this I just did


1529
3904.559 --> 5.881
trial and error with the design until it


1530
3906.68 --> 6.48
looked good uh great and then inside I'm


1531
3910.44 --> 5.76
simply going to write org


1532
3913.16 --> 4.959
sidebar like that and now you can go


1533
3916.2 --> 6.52
back to the layout and import org


1534
3918.119 --> 6.601
sidebar from the same path so _


1535
3922.72 --> 4.96
components org sidebar this same way we


1536
3924.72 --> 5.2
did with the original sidebar and now it


1537
3927.68 --> 4.359
should not be visible but when I expand


1538
3929.92 --> 4.6
there we go when you go to full desktop


1539
3932.039 --> 4.04
mode you should see the main sidebar and


1540
3934.52 --> 4.12
then you should see the organization


1541
3936.079 --> 4.161
sidebar so just to make this easier you


1542
3938.64 --> 4.52
can go inside of the organization


1543
3940.24 --> 6.359
sidebar and give this a BG red


1544
3943.16 --> 6.24
500 and now when you expand there we go


1545
3946.599 --> 5.841
it's much clearer what space this


1546
3949.4 --> 5.199
organization sidebar actually takes


1547
3952.44 --> 5.24
perfect so what we have to do now now is


1548
3954.599 --> 5.121
we have to create a nov bar and then


1549
3957.68 --> 5.52
that is going to push this dashboard


1550
3959.72 --> 5.639
root page in this content right here and


1551
3963.2 --> 4.56
then we're are finally ready to start


1552
3965.359 --> 4.281
working on this sidebars and nav bars


1553
3967.76 --> 3.92
and make them functional and yes on


1554
3969.64 --> 4.8
mobile devices you should not be able to


1555
3971.68 --> 5.28
see the organization sidebar so only on


1556
3974.44 --> 4.399
desktop all right so for now you can


1557
3976.96 --> 4.48
leave this color if that is easier for


1558
3978.839 --> 4.72
you we're going to remove that later so


1559
3981.44 --> 5.56
what we have to do now is we have to


1560
3983.559 --> 5.121
create our our navbar component so let's


1561
3987 --> 4
go ahead and do that inside of this


1562
3988.68 --> 5.08
underscore components so new file navb


1563
3991 --> 5.319
bar. DSX so the same way we did with the


1564
3993.76 --> 4
sidebar and organization sidebar this is


1565
3996.319 --> 2.601
also going to be a client component


1566
3997.76 --> 3.599
meaning that we're going to have to use


1567
3998.92 --> 5.679
some hooks here and let's export con


1568
4001.359 --> 6.68
Navar inside of here and let's go ahead


1569
4004.599 --> 7.24
and return a class name of flexx items


1570
4008.039 --> 6.681
Center Gap X4 and padding of five and


1571
4011.839 --> 6.681
you can also give this a BG uh let's


1572
4014.72 --> 6.68
let's use green 500 so we can easily see


1573
4018.52 --> 5.799
it and then you have to go back inside


1574
4021.4 --> 4.8
of the layout here and where you add


1575
4024.319 --> 4.321
have a comment add Navar you can now


1576
4026.2 --> 5.8
simply render the actual Navar from the


1577
4028.64 --> 4.76
same place do/ components Navar and


1578
4032 --> 3.799
there we go you can see how this looks


1579
4033.4 --> 6.24
on mobile and let's also add a little


1580
4035.799 --> 5.56
text here so Navar like that there we go


1581
4039.64 --> 4.439
so you can see this is how it looks on


1582
4041.359 --> 4.401
mobile and this is how it looks on deskt


1583
4044.079 --> 3.72
stop and yes there is a little space


1584
4045.76 --> 4.319
here but that is completely okay because


1585
4047.799 --> 3.881
the actual background color of the Navar


1586
4050.079 --> 3.841
and the organization sidebar is going to


1587
4051.68 --> 3.599
be transparent so it doesn't matter that


1588
4053.92 --> 4.48
there is a little padding between them


1589
4055.279 --> 5.32
because it actually looks better once we


1590
4058.4 --> 4.32
start adding some elements there perfect


1591
4060.599 --> 4.561
so we have the basic layout now what I


1592
4062.72 --> 4.639
want to do is I want to actually put my


1593
4065.16 --> 4.959
user button to log out in the proper


1594
4067.359 --> 5.041
place which is the nav bar so let's go


1595
4070.119 --> 5.521
ahead and simply render the user button


1596
4072.4 --> 6.76
from clerk nextjs right right here there


1597
4075.64 --> 6.84
we go perfect so now it is right here


1598
4079.16 --> 6.04
and you can also uh do the following so


1599
4082.48 --> 5.16
you can add a little div


1600
4085.2 --> 6.8
here let's do it like this let's add a


1601
4087.64 --> 5.639
little div and I'm going to add to do


1602
4092 --> 4.44
add


1603
4093.279 --> 7.161
search and let's give this a class name


1604
4096.44 --> 7.239
of hidden by default uh and on large


1605
4100.44 --> 5.56
it's going to be Flex one like this and


1606
4103.679 --> 5.321
on large is also going to be Flex by


1607
4106 --> 5.04
itself and then in here let's wrap the


1608
4109 --> 5.199
user


1609
4111.04 --> 8.239
button to be class


1610
4114.199 --> 7.761
name uh block by default LG actually I


1611
4119.279 --> 5.361
think we can just leave it like this and


1612
4121.96 --> 4.52
then when you expand there we go yeah my


1613
4124.64 --> 4.159
apologies so I was looking on on mobile


1614
4126.48 --> 4.279
modes I was confused why it didn't work


1615
4128.799 --> 3.281
so you can just add an empty div here


1616
4130.759 --> 3.56
where we're in the future we're going to


1617
4132.08 --> 4.48
hold our search input which is hidden on


1618
4134.319 --> 5.321
mobile and then when it hits desktop it


1619
4136.56 --> 5.44
will become flex and then it will also


1620
4139.64 --> 5.199
take up most of the space so then it


1621
4142 --> 4.96
will nicely push the user button into


1622
4144.839 --> 5.36
this corner right here where you would


1623
4146.96 --> 4.96
usually expect your user settings to be


1624
4150.199 --> 5.801
and if you want to make this clearer you


1625
4151.92 --> 7.359
can add a BG yellow 500 just so you can


1626
4156 --> 6.08
see exactly uh when this appears or


1627
4159.279 --> 5.88
perhaps we need to give it some padding


1628
4162.08 --> 5.32
I'm actually going to write


1629
4165.159 --> 4.441
search maybe that will make it a bit


1630
4167.4 --> 5.12
clearer there we go yes so this is going


1631
4169.6 --> 5.119
to be our search bar and that will push


1632
4172.52 --> 4.56
this button right here to the end this


1633
4174.719 --> 3.721
will be our organization sidebar from


1634
4177.08 --> 2.92
where we are going to choose either to


1635
4178.44 --> 4.96
look at the favorites or the recent


1636
4180 --> 5.719
boards and also to switch uh to switch


1637
4183.4 --> 4.16
organizations and to uh modify their


1638
4185.719 --> 4.56
settings to add invites or accept


1639
4187.56 --> 4.639
invites to other organizations this main


1640
4190.279 --> 4.561
sidebar right here will be used for a


1641
4192.199 --> 5.161
quick switch and creation of new


1642
4194.84 --> 5
organizations and in here we're actually


1643
4197.36 --> 4.319
going to render our boards and then


1644
4199.84 --> 3.879
later we're going to create another


1645
4201.679 --> 4.681
route Group which will just be used to


1646
4203.719 --> 4.52
render the Whiteboard itself great so


1647
4206.36 --> 3.839
you can see how this behaves on mobile


1648
4208.239 --> 4.041
it's responsive nicely and don't worry


1649
4210.199 --> 4.04
about this being here on mobile that's


1650
4212.28 --> 4.48
going to change later when we add some


1651
4214.239 --> 5.201
more elements great great job what we


1652
4216.76 --> 5.479
have to do next is we have to modify


1653
4219.44 --> 6.2
this sidebar to actually allow us to add


1654
4222.239 --> 3.401
new organizations


1655
4226 --> 4.44
now let's go ahead and let's create the


1656
4228.52 --> 4.28
functionality so that when we click on a


1657
4230.44 --> 5.279
little plus button inside of this


1658
4232.8 --> 5.64
sidebar here we open up a model to


1659
4235.719 --> 4.721
create our organization and then we also


1660
4238.44 --> 3.799
going to create a list so users can


1661
4240.44 --> 4.48
choose between all the organizations


1662
4242.239 --> 5.561
they have and quickly switch between one


1663
4244.92 --> 5.16
another so the first thing I want to do


1664
4247.8 --> 4.52
is I want to go back inside of my clerk


1665
4250.08 --> 5
dashboard right here so pick your


1666
4252.32 --> 5.24
application and go ahead inside of the


1667
4255.08 --> 4.2
organizations here on the side and in


1668
4257.56 --> 4.08
here you're going to have a prompt that


1669
4259.28 --> 4.56
organizations have not been enabled for


1670
4261.64 --> 4.079
this application so go ahead and click


1671
4263.84 --> 3.92
enable organizations and that's going to


1672
4265.719 --> 3.881
redirect you to organization settings


1673
4267.76 --> 4.2
and just go ahead and take this little


1674
4269.6 --> 5.16
box right here there we go and you can


1675
4271.96 --> 4.92
leave this exactly as it is and now what


1676
4274.76 --> 3.8
I want you to do is go inside of jvt


1677
4276.88 --> 4.799
templates where you have the convex


1678
4278.56 --> 5.2
template and in here you now have access


1679
4281.679 --> 4.641
to stuff like organization ID


1680
4283.76 --> 5.32
organization role and organization name


1681
4286.32 --> 4.48
and much more other stuff so what I'm


1682
4289.08 --> 4.36
going to do is I'm going to go to the


1683
4290.8 --> 5.64
end and add a comma here and I'm going


1684
4293.44 --> 4.68
to add organization role and then what


1685
4296.44 --> 4.199
you can do is simply find the


1686
4298.12 --> 4.519
organization role here and click it like


1687
4300.639 --> 4.56
this and there we go you can see that


1688
4302.639 --> 4.881
now I no longer have any errors if I for


1689
4305.199 --> 4.401
for example forget the comma you can see


1690
4307.52 --> 4.48
that it has an error so just make sure


1691
4309.6 --> 4.599
that you have a little comma here and


1692
4312 --> 6.159
besides the organization rle


1693
4314.199 --> 6.321
let's also add the organization ID and


1694
4318.159 --> 6.321
you can either write it manually or you


1695
4320.52 --> 6.36
can click or. ID right here there we go


1696
4324.48 --> 4.719
so just make sure that you don't have


1697
4326.88 --> 5.4
any errors make sure that you don't have


1698
4329.199 --> 5.361
trailing commas so remove that as well


1699
4332.28 --> 5.24
perfect so I just added the organization


1700
4334.56 --> 4.639
role and the organization ID which is


1701
4337.52 --> 3.76
going to be very useful for us so we


1702
4339.199 --> 4.721
know which organization the user belongs


1703
4341.28 --> 5.24
to and also their role in inside of the


1704
4343.92 --> 5.64
organization if you want to do even uh


1705
4346.52 --> 5.96
more granular control and just click


1706
4349.56 --> 4.52
apply changes right here and there we go


1707
4352.48 --> 3.32
if everything was successful you're


1708
4354.08 --> 3.4
going to get this template successfully


1709
4355.8 --> 3.48
updated and you should now see the


1710
4357.48 --> 5.239
organization ID here and the


1711
4359.28 --> 6.08
organization role right here perfect so


1712
4362.719 --> 5.52
now let's go ahead and what I want to do


1713
4365.36 --> 5.4
now is add a new component from shat CN


1714
4368.239 --> 5.281
which is going to be called a dialogue


1715
4370.76 --> 6.479
component so let's go ahead quickly


1716
4373.52 --> 5.76
inside of our terminal here also for


1717
4377.239 --> 3.721
this part you don't need to have npx


1718
4379.28 --> 3.919
convex Dev running because we're not


1719
4380.96 --> 5.48
going to do any backend for now so I'm


1720
4383.199 --> 6.44
just going to do npx chat cnii at latest


1721
4386.44 --> 6.96
add dialogue which is going to add a new


1722
4389.639 --> 6.481
dialogue component and besides that I


1723
4393.4 --> 5.88
also want to install a tool tip


1724
4396.12 --> 5.119
component so when we actually hover on


1725
4399.28 --> 3.56
buttons here I want to show a little


1726
4401.239 --> 5.44
instruction on what the button is going


1727
4402.84 --> 7.08
to do so let's add shatsu latest add


1728
4406.679 --> 6.201
tool tip as well so we are adding a


1729
4409.92 --> 5.6
dialogue component and a tool tip


1730
4412.88 --> 6.44
component and once those two have been


1731
4415.52 --> 6.36
installed you can go ahead and run npm


1732
4419.32 --> 5.359
runev and every time that you shut down


1733
4421.88 --> 4.6
your app and then run mpm Roden Dev just


1734
4424.679 --> 3.681
make sure that you refresh your page


1735
4426.48 --> 5.84
otherwise your hot reload is not going


1736
4428.36 --> 7.879
to work until you refresh great so now


1737
4432.32 --> 6.08
let's go ahead in inside of our sidebar


1738
4436.239 --> 5.241
component so I'm going to close


1739
4438.4 --> 5.4
everything here oh yeah we do need npx


1740
4441.48 --> 5.04
convex Dev my apologies otherwise our


1741
4443.8 --> 4.96
authentication is not going to work so


1742
4446.52 --> 7.159
let's go ahead and open a new terminal


1743
4448.76 --> 6.959
and run npx convex Dev like that uh


1744
4453.679 --> 4.361
let's just wait convex functions are


1745
4455.719 --> 6.201
ready and now let's


1746
4458.04 --> 5.96
refresh there we go now we can work and


1747
4461.92 --> 5.84
let's go ahead inside of the app


1748
4464 --> 6.32
folder inside of components uh sidebar


1749
4467.76 --> 4.52
and inside of here uh we are not going


1750
4470.32 --> 4.08
to render side instead we're going to


1751
4472.28 --> 5.16
render new button component which


1752
4474.4 --> 7
currently does not exist so inside of


1753
4477.44 --> 6.56
sidebar create a new file new- button.


1754
4481.4 --> 4.759
DSX and inside of here I'm going to mark


1755
4484 --> 5.52
this as use client I'm going to go ahead


1756
4486.159 --> 6.281
and import plus from Lucid react just


1757
4489.52 --> 5.52
plus not plus Circle my apologies I'm


1758
4492.44 --> 3.96
going to import create organization from


1759
4495.04 --> 3.96
Clerk


1760
4496.4 --> 5.96
nextjs and then I'm going to go ahead


1761
4499 --> 6.12
and import from components UI dialogue


1762
4502.36 --> 7
which we've just added a dialogue a


1763
4505.12 --> 8.28
dialogue content and a dialogue


1764
4509.36 --> 7.64
trigger so we have something to open it


1765
4513.4 --> 6.12
great and now let's just export con new


1766
4517 --> 2.52
button


1767
4520.32 --> 5.24
here and inside of here I'm going to go


1768
4523.44 --> 5.4
ahead and return a


1769
4525.56 --> 5.92
dialogue let me just invent this


1770
4528.84 --> 4.839
properly and I'm going to go ahead and


1771
4531.48 --> 5.92
give this a dialogue


1772
4533.679 --> 6.52
trigger which will have as child


1773
4537.4 --> 8.68
prop and inside of here I'm going to add


1774
4540.199 --> 8.761
a div with a class name of aspect Das


1775
4546.08 --> 5.28
Square and inside I'm going to render a


1776
4548.96 --> 6.6
button which is going to render our plus


1777
4551.36 --> 7.839
icon with a class name of text white


1778
4555.56 --> 6.56
like that and let me just indent this a


1779
4559.199 --> 5.761
bit and now that we have this skeleton


1780
4562.12 --> 4.96
set up we can go back to the sidebar and


1781
4564.96 --> 4.679
import the new button so we can actually


1782
4567.08 --> 4.24
see this button that we are developing


1783
4569.639 --> 3.52
so even on mobile you should see a


1784
4571.32 --> 4.839
little plus icon here now which


1785
4573.159 --> 5.48
currently isn't doing anything so what I


1786
4576.159 --> 4.801
want to do now is style the button so it


1787
4578.639 --> 7.441
looks a bit better so let's give this


1788
4580.96 --> 6.44
button a class name of BG white sl25 so


1789
4586.08 --> 3.76
it will automatically give it a bit of


1790
4587.4 --> 4.68
an opacity on the white color let's give


1791
4589.84 --> 4.28
it a full height and full width which is


1792
4592.08 --> 5.76
going to be the maximum of this aspect


1793
4594.12 --> 5.8
Square ratio which is it is wrapped in


1794
4597.84 --> 6.319
and then let's give it a rounded of


1795
4599.92 --> 7.239
medium let's give it Flex items Center


1796
4604.159 --> 5.321
justify Center like that there it go so


1797
4607.159 --> 4.241
now it already looks a lot better and


1798
4609.48 --> 5.4
now what I want to do is give it a


1799
4611.4 --> 5.88
default opacity of 60 but when we hover


1800
4614.88 --> 4.2
on it let's give it an opacity of 100


1801
4617.28 --> 4.439
and let's make that smooth by adding a


1802
4619.08 --> 4.8
transition as well and there we go you


1803
4621.719 --> 5.841
can see that now when I hover on it it


1804
4623.88 --> 5.68
pops up like this perfect now we have to


1805
4627.56 --> 4.119
add a dialogue content outside of the


1806
4629.56 --> 5.4
dialogue trigger here and very simply


1807
4631.679 --> 6.04
render the create organization like this


1808
4634.96 --> 4.12
and now if you try and click here you


1809
4637.719 --> 3.201
should be seeing this create


1810
4639.08 --> 4.24
organization right here but it looks a


1811
4640.92 --> 5.12
little bit weird it looks like there are


1812
4643.32 --> 5.16
two divs like two white backgrounds here


1813
4646.04 --> 5.159
so we can resolve that quite easily just


1814
4648.48 --> 4.96
by modifying our dialogue content a bit


1815
4651.199 --> 4.241
so let's give it a class name of padding


1816
4653.44 --> 5.239
zero BG


1817
4655.44 --> 6.239
transparent let's also give it a border


1818
4658.679 --> 7.841
none and let's give it a Max withth or


1819
4661.679 --> 7.441
480 pixels like this there we go so if I


1820
4666.52 --> 5.159
Collapse this this is how it looks like


1821
4669.12 --> 6.48
perfect so we are now ready to create


1822
4671.679 --> 6.281
our first organiz ization excellent and


1823
4675.6 --> 5.8
this is how this class name looks so max


1824
4677.96 --> 6.92
with 480 pixels border num transparent


1825
4681.4 --> 8.6
and padding of zero perfect so before I


1826
4684.88 --> 8.24
create uh my new um organization first


1827
4690 --> 4.76
thing I want to do is create a list of


1828
4693.12 --> 3.2
organizations so we can actually see


1829
4694.76 --> 2.879
them being rendered here if you want to


1830
4696.32 --> 3.12
you can already create one you're going


1831
4697.639 --> 3.281
to see it in the clerk dashboard but


1832
4699.44 --> 4.08
you're not going to see it here so I


1833
4700.92 --> 5.08
just want to wait before we do that


1834
4703.52 --> 5.32
so inside of sidebar I'm going to go


1835
4706 --> 6.32
ahead and create a component called


1836
4708.84 --> 6.56
list. TSX this list is going to iterate


1837
4712.32 --> 5.12
over all of our current organizations


1838
4715.4 --> 4.72
and then render them so let's mark this


1839
4717.44 --> 5.88
as use client let's import use


1840
4720.12 --> 6.84
organization list from clerk


1841
4723.32 --> 8
nextjs let's go ahead uh and Well for


1842
4726.96 --> 7.32
now let's export cons list by


1843
4731.32 --> 6.08
itself and in here before we return


1844
4734.28 --> 6.919
anything let's get the user


1845
4737.4 --> 8.52
memberships from use organization list


1846
4741.199 --> 8.761
and let's define user memberships to be


1847
4745.92 --> 6.6
infinite like that and then I'm going to


1848
4749.96 --> 5.64
write if there are no user memberships


1849
4752.52 --> 5.159
length sorry data. length we're just


1850
4755.6 --> 4.4
going to return


1851
4757.679 --> 4.601
null and inside of here I'm going to


1852
4760 --> 4.159
open an unordered list and give it a


1853
4762.28 --> 4.8
class name of space


1854
4764.159 --> 4.56
y4 and inside of here I'm going to go


1855
4767.08 --> 3.8
over user


1856
4768.719 --> 5.161
memberships do


1857
4770.88 --> 3
dat


1858
4775.44 --> 3.84
map and let's go ahead and get the


1859
4778.04 --> 3.679
individual


1860
4779.28 --> 5.24
membership and inside of here I'm just


1861
4781.719 --> 2.801
going to render a


1862
4784.56 --> 7.72
paragraph and let's render the name


1863
4788.92 --> 7.239
uh membership. organization. name and


1864
4792.28 --> 5.8
let's give this a a key of membership.


1865
4796.159 --> 4
organization.


1866
4798.08 --> 5.52
ID like


1867
4800.159 --> 6.161
that there we go and now I want to go


1868
4803.6 --> 4.68
ahead where we render the new button and


1869
4806.32 --> 4.8
above it I want to render my list from


1870
4808.28 --> 6.879
do/ list so we have a list and new


1871
4811.12 --> 6
button great so now uh if I go ahead and


1872
4815.159 --> 4.601
create a new organization here I'm going


1873
4817.12 --> 4.76
to call this test and click create an


1874
4819.76 --> 4.879
organization and I'm not going to invite


1875
4821.88 --> 4.56
anyone so I can just press skip here and


1876
4824.639 --> 4.201
let me just close this and see if this


1877
4826.44 --> 5.12
has uh worked or not and there we go you


1878
4828.84 --> 4.839
can see how now we have test right here


1879
4831.56 --> 5.24
rendered and let's just confirm on our


1880
4833.679 --> 6.52
clerk dashboard that that is also


1881
4836.8 --> 5.12
true so in your organizations right here


1882
4840.199 --> 4.601
you should see the new one there we go


1883
4841.92 --> 6.68
created today one member and it's called


1884
4844.8 --> 5.879
test so if I go ahead and create uh


1885
4848.6 --> 4.039
another one let's call this two and


1886
4850.679 --> 5.121
click create an organization I'm going


1887
4852.639 --> 6.641
to going to skip the invites like that


1888
4855.8 --> 5.68
let's go ahead and there we go one two


1889
4859.28 --> 5.84
and in here when I


1890
4861.48 --> 5.44
refresh there we go perfect uh now what


1891
4865.12 --> 4.119
I want to do is I want to display them


1892
4866.92 --> 4.719
in a better way and I will also want to


1893
4869.239 --> 4.721
indicate which organization is currently


1894
4871.639 --> 3.56
selected which one is currently active


1895
4873.96 --> 5.96
so for that we're going to have to


1896
4875.199 --> 6.96
create uh a new component called item so


1897
4879.92 --> 4.16
on the same level as the sidebar index


1898
4882.159 --> 5
and list let's create a new one called


1899
4884.08 --> 6.32
item. TSX which is going to be use


1900
4887.159 --> 6.641
client as well and in here let's import


1901
4890.4 --> 6.72
image from next SL image and let's go


1902
4893.8 --> 6.879
ahead and import from at clerk


1903
4897.12 --> 3.559
nextjs use


1904
4901.76 --> 4.879
organization and let's add use


1905
4904.159 --> 6.121
organization


1906
4906.639 --> 6.681
list and let's also import CN from lib


1907
4910.28 --> 5.399
utils we already have this we got that


1908
4913.32 --> 3.839
when we installed shat CMI so in the


1909
4915.679 --> 4.361
root of your application you have the


1910
4917.159 --> 5.601
lib folder and utils inside with the CN


1911
4920.04 --> 5.24
package which we are going to use to uh


1912
4922.76 --> 5.439
dynamically style our Tailwind elements


1913
4925.28 --> 5.2
now let's create an interface item props


1914
4928.199 --> 5.44
and let's give it an ID of string let's


1915
4930.48 --> 5.04
give it a name of string and image URL


1916
4933.639 --> 6.441
of string as


1917
4935.52 --> 4.56
well and let's export const


1918
4940.8 --> 5.04
item and inside of here here we can


1919
4942.96 --> 6.92
destructure the name uh and image


1920
4945.84 --> 8.839
URL and ID and let's just assign those


1921
4949.88 --> 9.359
props here so those are the item


1922
4954.679 --> 10.161
props and then in here I'm going to


1923
4959.239 --> 7.721
return a div with a class name of aspect


1924
4964.84 --> 4.319
Square so the same I did with my button


1925
4966.96 --> 4.719
so everything is consistent and let's


1926
4969.159 --> 4.601
give it a relative class name and then


1927
4971.679 --> 3.841
I'm going to render a image component


1928
4973.76 --> 4.479
and I'm going to give it a source of


1929
4975.52 --> 5.44
image URL I'm going to give it an


1930
4978.239 --> 5.561
onclick of an empty Arrow function for


1931
4980.96 --> 7.279
now I'm going to give it an ALT of


1932
4983.8 --> 7.359
name so let's order that like that and


1933
4988.239 --> 6.96
I'm also going to give it a property of


1934
4991.159 --> 7.441
Bill and for the class name I'm going to


1935
4995.199 --> 5.281
go ahead uh and write the following so


1936
4998.6 --> 4.2
I'm going to make it Dynamic by opening


1937
5000.48 --> 4
CN and for now I'm just going to give it


1938
5002.8 --> 7.32
some default classes which are going to


1939
5004.48 --> 7.08
be rounded MD cursor pointer opacity 75


1940
5010.12 --> 4.44
hover


1941
5011.56 --> 5.24
opacity 100 and transition so the way


1942
5014.56 --> 4.56
the CN Library works is that in the


1943
5016.8 --> 4.52
first argument or any argument you pass


1944
5019.12 --> 4.24
in just the default classes which you


1945
5021.32 --> 4
would pass like you normally would in a


1946
5023.36 --> 5.44
class name and then later we can do


1947
5025.32 --> 5.76
Dynamic stuff like if something is true


1948
5028.8 --> 6.2
we're going to do the opacity you


1949
5031.08 --> 5.559
know 100 for example stuff like that but


1950
5035 --> 3.4
we don't have anything to compare it


1951
5036.639 --> 4.08
with because we need to add some hooks


1952
5038.4 --> 5.72
here so let's do the following let's go


1953
5040.719 --> 6.561
ahead and let's get the current


1954
5044.12 --> 5.32
organization from use


1955
5047.28 --> 4.359
organization and let's go ahead and


1956
5049.44 --> 5.52
let's add set


1957
5051.639 --> 6.961
active to come from use organization


1958
5054.96 --> 6.719
list and now let's check if this item is


1959
5058.6 --> 5.639
the active organization so if is act so


1960
5061.679 --> 5.801
sorry we're going to fine is active to


1961
5064.239 --> 6.161
be the current organization which we get


1962
5067.48 --> 5.239
from this hook question mark. ID is


1963
5070.4 --> 3.68
equal to the ID which we are passing


1964
5072.719 --> 4.201
right


1965
5074.08 --> 4
here and then then let's do const on


1966
5076.92 --> 4.759
click


1967
5078.08 --> 6.24
here if we are not act sorry if there is


1968
5081.679 --> 5
no set active we're just going to break


1969
5084.32 --> 4.6
the function so you can just actually


1970
5086.679 --> 4.161
return like that because it's possible


1971
5088.92 --> 3.68
that this set active is undefined right


1972
5090.84 --> 4.08
so no even point in calling this this


1973
5092.6 --> 4.44
action if it's not undefined if it's not


1974
5094.92 --> 4.6
defined sorry otherwise we're going to


1975
5097.04 --> 4.24
set active and we're very simply going


1976
5099.52 --> 4.92
to pass in the active organization to be


1977
5101.28 --> 4.879
the current ID of this item like that


1978
5104.44 --> 3.52
and then we can replace this empty on


1979
5106.159 --> 4.08
click to actually use the on click


1980
5107.96 --> 6.48
element and we can add Dynamic class


1981
5110.239 --> 6.641
name here if is active very simply we're


1982
5114.44 --> 6.04
going to add opacity


1983
5116.88 --> 5.68
100 there we go so now let's go ahead


1984
5120.48 --> 3.56
back inside of our list here and now


1985
5122.56 --> 3.4
we're going to use that new item so


1986
5124.04 --> 4.079
remove this paragraph here and instead


1987
5125.96 --> 4.96
use the item which you can import from


1988
5128.119 --> 5.361
do/ item so all of those are on the same


1989
5130.92 --> 4.84
level inside of app folder dashboard


1990
5133.48 --> 4.4
underscore components and our sidebar


1991
5135.76 --> 5.04
folder because all of those only relate


1992
5137.88 --> 4.759
to the sidebar and now we have to pass a


1993
5140.8 --> 5.6
couple of props here so let's give it a


1994
5142.639 --> 5.961
key to be membership. organization. ID


1995
5146.4 --> 5.64
let's repeat the exact same property but


1996
5148.6 --> 6.48
for the ID prop let's give it a name of


1997
5152.04 --> 4.92
me membership. organization. name and


1998
5155.08 --> 3.96
last one is going to be image URL and


1999
5156.96 --> 6.159
the prop for that is going to be image


2000
5159.04 --> 6.199
URL and there we go now you're going to


2001
5163.119 --> 4.801
get this error that the host name image.


2002
5165.239 --> 7.241
clerk.com is not configured inside of


2003
5167.92 --> 7.759
our next config so what we have to do is


2004
5172.48 --> 6.08
we have to go inside of our next.


2005
5175.679 --> 2.881
config.msi


2006
5183.119 --> 5.881
remote


2007
5184.88 --> 6.96
patterns protocol is going to be https


2008
5189 --> 5.32
and then host name is going to be


2009
5191.84 --> 3.799
whatever is written for you here so I


2010
5194.32 --> 3.28
believe it's going to be exactly the


2011
5195.639 --> 4.921
same so for me you can see that it says


2012
5197.6 --> 5.16
that host name image. clerk.com is not


2013
5200.56 --> 4.28
configured so that's the host name that


2014
5202.76 --> 5
I have to add right here image.


2015
5204.84 --> 5.2
clerk.com and once you save this I would


2016
5207.76 --> 4.439
actually recommend that you shut down


2017
5210.04 --> 5.36
your app and restart it because in


2018
5212.199 --> 5.04
previous versions of next this was never


2019
5215.4 --> 3.88
uh nicely updated so that's what I'm


2020
5217.239 --> 5.321
going to do so in your terminal where


2021
5219.28 --> 5.28
you run npm run Dev just do it again and


2022
5222.56 --> 3.599
if you want you can also restart npx


2023
5224.56 --> 3.88
convex Dev but I don't think it's going


2024
5226.159 --> 4.401
to do any difference so let's try this


2025
5228.44 --> 5.32
again so I'm just going to go ahead and


2026
5230.56 --> 5.119
refresh my page let's do it a couple of


2027
5233.76 --> 4.56
times just to ensure this is working and


2028
5235.679 --> 4.52
there we go you can now see uh my


2029
5238.32 --> 3.68
organizations right here you can see how


2030
5240.199 --> 4.121
when I select another one after a couple


2031
5242 --> 4.639
of seconds that's the one that becomes


2032
5244.32 --> 4.48
with opacity 100 but we have two


2033
5246.639 --> 4.441
problems here first one there is no


2034
5248.8 --> 4.6
indicator what's the difference between


2035
5251.08 --> 4.559
these two so one thing that we can do is


2036
5253.4 --> 4.52
we can use our tool tip component to add


2037
5255.639 --> 4.441
the name once we hover but it will be


2038
5257.92 --> 4.719
nice if we could somehow generate the


2039
5260.08 --> 4.52
initial uh initial of the name of the


2040
5262.639 --> 4.761
organization to indicate the user which


2041
5264.6 --> 4.96
one is which where clerk can do that so


2042
5267.4 --> 5.239
you can go inside of clerk right here


2043
5269.56 --> 6
and let's go inside of uh customization


2044
5272.639 --> 4.801
avatars right here and in here you have


2045
5275.56 --> 3.52
the default user Avatar if you want to


2046
5277.44 --> 4.199
change the color or anything but you


2047
5279.08 --> 5.52
also have the default organization logo


2048
5281.639 --> 5.241
and in here you can select initials and


2049
5284.6 --> 4.88
there we go you can click apply changes


2050
5286.88 --> 5.68
and now all of your organizations are


2051
5289.48 --> 5.08
going to have initials instead of uh


2052
5292.56 --> 4.36
those boards if you want to you can


2053
5294.56 --> 4.079
actually remove this organizations and


2054
5296.92 --> 4.319
then create new ones or they're going to


2055
5298.639 --> 5.721
maybe be upgraded a bit later let's try


2056
5301.239 --> 4.44
this with out with the name test so if I


2057
5304.36 --> 2.96
create a new


2058
5305.679 --> 4.081
organization sometimes it's not


2059
5307.32 --> 4.879
immediately reflected but it definitely


2060
5309.76 --> 5.359
works because I use it in the initial


2061
5312.199 --> 4.92
project there we go so new ones now have


2062
5315.119 --> 4.161
this image yes so you have to remove the


2063
5317.119 --> 3.681
old ones you can do that by going inside


2064
5319.28 --> 5.04
of the organizations here and then


2065
5320.8 --> 5.52
remove the old ones uh yes and also I


2066
5324.32 --> 3.08
don't know why exactly when I finish


2067
5326.32 --> 3.24
creating an


2068
5327.4 --> 3.839
organization and when I click skip here


2069
5329.56 --> 3.639
it seems like nothing nothing is


2070
5331.239 --> 4.44
happening so we're going to debug that


2071
5333.199 --> 8.121
later but for now you can just manually


2072
5335.679 --> 8.081
close uh okay so what I want to do now


2073
5341.32 --> 4.96
uh is I want to create a hint component


2074
5343.76 --> 4.68
so that when I hover over any of these


2075
5346.28 --> 4.32
elements I can see the full name of the


2076
5348.44 --> 4.279
organization and also when I hover on


2077
5350.6 --> 5.36
this I want a tool tip to tell me


2078
5352.719 --> 5.801
exactly what uh that button is going to


2079
5355.96 --> 5.159
do for me so for that we're going to go


2080
5358.52 --> 4.119
ahead and go inside of the components


2081
5361.119 --> 4.881
folder


2082
5362.639 --> 5.961
and create a new file called hint.


2083
5366 --> 5
DSX and in here I'm going to go ahead


2084
5368.6 --> 7.599
and import everything we need from at


2085
5371 --> 7.84
slui sorry components UI tool tip so we


2086
5376.199 --> 5.841
need the tool tip


2087
5378.84 --> 6.319
itself we need the tool tip content we


2088
5382.04 --> 7.76
need the tool tip provider we need the


2089
5385.159 --> 7.361
tool tip trigger like that and let's


2090
5389.8 --> 5.359
export interface


2091
5392.52 --> 5.84
hint props here so that's going to take


2092
5395.159 --> 6
the label which is a string we're going


2093
5398.36 --> 5.4
to have children which are react. react


2094
5401.159 --> 5.601
node we're going to have side which is


2095
5403.76 --> 6
going to be an optional top


2096
5406.76 --> 7.6
bottom whoops so top


2097
5409.76 --> 7.08
bottom left or right we're going to have


2098
5414.36 --> 6.64
optional align which is going to be


2099
5416.84 --> 5.879
Start Center or end and we're going to


2100
5421 --> 4.119
have side off set which is going to be


2101
5422.719 --> 4
an optional number and a line offset


2102
5425.119 --> 2.481
which is going to be an optional number


2103
5426.719 --> 3.601
as


2104
5427.6 --> 4.96
well and then let's go ahead and expert


2105
5430.32 --> 5.08
const


2106
5432.56 --> 4.8
hint and let's just destructure all of


2107
5435.4 --> 4.839
these props here so I'm going to align


2108
5437.36 --> 7.839
hint props and then we can get the


2109
5440.239 --> 7.48
label we can get the children side align


2110
5445.199 --> 5.801
side offset and a line


2111
5447.719 --> 6.041
offset perfect and now inside of here


2112
5451 --> 5.76
I'm just going to return the tool tip


2113
5453.76 --> 5.84
provider and let's make sure we close


2114
5456.76 --> 5.52
this tag inside I'm going to add a tool


2115
5459.6 --> 7.24
tip component itself with a delay


2116
5462.28 --> 7.6
duration sorry delay duration of 100 so


2117
5466.84 --> 5.16
it appears a bit faster than usually and


2118
5469.88 --> 4.759
let's add a tool tip uh trigger


2119
5472 --> 5
component here which is very simply


2120
5474.639 --> 4.6
going to wrap our whatever we wrap it


2121
5477 --> 4.56
around and let's use as child to ensure


2122
5479.239 --> 4.761
the styles are not broken and there are


2123
5481.56 --> 4.679
not hydration errors either and then


2124
5484 --> 4.76
let's add tool tip content


2125
5486.239 --> 3.92
here and inside of the tool tip content


2126
5488.76 --> 3.12
we are very simply going to render a


2127
5490.159 --> 4.241
paragraph which is going to render the


2128
5491.88 --> 5.44
label and inside of the paragraph let's


2129
5494.4 --> 4.719
give it a class name of font semi bold


2130
5497.32 --> 4.04
and


2131
5499.119 --> 5.08
capitalize and let's give the tool tip


2132
5501.36 --> 6.48
content some props so class name is


2133
5504.199 --> 6.561
going to be text white background


2134
5507.84 --> 6.319
black and Border


2135
5510.76 --> 6.68
black and let's give this a side prop of


2136
5514.159 --> 6.841
side let's give it an align prop of


2137
5517.44 --> 8.679
align and also side offset of side


2138
5521 --> 9.679
offset and Al line offset of align


2139
5526.119 --> 6.961
offset there we go and now what we can


2140
5530.679 --> 4.321
do is we can reuse this hint component


2141
5533.08 --> 5.159
wherever we need to reuse it so the


2142
5535 --> 6.28
first place I want to do it is inside uh


2143
5538.239 --> 3.96
of the app folder components sidebar new


2144
5541.28 --> 3.32
button


2145
5542.199 --> 5.761
so this button which is used to open the


2146
5544.6 --> 6.119
content so I'm going to go ahead and


2147
5547.96 --> 5.84
inside of the div where we have the


2148
5550.719 --> 5.761
aspect Square add a hint component from


2149
5553.8 --> 5.359
components hint and wrap the button


2150
5556.48 --> 2.679
around it


2151
5559.199 --> 5
whoops like


2152
5561.6 --> 5.4
that so you can import hint from


2153
5564.199 --> 7
components SL hint which we've just


2154
5567 --> 6.639
created and let's give it a label uh of


2155
5571.199 --> 2.44
create


2156
5573.88 --> 5.08
organization like


2157
5576.52 --> 5.119
that and it says that hint cannot be


2158
5578.96 --> 6.92
used as a jsx component oh I believe I


2159
5581.639 --> 7.401
forgot to write return so yes my


2160
5585.88 --> 5.4
apologies wrap this entire thing in a


2161
5589.04 --> 4.32
return of course you can we cannot just


2162
5591.28 --> 5.359
write jsx


2163
5593.36 --> 5.64
plainly all right like that there we go


2164
5596.639 --> 4.04
no more errors and now if you try and


2165
5599 --> 4.04
hover over you can see that we have a


2166
5600.679 --> 4.44
label create or organization the issue


2167
5603.04 --> 4.88
is is that it appears on the top that's


2168
5605.119 --> 4.481
not where I want it to appear so what


2169
5607.92 --> 4.08
we're going to do is we're going to give


2170
5609.6 --> 4.92
it a side of


2171
5612 --> 5.6
right and then we're going to give it an


2172
5614.52 --> 4.84
line of start and let's give it a side


2173
5617.6 --> 5.48
offset of


2174
5619.36 --> 6.879
18 like that and there we go now it


2175
5623.08 --> 6.039
looks much better perfect and now I want


2176
5626.239 --> 5.361
to use that in the item component as


2177
5629.119 --> 4.841
well so that we can display the name of


2178
5631.6 --> 5.599
each of these organizations so let's go


2179
5633.96 --> 7.199
inside of sidebar item. DSX let's go


2180
5637.199 --> 6.44
ahead and import hint from components


2181
5641.159 --> 5.48
hint and we're going to go ahead and


2182
5643.639 --> 5.441
rack the image in the hint


2183
5646.639 --> 6.441
component like


2184
5649.08 --> 9.44
that and let's go ahead and give it a


2185
5653.08 --> 8.72
label of name let's give it a side right


2186
5658.52 --> 5.159
let's give it an align of start and


2187
5661.8 --> 6.04
offset of


2188
5663.679 --> 7.241
18 like that there we go so now if I go


2189
5667.84 --> 5
ahead there we go you can see exactly uh


2190
5670.92 --> 3.6
which organization I'm going to click


2191
5672.84 --> 4.96
here perfect and you can see how the


2192
5674.52 --> 7
opacity changes once I click on a new


2193
5677.8 --> 6.08
organization perfect so we just did uh


2194
5681.52 --> 4.56
the entire functionality for our main


2195
5683.88 --> 4.6
sidebar right here so what we have to do


2196
5686.08 --> 4.36
now is we have to build the organization


2197
5688.48 --> 4.36
sidebar right here which is going to


2198
5690.44 --> 5.16
allow you to change the settings of an


2199
5692.84 --> 5.879
individual organization and to also


2200
5695.6 --> 5.48
switch organizations in a different view


2201
5698.719 --> 5.361
great great


2202
5701.08 --> 5.68
job so now I want to go ahead and I want


2203
5704.08 --> 5.32
to create this organization sidebar


2204
5706.76 --> 4.959
component right here so in order to see


2205
5709.4 --> 5.319
that you're either going to have to be


2206
5711.719 --> 4.92
in desktop mode or if you are like me


2207
5714.719 --> 4.121
and you keep half of your screen with


2208
5716.639 --> 4.52
code you can zoom out so you can see


2209
5718.84 --> 4.2
what you're developing and also I didn't


2210
5721.159 --> 3.56
for get about this little issue that


2211
5723.04 --> 4.159
once we create an organization and we


2212
5724.719 --> 4.561
click skip nothing happens but I am


2213
5727.199 --> 4.281
going to try and resolve that later in


2214
5729.28 --> 5.399
the tutorial for now I'm just going to


2215
5731.48 --> 5.32
focus on wrapping up our layout I do


2216
5734.679 --> 5.601
definitely have a couple of ways we can


2217
5736.8 --> 6.12
fix that but most of them include uh


2218
5740.28 --> 5.2
changing our layout a bit uh I mean when


2219
5742.92 --> 4.759
it comes to routing right but before we


2220
5745.48 --> 4.6
go into that I just want to focus on


2221
5747.679 --> 4.641
wrapping up the organization sidebar our


2222
5750.08 --> 5.159
knv bar and start creating some boards


2223
5752.32 --> 4.879
here so let's go ahead and find where we


2224
5755.239 --> 4.44
have organization sidebar so that is


2225
5757.199 --> 6.52
inside of dashboard undor components


2226
5759.679 --> 7.121
organization DS sidebar. vsx so let me


2227
5763.719 --> 6.761
zoom out even more here so I can see


2228
5766.8 --> 7.12
both of them at the same time and now


2229
5770.48 --> 8.32
let's go ahead and let's import


2230
5773.92 --> 8.4
link from next link and let's also


2231
5778.8 --> 5.879
import image from next image


2232
5782.32 --> 4.12
let's also go ahead and import popins


2233
5784.679 --> 5.44
from next font


2234
5786.44 --> 6.64
Google and let's leave it like this for


2235
5790.119 --> 5.961
now and now let's initialize the font


2236
5793.08 --> 5.96
using the popins import from next font


2237
5796.08 --> 6
Google so subsets for this are simply


2238
5799.04 --> 6.159
just going to be Latin and weight is


2239
5802.08 --> 6.8
going to be


2240
5805.199 --> 6.44
600 like that and what I want to do now


2241
5808.88 --> 5.2
is I want to display the text and the


2242
5811.639 --> 4.52
name of my application right here at the


2243
5814.08 --> 4.559
top so I'm going to remove the back BG


2244
5816.159 --> 5.161
color red I no longer need that we know


2245
5818.639 --> 4.921
how this is supposed to look like now


2246
5821.32 --> 4.24
and inside instead of rendering or


2247
5823.56 --> 4.639
sidebar I'm going to render a link


2248
5825.56 --> 7.8
component which we added let's give it


2249
5828.199 --> 9
uh an hre property of an empty uh string


2250
5833.36 --> 6.319
sorry an empty path like that and inside


2251
5837.199 --> 4.601
let's add a div with a class name of


2252
5839.679 --> 4.361
flex items Center


2253
5841.8 --> 5.359
and GAP


2254
5844.04 --> 5.48
X2 and then in here I want to render a


2255
5847.159 --> 5.761
image component and I want to give it a


2256
5849.52 --> 7.119
source of SL logo.svg so basically the


2257
5852.92 --> 7.279
same thing that you use inside uh of the


2258
5856.639 --> 5.921
loading component right SL logos SVG


2259
5860.199 --> 5.44
whatever you've used there and let's


2260
5862.56 --> 7
give it an ALT of logo let's give this a


2261
5865.639 --> 6.56
height of 60 and a width of 60 as


2262
5869.56 --> 6
well so now we should have the logo of


2263
5872.199 --> 6.48
our app right here and just besides that


2264
5875.56 --> 4.8
logo I'm going to add a span element and


2265
5878.679 --> 3.52
I'm going to write the name of our


2266
5880.36 --> 4.64
application so whatever you want it to


2267
5882.199 --> 5.96
be and let's give this span a class name


2268
5885 --> 4.56
and let's add CN from lib utils so just


2269
5888.159 --> 3.601
make sure that you add that so we can


2270
5889.56 --> 4.679
dynamically append this font class name


2271
5891.76 --> 6.12
here so first let's write some default


2272
5894.239 --> 4.601
classes which are font semibold and text


2273
5897.88 --> 4.04
to


2274
5898.84 --> 7.799
Excel and then we can add font do class


2275
5901.92 --> 6.84
name here and that will change our font


2276
5906.639 --> 4.281
there we go perfect so now inside of our


2277
5908.76 --> 4.439
organization sidebar I know it's zoomed


2278
5910.92 --> 4.48
out so let me just expand a bit and zoom


2279
5913.199 --> 5.601
back in there we go so you can see how


2280
5915.4 --> 5.799
this looks like now this is our uh logo


2281
5918.8 --> 4.6
right here perfect so what I want to do


2282
5921.199 --> 4.4
now is below it I want to add an


2283
5923.4 --> 4.36
organization switcher so that we have


2284
5925.599 --> 4.761
another way of switching the active


2285
5927.76 --> 4.399
organization and also a better indicator


2286
5930.36 --> 5.319
of which one is active because this


2287
5932.159 --> 6.721
opacity by itself is just not exactly


2288
5935.679 --> 7.52
visible right so let me just zoom back


2289
5938.88 --> 7.359
out so I can see both of this for me and


2290
5943.199 --> 5.761
outside of the link component here we're


2291
5946.239 --> 5.641
going to add an organization switcher


2292
5948.96 --> 6.36
from clerk nextjs so just make sure you


2293
5951.88 --> 6.319
add organization switcher from Clerk


2294
5955.32 --> 6.44
nextjs and that's going to be a self


2295
5958.199 --> 5.761
closing element like that and you should


2296
5961.76 --> 5
be seeing something here so let me zoom


2297
5963.96 --> 4.84
in there we go you can see how now we


2298
5966.76 --> 4.28
can switch between uh different


2299
5968.8 --> 3.96
organizations and we can also create an


2300
5971.04 --> 4.48
organization from


2301
5972.76 --> 5.52
here so what I want and we can also


2302
5975.52 --> 4.48
trigger this manage organization uh as


2303
5978.28 --> 3.959
well like


2304
5980 --> 4.48
this but what I want to do is first I


2305
5982.239 --> 3.36
want to hide my personal account so


2306
5984.48 --> 3.04
we're not going to be working with


2307
5985.599 --> 4.52
personal accounts for this app I only


2308
5987.52 --> 5.159
want uh organizations so we can do that


2309
5990.119 --> 5.721
quite easily by adding a prop hide


2310
5992.679 --> 6.96
personal like that so now when I expand


2311
5995.84 --> 5.799
here you can see that let me just


2312
5999.639 --> 4.721
refresh there we go you can see how it


2313
6001.639 --> 5.96
no longer has my name here it only works


2314
6004.36 --> 4.879
with organizations great and now let's


2315
6007.599 --> 2.761
go ahead and give this a better


2316
6009.239 --> 4.161
appearance


2317
6010.36 --> 5.48
prop so go ahead and expand this object


2318
6013.4 --> 4.36
and let me just expand this so you can


2319
6015.84 --> 3.759
see clearly let's focus on the code for


2320
6017.76 --> 4.12
now so we're going to Target the


2321
6019.599 --> 4.6
elements we're going to targ the root


2322
6021.88 --> 5.279
box we're going to give it a display


2323
6024.199 --> 6.4
property of flex we're going to give it


2324
6027.159 --> 6.96
a justify content property of Center


2325
6030.599 --> 6.721
align items property of Center as well


2326
6034.119 --> 5.161
and width of 100% so I don't know if you


2327
6037.32 --> 4.72
knew that but you can style clerk


2328
6039.28 --> 4.2
components both the login log out all of


2329
6042.04 --> 3
those things you can style them they


2330
6043.48 --> 4.4
have the appearance prop and you can


2331
6045.04 --> 4.599
Target pretty much any element you want


2332
6047.88 --> 4.239
so what I'm doing here is I'm just


2333
6049.639 --> 4.681
giving it some width and some you're


2334
6052.119 --> 5.281
going to see now some borders just so it


2335
6054.32 --> 5.68
looks a bit better in this uh


2336
6057.4 --> 5.44
organization sidebar because right now


2337
6060 --> 5.639
it looks fine but I want it to have a


2338
6062.84 --> 5.799
bit of a border right it just looks too


2339
6065.639 --> 6.04
plain uh stay staying here so let's go


2340
6068.639 --> 5.801
ahead and just add an


2341
6071.679 --> 4.721
organization uh which one is this


2342
6074.44 --> 3.759
organization


2343
6076.4 --> 5.16
switch


2344
6078.199 --> 7.121
switcher trigger component


2345
6081.56 --> 5.92
let's give it a padding of 60 sorry six


2346
6085.32 --> 4.319
pixels let's go ahead and give it a


2347
6087.48 --> 7.199
width of


2348
6089.639 --> 9.48
100% a border radius of 8


2349
6094.679 --> 11.281
pixels and let's give it a border of one


2350
6099.119 --> 9.12
pixel solid and let's use E5 E7 EB


2351
6105.96 --> 5.92
color uh also I have this little


2352
6108.239 --> 5.801
extension here if you want the ring


2353
6111.88 --> 4.96
uh is called color


2354
6114.04 --> 5.4
highlighting color highlight so whenever


2355
6116.84 --> 4.52
you have a hex code it will show you how


2356
6119.44 --> 4.239
that color looks like I also have error


2357
6121.36 --> 6.04
lens which shows the error in the same


2358
6123.679 --> 5.761
line and I also use Tailwind CSS uh


2359
6127.4 --> 4.199
intellisense which is quite important if


2360
6129.44 --> 6.239
you're working with Tailwind uh it helps


2361
6131.599 --> 7.281
a lot uh all right and let's add justify


2362
6135.679 --> 7.321
content to be space


2363
6138.88 --> 6.52
between and let's add add background


2364
6143 --> 6
color to be


2365
6145.4 --> 5.6
white like that so now if I show you


2366
6149 --> 3.679
there we go you can see how now it looks


2367
6151 --> 6
just a bit better it looks like an


2368
6152.679 --> 7.721
actual button right perfect and now


2369
6157 --> 5.239
let's go ahead below it so outside of


2370
6160.4 --> 5.16
the organization switcher and let's open


2371
6162.239 --> 9.96
up a div and let's give this div a class


2372
6165.56 --> 8.92
name of uh space y1 and full width and


2373
6172.199 --> 4.52
inside we're going to render a button


2374
6174.48 --> 5.119
from components UI


2375
6176.719 --> 7.721
button and this one is very simply going


2376
6179.599 --> 7.801
to have a link to an HRA of a root slash


2377
6184.44 --> 4.92
and render a layout dashboard from Lucid


2378
6187.4 --> 4.52
react so this is an icon layout


2379
6189.36 --> 5.68
dashboard from Lucid


2380
6191.92 --> 7.6
react let's go ahead and give this


2381
6195.04 --> 7.159
icon a class name of H4 withd four and


2382
6199.52 --> 6.28
margin right of two and I'm just going


2383
6202.199 --> 5.241
to write theme boards here like that so


2384
6205.8 --> 3.72
let's go ahead and take a look at that


2385
6207.44 --> 4.36
there we go we have this team boards


2386
6209.52 --> 6.079
here so what we have to do now is give


2387
6211.8 --> 6.64
our button an as child prop let's give


2388
6215.599 --> 8.12
it a size of LG and let's give it a


2389
6218.44 --> 9.719
class name of font normal justify start


2390
6223.719 --> 5.321
padding on xaxis of two and full width


2391
6228.159 --> 3.44
like


2392
6229.04 --> 5.84
this there we go now it's looking


2393
6231.599 --> 6.841
slightly better so what I want to do now


2394
6234.88 --> 5.68
is I want to give it a variant of


2395
6238.44 --> 6.199
ghost like


2396
6240.56 --> 8.559
that there we go perfect and let's go


2397
6244.639 --> 4.48
ahead now and copy and paste this


2398
6249.44 --> 7.48
button and the one below it is going to


2399
6252.599 --> 6.04
uh go to our favorite boards so we can


2400
6256.92 --> 5.44
write


2401
6258.639 --> 5.761
favorite and let's use a star icon from


2402
6262.36 --> 5.4
Lucid react so make sure that you import


2403
6264.4 --> 6.279
layout dashboard and Star from Lucid


2404
6267.76 --> 5.2
react and then you can render that


2405
6270.679 --> 3.96
here let's take a look at this there we


2406
6272.96 --> 5.679
go we have Team boards and we have


2407
6274.639 --> 5.881
favorite boards and we can already add


2408
6278.639 --> 3.6
uh a different link for these favorite


2409
6280.52 --> 2.76
boards the URL is not going to be


2410
6282.239 --> 3.92
different the only thing that's going to


2411
6283.28 --> 4.6
be different is the query parameter so


2412
6286.159 --> 5.681
we're going to do the following we're


2413
6287.88 --> 7.319
going to go ahead and give this href


2414
6291.84 --> 7.279
to be an object which takes in the path


2415
6295.199 --> 7.44
name which is just an empty slash and


2416
6299.119 --> 7.12
query is simply going to be favorites


2417
6302.639 --> 5.441
true like that so favorites true also


2418
6306.239 --> 5
whenever you're writing favorites I see


2419
6308.08 --> 5.72
a lot of bugs happen to my viewers where


2420
6311.239 --> 5.48
they're inconsistent with writing uh


2421
6313.8 --> 5.08
sometimes they write favorites with a u


2422
6316.719 --> 4.801
and sometimes they write it without it


2423
6318.88 --> 4.88
so whenever you write this make sure


2424
6321.52 --> 3.92
that you are being consistent or you can


2425
6323.76 --> 4.16
create a constant and use it if it's


2426
6325.44 --> 4.159
easier for you it's just so you avoid


2427
6327.92 --> 3.719
bugs in the future because we are going


2428
6329.599 --> 5.841
to be looking for this query in the URL


2429
6331.639 --> 7.441
to decide what to show to the user great


2430
6335.44 --> 7.56
so we have this now uh and now what I


2431
6339.08 --> 5.88
want to do is decide whether we are


2432
6343 --> 3.92
whether we which one should we render as


2433
6344.96 --> 3.679
the current active button right so if I


2434
6346.92 --> 3.96
click here there we go you can see how


2435
6348.639 --> 4.48
my URL has changed and added the favor


2436
6350.88 --> 4.52
is true here and if I go back it's


2437
6353.119 --> 4.841
removed so depending on that query I


2438
6355.4 --> 4.279
want to highlight a specific button to


2439
6357.96 --> 5.04
indicate the user all right you're


2440
6359.679 --> 6.121
currently looking at this one so let's


2441
6363 --> 4.4
go ahead and let's get our search params


2442
6365.8 --> 5.839
which we can


2443
6367.4 --> 7.64
import from uh


2444
6371.639 --> 6.721
next I think it's just next uh wait it's


2445
6375.04 --> 6.72
next SL navigation my


2446
6378.36 --> 6.239
apologies so let's import


2447
6381.76 --> 6.08
use search params like that and then in


2448
6384.599 --> 4.56
here we can get the search params from


2449
6387.84 --> 5.12
use search


2450
6389.159 --> 6.44
pams and let's get the favorites from


2451
6392.96 --> 5.199
search pam.get


2452
6395.599 --> 6.321
favorites so again make sure you don't


2453
6398.159 --> 6.801
misspell favorites here here or right


2454
6401.92 --> 5.12
here great and now what we can do is we


2455
6404.96 --> 5.52
can dynamically change the variant


2456
6407.04 --> 5.679
depending on the favorites uh in the URL


2457
6410.48 --> 4.88
so variant here it's not just going to


2458
6412.719 --> 5.281
be hardcoded ghost instead if we have


2459
6415.36 --> 4.16
favorites and this is where team boards


2460
6418 --> 3.76
that means that this one is going to be


2461
6419.52 --> 6.04
ghost otherwise it's going to be


2462
6421.76 --> 6.08
secondary so we can copy and paste this


2463
6425.56 --> 4.2
replace it with the lower button which


2464
6427.84 --> 3.56
is used to go to the favorite boards and


2465
6429.76 --> 3.52
that that's going to be the opposite so


2466
6431.4 --> 4.96
if we are if we have favorites in our


2467
6433.28 --> 5.319
URL query we're going to use secondary


2468
6436.36 --> 4.52
otherwise we're going to use ghost like


2469
6438.599 --> 4.441
that so let's check that out now so let


2470
6440.88 --> 5.279
me just go here and there we go you can


2471
6443.04 --> 5.48
see how now when I click on something it


2472
6446.159 --> 6.161
indicates that I'm on it perfect if you


2473
6448.52 --> 5.28
want to you can change uh the secondary


2474
6452.32 --> 4.68
and the ghost I don't know if you want


2475
6453.8 --> 7.319
to use outline instead of ghost you can


2476
6457 --> 8.84
try out how that looks like let's take a


2477
6461.119 --> 6.921
look uh yeah in my opinion I think that


2478
6465.84 --> 5.279
ghost looks better so I'm going to bring


2479
6468.04 --> 5.8
it back to ghost uh great great so now


2480
6471.119 --> 4.681
we have a way to switch our organization


2481
6473.84 --> 4.48
you can see how the opacity changes in


2482
6475.8 --> 4.6
the nav bar in the sidebar as well


2483
6478.32 --> 5.319
perfect and from here yes we can also


2484
6480.4 --> 5.88
manage uh our entire organization and we


2485
6483.639 --> 5.881
can also do invitations so let's just go


2486
6486.28 --> 5.879
ahead and quickly try out an invitation


2487
6489.52 --> 5.04
here so the way I'm going to do that is


2488
6492.159 --> 6.601
I'm going to sign out and I'm going to


2489
6494.56 --> 7.24
go ahead and log in with a new account


2490
6498.76 --> 5.439
Here and Now now when I I'm in this new


2491
6501.8 --> 4.2
account I'm going to go ahead and see we


2492
6504.199 --> 4.561
can create an organization from here now


2493
6506 --> 5.679
even so I'm going to create an


2494
6508.76 --> 4.839
invite test organization I'm just going


2495
6511.679 --> 5.121
to click create an organization and


2496
6513.599 --> 4.841
already in here we can pass in an invite


2497
6516.8 --> 3.839
to the member so you can either do it


2498
6518.44 --> 4.719
immediately here or you can click in and


2499
6520.639 --> 4.52
go in the the settings of the individual


2500
6523.159 --> 6.04
organization and I'm going to give a


2501
6525.159 --> 7.56
rooll of member to my other


2502
6529.199 --> 5.281
account I believe this is my email and I


2503
6532.719 --> 4
will send the invitation and there we go


2504
6534.48 --> 4.56
invitation successfully sent if you have


2505
6536.719 --> 4.161
any errors with this it's most likely


2506
6539.04 --> 6
because you didn't allow clerk to use


2507
6540.88 --> 5.64
emails so just make sure that you have


2508
6545.04 --> 3.36
uh inside of your user and


2509
6546.52 --> 5
authentication make sure you have email


2510
6548.4 --> 5.04
address enabled if you don't have this


2511
6551.52 --> 4.36
then uh you will not be able to invite


2512
6553.44 --> 4.799
your users great so now I'm going to log


2513
6555.88 --> 4.719
out and go back into my other


2514
6558.239 --> 5.681
account and there we go you can see that


2515
6560.599 --> 6.04
now I have this little indicator one and


2516
6563.92 --> 5.04
I am uh invited to the invite test


2517
6566.639 --> 4
organization and I can click join and


2518
6568.96 --> 3.679
there we go I can select that


2519
6570.639 --> 4.321
organization now and that way we're


2520
6572.639 --> 5.401
going to be able to share all boards


2521
6574.96 --> 5.08
across the same organization amazing so


2522
6578.04 --> 5.4
we just wrap that up what we're going to


2523
6580.04 --> 4.84
do next is uh wrap up our navbar and


2524
6583.44 --> 5.679
then we're going to finally be working


2525
6584.88 --> 5.92
on this content right here great great


2526
6589.119 --> 4.401
job


2527
6590.8 --> 5.52
now let's go ahead and let's modify our


2528
6593.52 --> 5.96
nov bar so it has some more features


2529
6596.32 --> 6.12
like an actual search bar and also looks


2530
6599.48 --> 4.6
a bit better on mobile mode where we are


2531
6602.44 --> 5.36
also going to have an organization


2532
6604.08 --> 6.68
switcher here so let's go ahead and find


2533
6607.8 --> 5.919
our navbar component we can find that


2534
6610.76 --> 7.439
inside of underscore components navbar


2535
6613.719 --> 6.88
dosx right here and let's remove this BG


2536
6618.199 --> 4.561
green 500 from here


2537
6620.599 --> 6.681
we no longer need that and let's remove


2538
6622.76 --> 7.28
BG yellow 500 from here as well and


2539
6627.28 --> 5.879
first things first let's go ahead and


2540
6630.04 --> 5.44
let's create the search input component


2541
6633.159 --> 3.96
right here so I'm going to go ahead and


2542
6635.48 --> 6.44
do that inside of the underscore


2543
6637.119 --> 7.6
components here so search- input. THX


2544
6641.92 --> 6.719
it's going to be a client component and


2545
6644.719 --> 7.041
let's also export cons search input


2546
6648.639 --> 5.6
here and let's return a


2547
6651.76 --> 5.6
search


2548
6654.239 --> 5.281
input like that and now go back inside


2549
6657.36 --> 5.08
of the Novar and instead of the text


2550
6659.52 --> 6.48
search you can add search input here


2551
6662.44 --> 6.36
from do/ search input and right now this


2552
6666 --> 5.639
will only be visible on desktop so make


2553
6668.8 --> 4.879
sure that you are expanded or zoomed out


2554
6671.639 --> 3.44
enough so that you can see the search


2555
6673.679 --> 5.48
input


2556
6675.079 --> 6.12
here all right so now before we continue


2557
6679.159 --> 3.881
developing the search input I want to


2558
6681.199 --> 6.161
install two


2559
6683.04 --> 6.72
packages so let's go ahead and let's


2560
6687.36 --> 7.04
install query


2561
6689.76 --> 7.12
string and let's install use hooks DTS


2562
6694.4 --> 4.799
none of these are strictly required they


2563
6696.88 --> 3.96
are just faster for me to use inside of


2564
6699.199 --> 5.04
this tutorial you can of course use


2565
6700.84 --> 6.279
native URL search per Rams or you can


2566
6704.239 --> 4.92
build your own hook if you want to great


2567
6707.119 --> 4.681
so let's go inside of the search input


2568
6709.159 --> 5.281
here and let's import everything we need


2569
6711.8 --> 8.04
so we need Qs from query


2570
6714.44 --> 9
string we need search from Lucid react


2571
6719.84 --> 6.359
we need use debounce from use hooks DTS


2572
6723.44 --> 5.84
which we've just installed we need use


2573
6726.199 --> 5
router from next SL navigation whenever


2574
6729.28 --> 3.839
you're importing use router don't


2575
6731.199 --> 4
accidentally import it from the router


2576
6733.119 --> 5.241
because that does not work in the app


2577
6735.199 --> 5.841
folder so that only works in the pages


2578
6738.36 --> 5.12
folder and now now let's go ahead and


2579
6741.04 --> 4.8
import everything we need from react so


2580
6743.48 --> 4.56
that's going to be the change event uh


2581
6745.84 --> 5.12
we're also going to use effect and we're


2582
6748.04 --> 7.32
going to need use State and one more


2583
6750.96 --> 8.52
thing that I forgot to add is the actual


2584
6755.36 --> 6.799
input component so npx sha CNU at latest


2585
6759.48 --> 6.28
let me just expand this as much as I can


2586
6762.159 --> 7.281
add input like this so we need an input


2587
6765.76 --> 6.839
component let's do npm run Dev again


2588
6769.44 --> 4.4
let's refresh Local Host here and then


2589
6772.599 --> 4.761
what we're going to do is we're going to


2590
6773.84 --> 5.6
give this div a class name of full width


2591
6777.36 --> 4.879
and a


2592
6779.44 --> 6.239
relative and let's add a search icon


2593
6782.239 --> 5.681
here and let's add an input here and you


2594
6785.679 --> 4.721
can import import uh you can import


2595
6787.92 --> 5.88
input from components UI input like I


2596
6790.4 --> 5.759
did right here great so now if I expand


2597
6793.8 --> 4.439
this there we go we can see the search


2598
6796.159 --> 4.601
icon and we can see an input so now


2599
6798.239 --> 5.4
let's align them together so it looks


2600
6800.76 --> 5.04
better so first things first I want to


2601
6803.639 --> 4.641
style the input


2602
6805.8 --> 4.839
accordingly so let's give this a class


2603
6808.28 --> 6.16
name of full


2604
6810.639 --> 7.641
width but let's limit how wide it can go


2605
6814.44 --> 5.799
by limiting into 516 pixels which is


2606
6818.28 --> 4.04
just my random value that I found out


2607
6820.239 --> 4.041
looks the best you can of course modify


2608
6822.32 --> 4.96
it and let's give it a padding left of


2609
6824.28 --> 6.04
nine so it has a space for the icon to


2610
6827.28 --> 6.319
fit in so I'm going to give this search


2611
6830.32 --> 4.319
icon a class name of absolute top one


2612
6833.599 --> 5.12
and a


2613
6834.639 --> 6.201
half left three transform minus


2614
6838.719 --> 3.321
translate Dy 1 and


2615
6840.84 --> 4.48
[Music]


2616
6842.04 --> 7.84
A2 text muted


2617
6845.32 --> 6.68
foreground height four and width four so


2618
6849.88 --> 5.279
just make sure that this is minus


2619
6852 --> 7
translate minus y right because this


2620
6855.159 --> 5.841
also works but you need to use minus so


2621
6859 --> 5.28
it does the opposite of this and then


2622
6861 --> 5
it's centered in the middle great and


2623
6864.28 --> 4.799
let's go ahead and give this input a


2624
6866 --> 5.56
placeholder of search


2625
6869.079 --> 5.64
boards uh


2626
6871.56 --> 6
placeholder placeholder without a typo


2627
6874.719 --> 5.201
like that and there we go you can see


2628
6877.56 --> 4.24
how we now have our search here I can


2629
6879.92 --> 4.04
even zoom in a little bit and you can


2630
6881.8 --> 3.96
see how we have a nice little icon here


2631
6883.96 --> 4.56
and you can see how we have enough space


2632
6885.76 --> 5.72
both to write and to actually render the


2633
6888.52 --> 5.32
icon perfect and now let's modify it so


2634
6891.48 --> 5.44
that once we write something and after a


2635
6893.84 --> 6.279
debounce we add that to the URL query


2636
6896.92 --> 4.759
just as we did with the favorites true


2637
6900.119 --> 5
like this so we're going to add a little


2638
6901.679 --> 6.201
search here so we can do that thanks to


2639
6905.119 --> 5.441
the change event use effect use State


2640
6907.88 --> 6
use the bounce query string and use


2641
6910.56 --> 5.2
router so let's go ahead and let's get


2642
6913.88 --> 4.52
the


2643
6915.76 --> 5.24
router then let's go ahead and let's set


2644
6918.4 --> 4.839
the value and set value to be use State


2645
6921 --> 5.36
and by default let's make it an empty


2646
6923.239 --> 6.681
string and then let's debounce the


2647
6926.36 --> 6.319
value using use debounce and let's pass


2648
6929.92 --> 4.679
in the value and the amount of delay


2649
6932.679 --> 5
which for me is going to be half a


2650
6934.599 --> 5.801
second and then let's do con handle


2651
6937.679 --> 4.92
change to take in the event which is a


2652
6940.4 --> 5.44
type of change


2653
6942.599 --> 6
event and in pointy brackets it accepts


2654
6945.84 --> 5.239
the HTML input


2655
6948.599 --> 4.321
element


2656
6951.079 --> 3.881
and then in here we are very simply


2657
6952.92 --> 4.679
going to set the value to be event.


2658
6954.96 --> 2.639
target.


2659
6958.599 --> 5.12
value and then let's go ahead and write


2660
6961.639 --> 4.641
use


2661
6963.719 --> 5.281
effect and let's add the dependency


2662
6966.28 --> 5.2
array to use the debounced value so not


2663
6969 --> 4.239
the value only the debounced value but


2664
6971.48 --> 4.679
also the router because we're going to


2665
6973.239 --> 5.721
need that to redirect the user now let's


2666
6976.159 --> 4.241
generate the new URL using query string.


2667
6978.96 --> 4.88
stringify


2668
6980.4 --> 6.279
URL the URL is going to be slash and the


2669
6983.84 --> 5.759
query is very simply going to be search


2670
6986.679 --> 5.881
and pass in the the bounc value inside


2671
6989.599 --> 5.52
and I also like to pass in this options


2672
6992.56 --> 6.079
as the third argument sorry the second


2673
6995.119 --> 6.12
argument actually skip empty string true


2674
6998.639 --> 5.201
and Skip null true so we are never


2675
7001.239 --> 6.161
passing those in the URL and then you


2676
7003.84 --> 6.399
can do router. push and paste that URL


2677
7007.4 --> 6.279
inside and all you have to do is assign


2678
7010.239 --> 6.641
this handle change to the input here so


2679
7013.679 --> 4.52
onchange and pass in the value so it's a


2680
7016.88 --> 5.239
controlled


2681
7018.199 --> 6
input so now if I try and type something


2682
7022.119 --> 4.04
that's going to appear inside of my URL


2683
7024.199 --> 4.561
so I'm going to write test here and


2684
7026.159 --> 5.52
there we go in my URL I have a query


2685
7028.76 --> 4.919
search test perfect right now that isn't


2686
7031.679 --> 4.281
doing anything but later we're going to


2687
7033.679 --> 5.92
use that to change what we are seeing


2688
7035.96 --> 6.88
right here on the boards perfect so now


2689
7039.599 --> 5.681
what I want to do is I want to modify


2690
7042.84 --> 4.239
how this looks when I'm on mobile so I


2691
7045.28 --> 4.439
want to add an organization switcher


2692
7047.079 --> 4.16
here which will push this to this side


2693
7049.719 --> 5.841
right


2694
7051.239 --> 8.92
here let's go back inside of the Navar


2695
7055.56 --> 8.159
component right here and right here uh


2696
7060.159 --> 8.361
after we do the search input I want to


2697
7063.719 --> 6.36
open a div with a class name block on


2698
7068.52 --> 3.96
small devices


2699
7070.079 --> 4.241
on large devices is going to be hidden


2700
7072.48 --> 3.44
and it's also going to take full space


2701
7074.32 --> 3.759
when visible so you can see how this


2702
7075.92 --> 4.08
already on mobile mode took up this


2703
7078.079 --> 5.321
space right here and pushed my user


2704
7080 --> 6.239
button to the end here so you can see


2705
7083.4 --> 5.08
how on desktop it still everything is


2706
7086.239 --> 4.281
the same but on mobile now my user


2707
7088.48 --> 4.08
button is pushed all the way to the side


2708
7090.52 --> 4.559
because of this div and what we're going


2709
7092.56 --> 4.8
to render inside is actually the same


2710
7095.079 --> 5.04
thing uh that we are rendering inside of


2711
7097.36 --> 4.759
our organization sidebar so go back


2712
7100.119 --> 4.281
inside of the organization sidebar and


2713
7102.119 --> 4.801
find this organization switcher which


2714
7104.4 --> 4.92
we've modified so it looks better so go


2715
7106.92 --> 4.4
ahead and copy it go back inside of the


2716
7109.32 --> 3.919
nav bar and paste it here and you can


2717
7111.32 --> 6.44
import the organization switcher from


2718
7113.239 --> 5.92
clerk next tojs as well there we go and


2719
7117.76 --> 3.72
let's just confirm that everything can


2720
7119.159 --> 5.48
stay the same so display Flex makes send


2721
7121.48 --> 5.96
justify content Center makes sense align


2722
7124.639 --> 4.881
items Center makes sense the wi it 100%


2723
7127.44 --> 4.719
makes sense but let's also add a Max


2724
7129.52 --> 4.88
width the same way we did for our search


2725
7132.159 --> 4
input so I'm going to give this a Max


2726
7134.4 --> 6.12
width of


2727
7136.159 --> 7.08
367 pixels because I found that to be uh


2728
7140.52 --> 5.079
you can see how it doesn't expand longer


2729
7143.239 --> 4.88
than this right so it kind of has the


2730
7145.599 --> 4.6
same behavior as our search where it


2731
7148.119 --> 4.841
stops expanding at some point because


2732
7150.199 --> 6.361
otherwise it just looks weird taking up


2733
7152.96 --> 6.04
the entire space great and now what I


2734
7156.56 --> 3.24
want to do is I want to add a button


2735
7159 --> 3.599
here


2736
7159.8 --> 5.96
to invite members inside of any


2737
7162.599 --> 5
organization that we are in and uh let's


2738
7165.76 --> 4.399
go ahead and do that we're going to have


2739
7167.599 --> 6.04
to create a new component for that so


2740
7170.159 --> 7.08
let's go ahead inside of components here


2741
7173.639 --> 7.161
and let's create a new file called


2742
7177.239 --> 7.281
invite Das button.


2743
7180.8 --> 6.48
TSX and let's go ahead and import plus


2744
7184.52 --> 6.599
from Lucid react let's import


2745
7187.28 --> 5.2
organization profile


2746
7191.119 --> 4.08
from Clerk


2747
7192.48 --> 6.719
nextjs and let's go ahead and let's


2748
7195.199 --> 6.801
import add components UI dialogue and


2749
7199.199 --> 5.641
let's get the dialogue let's get the


2750
7202 --> 5.679
content and something to open the


2751
7204.84 --> 6
dialogue with so dialogue dialogue


2752
7207.679 --> 5.4
content and dialog trigger and let's


2753
7210.84 --> 5.319
also import a button component from


2754
7213.079 --> 4.761
components UI button and then let's


2755
7216.159 --> 4.121
export con


2756
7217.84 --> 5.6
invite button


2757
7220.28 --> 5.12
and very simply


2758
7223.44 --> 3.239
whoops we're going to go ahead and


2759
7225.4 --> 4.64
render the


2760
7226.679 --> 5.321
dialogue dialogue trigger we're going to


2761
7230.04 --> 4.92
give it an as child


2762
7232 --> 5.599
prop and it's going to wrap a button


2763
7234.96 --> 5.44
from chat cnii which is going to render


2764
7237.599 --> 6.48
the plus icon and invite members


2765
7240.4 --> 5.88
text and let's give this invite all


2766
7244.079 --> 5.04
right and let's give this plus a class


2767
7246.28 --> 4.839
name of height four width four and


2768
7249.119 --> 3.96
margin right of two and let's give this


2769
7251.119 --> 4.401
button a variant of


2770
7253.079 --> 3.481
outline and then very simply in the


2771
7255.52 --> 3.04
dialogue


2772
7256.56 --> 3.44
content we're going to render the


2773
7258.56 --> 6.119
organization


2774
7260 --> 8.4
profile like that so now if we save this


2775
7264.679 --> 8.52
file and go back inside of the Navar


2776
7268.4 --> 7
component we can add this after our uh


2777
7273.199 --> 4.44
div wrapping the organization switcher


2778
7275.4 --> 4.279
so I'm going to add invite button from


2779
7277.639 --> 3.841
do/ invite button


2780
7279.679 --> 4.56
like this so the same way we imported


2781
7281.48 --> 4.759
the search input and there we go we now


2782
7284.239 --> 5.041
have invite members but you can see that


2783
7286.239 --> 6.041
the div uh doesn't really match the size


2784
7289.28 --> 4.52
of this component so we can resolve that


2785
7292.28 --> 4.76
by going back inside of the invite


2786
7293.8 --> 7
button here and let's go ahead and give


2787
7297.04 --> 7.679
the dialogue content uh some props so


2788
7300.8 --> 5.879
class name is going to be zero padding


2789
7304.719 --> 4.561
BG is going to be


2790
7306.679 --> 6.121
transparent border is going to be none


2791
7309.28 --> 6.399
and Max width is going to be 880 pixels


2792
7312.8 --> 5.279
like that so now if you go ahead and


2793
7315.679 --> 4.4
look at it there we go perfect so now


2794
7318.079 --> 3.321
you can always click on invite members


2795
7320.079 --> 3.401
here and that's going to take you to the


2796
7321.4 --> 3.799
members page right here and you can


2797
7323.48 --> 4.88
easily add new


2798
7325.199 --> 5.4
invitations great but here's the thing I


2799
7328.36 --> 4.48
only want to show this if the user has


2800
7330.599 --> 4.08
an active organization so if they if


2801
7332.84 --> 4.399
they are not in any Organization for


2802
7334.679 --> 5.92
example if I go here and if I remove


2803
7337.239 --> 5.081
this organization now right


2804
7340.599 --> 4.04
if I do this there we go you can see how


2805
7342.32 --> 4.12
this will say no organization so I think


2806
7344.639 --> 4.52
that yes you can see how this is now an


2807
7346.44 --> 4.52
empty thing because it doesn't know to


2808
7349.159 --> 4.48
which organization are we supposed to


2809
7350.96 --> 4.199
add someone to so what we're going to do


2810
7353.639 --> 3.241
is we're only going to display that in


2811
7355.159 --> 3.361
the nov bar if we have an active


2812
7356.88 --> 3.799
organization and we can do that using


2813
7358.52 --> 4.48
the use organization Hook from clerk


2814
7360.679 --> 5.161
nextjs so let's get the use organization


2815
7363 --> 4.079
Hook from here and let me just collapse


2816
7365.84 --> 4.6
this


2817
7367.079 --> 5.721
elements and in here I'm very simply


2818
7370.44 --> 4.639
going to add the


2819
7372.8 --> 4.839
organization use


2820
7375.079 --> 6.361
organization and we are only going to


2821
7377.639 --> 5.96
render the invite button if we have an


2822
7381.44 --> 5.52
organization like


2823
7383.599 --> 5.6
that so now if you take a look at it uh


2824
7386.96 --> 5.52
we should not be having this let me just


2825
7389.199 --> 7.321
refresh so I can confirm or maybe this


2826
7392.48 --> 6
will pick a random organization here


2827
7396.52 --> 3.76
let's take a look uh I think I need to


2828
7398.48 --> 3.639
destroy structure the organization my


2829
7400.28 --> 4.28
apologies yes so I need to destructure


2830
7402.119 --> 4.201
the organization from the hook there we


2831
7404.56 --> 3.96
go so if we don't have an active


2832
7406.32 --> 5
organization the invite button is not


2833
7408.52 --> 4.719
shown but if we go ahead and select a


2834
7411.32 --> 4.64
random organization there we go we can


2835
7413.239 --> 4.521
click on invite members here perfect so


2836
7415.96 --> 4.04
we have the working search we have the


2837
7417.76 --> 3.959
working user button we have the invite


2838
7420 --> 4.119
we can switch to favorites we have


2839
7421.719 --> 5.48
organization switchers we even have a


2840
7424.119 --> 6.681
special view on mobile perfect so now we


2841
7427.199 --> 6
are ready to go ahead and actually uh


2842
7430.8 --> 5.04
start creating some empty States for our


2843
7433.199 --> 5.36
favorites and our team boards and then


2844
7435.84 --> 6.359
slowly we're going to create a database


2845
7438.559 --> 6.361
schema and start creating our boards


2846
7442.199 --> 5.88
great great


2847
7444.92 --> 5.44
job so now that we've wrapped up our


2848
7448.079 --> 5.64
navbar I want to go ahead and create


2849
7450.36 --> 5.319
this dashboard root page right here so


2850
7453.719 --> 5.721
let's go ahead inside of the app folder


2851
7455.679 --> 6.88
dashboard page. THX and let's go ahead


2852
7459.44 --> 5
and give this a class name of BG red 500


2853
7462.559 --> 5.16
so we can see exactly how much space we


2854
7464.44 --> 6.4
are taking so now I also want to give it


2855
7467.719 --> 7.561
a flex one option and I want to give it


2856
7470.84 --> 7.6
a height and calculate 100% minus 80


2857
7475.28 --> 4.799
pixels like this and let's also give it


2858
7478.44 --> 4.88
a padding of


2859
7480.079 --> 5.761
six like that there we go so now you can


2860
7483.32 --> 5.279
see that our root page right here takes


2861
7485.84 --> 5.56
this entire space but it doesn't take


2862
7488.599 --> 7.201
the the height of the nav bar because we


2863
7491.4 --> 6.88
reduce that from the full height perfect


2864
7495.8 --> 4.68
now what I want to do is I want to add


2865
7498.28 --> 4.48
an example of an empty state so I want


2866
7500.48 --> 3.96
to handle all empty States first first


2867
7502.76 --> 4.6
one is going to be when the user doesn't


2868
7504.44 --> 5.52
have an organization so for that you can


2869
7507.36 --> 4.96
find any image you want or you can go


2870
7509.96 --> 6.4
inside of my uh GitHub repository go


2871
7512.32 --> 6.839
inside of public and find elements. SVG


2872
7516.36 --> 5
like this so this is a part of uh 3D


2873
7519.159 --> 3.841
illustration pack called Sally I'm going


2874
7521.36 --> 4.719
to leave the link in the description for


2875
7523 --> 5.679
the full pack as well and it is uh


2876
7526.079 --> 6.04
allowed to use in both commercial and


2877
7528.679 --> 5.52
personal projects and now just uh drag


2878
7532.119 --> 4.681
and drop that inside of your public


2879
7534.199 --> 5.161
folder and just make sure it's renamed


2880
7536.8 --> 5.12
to something like elements like this


2881
7539.36 --> 5.52
which you can then type and add as an


2882
7541.92 --> 7.52
image great let's head back inside of


2883
7544.88 --> 8.679
our app folder dashboard page. CSX


2884
7549.44 --> 6.679
let's remove this BG red 500 and let's


2885
7553.559 --> 5.841
go ahead and forcefully show the empty


2886
7556.119 --> 7
state for now so I'm going to add empty


2887
7559.4 --> 6.159
org like that and now let's go inside of


2888
7563.119 --> 5.361
our underscore components here and let's


2889
7565.559 --> 5.56
create a new file empty org.


2890
7568.48 --> 5.32
DSX and I'm going to go ahead and Export


2891
7571.119 --> 6.801
const that


2892
7573.8 --> 6.52
component so that we can import it in


2893
7577.92 --> 5.44
page and fix this error which we are


2894
7580.32 --> 5.04
having so empty organization from do/


2895
7583.36 --> 4
components empty organization and there


2896
7585.36 --> 4.719
we go now we have a text which says


2897
7587.36 --> 5.56
empty and now I want to go ahead inside


2898
7590.079 --> 8.801
up here and I want to give this div a


2899
7592.92 --> 7.52
class name of H full Flex Flex call


2900
7598.88 --> 4.799
items


2901
7600.44 --> 7.159
Center and justify


2902
7603.679 --> 6.52
Center like that and now inside of here


2903
7607.599 --> 7.681
I want to render an image from next SL


2904
7610.199 --> 11.121
image with a source of/ elements. SVG an


2905
7615.28 --> 9.08
ALT of empty a height of 200 and a width


2906
7621.32 --> 4.879
of 200 like that and there we go you can


2907
7624.36 --> 4.04
see how now we have this kind of an


2908
7626.199 --> 4
empty element here and now we're going


2909
7628.4 --> 4.159
to add some information about what's


2910
7630.199 --> 6.04
actually this supposed to represent so


2911
7632.559 --> 5.321
let's add an H2 element welcome to and


2912
7636.239 --> 4.601
then the name of your app so I'm going


2913
7637.88 --> 6.56
to call this board and let's give this


2914
7640.84 --> 7.44
H2 element a class name of text to excel


2915
7644.44 --> 5.92
font semi bold and margin top of six


2916
7648.28 --> 4.359
like that there we go and now we're


2917
7650.36 --> 5
going to add some information text below


2918
7652.639 --> 7.04
that so in here let's add a paragraph


2919
7655.36 --> 6.879
create an organization to get started


2920
7659.679 --> 4.44
and let's give this a class name of text


2921
7662.239 --> 6.041
muted


2922
7664.119 --> 7.56
foreground text small and margin top of


2923
7668.28 --> 5.799
two to like that and now I want to go


2924
7671.679 --> 4.88
ahead and add a button here which will


2925
7674.079 --> 5.441
open this dialogue to create a new


2926
7676.559 --> 6
organization one more time so let's go


2927
7679.52 --> 7.199
ahead and import everything we need so


2928
7682.559 --> 7.04
we need create organization from Clerk


2929
7686.719 --> 6.36
nextjs and we need the button from


2930
7689.599 --> 6.64
components UI button and we also need a


2931
7693.079 --> 5.921
set of components from our components UI


2932
7696.239 --> 6.36
dialogue so that opens up in a dialogue


2933
7699 --> 7.52
so dialogue dialogue content dialog


2934
7702.599 --> 7.681
trigger like that let's go ahead and uh


2935
7706.52 --> 6.44
below this paragraph here add a div with


2936
7710.28 --> 6.399
a class name of margin top


2937
7712.96 --> 6.96
six and let's add a dialogue let's add a


2938
7716.679 --> 6.281
dialogue trigger here which is going to


2939
7719.92 --> 4.759
wrap our button so let's give this an as


2940
7722.96 --> 4.279
child prop so it doesn't mess up the


2941
7724.679 --> 4.841
Styles or cause hydration errors and


2942
7727.239 --> 4.92
we're just going to say create on


2943
7729.52 --> 5.48
organization actually let's just write


2944
7732.159 --> 5.121
create


2945
7735 --> 7.159
organization like that and I'm going to


2946
7737.28 --> 8.319
give it a size of large as well like


2947
7742.159 --> 5.96
that and then below that let's edit


2948
7745.599 --> 5.52
dialogue content and let's render the


2949
7748.119 --> 5
create organization component and let's


2950
7751.119 --> 4.281
give our dialogue content a class name


2951
7753.119 --> 7.241
of padding zero BG


2952
7755.4 --> 9.719
transparent border none and Max width of


2953
7760.36 --> 6.64
480 pixels in square brackets like that


2954
7765.119 --> 4.801
so now this is how it's going to look


2955
7767 --> 5.079
like if this is the users first time


2956
7769.92 --> 6.08
joining and they haven't created been


2957
7772.079 --> 6.201
invited or selected any category so uh


2958
7776 --> 4
sorry organization so then that when


2959
7778.28 --> 3.56
they click here there we go they can


2960
7780 --> 4.639
create a new


2961
7781.84 --> 4.839
organization perfect so we have that


2962
7784.639 --> 4.201
working as well when I refresh we're


2963
7786.679 --> 4.281
going to see that new organization ation


2964
7788.84 --> 4.359
right here great and now I only want to


2965
7790.96 --> 5.04
show this if the user doesn't have any


2966
7793.199 --> 5.44
organization selected or if it doesn't


2967
7796 --> 4.559
have any organizations at all so we can


2968
7798.639 --> 5.681
do that quite easily by going back


2969
7800.559 --> 6
inside of our uh dashboard page here and


2970
7804.32 --> 5
we can turn this entire thing into use


2971
7806.559 --> 5.881
client since we're using convex we don't


2972
7809.32 --> 4.839
need to do the whole uh react server


2973
7812.44 --> 4.159
components in this tutorial as much as


2974
7814.159 --> 4.881
we focus it uh focusing that in other


2975
7816.599 --> 4.201
tutorials so this one is going be a bit


2976
7819.04 --> 2.8
for more familiar for the single page


2977
7820.8 --> 3.279
application


2978
7821.84 --> 4.96
folks and in here let's add use


2979
7824.079 --> 6.201
organization from clerk


2980
7826.8 --> 6.52
nextjs like that and let's go ahead and


2981
7830.28 --> 5.24
let's extract the organization itself


2982
7833.32 --> 4.04
and then what I'm going to do is I'm


2983
7835.52 --> 4.159
going to dynamically render this so if


2984
7837.36 --> 5.279
we don't have an organization so


2985
7839.679 --> 5.52
exclamation point organization then I'm


2986
7842.639 --> 5.121
going to go ahead and conditionally


2987
7845.199 --> 4.681
render empty organization component


2988
7847.76 --> 5.319
otherwise I'm going to end add a


2989
7849.88 --> 4.88
paragraph which will say board list like


2990
7853.079 --> 3.761
that there we go you can see how now it


2991
7854.76 --> 4.08
says board list because I do have an


2992
7856.84 --> 4.799
organization but if it happens that I


2993
7858.84 --> 4.759
create a completely new account or if I


2994
7861.639 --> 4.48
delete this


2995
7863.599 --> 4.401
organization uh let me just copy the


2996
7866.119 --> 3.241
name and delete this organization there


2997
7868 --> 3.119
we go this is how it's going to look


2998
7869.36 --> 4
like so when there is no organization


2999
7871.119 --> 4.96
selected then it's going to prompt you


3000
7873.36 --> 5.839
to create an organization to get started


3001
7876.079 --> 5.681
perfect so we wrapped that up now what I


3002
7879.199 --> 5.04
want to do is I want to create the empty


3003
7881.76 --> 5.28
States for when we actually have an


3004
7884.239 --> 5.4
organization like an empty board list I


3005
7887.04 --> 4.92
also want to do a different empty state


3006
7889.639 --> 4.361
for when we search for something and a


3007
7891.96 --> 4.08
third empty state for when we click on


3008
7894 --> 5
favorites right here so we need to


3009
7896.04 --> 6.559
create three more empty


3010
7899 --> 7.079
States so let's go ahead and create this


3011
7902.599 --> 5.761
board list component but before we do


3012
7906.079 --> 4
that I want to show you that we can


3013
7908.36 --> 5.12
actually access the


3014
7910.079 --> 6.841
parameters uh like favorite and the


3015
7913.48 --> 6.32
search from our URL every time that we


3016
7916.92 --> 5.639
are working with a page convention


3017
7919.8 --> 5.279
component or a layout component so what


3018
7922.559 --> 6.481
we can do here is we can create an


3019
7925.079 --> 6.361
interface dashboard page props and in


3020
7929.04 --> 4.84
here we can import search params sorry


3021
7931.44 --> 5.639
we can destructure search forams to have


3022
7933.88 --> 7.16
an optional search which is a string and


3023
7937.079 --> 7.681
favorites which is a string as well and


3024
7941.04 --> 7.519
once you do this just make sure and


3025
7944.76 --> 6.919
confirm that inside of your search input


3026
7948.559 --> 5.04
you are using the search query so that


3027
7951.679 --> 4.601
should match what you're are trying to D


3028
7953.599 --> 6.08
structure here and in your organization


3029
7956.28 --> 5.68
sidebar when you click on favorites you


3030
7959.679 --> 4.48
add favorites to the query so just make


3031
7961.96 --> 3.8
sure there are no typos because this is


3032
7964.159 --> 4.201
what we are going to be extracting from


3033
7965.76 --> 5.319
the URL and then you can assign assign


3034
7968.36 --> 7.08
that here so dashboard page


3035
7971.079 --> 6.801
props search forams and let's go ahead


3036
7975.44 --> 4
and let's


3037
7977.88 --> 5.279
Json


3038
7979.44 --> 5.48
stringify search params like that and


3039
7983.159 --> 4.321
there we go you can see how it says


3040
7984.92 --> 5.08
favorites true because I'm on favorites


3041
7987.48 --> 5.44
if I go back here nothing is inside of


3042
7990 --> 5.32
my uh query but if I search for


3043
7992.92 --> 4.759
something there we go my search is a


3044
7995.32 --> 4.879
search perfect so just confirm you have


3045
7997.679 --> 5.44
those because we're going to use them to


3046
8000.199 --> 4.88
pass them to our board list component


3047
8003.119 --> 3.52
which we're going to create now so


3048
8005.079 --> 3.441
instead of this paragraph we're going to


3049
8006.639 --> 3.881
add a board list


3050
8008.52 --> 4.719
component and we're going to go ahead


3051
8010.52 --> 6.079
and pass in the organization ID as a


3052
8013.239 --> 6.32
prop to be the current organization. ID


3053
8016.599 --> 6.6
and the query is going to be search


3054
8019.559 --> 6.801
params so we know uh how to load the


3055
8023.199 --> 4.88
data and then let's go ahead inside the


3056
8026.36 --> 5
underscore components and create a the


3057
8028.079 --> 6.441
new file board- list.


3058
8031.36 --> 6.199
TSX and inside of here we're going to


3059
8034.52 --> 5.88
mark this as use client and let's create


3060
8037.559 --> 5.321
an interface board list props to accept


3061
8040.4 --> 5.799
an organization ID which is a required


3062
8042.88 --> 6
string and a query which is going to be


3063
8046.199 --> 6.561
required but the props inside are going


3064
8048.88 --> 3.88
to be optional like search and


3065
8053.84 --> 5.759
favorites there we go and then let's


3066
8056.88 --> 7.839
export con board


3067
8059.599 --> 8.281
list let's assign the props board list


3068
8064.719 --> 6.52
props and let's get the organization ID


3069
8067.88 --> 5.64
and the query itself and then inside of


3070
8071.239 --> 6.281
here we can just return a div and let's


3071
8073.52 --> 6.4
do Jon stringify query one more time to


3072
8077.52 --> 4.599
confirm that this is working so I'm


3073
8079.92 --> 5.52
going to go back inside of my dashboard


3074
8082.119 --> 4.801
page. TSX and this time import that the


3075
8085.44 --> 2.96
same way we did with an empty


3076
8086.92 --> 3.759
organization


3077
8088.4 --> 4.36
and right now there we go I can see an


3078
8090.679 --> 3.801
empty object if I click on favorites the


3079
8092.76 --> 5.24
favorites are here if I search on


3080
8094.48 --> 5.639
something the search is here great so


3081
8098 --> 3.32
let's head back inside of the board list


3082
8100.119 --> 3.52
and this is what I'm going to do I'm


3083
8101.32 --> 4
going to create a constant called data


3084
8103.639 --> 4.6
which is going to be empty for now and


3085
8105.32 --> 5.44
this is going to be to-do change to API


3086
8108.239 --> 5.561
call so for now we're going to pretend


3087
8110.76 --> 5.04
that we always have empty data and then


3088
8113.8 --> 5.319
what we can do is we can create


3089
8115.8 --> 8.08
different empty States so so if we don't


3090
8119.119 --> 7.681
have data length like that but we have


3091
8123.88 --> 5.52
query. search that means that the fact


3092
8126.8 --> 4.52
that the data is empty is because user


3093
8129.4 --> 6.199
searched for something that doesn't


3094
8131.32 --> 6.68
exist so we can change our return to say


3095
8135.599 --> 7.08
s uh try


3096
8138 --> 6.92
searching for something else for example


3097
8142.679 --> 4.52
and then let's go ahead below that and


3098
8144.92 --> 4.88
let's add if again we don't have data


3099
8147.199 --> 6.92
length


3100
8149.8 --> 7.04
and if we also uh have query.


3101
8154.119 --> 6.361
favorites in that case we can return IDE


3102
8156.84 --> 8.879
saying no favorites like that and we can


3103
8160.48 --> 6.599
also use the uh third one if there is no


3104
8165.719 --> 6.44
data


3105
8167.079 --> 9.201
length at all we can just use return and


3106
8172.159 --> 7
let's add a div no boards at all like


3107
8176.28 --> 5.6
this so the order of this actually


3108
8179.159 --> 5.681
matter right if you just copy and paste


3109
8181.88 --> 5.759
this at the top and put it above this


3110
8184.84 --> 4.64
then this would always initially render


3111
8187.639 --> 4.201
regardless if you have favorites on or


3112
8189.48 --> 4.48
search for anything so the order of this


3113
8191.84 --> 3.92
matters or if for any reason you want to


3114
8193.96 --> 3.88
change the order then you're going to


3115
8195.76 --> 4.4
have to be more specific with this query


3116
8197.84 --> 5.799
so if you don't have data length and if


3117
8200.16 --> 5.359
you don't have query do favorites and if


3118
8203.639 --> 4.96
you don't have query. search but it's


3119
8205.519 --> 5.761
just easier to make it this an last if


3120
8208.599 --> 5.241
Clause so it is only going to show if


3121
8211.28 --> 5.56
none of these are true perfect so let's


3122
8213.84 --> 4.96
try that out now so as you can see


3123
8216.84 --> 3.799
because I have something in my search it


3124
8218.8 --> 3.799
says try searching for something else


3125
8220.639 --> 3.601
but if I completely remove it it says no


3126
8222.599 --> 3.76
boards at all and if I click on my


3127
8224.24 --> 4.159
favorites it says no favorites so


3128
8226.359 --> 5.24
confirm that you have all three


3129
8228.399 --> 5.601
behaviors working perfect and now what I


3130
8231.599 --> 3.84
want to do is I want to copy the assets


3131
8234 --> 3.84
which we're going to need to create


3132
8235.439 --> 4.601
these three separate empty States for an


3133
8237.84 --> 3.839
empty search for empty favorites and for


3134
8240.04 --> 4.8
empty


3135
8241.679 --> 4.88
boards so head inside of my GitHub


3136
8244.84 --> 5.12
repository right here in the public


3137
8246.559 --> 6.201
folder and go ahead and download empty


3138
8249.96 --> 6.28
favorites which I've prepared here so


3139
8252.76 --> 7.36
just download this file then besides


3140
8256.24 --> 9.319
that also download empty


3141
8260.12 --> 8.559
search and then also download note.


3142
8265.559 --> 5.401
SVG I forgot to rename this one but I'm


3143
8268.679 --> 5.081
going to keep it as note. SVG so that


3144
8270.96 --> 5.679
you can find it as well let's just wait


3145
8273.76 --> 5.44
for this to load and download for me


3146
8276.639 --> 4.521
there we go so now I'm going to drag and


3147
8279.2 --> 4.199
drop all of those inside of my public


3148
8281.16 --> 5.72
folder


3149
8283.399 --> 4.841
here so let's go ahead and drag and drop


3150
8286.88 --> 6.08
note.


3151
8288.24 --> 6.76
SVG empty search and empty favorites


3152
8292.96 --> 5.08
there we go so make sure that you have


3153
8295 --> 6.16
all of those here let's just take a look


3154
8298.04 --> 6.359
so we have empty favorites empty search


3155
8301.16 --> 4.76
and we have note. SVG make sure all of


3156
8304.399 --> 5.481
them are named


3157
8305.92 --> 6
appropriately great and now let's go


3158
8309.88 --> 4.4
ahead and let's create these different


3159
8311.92 --> 4.88
elements so inside of our dashboard


3160
8314.28 --> 7.039
uncore components right here I'm going


3161
8316.8 --> 8.96
to create a new file called empty


3162
8321.319 --> 7.4
search. DSX like that and inside of here


3163
8325.76 --> 5.4
I'm going to import image from next


3164
8328.719 --> 4.401
image and I'm going to export const


3165
8331.16 --> 5
empty


3166
8333.12 --> 6.16
search and very simply return a div


3167
8336.16 --> 6
which renders that image which is a self


3168
8339.28 --> 7.399
closing tag and let's give it a source


3169
8342.16 --> 10
of/ - search. SVG let's give it a height


3170
8346.679 --> 9.121
of 140 and a width of 140 as well and an


3171
8352.16 --> 7.159
ALT of empty like that and then an H2


3172
8355.8 --> 6.44
Element no results found


3173
8359.319 --> 6.601
let's give this a class name of text to


3174
8362.24 --> 6.72
excel font semi bold and margin top of


3175
8365.92 --> 6.92
six and let's add a paragraph try


3176
8368.96 --> 7.24
searching for something else and let's


3177
8372.84 --> 6.879
give this a class name of text muted


3178
8376.2 --> 7.159
foreground and text small and margin top


3179
8379.719 --> 5.121
of two and let's give this wrapper div a


3180
8383.359 --> 6.881
class


3181
8384.84 --> 9.84
name of H full FX Flex column items


3182
8390.24 --> 7.76
Center and justify Center like that and


3183
8394.68 --> 6.32
then we can head back inside of our uh


3184
8398 --> 5.16
board list component and in the first


3185
8401 --> 3.96
case here where it says try searching


3186
8403.16 --> 3.88
for something else instead we're going


3187
8404.96 --> 5.6
to render empty


3188
8407.04 --> 6.84
search like this there we go so now when


3189
8410.56 --> 5.44
you search for something and if our API


3190
8413.88 --> 4.24
returns nothing this is what we what


3191
8416 --> 3.68
will appear but if you remove it then


3192
8418.12 --> 3.279
it's going to be a different empty state


3193
8419.68 --> 4.6
if you go to favorites in it is a


3194
8421.399 --> 6.121
different empty State again great so now


3195
8424.28 --> 5.84
we have the boiler plate for our uh


3196
8427.52 --> 5.64
empty state so let's go ahead and copy


3197
8430.12 --> 5.04
this empty search and paste it here and


3198
8433.16 --> 5.199
let's rename this one to empty


3199
8435.16 --> 5.4
favorites like that let's go inside of


3200
8438.359 --> 5
empty favorites and rename it


3201
8440.56 --> 5.4
here and in here I'm going to import I'm


3202
8443.359 --> 5.241
going to use the source empty


3203
8445.96 --> 6.76
favorites like that and we're going to


3204
8448.6 --> 6.759
change the text to say no favorite


3205
8452.72 --> 4.36
boards and we're going to say try


3206
8455.359 --> 5.321
favoriting a


3207
8457.08 --> 5.48
board go back to the board list and in


3208
8460.68 --> 4.36
this case if there is a query of


3209
8462.56 --> 4.799
favorites use the empty favorites


3210
8465.04 --> 5
component like this so we have empty


3211
8467.359 --> 4.481
favorites and empty search so if you try


3212
8470.04 --> 3.439
now and click on favorites there we go


3213
8471.84 --> 3.24
no favorite boards but if you try


3214
8473.479 --> 4.401
searching for something it's going to


3215
8475.08 --> 4.279
say no results found so the last we need


3216
8477.88 --> 4.04
is this one and this one is also going


3217
8479.359 --> 5.321
to include a button to create the first


3218
8481.92 --> 6.439
board so let's go ahead and copy the


3219
8484.68 --> 6.88
favorites or the search and call it


3220
8488.359 --> 6.561
empty uh let's call this empty boards


3221
8491.56 --> 6.32
like that let's rename this to empty


3222
8494.92 --> 4.64
boards there we go and then what we're


3223
8497.88 --> 5.96
going to do is we're going to use the


3224
8499.56 --> 8.52
note. SVG like that and let's give this


3225
8503.84 --> 7.479
a height of 110 and a width of and 10


3226
8508.08 --> 4.88
because it's going to be a bit smaller


3227
8511.319 --> 4.12
and let's go ahead and give an H2


3228
8512.96 --> 5.479
element of create your first


3229
8515.439 --> 7
board and let's go ahead and give this a


3230
8518.439 --> 5.601
paragraph start by creating a board for


3231
8522.439 --> 3.601
your


3232
8524.04 --> 5.8
organization and below that we're going


3233
8526.04 --> 7.279
to add a div with a class name margin


3234
8529.84 --> 5.68
top six and inside we're going to add a


3235
8533.319 --> 4.801
button component from components UI


3236
8535.52 --> 5.76
button so just make sure you import


3237
8538.12 --> 7.16
that and in here I'm going to give it a


3238
8541.28 --> 6.84
create board text and a size of large


3239
8545.28 --> 5.44
that's all it's going to do for now and


3240
8548.12 --> 6.08
let me just go ahead inside of empty


3241
8550.72 --> 6
favorites here uh and actually we don't


3242
8554.2 --> 5.199
have to do anything here we can simply


3243
8556.72 --> 6.96
go inside of board list and then in this


3244
8559.399 --> 4.281
last if Clause simply return


3245
8563.84 --> 8.12
empty boards from do/ empty boards and


3246
8568.52 --> 6
there we go we now have three uh empty


3247
8571.96 --> 4.56
States the first one is if we don't have


3248
8574.52 --> 4.6
any board at all so we're going to use


3249
8576.52 --> 5.799
this button to create a board later on


3250
8579.12 --> 6.279
we have empty favorites and we have an


3251
8582.319 --> 5.321
empty search beautiful so we covered all


3252
8585.399 --> 4.121
of the cases and now we are finally


3253
8587.64 --> 4.759
ready to start creating our database


3254
8589.52 --> 4.839
schema and actually connect to the


3255
8592.399 --> 3.88
convex API you're going to see how easy


3256
8594.359 --> 3.361
it is to do that it's very productive to


3257
8596.279 --> 3.2
work with convex


3258
8597.72 --> 4.88
and we're going to finally start seeing


3259
8599.479 --> 6
some wordss here great great


3260
8602.6 --> 6.12
job let's go ahead and let's create the


3261
8605.479 --> 5.561
schema for our boards so for that I'm


3262
8608.72 --> 4.24
going to go ahead inside of my convex


3263
8611.04 --> 4.239
folder right here and I'm going to


3264
8612.96 --> 3.84
create a new file called


3265
8615.279 --> 4.2
schema.


3266
8616.8 --> 6.88
DS inside of here let's go ahead and


3267
8619.479 --> 6.521
let's import V from convex values and


3268
8623.68 --> 4.84
let's go ahead and import Define schema


3269
8626 --> 6.439
and Define table


3270
8628.52 --> 6
from convex SLS server like that and


3271
8632.439 --> 3.761
then let's go ahead and Export default


3272
8634.52 --> 6.52
Define schema


3273
8636.2 --> 8.04
here and let's add boards to be defined


3274
8641.04 --> 6.72
table and let's add a title to be a type


3275
8644.24 --> 7.92
of string let's add organization ID to


3276
8647.76 --> 8.679
be a type of string as well author ID to


3277
8652.16 --> 6.88
be the same thing Alor name as well and


3278
8656.439 --> 5.561
we're also have an image


3279
8659.04 --> 5.88
URL and now let's add an index for


3280
8662 --> 5.359
faster querying by


3281
8664.92 --> 5.64
organization and let's define the field


3282
8667.359 --> 5.481
to be organization ID and let's also add


3283
8670.56 --> 5.6
a search index for searching so we're


3284
8672.84 --> 6.28
going to add search title like that and


3285
8676.16 --> 6.96
let's define the search field to be


3286
8679.12 --> 6.92
title and let's also add filter fields


3287
8683.12 --> 6.88
to be organization ID because we only


3288
8686.04 --> 6.92
going to search inside of a single uh


3289
8690 --> 5.88
organization GD so we have our initial


3290
8692.96 --> 5
board schema as simple as that and just


3291
8695.88 --> 6.28
ensure inside of your terminal that you


3292
8697.96 --> 6.16
have npx convex Dev running and now once


3293
8702.16 --> 3.64
you do some changes here you can see how


3294
8704.12 --> 3.96
that's going to tell you that convex


3295
8705.8 --> 4.519
functions are ready if you did anything


3296
8708.08 --> 3.68
wrong you're going to get an error here


3297
8710.319 --> 3.12
and I believe that already if you go


3298
8711.76 --> 4.24
inside of your convex you're going to


3299
8713.439 --> 5.04
see right here I have boards right here


3300
8716 --> 4.52
and I can click on so show schema and


3301
8718.479 --> 4.84
there you go you can see the exact code


3302
8720.52 --> 6
which we've just wrote inside of our


3303
8723.319 --> 6.641
code is now visible right here in this


3304
8726.52 --> 6.04
dashboard great so now what I want to do


3305
8729.96 --> 4.399
is I want to go ahead and prepare all


3306
8732.56 --> 4.24
the possible images that we're going to


3307
8734.359 --> 6.161
use for our boards so for this tutorial


3308
8736.8 --> 5.8
I picked uh 10 random images from undraw


3309
8740.52 --> 4.4
which I will also leave a link in the


3310
8742.6 --> 4.759
description so here is what I want you


3311
8744.92 --> 5.92
to do I want you to go inside of my my


3312
8747.359 --> 5.601
repository or simply go to andraw and in


3313
8750.84 --> 5.04
here I want you to download this entire


3314
8752.96 --> 5.04
placeholders folder so basically all of


3315
8755.88 --> 4.32
these files inside so I'm going to pause


3316
8758 --> 6.8
the video and I'm going to add all of


3317
8760.2 --> 5.76
those inside of my new public folder so


3318
8764.8 --> 2.44
I'm going to go inside of the public


3319
8765.96 --> 4.08
folder and I'm going to create a new


3320
8767.24 --> 5.96
folder called placeholders like that and


3321
8770.04 --> 6.359
I'm going to download all of these files


3322
8773.2 --> 5.72
here and there we go so I just dragged


3323
8776.399 --> 4.481
and dro all of these files here so make


3324
8778.92 --> 4.2
sure that you have at least a couple of


3325
8780.88 --> 3.76
them the the more you have the more


3326
8783.12 --> 3.96
random they're going to be every time


3327
8784.64 --> 5.88
you create a new board and just ensure


3328
8787.08 --> 7.08
that they are inside of your uh public


3329
8790.52 --> 6.36
folder under a placeholder subfolder so


3330
8794.16 --> 4.6
let me just close this and try and


3331
8796.88 --> 5.28
expand this there we go so public folder


3332
8798.76 --> 6
placeholders and inside I have 10 images


3333
8802.16 --> 4.319
all from andraw so I'm going to leave


3334
8804.76 --> 4.36
the description for that as well or you


3335
8806.479 --> 5.481
can simply download them from my GitHub


3336
8809.12 --> 6.359
repository great so now let's go ahead


3337
8811.96 --> 4.56
and let's create our an actual API route


3338
8815.479 --> 4.281
which are going to be which is going to


3339
8816.52 --> 5.08
be used to create a board so for that we


3340
8819.76 --> 4.84
do something as simple as going inside


3341
8821.6 --> 6.679
of convex and creating a new file called


3342
8824.6 --> 6.2
board. DS and this is our new API


3343
8828.279 --> 5.921
endpoint and then in here we can do


3344
8830.8 --> 4.92
export cons create and call a mutation


3345
8834.2 --> 4.52
and we can import


3346
8835.72 --> 3
mutation


3347
8841.359 --> 7.641
from slash generated SLS server like


3348
8845.52 --> 7.04
that and let's also go ahead and let's


3349
8849 --> 7.399
import V from


3350
8852.56 --> 5.68
convex values like that and now inside


3351
8856.399 --> 4.641
of here let's go ahead and open up this


3352
8858.24 --> 4.8
mutation and let's go ahead and passing


3353
8861.04 --> 4.319
the arguments which we expect every time


3354
8863.04 --> 4.96
we create a new board so we expect the


3355
8865.359 --> 5.241
organization ID which is going to be v.


3356
8868 --> 5.12
string and we also accept the title


3357
8870.6 --> 4.48
which is going to be v. string as well


3358
8873.12 --> 3.68
and now let's go ahead and add a Handler


3359
8875.08 --> 3.68
function which is going to be an


3360
8876.8 --> 3.88
asynchronous function which has access


3361
8878.76 --> 4.519
to the context and the arguments from


3362
8880.68 --> 6.2
above and now with this we can go ahead


3363
8883.279 --> 8.281
and get the user identity so identity is


3364
8886.88 --> 7.2
equal to await context out get user


3365
8891.56 --> 5.68
identity and then in here we can check


3366
8894.08 --> 5.64
if there is no identity throw


3367
8897.24 --> 5.28
new error


3368
8899.72 --> 6
unauthorized there we go so now we have


3369
8902.52 --> 6.24
full identity full authentication inside


3370
8905.72 --> 5.24
of this convex uh back end which you can


3371
8908.76 --> 4.559
see is not in route handlers but in its


3372
8910.96 --> 5.519
own folder so that's why we had to do


3373
8913.319 --> 5
the al.cc config.js with the template


3374
8916.479 --> 5.281
and all of those other configuration


3375
8918.319 --> 7.721
elements perfect so now I want to create


3376
8921.76 --> 5.88
a little uh array of images here and


3377
8926.04 --> 4.319
what I'm going to write right inside is


3378
8927.64 --> 5.52
basically a list of all the images which


3379
8930.359 --> 4.92
I have inside of my placeholders right


3380
8933.16 --> 4.48
here so let me go ahead and show you how


3381
8935.279 --> 4.241
this is supposed to look like so your


3382
8937.64 --> 6.4
images should look like this


3383
8939.52 --> 7.12
placeholders slash1 SL2 3 4 five six and


3384
8944.04 --> 4.52
make sure that you add a root slash


3385
8946.64 --> 4.56
right here at the beginning and then the


3386
8948.56 --> 5.04
name of your folder and then the name of


3387
8951.2 --> 4.72
the image you are using so just make


3388
8953.6 --> 4.56
sure that that matches so you don't have


3389
8955.92 --> 4.92
to write public but you do have to write


3390
8958.16 --> 5.56
slash placeholders and then simply make


3391
8960.84 --> 5.32
sure that they match inside great so now


3392
8963.72 --> 5.12
what we can do is we can pick a random


3393
8966.16 --> 6.6
uh image from this array of images right


3394
8968.84 --> 7.439
here so let's go ahead and get a random


3395
8972.76 --> 8.08
image and let's make that images and


3396
8976.279 --> 7.601
then math. floor math. random and let's


3397
8980.84 --> 6.72
go ahead and simply multiply the random


3398
8983.88 --> 5.8
function by images. length there we go


3399
8987.56 --> 5.24
and now we have our random image and now


3400
8989.68 --> 6.52
we can write con board to be await


3401
8992.8 --> 6.32
context. database. insert and choose the


3402
8996.2 --> 5.239
schema which is boards and very simply


3403
8999.12 --> 4.12
pass in the fields we need the title is


3404
9001.439 --> 3.88
going to be arguments. title


3405
9003.24 --> 4.28
organization ID is going to be ar.


3406
9005.319 --> 6.04
organization ID we're going to have an


3407
9007.52 --> 6.24
author ID which is going to be identity.


3408
9011.359 --> 4.04
subject and we're also going to have


3409
9013.76 --> 4.679
author name which is going to be


3410
9015.399 --> 4.801
identity. name name and let's also pass


3411
9018.439 --> 4.96
in the image URL which is going to be


3412
9020.2 --> 5.239
random image and since we know that our


3413
9023.399 --> 4.441
user will have a name you can go ahead


3414
9025.439 --> 5.561
and put an exclamation point right here


3415
9027.84 --> 6
like that and in the end just return a


3416
9031 --> 6.52
board and there we go that's how easy it


3417
9033.84 --> 5.92
is to create our API route with convex


3418
9037.52 --> 5.759
now what we have to do is we have to


3419
9039.76 --> 5.599
create a little button right here uh


3420
9043.279 --> 3.321
which will fire well we have to create a


3421
9045.359 --> 3.601
functionality that when we click click


3422
9046.6 --> 5.32
on this button it actually calls this


3423
9048.96 --> 5.08
API mutation and then we can going to go


3424
9051.92 --> 4
we're going to go ahead inside of uh


3425
9054.04 --> 5.279
right here in the database and see if


3426
9055.92 --> 7.32
that has created it or


3427
9059.319 --> 6.96
not so let's go inside of our empty


3428
9063.24 --> 6.32
board component so inside of app folder


3429
9066.279 --> 6.601
dashboard components we have an empty


3430
9069.56 --> 7.6
boards component right here and let's go


3431
9072.88 --> 7.12
ahead and Mark this as use client


3432
9077.16 --> 6.36
and let's go ahead and let's import use


3433
9080 --> 6.72
mutation from convex react and let's


3434
9083.52 --> 6.16
also import API from convex generated


3435
9086.72 --> 7.92
API and then what we can very simply do


3436
9089.68 --> 8.639
here is const create to be use mutation


3437
9094.64 --> 6.639
api. board. create so you can see how we


3438
9098.319 --> 5.841
have exact typings here and then what we


3439
9101.279 --> 6.16
can do is add const on


3440
9104.16 --> 6.72
click create and let's pass in the title


3441
9107.439 --> 7.04
to very Simply Be Untitled like that and


3442
9110.88 --> 5.8
let's pass in the organization ID that's


3443
9114.479 --> 5.84
going to be we can get


3444
9116.68 --> 7.12
that from organization right here using


3445
9120.319 --> 7.481
use organization from clerk nextjs like


3446
9123.8 --> 7
that so inside of here let's break the


3447
9127.8 --> 5.44
function if there is no organization


3448
9130.8 --> 3.84
like that and then we can safely use


3449
9133.24 --> 4.079
this


3450
9134.64 --> 5.4
organization whoops


3451
9137.319 --> 5.08
do ID here and there we go we no longer


3452
9140.04 --> 7.6
have any errors and now let's add this


3453
9142.399 --> 8.361
on click right here on click there we go


3454
9147.64 --> 5.56
so let's check it out now if I go ahead


3455
9150.76 --> 4.519
and click create right here and if I


3456
9153.2 --> 4.4
check it there we go you can see that it


3457
9155.279 --> 5
is immediately added inside of our


3458
9157.6 --> 5
database we of course cannot see it here


3459
9160.279 --> 4.761
because we are not rendering any of them


3460
9162.6 --> 4.56
if you are not seeing this make sure


3461
9165.04 --> 4.56
that you are importing


3462
9167.16 --> 4.48
uh use mutation from convex react and


3463
9169.6 --> 4.759
make sure that your typings are correct


3464
9171.64 --> 4.92
api. board. create you can see how I can


3465
9174.359 --> 5.761
click here and it will lead me to that


3466
9176.56 --> 6.08
mutation right here uh and also you can


3467
9180.12 --> 4.279
always check your terminal just to


3468
9182.64 --> 5.6
confirm that there are no errors but in


3469
9184.399 --> 6.521
your convex functions right here great


3470
9188.24 --> 5.96
so we have that now uh and you can see


3471
9190.92 --> 5.76
that immediately once I click here uh it


3472
9194.2 --> 5.84
adds a new one so here's what I want to


3473
9196.68 --> 5.52
show you next is that what I like to do


3474
9200.04 --> 3.92
is I like to add a little loading


3475
9202.2 --> 4.56
indicator while this is happening even


3476
9203.96 --> 5.96
though it is extremely fast but I kind


3477
9206.76 --> 4.48
of don't want to do it every single time


3478
9209.92 --> 4.519
so I'm going to show you how we can


3479
9211.24 --> 7
create a reusable mutation hook so that


3480
9214.439 --> 5.601
we always have our loading exported from


3481
9218.24 --> 4.92
here because right now we only have the


3482
9220.04 --> 7.56
action itself so let me show you a way


3483
9223.16 --> 6.52
we can do this so let's go inside uh and


3484
9227.6 --> 4.64
create just a new folder in the root of


3485
9229.68 --> 5.799
our application called Hooks and inside


3486
9232.24 --> 6.159
I'm going to create use API mutation.


3487
9235.479 --> 6.8
THS let's go ahead and let's import use


3488
9238.399 --> 7.841
state from react let's


3489
9242.279 --> 7.801
import use mutation from convex react


3490
9246.24 --> 5.92
and let's export cons use API


3491
9250.08 --> 5
mutation we're going to pass in the


3492
9252.16 --> 4.56
mutation function to be a type of


3493
9255.08 --> 3.56
any


3494
9256.72 --> 5.759
and let's define the pending and set


3495
9258.64 --> 6.28
pending here to come from use state


3496
9262.479 --> 4.201
which is false by default and let's


3497
9264.92 --> 6.76
define the API


3498
9266.68 --> 8.679
mutation to be use mutation mutation


3499
9271.68 --> 8.36
function and then let's add const


3500
9275.359 --> 9.12
mutate to accept a payload of type of


3501
9280.04 --> 6.64
any let's do set pending to be true and


3502
9284.479 --> 5.721
then let's return API mut


3503
9286.68 --> 6.639
ation let's pass in the


3504
9290.2 --> 7.04
payload let's add do


3505
9293.319 --> 7.881
finally to Simply set pending back to


3506
9297.24 --> 8.079
false and do then we'll get the result


3507
9301.2 --> 8.199
and very simply return the


3508
9305.319 --> 4.08
result and if we get an


3509
9310.2 --> 4.079
error let's go ahead and throw that


3510
9313.12 --> 3.4
error


3511
9314.279 --> 4.601
back there we go


3512
9316.52 --> 3.959
so what did we achieve with this well


3513
9318.88 --> 3.96
you're going to see in a second what we


3514
9320.479 --> 4.641
have to do from this Hook is return


3515
9322.84 --> 5.96
mutate and


3516
9325.12 --> 5.76
pending like this and now what we can do


3517
9328.8 --> 4.36
inside of our empty boards instead of


3518
9330.88 --> 4.599
having to call this use mutation and


3519
9333.16 --> 5.4
then in every single on click we would


3520
9335.479 --> 5.96
have to manually add pending here and


3521
9338.56 --> 4.919
then we' have to do do finally here and


3522
9341.439 --> 4.081
change the pending back to false and we


3523
9343.479 --> 5.321
would have to do that for every mutation


3524
9345.52 --> 6.6
that we do do what we can do instead is


3525
9348.8 --> 6.519
now use the following use API mutation


3526
9352.12 --> 6.199
from our hooks API mutation and then in


3527
9355.319 --> 5.881
here we now have execute sorry mutate


3528
9358.319 --> 5.681
and pending so we can very simply just


3529
9361.2 --> 5.84
call mutate here which will work exactly


3530
9364 --> 4.72
the same and then on this pending right


3531
9367.04 --> 5.08
here we can add


3532
9368.72 --> 6.08
disabled pending like that so now if you


3533
9372.12 --> 5.319
try this you can see how for a second my


3534
9374.8 --> 5.08
button is disable and let's just confirm


3535
9377.439 --> 4.201
that this is still working now you can


3536
9379.88 --> 4.08
choose whether you want to use the first


3537
9381.64 --> 4.6
method or the second method both will


3538
9383.96 --> 5.359
work for this tutorial they're not that


3539
9386.24 --> 4.96
terribly important but I kind of like my


3540
9389.319 --> 4
method the only thing that I really


3541
9391.2 --> 5
don't like is that I couldn't get the


3542
9393.319 --> 5.321
types to work so we lose on the types


3543
9396.2 --> 4.56
which is pretty important but I just


3544
9398.64 --> 4.32
think it's fun for a tutorial for us to


3545
9400.76 --> 4.639
explore how to create these custom


3546
9402.96 --> 4.68
abstractions around hooks so you learn


3547
9405.399 --> 5.88
something this kind of reminds me of


3548
9407.64 --> 5.44
using uh 10stack query mutation hook


3549
9411.279 --> 3.961
where we have you know mutate and


3550
9413.08 --> 3.96
depending State here if you don't like


3551
9415.24 --> 4.48
it if you think this is a too big of a


3552
9417.04 --> 5.2
tradeoff by using any uh feel free to


3553
9419.72 --> 5.04
use the initial version in where we use


3554
9422.24 --> 5
the use mutation here directly and then


3555
9424.76 --> 4.559
you simply have you know mutate or


3556
9427.24 --> 4.84
whatever you want to call it


3557
9429.319 --> 5.641
here like that and then you simply won't


3558
9432.08 --> 4.399
have access to this disabled is pending


3559
9434.96 --> 3.6
so it's your choice I'm going to be


3560
9436.479 --> 4.601
using use API mutation throughout the


3561
9438.56 --> 6.52
tutorial so you can either write it from


3562
9441.08 --> 7.399
here or copy it from my GitHub great so


3563
9445.08 --> 6.16
now that we know how we can create uh


3564
9448.479 --> 5.241
our our boards let's go ahead and add


3565
9451.24 --> 6.76
some toast notifications so it indicates


3566
9453.72 --> 7.759
to us whether this was successful uh or


3567
9458 --> 7.04
not we can do that by going inside of


3568
9461.479 --> 7.441
our terminal here let me just open a new


3569
9465.04 --> 6.439
one and the npx chat CNU F latest add


3570
9468.92 --> 5.12
sonor like that so that's going to add


3571
9471.479 --> 6.041
the sunor toast package inside of our


3572
9474.04 --> 5.88
project so we now have uh one file to


3573
9477.52 --> 6.44
add which is called toaster so going


3574
9479.92 --> 8.439
inside of the app folder layout. TSX and


3575
9483.96 --> 6.88
let's import toaster from components UI


3576
9488.359 --> 5.361
soner and then we're simply going to go


3577
9490.84 --> 5.16
ahead and render that well you can just


3578
9493.72 --> 4.639
render it inside of the body or or


3579
9496 --> 4.8
inside of convex client provider like


3580
9498.359 --> 5.96
this and then let's go inside of our


3581
9500.8 --> 6.32
empty board where we added this on click


3582
9504.319 --> 5.641
right here and very simply what we can


3583
9507.12 --> 5.159
do now is we can attach a DOT


3584
9509.96 --> 6.08
then from where we're going to get the


3585
9512.279 --> 7.12
ID of a newly created board and let's do


3586
9516.04 --> 7.2
toast which you can import directly from


3587
9519.399 --> 7.721
soner like that we're going to do toast.


3588
9523.24 --> 7.36
success board created like that and I'm


3589
9527.12 --> 8.239
going to add a to-do redirect to Bo


3590
9530.6 --> 6.36
slash ID and then let's add. catch and


3591
9535.359 --> 4.601
this one is very simply going to call


3592
9536.96 --> 6.68
post. error something actually let's be


3593
9539.96 --> 7.96
more specific fail to create


3594
9543.64 --> 6.6
board like that there we go so now when


3595
9547.92 --> 5
we go ahead and create a new board there


3596
9550.24 --> 5.6
we go we have a message board created


3597
9552.92 --> 4.2
and that is true right here perfect and


3598
9555.84 --> 4.2
you can see how we have the matching


3599
9557.12 --> 6.08
organization ID the title is Untitled by


3600
9560.04 --> 5.64
default and I believe that most of this


3601
9563.2 --> 4.56
will have a different image placeholder


3602
9565.68 --> 4.48
I don't know if I can expand this so we


3603
9567.76 --> 4.8
can actually see that but nevertheless


3604
9570.16 --> 4.4
we're going to be able to see it uh in a


3605
9572.56 --> 3.799
second when we actually start rendering


3606
9574.56 --> 4.64
these things and here's the cool thing


3607
9576.359 --> 5.401
about convex so at any point you can


3608
9579.2 --> 3.68
click on this functions right here and


3609
9581.76 --> 4.16
there we go you can see that the


3610
9582.88 --> 6.64
functions which we wrote inside of of


3611
9585.92 --> 6.559
our uh vs code are actually visible here


3612
9589.52 --> 4.68
even the images array is visible inside


3613
9592.479 --> 4.201
of convex so that's what I think is


3614
9594.2 --> 5.04
really amazing about convex is that it


3615
9596.68 --> 5.48
manages to replicate your local code


3616
9599.24 --> 4.8
inside of its Cloud right here and in


3617
9602.16 --> 4.48
here you can see the exact operation


3618
9604.04 --> 5.08
which we've wrote so it's very very easy


3619
9606.64 --> 4.92
to debug things in production it will be


3620
9609.12 --> 4.76
amazing if we had this for you know


3621
9611.56 --> 4.6
every database that we are using you can


3622
9613.88 --> 5.08
also manage the invocation the errors


3623
9616.16 --> 6.08
the execution time and let's go ahead


3624
9618.96 --> 5.399
for example and add a little console log


3625
9622.24 --> 5.92
to that mutation of ours so we're going


3626
9624.359 --> 7.201
to go inside of convex board. THS for


3627
9628.16 --> 6.8
example let's add console log random


3628
9631.56 --> 5.36
image and let's do test here and I


3629
9634.96 --> 4.64
believe that we're already going to be


3630
9636.92 --> 5.12
able to see those logs so if I create


3631
9639.6 --> 4
something uh first let's see if this has


3632
9642.04 --> 3.76
updated there we go you can see how it


3633
9643.6 --> 5.08
has immediately updated the code right


3634
9645.8 --> 5.479
here so if yours hasn't make sure that


3635
9648.68 --> 4.88
in your terminal you are running npx


3636
9651.279 --> 5.441
convex Dev or if you're having any


3637
9653.56 --> 5.52
errors fix the errors or simply restart


3638
9656.72 --> 5.679
the terminal and let's go ahead and


3639
9659.08 --> 6.64
click on logs right here and I think


3640
9662.399 --> 5.601
that we should be having uh we should be


3641
9665.72 --> 3.719
having some logs I'm just not sure how I


3642
9668 --> 4.84
can access


3643
9669.439 --> 6.121
them or where but I did manage to do


3644
9672.84 --> 4.84
this initially I think nevertheless you


3645
9675.56 --> 3.52
can explore this yourself not only do


3646
9677.68 --> 3.679
you have that you also have like


3647
9679.08 --> 4.399
scheduled Chron jobs and a bunch of


3648
9681.359 --> 4.441
different things uh which can run in the


3649
9683.479 --> 5
background it also has its own file


3650
9685.8 --> 4.92
upload so it's a very powerful database


3651
9688.479 --> 3.92
and all of it is completely real time so


3652
9690.72 --> 4.96
you're going to notice later when we add


3653
9692.399 --> 4.88
a query here to load our boards we're


3654
9695.68 --> 3.799
never going to have to refresh that


3655
9697.279 --> 4.12
query it's just automatically going to


3656
9699.479 --> 4.201
pull the newest from the database so the


3657
9701.399 --> 4.88
whole application has a very optimistic


3658
9703.68 --> 4.679
feel which will fit perf perfectly into


3659
9706.279 --> 4.241
what we're trying to create here as a


3660
9708.359 --> 4.201
miror clone perfect so what we're going


3661
9710.52 --> 4.52
to do next is we're going to go ahead


3662
9712.56 --> 4.719
and actually display our boards right


3663
9715.04 --> 5.2
here great great


3664
9717.279 --> 6.241
job now let's go ahead and let's find a


3665
9720.24 --> 5.72
way to actually display this boards


3666
9723.52 --> 5.28
which we know that we have inside of our


3667
9725.96 --> 6.399
database so for that I want to go ahead


3668
9728.8 --> 6.04
and go inside of the convex folder and


3669
9732.359 --> 5.92
create a new API endpoint which is going


3670
9734.84 --> 5.92
to be called boards so multiple inside


3671
9738.279 --> 5.561
of the board individually we're going to


3672
9740.76 --> 5.48
use that to create it to update it and


3673
9743.84 --> 4.639
to delete it but for the boards we're


3674
9746.24 --> 5
going to use that for all the querying


3675
9748.479 --> 6.201
of multiple boards so I want to separate


3676
9751.24 --> 8.84
those to all right and let's go ahead


3677
9754.68 --> 7.44
and let's import V from convex values


3678
9760.08 --> 6
and let's go ahead and let's import


3679
9762.12 --> 8.159
query from SL generated server


3680
9766.08 --> 6.64
and let's export const get to be a query


3681
9770.279 --> 5.401
which will accept the arguments of for


3682
9772.72 --> 5.679
now let's just do an organization ID


3683
9775.68 --> 4.759
which is going to be a required argument


3684
9778.399 --> 4.201
and let's go ahead and give it a Handler


3685
9780.439 --> 5.361
which is an asynchronous function which


3686
9782.6 --> 5.96
has the context and the arguments like


3687
9785.8 --> 5.559
that now inside of here let's get the


3688
9788.56 --> 6
identity and let's do await context.


3689
9791.359 --> 5.521
out. getet user identity if we don't


3690
9794.56 --> 3.759
have the ID entity we're going to throw


3691
9796.88 --> 3.8
new


3692
9798.319 --> 5.641
error


3693
9800.68 --> 6.56
unauthorized like this and now what we


3694
9803.96 --> 5.8
can do is we can fetch all of our boards


3695
9807.24 --> 5.44
so we can do that by using const boards


3696
9809.76 --> 5.519
to be await context.


3697
9812.68 --> 6.96
databasequery


3698
9815.279 --> 6.321
boards and then we can add with index


3699
9819.64 --> 4.52
and you can see in here that we already


3700
9821.6 --> 4.12
have one index which comes automatically


3701
9824.16 --> 3.68
and we have another one which we've


3702
9825.72 --> 5.559
created so if you remember inside of our


3703
9827.84 --> 5.32
schema we've created an index by org so


3704
9831.279 --> 4.881
we can use this index and then we can


3705
9833.16 --> 5.6
use this argument for faster querying we


3706
9836.16 --> 4.84
could have of course used the manual


3707
9838.76 --> 5.08
equivalent Checker but remember that is


3708
9841 --> 5
not an index that will use file sort


3709
9843.84 --> 5.24
whereas this will use an index which is


3710
9846 --> 5.52
much faster for a lot of queries and now


3711
9849.08 --> 5.12
let's go ahead and use this now we have


3712
9851.52 --> 7.12
access to the query and let's do query


3713
9854.2 --> 7.72
equals organization ID arguments.


3714
9858.64 --> 5.96
organization ID and let's go ahead and


3715
9861.92 --> 5.96
let's order all of this by descending


3716
9864.6 --> 6.4
and let's collect everything there we go


3717
9867.88 --> 7.8
and all we have to do is return the


3718
9871 --> 7.88
boards like this that is it that is our


3719
9875.68 --> 5.639
API route to get all the boards


3720
9878.88 --> 5.12
beautiful now let's go ahead inside of


3721
9881.319 --> 5.681
the app folder dashboard components


3722
9884 --> 5.56
board list right right here and inside


3723
9887 --> 4.64
of here now let's go ahead and let me


3724
9889.56 --> 5.839
just expand all of this


3725
9891.64 --> 7.6
here now we can import use Query from


3726
9895.399 --> 7.201
convex react and let's also import API


3727
9899.24 --> 4.96
from convex generated API and now in


3728
9902.6 --> 4.759
here what we can do just make sure this


3729
9904.2 --> 5.48
is marked as Ed client is we can replace


3730
9907.359 --> 6.721
this data from being an empty array to


3731
9909.68 --> 7.84
instead be used query and pass in api.


3732
9914.08 --> 6.76
boards. get and we can pass


3733
9917.52 --> 6.759
in organization ID as the argument which


3734
9920.84 --> 7.28
we have from the props like that and in


3735
9924.279 --> 6
here I can write if data is undefined


3736
9928.12 --> 4.6
that will represent the loading state so


3737
9930.279 --> 5.321
I'm going to add a uh I'm going to open


3738
9932.72 --> 5.96
a parenthesis right a div loading so


3739
9935.6 --> 5.839
data can never be undefined regardless


3740
9938.68 --> 5.24
if there is an error or if it is empty


3741
9941.439 --> 5.241
if it truly doesn't exist convex is


3742
9943.92 --> 5.32
going to return null for data but if


3743
9946.68 --> 5.44
it's undefined that means that it's in


3744
9949.24 --> 5.44
the loading phase so you can safely use


3745
9952.12 --> 6.04
undefined check to determine whether


3746
9954.68 --> 4.88
data is loading or not beautiful and now


3747
9958.16 --> 4.4
let's go ahead and let's actually


3748
9959.56 --> 7.24
stringify the data itself and there we


3749
9962.56 --> 7.36
go you can see how now we have an array


3750
9966.8 --> 5.479
and the objects inside of all of our uh


3751
9969.92 --> 4.76
boards which have you can see how


3752
9972.279 --> 5
everyone has a different placeholder


3753
9974.68 --> 5.24
nice so let's go ahead now and actually


3754
9977.279 --> 5.12
try and render them so for that we're


3755
9979.92 --> 5.519
going to be using a new component called


3756
9982.399 --> 5.721
board card but before we do that let's


3757
9985.439 --> 6.88
just go ahead and add an H2 element here


3758
9988.12 --> 7.8
and let's write team boards and let's


3759
9992.319 --> 6.521
write let's give this a class name of


3760
9995.92 --> 6
text 3 Excel like that and let's make it


3761
9998.84 --> 6.2
Dynamic so if query has favorites in


3762
10001.92 --> 6.24
that case we're going to write uh


3763
10005.04 --> 5.56
favorite boards so let me just copy this


3764
10008.16 --> 6
here so if it has favorite it's going to


3765
10010.6 --> 5.6
be favorite boards like that so now if


3766
10014.16 --> 3.88
you switch to favorites it says favorite


3767
10016.2 --> 5.68
boards like


3768
10018.04 --> 7.239
that uh great now inside of here let's


3769
10021.88 --> 7.92
open up a div and let's create a grid


3770
10025.279 --> 7.801
here so grid grid calls one on small


3771
10029.8 --> 9.44
devices grid calls two on medium grid


3772
10033.08 --> 11.04
calls four on large grid calls four


3773
10039.24 --> 9.56
again on extra large grid calls five on


3774
10044.12 --> 7.52
two Excel grid calls six and let's also


3775
10048.8 --> 6.2
add Gap five margin top of eight and


3776
10051.64 --> 5.44
padding bottom of 10 and inside of here


3777
10055 --> 4.56
we're going to go ahead and iterate our


3778
10057.08 --> 4.88
data. map we're going to get the


3779
10059.56 --> 5.2
individual board and we're going to go


3780
10061.96 --> 4.519
ahead and render a board card element


3781
10064.76 --> 3.4
which which currently does not exist but


3782
10066.479 --> 4.88
we're going to create it in a second


3783
10068.16 --> 6.319
let's pass in the key to be boore ID


3784
10071.359 --> 5.161
let's pass in the ID to be boore ID as


3785
10074.479 --> 5
well we're going to do the same thing


3786
10076.52 --> 5.32
with the title so board.


3787
10079.479 --> 4.641
title let's go ahead and pass in the


3788
10081.84 --> 6.4
image URL which is going to be board.


3789
10084.12 --> 7.159
image URL let's pass in the author ID


3790
10088.24 --> 6.239
which is going to be board author ID and


3791
10091.279 --> 4.801
let's do author name to be board author


3792
10094.479 --> 3.521
name


3793
10096.08 --> 4.04
and besides that we're also going to


3794
10098 --> 5.84
pass in the created at propop which is


3795
10100.12 --> 6.04
going to be board doore creation time


3796
10103.84 --> 5.4
and let's also pass in the current


3797
10106.16 --> 5.68
organization ID for that from for that


3798
10109.24 --> 4.36
board of course so not the current


3799
10111.84 --> 3.68
organization ID but for the board


3800
10113.6 --> 3.839
created and lastly we're going to have


3801
10115.52 --> 5
is favorite which for now we're going to


3802
10117.439 --> 5.481
manually write to be false great so now


3803
10120.52 --> 4.959
that we have that let's go ahead and


3804
10122.92 --> 4.399
let's actually uh create our our board


3805
10125.479 --> 3.681
card element here so I'm going to create


3806
10127.319 --> 4.921
a folder for that because it's going to


3807
10129.16 --> 5.319
have some other uh elements like our


3808
10132.24 --> 4.72
sidebar so I'm going to create a folder


3809
10134.479 --> 6.481
board card and inside I'm going to


3810
10136.96 --> 6.12
create an index. TSX like that let's go


3811
10140.96 --> 4.479
ahead and Mark this as use client and


3812
10143.08 --> 6.8
let's export con board


3813
10145.439 --> 7.281
card and let's return a div board


3814
10149.88 --> 5.08
card and now go back to the board list


3815
10152.72 --> 5.08
and you can import board card very


3816
10154.96 --> 4.479
simply from do/ boardcard so all of this


3817
10157.8 --> 3.8
are on the same level as you can see


3818
10159.439 --> 4
board card board list all of this are


3819
10161.6 --> 4.28
inside of our app folder dashboard


3820
10163.439 --> 5.201
uncore components and there we go you


3821
10165.88 --> 6.04
can see that uh we now have board cards


3822
10168.64 --> 5.12
in a grid like this great so now let's


3823
10171.92 --> 3.519
go ahead and let's fix these typescript


3824
10173.76 --> 3.679
errors which we have right here so we


3825
10175.439 --> 6.721
have to allow all of these types inside


3826
10177.439 --> 9.04
of our board card element so let's go


3827
10182.16 --> 8.48
ahead and let's create an interface


3828
10186.479 --> 7.281
board card props to have an ID which is


3829
10190.64 --> 7.44
a string a title which is a string


3830
10193.76 --> 6.519
althor name which is a string althor


3831
10198.08 --> 5.76
ID created


3832
10200.279 --> 7.2
at created that is going to be a number


3833
10203.84 --> 6.399
image URL which is a string organization


3834
10207.479 --> 4.241
ID which is a string and is favorite


3835
10210.239 --> 4.08
which is going to be a


3836
10211.72 --> 6
bullion and now we can go ahead and


3837
10214.319 --> 6.16
assign all of those here so board card


3838
10217.72 --> 6.639
props and we can safely


3839
10220.479 --> 7.96
extract uh all of those auor ID author


3840
10224.359 --> 7.361
name created at image URL organization


3841
10228.439 --> 4.92
ID and is favorite great and now in your


3842
10231.72 --> 5.92
board list you should no longer be


3843
10233.359 --> 7.241
having any problems with this great now


3844
10237.64 --> 4.2
let's go ahead and let's import our link


3845
10240.6 --> 4.6
component


3846
10241.84 --> 6.24
here from next link which is going to be


3847
10245.2 --> 5.52
wrapping the entire board card so it's


3848
10248.08 --> 6.64
going to be a link and the HRA is going


3849
10250.72 --> 5
to go to slbo SL the individual ID of


3850
10254.72 --> 3.92
the


3851
10255.72 --> 6.16
board then inside of here let's create a


3852
10258.64 --> 8.92
div with a class name of group let's


3853
10261.88 --> 5.68
create an aspect with a custom value of


3854
10268.439 --> 8.481
100/17 Border rounded large Flex Flex


3855
10274.08 --> 6.359
call col so all the items inside are one


3856
10276.92 --> 6.04
beneath another justify between and


3857
10280.439 --> 5.88
overflow


3858
10282.96 --> 6.399
hidden and now let's go ahead and add a


3859
10286.319 --> 7.201
div here with a class name of relative


3860
10289.359 --> 6.561
Flex one MBG Amber 50 that's going to be


3861
10293.52 --> 4.08
the background color for all of our


3862
10295.92 --> 5.319
cards as you can see right here all of


3863
10297.6 --> 5
our cards have a slight amber color now


3864
10301.239 --> 3.681
and now we're going to go ahead and


3865
10302.6 --> 4.2
render the individual placeold folders


3866
10304.92 --> 3.92
inside using the image component from


3867
10306.8 --> 5.32
next SL image so just ensure you've


3868
10308.84 --> 6.16
added that and let's go ahead and give


3869
10312.12 --> 5.84
them a source of image URL let's give it


3870
10315 --> 6.08
an ALT of a doodle and let's go ahead


3871
10317.96 --> 8.64
and give it fill property and class


3872
10321.08 --> 7.84
name of object bit there we go and now


3873
10326.6 --> 5.12
you can see all of our beautiful random


3874
10328.92 --> 6.96
images uh which were created every time


3875
10331.72 --> 7.48
we clicked on uh create a new board so


3876
10335.88 --> 5.76
if you're seeing some empty images uh go


3877
10339.2 --> 5.44
inside of your database here and just


3878
10341.64 --> 6
confirm exactly uh what you're seeing


3879
10344.64 --> 5.2
inside of image URL so you can expand it


3880
10347.64 --> 5.719
like this and confirm that this


3881
10349.84 --> 6.479
placeholder SL1 SVG 827 anything that


3882
10353.359 --> 5.801
you have you actually have inside of


3883
10356.319 --> 5.521
your public folder as we had to do when


3884
10359.16 --> 5.119
we added those so inside of your public


3885
10361.84 --> 4.479
placeholders all of those should exist


3886
10364.279 --> 4.08
in inside of here if you don't have them


3887
10366.319 --> 3.681
you're going to get a broken image


3888
10368.359 --> 6.161
picture right


3889
10370 --> 7.359
here great so we've added that now uh


3890
10374.52 --> 4.919
and now instead of having alt of doodle


3891
10377.359 --> 5.281
I think it's better that we actually


3892
10379.439 --> 7.04
give the title of the board I think that


3893
10382.64 --> 6.92
makes more sense uh great and now what I


3894
10386.479 --> 6.281
want to do is I want to create an


3895
10389.56 --> 6.28
overlay component so let's go ahead


3896
10392.76 --> 5.599
inside of our board card folder and


3897
10395.84 --> 5.399
create a new file


3898
10398.359 --> 5.561
overlay. TSX which is going to be a very


3899
10401.239 --> 5.321
simple export con


3900
10403.92 --> 6
overlay and all it's going to


3901
10406.56 --> 5.36
do is return a div which can even be a


3902
10409.92 --> 4.6
self closing


3903
10411.92 --> 8
tag and let's go ahead and pass in the


3904
10414.52 --> 10.52
class name opacity zero group


3905
10419.92 --> 10.399
hover opacity 50 transition


3906
10425.04 --> 8.56
opacity H full with full and BG black


3907
10430.319 --> 6.281
like that and now you can go inside of


3908
10433.6 --> 6.36
the index right here for the board card


3909
10436.6 --> 7.08
and very simply just below the image add


3910
10439.96 --> 5.319
the overlay component from do/ overlay


3911
10443.68 --> 4.48
like that so just make sure you import


3912
10445.279 --> 5.281
this which we've just created and now I


3913
10448.16 --> 5.279
believe that when we hover it gets a


3914
10450.56 --> 6.799
darkened background so the reason this


3915
10453.439 --> 8.201
works is because we have when we hover


3916
10457.359 --> 7.761
on a group we change the opacity to 50


3917
10461.64 --> 5.56
and this has a BG black color right and


3918
10465.12 --> 4.04
how do we how does the group get hovered


3919
10467.2 --> 4.119
well it's because the parent element has


3920
10469.16 --> 5.4
the group class name so everything which


3921
10471.319 --> 5.361
is inside of this div if it has a class


3922
10474.56 --> 6.32
name which reacts to the group it's


3923
10476.68 --> 6.24
going to work like this one great so why


3924
10480.88 --> 3.84
do we even do that well we do that


3925
10482.92 --> 4.68
because once we hover we're going to


3926
10484.72 --> 5.559
have a little uh options bar here so


3927
10487.6 --> 5.32
that we can rename our board delete our


3928
10490.279 --> 4.761
board or copy the URL for our board so


3929
10492.92 --> 4.76
it's going to be more visible once we


3930
10495.04 --> 5.199
hover on it so it indicates which one is


3931
10497.68 --> 4.639
it that we are hovering on and the


3932
10500.239 --> 3.641
button itself is going to be more


3933
10502.319 --> 3.96
visible but we're going to do those


3934
10503.88 --> 5.64
actions later when we actually create


3935
10506.279 --> 6.761
the API routes for them what I want to


3936
10509.52 --> 5.719
create now is the footer and before we


3937
10513.04 --> 5
can build the footer I want to prepare


3938
10515.239 --> 5.281
some labels and that label is going to


3939
10518.04 --> 4.84
be the author label so to show you who


3940
10520.52 --> 4.32
created this board and the created at


3941
10522.88 --> 4.84
label which is going to format the


3942
10524.84 --> 5.16
distance uh from when it was created so


3943
10527.72 --> 5.759
let's go ahead and install date FNS for


3944
10530 --> 5.92
that so mpm install date FNS so we can


3945
10533.479 --> 5.8
then import the package that we


3946
10535.92 --> 5.88
need I'm going to go ahead and


3947
10539.279 --> 7.321
import format


3948
10541.8 --> 7.519
distance uh to now from date FNS like


3949
10546.6 --> 7.12
that and in here let's go ahead and


3950
10549.319 --> 7.881
let's define const althor label is very


3951
10553.72 --> 5.759
simply going to check if the user ID uh


3952
10557.2 --> 5.039
which we can very easily


3953
10559.479 --> 6.201
get from use


3954
10562.239 --> 6.521
out and you can either import it from


3955
10565.68 --> 5
Clerk nextjs or you can import it from


3956
10568.76 --> 5.88
convex react but I'm going to be using


3957
10570.68 --> 7.44
clerk nextjs so you can try out both


3958
10574.64 --> 4.92
those so use out clerk nextjs that's


3959
10578.12 --> 2.96
going to give us the user ID so we're


3960
10579.56 --> 4.879
going to check if the current logged in


3961
10581.08 --> 5.319
user ID matches with the author ID of


3962
10584.439 --> 4.241
this board in that case we're going to


3963
10586.399 --> 6.681
write youu otherwise we're going to just


3964
10588.68 --> 6.52
say author name like that and now let's


3965
10593.08 --> 4.6
go ahead and let's write created at


3966
10595.2 --> 5.159
label so that's going to use the format


3967
10597.68 --> 4.48
distance to now and it's going to pass


3968
10600.359 --> 4.441
in the created at


3969
10602.16 --> 6.079
number and we're going to add


3970
10604.8 --> 6.04
suffix to be true all right so now that


3971
10608.239 --> 5.601
we have those two we can go ahead and we


3972
10610.84 --> 5.599
can create uh our footer


3973
10613.84 --> 6.36
component so the footer component is


3974
10616.439 --> 6.281
going to go uh outside of this div which


3975
10620.2 --> 6.4
is encapsulating our overlay and our


3976
10622.72 --> 6.12
image but still inside of this last div


3977
10626.6 --> 3.92
so this is what it's going to look like


3978
10628.84 --> 4.519
we're going to pass in his favorite to


3979
10630.52 --> 5.56
be his favorite which for now we are


3980
10633.359 --> 5.641
manually controlling with a Boolean the


3981
10636.08 --> 5.08
title is going to be the title author


3982
10639 --> 4.12
label is going to be auor label which


3983
10641.16 --> 3.76
we've just created in the constant


3984
10643.12 --> 3.8
created at label is going to be a


3985
10644.92 --> 4.24
matching created at


3986
10646.92 --> 4.16
label and we're also going to have on


3987
10649.16 --> 4.84
click for now to be an empty Arrow


3988
10651.08 --> 6.08
function and disabled for now is going


3989
10654 --> 5.399
to be false like this let's go ahead


3990
10657.16 --> 6.48
inside of the board card and create the


3991
10659.399 --> 6.241
footer. DSX element like that and let's


3992
10663.64 --> 3.759
go ahead head and let's import


3993
10665.64 --> 4.32
everything we need which is the star


3994
10667.399 --> 5.84
icon from Lucid react and we're going to


3995
10669.96 --> 6.04
need the CN library from lib utils let's


3996
10673.239 --> 5.08
create an interface footer props to


3997
10676 --> 6.04
accept all of those things so it needs a


3998
10678.319 --> 7.12
required title a required outdoor


3999
10682.04 --> 6.48
label a created at


4000
10685.439 --> 6.721
label is favorite which is going to be a


4001
10688.52 --> 7.959
bullion on click which is going to be an


4002
10692.16 --> 7.44
arrow function and a disabled prop which


4003
10696.479 --> 5.521
is going to be a Boolean as well and now


4004
10699.6 --> 5.24
let's export con


4005
10702 --> 4.479
further and let's very simply assign


4006
10704.84 --> 4.439
those


4007
10706.479 --> 5.561
props and we can extract the title


4008
10709.279 --> 7.481
outter label created at label is


4009
10712.04 --> 6.88
favorite on click and disabled like that


4010
10716.76 --> 4.88
let's go ahead and let's return a div


4011
10718.92 --> 5.24
inside which is for now just going to


4012
10721.64 --> 4.32
print out footer now we can go back


4013
10724.16 --> 4.56
inside of the board card and we can


4014
10725.96 --> 5.399
import the footer from do/ footer the


4015
10728.72 --> 4.12
same way we did with the overlay and


4016
10731.359 --> 3.88
there we go you should just be seeing


4017
10732.84 --> 5
the text footer at the bottom of each of


4018
10735.239 --> 4.681
our cards and now let's go ahead and


4019
10737.84 --> 4.12
actually use that althor label and the


4020
10739.92 --> 4.479
created that label so it shows us some


4021
10741.96 --> 4.76
more information about the board let's


4022
10744.399 --> 5.521
give this main div a class name of


4023
10746.72 --> 5.8
relative background white and padding of


4024
10749.92 --> 4.16
three inside of it let's open up a


4025
10752.52 --> 4.6
paragraph which is going to render the


4026
10754.08 --> 5.56
title of each of our boards and let's


4027
10757.12 --> 5.92
give them a class name of text and let's


4028
10759.64 --> 6.56
specifically choose 13 pixels let's give


4029
10763.04 --> 5.92
it a trun Kate in case the title is too


4030
10766.2 --> 5.039
long and let's give it a maximum width


4031
10768.96 --> 5.76
and let's manually


4032
10771.239 --> 6.361
calculate 100% minus 20 pixels the


4033
10774.72 --> 5.88
reason we are calculating uh 20 pixels


4034
10777.6 --> 4.92
outside of the 100% is because this is


4035
10780.6 --> 3.719
going to be the space we need to render


4036
10782.52 --> 4.32
our favorite button so we're going to


4037
10784.319 --> 4.441
make sure that it never overlays that


4038
10786.84 --> 4.68
the title never overlays with that


4039
10788.76 --> 4.559
button and then uh below that let's add


4040
10791.52 --> 6.839
another paragraph which will use the


4041
10793.319 --> 8
Alor label comma uh created at label so


4042
10798.359 --> 5.321
it says you about an hour ago like that


4043
10801.319 --> 4.281
or whenever you've created yours now


4044
10803.68 --> 3.44
let's go ahead and style this so the


4045
10805.6 --> 5.12
class name for this paragraph is going


4046
10807.12 --> 10.159
to be opacity zero


4047
10810.72 --> 9.28
group hover opacity one 100 transition


4048
10817.279 --> 6
opacity text is going to be even smaller


4049
10820 --> 6.319
11 pixels text is going to be muted


4050
10823.279 --> 5.441
foreground and truncate for that text as


4051
10826.319 --> 3.841
well in case it's too long so as you can


4052
10828.72 --> 3.92
see we we won't be seeing the


4053
10830.16 --> 3.96
information unless we hover on it and


4054
10832.64 --> 4.56
then we're going to see some more


4055
10834.12 --> 4.76
information about our boards beautiful


4056
10837.2 --> 4.159
and all of your boards should have the


4057
10838.88 --> 5.399
Untitled title because that's what we


4058
10841.359 --> 5.12
that's the way we wrote Our code for now


4059
10844.279 --> 4.361
uh all right and now let's go ahead and


4060
10846.479 --> 4.84
let's actually create this little button


4061
10848.64 --> 4.719
here so it's going to render the star


4062
10851.319 --> 4.441
icon which we've imported from Lucid


4063
10853.359 --> 3.88
react and let's go ahead and give it a


4064
10855.76 --> 4.8
disabled of


4065
10857.239 --> 5.481
disabled let's give it an on click off


4066
10860.56 --> 5.08
on click for


4067
10862.72 --> 5.559
now uh and my apologies we're not doing


4068
10865.64 --> 4.679
this to the star we should be doing this


4069
10868.279 --> 4.481
for the button like


4070
10870.319 --> 5.92
that and let's go ahead and give this a


4071
10872.76 --> 5.76
class name to be dynamic using CN first


4072
10876.239 --> 5.16
let's write some default ones so opacity


4073
10878.52 --> 5.44
is going to be zero but on when we hover


4074
10881.399 --> 3.96
on the main group The opacity is going


4075
10883.96 --> 3.88
to go to


4076
10885.359 --> 4.96
100 let's add


4077
10887.84 --> 5.559
transition let's add an absolute


4078
10890.319 --> 7.481
property let's position it in the uh


4079
10893.399 --> 7
three points from Top let's also do uh


4080
10897.8 --> 4.76
three points from the right side text


4081
10900.399 --> 4.641
muted foreground of course I'm saying


4082
10902.56 --> 4.48
points but these are actual Matrix so 12


4083
10905.04 --> 4.92
pixels right I just wasn't sure which


4084
10907.04 --> 6.88
one it was and on Hover we're going to


4085
10909.96 --> 5.76
do text blue 600 like that and then


4086
10913.92 --> 3.92
we're going to add a dynamic class name


4087
10915.72 --> 5.04
if we are disabled very simply we're


4088
10917.84 --> 6.519
going to do cursor not allowed and we're


4089
10920.76 --> 6.92
also going to do opacity


4090
10924.359 --> 5.641
75 now inside of the star component


4091
10927.68 --> 5
itself all we're going to do is add one


4092
10930 --> 4.439
more Dynamic class name here which is


4093
10932.68 --> 4.2
first going to Define find the width and


4094
10934.439 --> 5.161
the height of the icon and then if we


4095
10936.88 --> 8.479
are already favored this we're going to


4096
10939.6 --> 8.92
add fil blue 600 and text blue 600 as


4097
10945.359 --> 6.801
well like that there we go so let's try


4098
10948.52 --> 6.28
it out now now when I hover you can see


4099
10952.16 --> 5
how my little icon becomes blue when I


4100
10954.8 --> 5.559
hover on it and now let's go ahead and


4101
10957.16 --> 7.239
quickly change inside of our index is it


4102
10960.359 --> 6.361
board card uh let's go inside of


4103
10964.399 --> 6.521
inside of board list right here and


4104
10966.72 --> 7.08
change is favorite to true and now if we


4105
10970.92 --> 6.92
coded this correctly this should change


4106
10973.8 --> 6.04
to a fi icon like this great so let's


4107
10977.84 --> 3.84
bring it back to false now of course


4108
10979.84 --> 4.399
later we're going to make this actually


4109
10981.68 --> 5.32
Dynamic and now what I want to do is


4110
10984.239 --> 5.881
just give you an ability to add a new


4111
10987 --> 5.92
card to a new board from this screen


4112
10990.12 --> 3.96
because you can see that it is missing


4113
10992.92 --> 3.559
right here


4114
10994.08 --> 6.359
so let's go ahead and do


4115
10996.479 --> 7.041
that let's head back inside of our board


4116
11000.439 --> 5.201
list right here and just before we


4117
11003.52 --> 5.08
iterate over our data and render the


4118
11005.64 --> 6.36
board cards we're going to go ahead and


4119
11008.6 --> 6.36
render a new board button like that so


4120
11012 --> 5
it's going to be inside of the grid and


4121
11014.96 --> 4.6
let's go ahead and pass in the current


4122
11017 --> 5.88
organization


4123
11019.56 --> 5.799
ID like this now let's go ahead and


4124
11022.88 --> 5.16
let's actually create this one inside of


4125
11025.359 --> 8.681
the underscore components here so new


4126
11028.04 --> 10.68
board button. TSX let's mark this as use


4127
11034.04 --> 8.199
client and let's export con new board


4128
11038.72 --> 6
button and return a


4129
11042.239 --> 5.801
div


4130
11044.72 --> 6.36
new board


4131
11048.04 --> 5.64
button go back inside of the board list


4132
11051.08 --> 5.64
and you can then import the new board


4133
11053.68 --> 5.719
button from right here and now you


4134
11056.72 --> 5.2
should just see a plain text taking up


4135
11059.399 --> 6.441
this space and we're going to turn that


4136
11061.92 --> 5.6
into a nice blue button so first things


4137
11065.84 --> 4.399
first let's create an interface new


4138
11067.52 --> 4.959
board button props to accept an


4139
11070.239 --> 6.761
organization ID which is a required


4140
11072.479 --> 7.121
string but also an optional disabled


4141
11077 --> 4.319
Boolean let's go ahead and assign those


4142
11079.6 --> 5.08
new board button


4143
11081.319 --> 6.561
props organization ID D and


4144
11084.68 --> 5.24
disabled like that and then inside of


4145
11087.88 --> 3.92
here this is not going to be a div


4146
11089.92 --> 5.439
instead it's going to be a button


4147
11091.8 --> 5.92
component so let's give it a disabled of


4148
11095.359 --> 5.04
disabled let's go ahead and pass in on


4149
11097.72 --> 4.759
click for now to just be an empty Arrow


4150
11100.399 --> 3.521
function and let's go ahead and give it


4151
11102.479 --> 6.321
a class name which is going to be


4152
11103.92 --> 8.6
dynamic so prepare the CN util from Li


4153
11108.8 --> 6.439
utils so if it is not disabled it's


4154
11112.52 --> 5.759
going to have your us usual call span


4155
11115.239 --> 7.321
one property aspect is going to be the


4156
11118.279 --> 7.601
same one as from our board card our


4157
11122.56 --> 5.2
board item so it matches and BG is going


4158
11125.88 --> 4.519
to be blue


4159
11127.76 --> 6.4
600 rounded


4160
11130.399 --> 6.681
LG and let's also add while we are here


4161
11134.16 --> 6.88
uh on Hover but specifically on this


4162
11137.08 --> 7.92
board hover it's going to be BG blue


4163
11141.04 --> 6.84
800 so it darkens we already added


4164
11145 --> 7
rounded LG that's good so besides that


4165
11147.88 --> 9.2
we're going to need Flex Flex call items


4166
11152 --> 8.64
Center justify Center and P padding on


4167
11157.08 --> 5
both sides of six like this on up and


4168
11160.64 --> 5.759
down of


4169
11162.08 --> 10.12
six great and now let's go ahead and


4170
11166.399 --> 7.361
let's modify this by adding an empty div


4171
11172.2 --> 3.72
here


4172
11173.76 --> 4.08
so just so it takes up some space that's


4173
11175.92 --> 6.12
the only reason I want this to take up


4174
11177.84 --> 5.2
some space and then add a plus icon from


4175
11182.04 --> 4.48
Lucid


4176
11183.04 --> 6.399
react so input plus from Lucid react


4177
11186.52 --> 7.44
like that and let's give this a class


4178
11189.439 --> 6.361
name of H2 width of 12 text white and


4179
11193.96 --> 4.6
let's make it just a bit tinier by


4180
11195.8 --> 6.4
giving it a stroke of one like


4181
11198.56 --> 5.6
that and now let's add a paragraph new


4182
11202.2 --> 4.079
board


4183
11204.16 --> 7.36
and inside of here let's add a class


4184
11206.279 --> 9.2
name text small text white and font


4185
11211.52 --> 7.08
light there we go so now we have uh this


4186
11215.479 --> 5.92
setup right here and I forgot to add the


4187
11218.6 --> 4.92
actual Dynamic CL class here so if we


4188
11221.399 --> 5.321
are disabled in that


4189
11223.52 --> 6.68
case opacity is going to be


4190
11226.72 --> 7.04
75% like that so let's try it out new


4191
11230.2 --> 8.119
board like this there we go I think this


4192
11233.76 --> 9.08
looks fine uh let's just see the text


4193
11238.319 --> 6.401
looks a bit big in my opinion text small


4194
11242.84 --> 4.04
so this should be


4195
11244.72 --> 6.719
enough I don't know you choose if you


4196
11246.88 --> 7.519
want extra small or text small right all


4197
11251.439 --> 5.361
right and now what I want to do is I


4198
11254.399 --> 4.361
want to actually create the function so


4199
11256.8 --> 4.519
it creates the new board when we click


4200
11258.76 --> 4.36
on that and for that there are two ways


4201
11261.319 --> 4
we can do that if you remember so you


4202
11263.12 --> 3.319
you can either use create using use


4203
11265.319 --> 5
mutation


4204
11266.439 --> 6.441
directly from convex react like that and


4205
11270.319 --> 6.841
then pass in the API from convex


4206
11272.88 --> 7.32
generated API so api. board. create and


4207
11277.16 --> 5.8
then you can create on click here and


4208
11280.2 --> 5.96
very simply in create you can just pass


4209
11282.96 --> 6.56
in the organization ID and the title


4210
11286.16 --> 5.88
Untitled like that and then you can pass


4211
11289.52 --> 4.04
the on click right


4212
11292.04 --> 3.52
here


4213
11293.56 --> 4.36
so if you try that out it should already


4214
11295.56 --> 5.04
be working so if I click new board there


4215
11297.92 --> 5.88
we go new one is created but I want some


4216
11300.6 --> 6.56
loading States and I want to use my use


4217
11303.8 --> 6.4
API mutation so I'm going to change this


4218
11307.16 --> 5.4
to use use API mutation from my hooks


4219
11310.2 --> 4.56
use API mutation and I no longer need


4220
11312.56 --> 5.96
this


4221
11314.76 --> 6.84
one like that and let's go ahead and


4222
11318.52 --> 5.759
pass in API board


4223
11321.6 --> 5.48
create and let's let's execute mutate


4224
11324.279 --> 5.601
and pending so this is going to be


4225
11327.08 --> 7.48
mutate like that I'm going to change


4226
11329.88 --> 7.24
this to use pending or disabled and this


4227
11334.56 --> 2.56
thing as


4228
11337.439 --> 3
well


4229
11340.479 --> 4.96
pending or disabled and let's see if


4230
11343.64 --> 3.839
there are any more places I don't think


4231
11345.439 --> 5.281
there are any more places where this is


4232
11347.479 --> 6.641
needed uh great and


4233
11350.72 --> 5.759
now uh let's go ahead and try it out so


4234
11354.12 --> 4.319
if I go ahead and click again there we


4235
11356.479 --> 5.321
go you can see how it's disabled for a


4236
11358.439 --> 5.281
quick second and now let's just add the


4237
11361.8 --> 4.639
toast


4238
11363.72 --> 6.92
notifications so toast from


4239
11366.439 --> 6.681
soner so after we successfully mutate


4240
11370.64 --> 5
we're going to go ahead and get the ID


4241
11373.12 --> 6.68
of the new board and then we're going to


4242
11375.64 --> 7.96
add to. success board created and I'm


4243
11379.8 --> 5.8
going to add a too redirect


4244
11383.6 --> 3.52
to


4245
11385.6 --> 4.56
slbo


4246
11387.12 --> 5.6
ID and let's add. catch which is very


4247
11390.16 --> 6
simply going to go to the error and say


4248
11392.72 --> 6.679
failed to create


4249
11396.16 --> 5.48
board and we can already try that out so


4250
11399.399 --> 5.04
when I click here there we go board


4251
11401.64 --> 5.839
created this is loading nicely very very


4252
11404.439 --> 6.281
nice so now let's go ahead and let's


4253
11407.479 --> 6.92
actually create a proper loading element


4254
11410.72 --> 7.12
for our uh items right here so for that


4255
11414.399 --> 7.401
we have to quickly go back inside of our


4256
11417.84 --> 5.16
board card component inside of Index


4257
11421.8 --> 3.679
right


4258
11423 --> 4.319
here and we also have to add the


4259
11425.479 --> 5.361
skeleton component so let's go inside of


4260
11427.319 --> 6.441
terminal here and let's run npx shat CN


4261
11430.84 --> 7.08
UI at latest add


4262
11433.76 --> 7.679
skeleton so skeleton like


4263
11437.92 --> 5.68
this and then let's go ahead and let's


4264
11441.439 --> 5.8
actually import this


4265
11443.6 --> 5.32
skeleton so import skeleton from


4266
11447.239 --> 4
components UI


4267
11448.92 --> 5.8
skeleton and in here we're going to


4268
11451.239 --> 7.921
write board card. skeleton is going to


4269
11454.72 --> 7.24
be a function board card


4270
11459.16 --> 6.119
skeleton and let's go ahead and let's


4271
11461.96 --> 5.519
return a div which is going to be


4272
11465.279 --> 4
exactly the same as this one so you can


4273
11467.479 --> 3.321
actually copy this div because we're


4274
11469.279 --> 6.281
trying to replicate what's actually


4275
11470.8 --> 8.16
going on but we don't need uh border


4276
11475.56 --> 8.44
itself we do need rounded


4277
11478.96 --> 8.04
LG we don't need Flex or Flex call we do


4278
11484 --> 5.52
need overflow hidden and we also don't


4279
11487 --> 4.8
need group and then we can just render


4280
11489.52 --> 7.08
the skeleton inside and make sure it


4281
11491.8 --> 4.8
fills 100% of this


4282
11497.08 --> 5.88
space there we go and now we can go back


4283
11500 --> 5
inside of our board list and then


4284
11502.96 --> 4.04
instead of just rendering this loading


4285
11505 --> 3.92
right here let's go ahead and make this


4286
11507 --> 3.92
a bit easier for us to see so I'm going


4287
11508.92 --> 3.72
to change this manually to always be


4288
11510.92 --> 4.04
true so that we can always see the


4289
11512.64 --> 4.28
loading text in here so now we're going


4290
11514.96 --> 5.84
to change that to actually display our


4291
11516.92 --> 7.8
elements so for that I want to actually


4292
11520.8 --> 7
copy uh this first two


4293
11524.72 --> 6.16
elements first three actually so I


4294
11527.8 --> 5.8
copied the div I copied the H2 and I


4295
11530.88 --> 4.519
copied our grid


4296
11533.6 --> 4.4
so let's just make sure we have all of


4297
11535.399 --> 5.361
those like this so you should have the


4298
11538 --> 5.88
div you should have the H2 which can


4299
11540.76 --> 5.16
just say well it can be it can work like


4300
11543.88 --> 5.28
this query. favorites favorite boards or


4301
11545.92 --> 5.359
team boards and then this div is just an


4302
11549.16 --> 3.52
grid and inside we are going to render


4303
11551.279 --> 4.12
the new board


4304
11552.68 --> 5.36
button but we're going to make it


4305
11555.399 --> 5.601
disabled so pass in the organization ID


4306
11558.04 --> 5.12
and also pass in theable and then in


4307
11561 --> 6.04
here we're going to pass the board


4308
11563.16 --> 7.239
card do skeleton like that and copy it


4309
11567.04 --> 5.399
four times or however many you see fit


4310
11570.399 --> 3.641
and there we go this is going to be our


4311
11572.439 --> 3.601
loading screen you can see how it kind


4312
11574.04 --> 4.16
of shimmers you can see how this button


4313
11576.04 --> 4.76
is disabled oh yeah and also when a


4314
11578.2 --> 7.239
button is disabled perhaps we should not


4315
11580.8 --> 6.36
change its color so let's go inside of


4316
11585.439 --> 4.88
uh new board


4317
11587.16 --> 8.72
button and we're also going to add on


4318
11590.319 --> 9.08
here hover BG blue the default one like


4319
11595.88 --> 7.439
that and let's add cursor not allowed


4320
11599.399 --> 5.88
also like that great so let's try it out


4321
11603.319 --> 4.201
now there we go so now it doesn't change


4322
11605.279 --> 5.721
color so this looks like a very nice


4323
11607.52 --> 5.08
loading skeleton right now great and I


4324
11611 --> 3.04
think the same will be true in our


4325
11612.6 --> 4.04
favorite


4326
11614.04 --> 4.8
boards great so let's go back inside of


4327
11616.64 --> 5.52
board list now and let's change this to


4328
11618.84 --> 6.08
be only if data is undefined so only


4329
11622.16 --> 5.48
while it's it's loading is that screen


4330
11624.92 --> 4.76
going to appear so when you refresh if


4331
11627.64 --> 5.28
you have a bit of a slower connection


4332
11629.68 --> 5.48
you can see how it actually displays


4333
11632.92 --> 4.08
that skeleton for a second perfect so we


4334
11635.16 --> 3.64
just created a nice way to render all of


4335
11637 --> 4.76
our boards what we're going to do next


4336
11638.8 --> 5.32
is we're going to add the functionality


4337
11641.76 --> 4.24
uh to load uh well first we're going to


4338
11644.12 --> 4.48
actually do all the actions right to


4339
11646 --> 4.68
rename them to delete them and to add


4340
11648.6 --> 4.36
them to our favorites and only when we


4341
11650.68 --> 5.24
add them to our favorites we're going to


4342
11652.96 --> 4.8
go ahead uh and figure out the favorite


4343
11655.92 --> 4.319
board Tab and how we're going to render


4344
11657.76 --> 4.479
only those and then we're going to wrap


4345
11660.239 --> 4.04
it up with search which is going to be


4346
11662.239 --> 3.561
very very simple we can do it already


4347
11664.279 --> 4.641
but I just want to go ahead and finish


4348
11665.8 --> 6.16
the actions for our cards great great


4349
11668.92 --> 5.76
job so let's go ahead and let's create


4350
11671.96 --> 5.519
the actions for each board so that we


4351
11674.68 --> 6.32
can copy the board ID delete the board


4352
11677.479 --> 5.441
and also rename the board in order to do


4353
11681 --> 5.68
that I want to add an element from


4354
11682.92 --> 9.12
shaten UI called drop down menu so let's


4355
11686.68 --> 7.52
go ahead and run MPX shat cn- UI at


4356
11692.04 --> 4.64
latest add


4357
11694.2 --> 7.239
dropdown-menu this is how it looks like


4358
11696.68 --> 7.719
in one line so go ahead and add this and


4359
11701.439 --> 5.92
while we are here we can also add an


4360
11704.399 --> 4.641
alert dialogue component and we can also


4361
11707.359 --> 4.12
import the package we're going to need


4362
11709.04 --> 4.239
so let's do that as well so let's also


4363
11711.479 --> 5
add alert


4364
11713.279 --> 5.801
dialogue which we are going to need and


4365
11716.479 --> 6.201
then we're going to install to so npm


4366
11719.08 --> 5.52
install two or tand I'm not sure how to


4367
11722.68 --> 4.88
pronounce that so make sure you have


4368
11724.6 --> 7.24
drop down menu alert dialogue and


4369
11727.56 --> 6.08
tand and then let's do npm uh actually I


4370
11731.84 --> 5.96
think I already have it running let's


4371
11733.64 --> 6.599
see npx convex Dev and npm run de great


4372
11737.8 --> 4.439
I have both of those running so I can


4373
11740.239 --> 5.321
just refresh this to confirm that there


4374
11742.239 --> 6.521
we we go so now let's go ahead inside of


4375
11745.56 --> 6.759
our app folder inside of the dashboard


4376
11748.76 --> 6.84
inside of our components I want to go


4377
11752.319 --> 5.801
ahead and uh actually not here because


4378
11755.6 --> 6.04
these actions are going to be reused in


4379
11758.12 --> 5.96
the board screen as well so let's create


4380
11761.64 --> 5.04
them in our Global components folder


4381
11764.08 --> 6.6
right here so inside of here go ahead


4382
11766.68 --> 6.2
and create actions. ESX let's mark this


4383
11770.68 --> 4.32
as use client and let's create an


4384
11772.88 --> 6.28
interface action


4385
11775 --> 6.279
props actions props like this and let's


4386
11779.16 --> 5.44
go ahead and Define the children to be


4387
11781.279 --> 5.761
react react node let's add an optional


4388
11784.6 --> 5.52
side which is going to be drop- down


4389
11787.04 --> 4.84
menu uh content props which you can


4390
11790.12 --> 4.76
import from radx


4391
11791.88 --> 5.599
UI and let's go ahead and let's get the


4392
11794.88 --> 4.96
side prop and let's go ahead and do the


4393
11797.479 --> 4.401
same thing for the side offset and just


4394
11799.84 --> 4.519
pick the side offset prop so you can


4395
11801.88 --> 4.92
import this from radx because we added


4396
11804.359 --> 4.441
that using shat nuui so we are only


4397
11806.8 --> 4.12
importing the props from radx we will


4398
11808.8 --> 4.639
not be using the actual component from


4399
11810.92 --> 5.96
radic for that we're going to use UI


4400
11813.439 --> 6.04
components drop down menu and now let's


4401
11816.88 --> 5.16
go ahead and give it an ID of string and


4402
11819.479 --> 5.161
let's give it a title of


4403
11822.04 --> 5.56
string great and let's go ahead and


4404
11824.64 --> 6.559
create export const


4405
11827.6 --> 5.56
actions let's destructure these


4406
11831.199 --> 4.921
props


4407
11833.16 --> 8.239
let's extract all of them so children


4408
11836.12 --> 9.72
side side offset ID and title and let's


4409
11841.399 --> 4.441
very simply just return a div saying


4410
11846.399 --> 6.481
actions and now let's go ahead inside of


4411
11850 --> 6.96
our app folder dashboard components


4412
11852.88 --> 6.519
boardcard index. TSX right here and


4413
11856.96 --> 4.479
we're going to go ahead and put this


4414
11859.399 --> 4
just below the overlay we're going to


4415
11861.439 --> 4.401
add our Act action component from


4416
11863.399 --> 4.441
components actions so this is how I


4417
11865.84 --> 4.599
imported that you can see that I put it


4418
11867.84 --> 4.559
in our Global reusable actions folder


4419
11870.439 --> 4.401
because we're going to use this twice in


4420
11872.399 --> 6.321
the project and let's go ahead and pass


4421
11874.84 --> 6.96
in the id id for this board the title is


4422
11878.72 --> 6.12
the title and let's also add the side to


4423
11881.8 --> 6.559
be opened on the right and we are


4424
11884.84 --> 6.519
missing the children and for that let's


4425
11888.359 --> 5.401
go ahead and do it like this we're going


4426
11891.359 --> 5.241
to pass in a button


4427
11893.76 --> 8.4
component and then inside I'm just going


4428
11896.6 --> 8.28
to write I am a button for now and now I


4429
11902.16 --> 5.159
believe this won't even be rendered


4430
11904.88 --> 5
anywhere I don't think this is even


4431
11907.319 --> 5.841
visible let's just go ahead so we have


4432
11909.88 --> 5.72
this div which says actions but I'm not


4433
11913.16 --> 3.84
sure if we should even be seeing this


4434
11915.6 --> 4.92
let's go ahead and let's give this a


4435
11917 --> 8.04
class name absolute


4436
11920.52 --> 7.16
Z50 top one one right one there we go


4437
11925.04 --> 4.72
okay so we can Vis see it that's what I


4438
11927.68 --> 5.04
just wanted I just wanted to make sure


4439
11929.76 --> 5.639
that we can see this all right so what


4440
11932.72 --> 6.599
we're going to do now is we're going to


4441
11935.399 --> 6.521
go ahead and actually render this uh


4442
11939.319 --> 4.281
children right here so this button which


4443
11941.92 --> 3.319
we are supposed to see so right now we


4444
11943.6 --> 4.32
are not seeing that we are seeing this


4445
11945.239 --> 5.441
text actions so we're going to go ahead


4446
11947.92 --> 6.24
and import everything we need from the


4447
11950.68 --> 6.799
actual component UI drop down menu but


4448
11954.16 --> 6
not from radics from our components so


4449
11957.479 --> 8.521
we're going to need the drop- down menu


4450
11960.16 --> 8.96
the drop down um drop down menu trigger


4451
11966 --> 4.52
the drop- down menu content and drop


4452
11969.12 --> 6.44
down


4453
11970.52 --> 8.04
menu item and also drop down menu


4454
11975.56 --> 7.12
separator so let's wrap this entire


4455
11978.56 --> 6.52
thing inside of a drop- down menu


4456
11982.68 --> 5.679
and then let's add a drop-


4457
11985.08 --> 5.119
down trigger inside where we're going to


4458
11988.359 --> 4
just render the children and let's give


4459
11990.199 --> 5.28
it an as child props so it actually


4460
11992.359 --> 5.04
shows that button over there uh and we


4461
11995.479 --> 4.081
can leave it like this for now and now


4462
11997.399 --> 4.121
what we have to do is actually style the


4463
11999.56 --> 4.56
children which we are passing inside of


4464
12001.52 --> 3.959
the actions because uh this is where


4465
12004.12 --> 3.6
that is going to be rendered and as you


4466
12005.479 --> 5.401
can see we cannot see it anywhere now


4467
12007.72 --> 5.36
but I want it to appear right here so


4468
12010.88 --> 4.12
let's go ahead and give this button some


4469
12013.08 --> 3.68
class names and before we do that let's


4470
12015 --> 4.16
simply add a little icon from Lucid


4471
12016.76 --> 5.08
react so we're going to use an icon more


4472
12019.16 --> 6.44
horizontal from Lucid react so import


4473
12021.84 --> 6.88
this icon and render it inside of this


4474
12025.6 --> 7.48
button right here let's give this one a


4475
12028.72 --> 9.2
class name of text white opacity


4476
12033.08 --> 6.6
75 on Hover opacity 100 and


4477
12037.92 --> 4.519
transition


4478
12039.68 --> 5.599
opacity and I believe this still won't


4479
12042.439 --> 4.92
be visible because we have to style our


4480
12045.279 --> 4.721
top button here so let's give this


4481
12047.359 --> 6.521
button a class name of


4482
12050 --> 7.239
absolute top one right


4483
12053.88 --> 8.08
one opacity


4484
12057.239 --> 10.801
zero and group hover opacity


4485
12061.96 --> 9.439
100 transition opacity PX 3 py2 and


4486
12068.04 --> 5.6
outline none and now let's check that


4487
12071.399 --> 5.241
out and there we go you can see how we


4488
12073.64 --> 5.639
now have an appearing more horizontal


4489
12076.64 --> 5.24
icon button right here of course when I


4490
12079.279 --> 5.441
click on this I'm redirected to a


4491
12081.88 --> 5.08
404 uh we're going to use prevent


4492
12084.72 --> 4.32
default and stop propagation to fix that


4493
12086.96 --> 4.2
in a second but once you hover on


4494
12089.04 --> 3.8
individual card you should be seeing


4495
12091.16 --> 4.319
these three dots and when you hover over


4496
12092.84 --> 5.639
them directly they should be even more


4497
12095.479 --> 5.521
visible because we change their opacity


4498
12098.479 --> 4.8
great so we are done with this part and


4499
12101 --> 5.16
now we can focus exclusively in the


4500
12103.279 --> 5.681
actions here so let's go ahead and let's


4501
12106.16 --> 5.36
create the drop- down menu content which


4502
12108.96 --> 4.239
will open once we click on this so drop


4503
12111.52 --> 4.839
down menu


4504
12113.199 --> 6.16
content like that and let's go ahead and


4505
12116.359 --> 6.721
give it a side of side let's give it a


4506
12119.359 --> 8
side offset of side offset let's give it


4507
12123.08 --> 6.8
a class name of width 60 like that and I


4508
12127.359 --> 4.761
want to add on click here and guess the


4509
12129.88 --> 4.24
event and anywhere where I click in side


4510
12132.12 --> 4.68
I'm going to stop propagation so that


4511
12134.12 --> 4.359
I'm not redirected uh once I click on


4512
12136.8 --> 4.439
this part of the


4513
12138.479 --> 4.92
component and now inside let's add a


4514
12141.239 --> 6.281
drop down menu item


4515
12143.399 --> 6.481
here and in here I want to render a link


4516
12147.52 --> 4.719
to icon from Lucid react so just make


4517
12149.88 --> 5.519
sure you add this import I'm going to


4518
12152.239 --> 5.601
add it here let's give this link to Icon


4519
12155.399 --> 5.681
a class name of height four width four


4520
12157.84 --> 5
and margin right of Two and a text is


4521
12161.08 --> 4.279
going to be copyed board


4522
12162.84 --> 5.639
link and let's give the drop down menu


4523
12165.359 --> 4.12
item itself a class name of padding 3


4524
12168.479 --> 2.72
and


4525
12169.479 --> 5.201
cursor


4526
12171.199 --> 5.24
pointer so let's see if this improved


4527
12174.68 --> 4.24
anything so now when I click here there


4528
12176.439 --> 4.401
we go you can see how I have an option


4529
12178.92 --> 4.08
to copy the word link and I can click


4530
12180.84 --> 4.24
here and I can click here and I'm not


4531
12183 --> 4.8
redirected at any point unless I


4532
12185.08 --> 5.04
actually click on the uh card then I'm


4533
12187.8 --> 4.32
redirected to a 404 page but if I just


4534
12190.12 --> 3.88
go ahead and click on this little


4535
12192.12 --> 4.68
toolbar I'm not redirected and we


4536
12194 --> 4.319
achieve that by using onclick event stop


4537
12196.8 --> 3.72
propagation on the drop down menu


4538
12198.319 --> 3.92
content this is of course my solution


4539
12200.52 --> 3.36
for this if you know any better solution


4540
12202.239 --> 3.401
to stop propagation from the link feel


4541
12203.88 --> 3.519
free to use it feel free to leave a


4542
12205.64 --> 5.4
comment uh if you think there is a


4543
12207.399 --> 5.241
better way to do it uh all right and now


4544
12211.04 --> 4.359
let's actually implement this


4545
12212.64 --> 4.559
functionality so that we can copy a link


4546
12215.399 --> 4.201
since that is going to be very simple we


4547
12217.199 --> 5.761
don't need any mutations for that so


4548
12219.6 --> 6.759
const on copy link is very simply going


4549
12222.96 --> 6.08
to call the Navigator do


4550
12226.359 --> 5.721
clipboard. write


4551
12229.04 --> 5.319
text and very simply we're going to go


4552
12232.08 --> 6.6
ahead and do the


4553
12234.359 --> 8.641
following so we're going to go ahead and


4554
12238.68 --> 6.16
call window. location.


4555
12243 --> 5.84
origin


4556
12244.84 --> 5.92
slbo and then the individual ID and then


4557
12248.84 --> 3.76
we can add do then here because this is


4558
12250.76 --> 3.559
actually a promise so in here we can


4559
12252.6 --> 5.719
call our toast from


4560
12254.319 --> 7.361
soner and let's write a success link


4561
12258.319 --> 5.561
copied and let's also do a catch even


4562
12261.68 --> 6.12
though this can very rarely fail I


4563
12263.88 --> 6.72
believe failed to copy link so I


4564
12267.8 --> 5.639
imported toast from the soner package so


4565
12270.6 --> 6
just don't forget to do


4566
12273.439 --> 7.121
that uh and let's now add the uncopy


4567
12276.6 --> 5.599
link here to this drop- down menu


4568
12280.56 --> 3.52
item


4569
12282.199 --> 4.12
there we go so now I believe this should


4570
12284.08 --> 4.8
already be functional so if I copy this


4571
12286.319 --> 5.241
board link and let me paste here there


4572
12288.88 --> 5.399
we go I have a working ID and I have a


4573
12291.56 --> 4.44
tost that link has been copied if I try


4574
12294.279 --> 5.2
this one you can see that it's a


4575
12296 --> 5.279
different ID perfect so this is working


4576
12299.479 --> 5.041
what I want to do now is I want to


4577
12301.279 --> 5.12
create the delete functionality so the


4578
12304.52 --> 4.6
first thing I want to do for that is go


4579
12306.399 --> 7.481
inside of the convex folder and go in


4580
12309.12 --> 6.64
here in the individual board function so


4581
12313.88 --> 5.76
let's go ahead and do the following


4582
12315.76 --> 6.08
let's go above the create here actually


4583
12319.64 --> 4.2
let's go to the bottom here and let's do


4584
12321.84 --> 6
export const


4585
12323.84 --> 6.479
remove which is going to be a


4586
12327.84 --> 4.519
mutation did we import a mutation we


4587
12330.319 --> 4.401
have a mutation all right so that's


4588
12332.359 --> 4.84
going to be a mutation which accepts the


4589
12334.72 --> 5.759
arguments which are now just going to be


4590
12337.199 --> 5.721
ID which is a type of ID and


4591
12340.479 --> 4.88
boards then we're also going to get the


4592
12342.92 --> 5.399
Handler itself which is going to be an


4593
12345.359 --> 6
asynchronous function which has context


4594
12348.319 --> 5.281
and arguments and then in here we're


4595
12351.359 --> 6.721
going to get the identity and we're


4596
12353.6 --> 8.04
going to do await context out get user


4597
12358.08 --> 6.88
identity and let's check if there is no


4598
12361.64 --> 5.559
identity in that case throw new


4599
12364.96 --> 5.2
error


4600
12367.199 --> 6.321
unauthorized like that and then what


4601
12370.16 --> 5.52
we're going to do is wa context database


4602
12373.52 --> 4.959
delete and very simply we're going to


4603
12375.68 --> 6.12
pass in arguments. ID so we don't need


4604
12378.479 --> 6.88
to specifically say uh to delete from


4605
12381.8 --> 6.28
the boards because the ID is type of ID


4606
12385.359 --> 6.601
boards so convex knows that we are


4607
12388.08 --> 5.72
deleting uh the boards schema so for now


4608
12391.96 --> 3.92
we're just going to do it like this but


4609
12393.8 --> 5.679
I'm going to add a little to-do here


4610
12395.88 --> 5.8
later check to delete favorite relation


4611
12399.479 --> 3.96
as well so when we add favorites later


4612
12401.68 --> 3.24
we're going to have to remove that user


4613
12403.439 --> 4.561
relation as well otherwise we're going


4614
12404.92 --> 5.84
to have some bugs but this should work


4615
12408 --> 4.56
just fine for now so we can go back


4616
12410.76 --> 4.599
inside of our


4617
12412.56 --> 4.96
actions so it's located in our Global


4618
12415.359 --> 4.801
components folder right here


4619
12417.52 --> 4.759
actions and let's go ahead and let's add


4620
12420.16 --> 4.279
a another drop down menu item so I'm


4621
12422.279 --> 5.08
going to copy and paste this one and I'm


4622
12424.439 --> 5.201
going to go ahead and use the icon uh


4623
12427.359 --> 5.681
trash to


4624
12429.64 --> 4.92
here from lucid react and the text is


4625
12433.04 --> 3.319
going to be


4626
12434.56 --> 6.4
delete like


4627
12436.359 --> 8.04
that and let's go ahead and let's


4628
12440.96 --> 5.479
import I'm going to use my use API


4629
12444.399 --> 5
mutation Hook from hooks use API


4630
12446.439 --> 6
mutation here so I'm going to go ahead


4631
12449.399 --> 3.04
and extract


4632
12452.76 --> 5.719
that so const right here mutate and


4633
12456 --> 6.199
pending it's going to be use API


4634
12458.479 --> 6.081
mutation API from convex generated api.


4635
12462.199 --> 5.481
board. remove so the reason I'm calling


4636
12464.56 --> 5.48
it uh remove is because I don't want to


4637
12467.68 --> 4.759
take the reserved delete keyword in


4638
12470.04 --> 6.319
JavaScript so make sure you import the


4639
12472.439 --> 6.96
API from at/ convex generated API you


4640
12476.359 --> 5.201
can use my use API mutation or I already


4641
12479.399 --> 4.8
showed you uh you can use use mutation


4642
12481.56 --> 4.919
from convex react and then you have to


4643
12484.199 --> 5.641
write your own pending if you want to do


4644
12486.479 --> 5.76
that both will work and now we can add a


4645
12489.84 --> 4.359
function const on the


4646
12492.239 --> 3
delete which is very simply going to


4647
12494.199 --> 4.521
call


4648
12495.239 --> 7.681
mutate passing the ID which we have PLL


4649
12498.72 --> 9
do then tost success board


4650
12502.92 --> 6.08
deleted and do catch tost error fail to


4651
12507.72 --> 4.92
delete


4652
12509 --> 6.64
board like that so let's go ahead and


4653
12512.64 --> 4.799
copy this and let's add it instead of


4654
12515.64 --> 4.08
this one since we copied that from the


4655
12517.439 --> 4.281
one above so let's change it to a proper


4656
12519.72 --> 4.36
key so now it should should immediately


4657
12521.72 --> 4.32
be deleted once I click here there we go


4658
12524.08 --> 4.08
board has been immediately deleted you


4659
12526.04 --> 3.92
can see how it is working what I want to


4660
12528.16 --> 4.119
do now is I want to add a little


4661
12529.96 --> 4.16
confirmation model before this happens


4662
12532.279 --> 4.481
because you can see that it's very easy


4663
12534.12 --> 5.48
to make a mistake and it happens really


4664
12536.76 --> 4.559
fast and there is no undo so I'm going


4665
12539.6 --> 3.92
to go ahead and create a reusable


4666
12541.319 --> 4.16
component called confirm model which we


4667
12543.52 --> 4.24
can build because we have the alert


4668
12545.479 --> 4.201
dialogue so let's go ahead inside of the


4669
12547.76 --> 4.639
components folder and let's create a new


4670
12549.68 --> 5.24
file confirm model .


4671
12552.399 --> 5.04
DSX let's import use


4672
12554.92 --> 4.08
client and let's go ahead and import


4673
12557.439 --> 5.521
everything we need


4674
12559 --> 6.479
from components UI alert dialogue and


4675
12562.96 --> 6.399
that's going to be alert dialogue itself


4676
12565.479 --> 8.72
alert dialogue action alert dialogue


4677
12569.359 --> 7.401
cancel alert dialogue content


4678
12574.199 --> 4.681
description we're also going to need the


4679
12576.76 --> 6.28
footer the


4680
12578.88 --> 8.88
header the title


4681
12583.04 --> 6.92
whoops so alert dialogue title and alert


4682
12587.76 --> 4.76
dialogue trigger so all of these


4683
12589.96 --> 4.88
components here are needed to build this


4684
12592.52 --> 5.44
let's create an interface confirm model


4685
12594.84 --> 5.2
props to have children which in our case


4686
12597.96 --> 4.319
is going to be our delete drop- down


4687
12600.04 --> 4.88
menu item so that's going to be react


4688
12602.279 --> 5.04
react node then we're going to go ahead


4689
12604.92 --> 5.24
and have an unconfirm function which is


4690
12607.319 --> 4.281
going to be an empty void disable prop


4691
12610.16 --> 3.239
in case we are doing


4692
12611.6 --> 4.56
in case we want to disable that from the


4693
12613.399 --> 5.481
outside a header to display a different


4694
12616.16 --> 4.52
message if we want to and


4695
12618.88 --> 4.479
description which is going to be


4696
12620.68 --> 4.599
optional to display a more specific


4697
12623.359 --> 3.321
message if we want to use that for


4698
12625.279 --> 3.2
something else so we don't need to use


4699
12626.68 --> 3.88
this for deletion we can use this for


4700
12628.479 --> 5.76
whatever we want to confirm and then


4701
12630.56 --> 6.56
let's export const confirm a model


4702
12634.239 --> 5.321
here let's go ahead and extract this


4703
12637.12 --> 6.64
props so confirm model


4704
12639.56 --> 6.36
props children on confirm disabled


4705
12643.76 --> 4.84
header and


4706
12645.92 --> 4.72
description and then simply inside we're


4707
12648.6 --> 6.24
going to go ahead and return the alert


4708
12650.64 --> 6.559
dialogue then the alert dialogue


4709
12654.84 --> 4.559
trigger which is simply going to render


4710
12657.199 --> 4.521
the children and have the as child


4711
12659.399 --> 4.161
property and then we can use the alert


4712
12661.72 --> 4.8
dialogue


4713
12663.56 --> 5.28
content which needs to be closed here


4714
12666.52 --> 5.56
and inside let's add the alert


4715
12668.84 --> 4.399
dialogue uh header


4716
12672.08 --> 4.6
alert


4717
12673.239 --> 7.96
dialogue title and in here we're going


4718
12676.68 --> 7.84
to render our header prop like that and


4719
12681.199 --> 6.481
then just outside of the title let's add


4720
12684.52 --> 5.679
alert dialogue description in where


4721
12687.68 --> 5.799
we're going to load the description prop


4722
12690.199 --> 6.441
like that and then outside of the header


4723
12693.479 --> 5.681
let's add a alert dialog footer


4724
12696.64 --> 5.799
component and in here very simply we're


4725
12699.16 --> 6.119
going to have the alert dialogue cancel


4726
12702.439 --> 5.241
which is just going to say cancel and


4727
12705.279 --> 3.681
below that we're going to have the alert


4728
12707.68 --> 4.48
dialogue


4729
12708.96 --> 5.8
action which is going to say continue or


4730
12712.16 --> 6
confirm whatever makes more sense to you


4731
12714.76 --> 5.84
perhaps confirm would be better and now


4732
12718.16 --> 5.44
let's go ahead and let's give this a


4733
12720.6 --> 5.719
disabled prop of disabled and let's go


4734
12723.6 --> 4.679
ahead and give it an on click on handle


4735
12726.319 --> 3.88
confirm so we're going to build handle


4736
12728.279 --> 4.321
confirm now which is going to be very


4737
12730.199 --> 4.641
simple so H handle


4738
12732.6 --> 6.12
confirm is very simply going to call the


4739
12734.84 --> 6.76
on confirm option like that there we go


4740
12738.72 --> 5.28
that's it that is our reusable uh


4741
12741.6 --> 4.839
confirm model component so what we can


4742
12744 --> 5.239
do now is we can go back inside of our


4743
12746.439 --> 5.76
actions component we can go ahead and


4744
12749.239 --> 6.841
import this so I'm going to


4745
12752.199 --> 6.881
import confirm model from confirm model


4746
12756.08 --> 5.119
or/ components confirm model however you


4747
12759.08 --> 5.319
prefer it and then you can can very


4748
12761.199 --> 4.321
simply just wrap the entire drop down


4749
12764.399 --> 5.521
menu


4750
12765.52 --> 8
item in confirm model like


4751
12769.92 --> 7.319
that I believe that we can do it like


4752
12773.52 --> 7.32
this uh and what we have to do now is we


4753
12777.239 --> 6.841
have to pass in uh the title sorry the


4754
12780.84 --> 6.88
header which is going to be delete board


4755
12784.08 --> 6.52
question mark we need the description


4756
12787.72 --> 7.28
which is going to be this will delete


4757
12790.6 --> 4.4
the the board and all of its


4758
12795.04 --> 5.04
content and let's also give it a


4759
12797.319 --> 6.201
disabled prop of pending and let's give


4760
12800.08 --> 6.92
it on confirm to be our on delete


4761
12803.52 --> 7.28
function which we're using just below


4762
12807 --> 5.84
like that and here's what I want to do


4763
12810.8 --> 4.32
so I don't want to use the drop down


4764
12812.84 --> 5.68
menu item because I believe this will


4765
12815.12 --> 6.44
now not exactly work so let me just uh


4766
12818.52 --> 5.759
cons log comment out this drop down menu


4767
12821.56 --> 6
item on click and now if I click on


4768
12824.279 --> 5.92
delete you can see how the model opens


4769
12827.56 --> 6.24
and then closes very fast so we cannot


4770
12830.199 --> 7.361
use the drop down menu item uh as a


4771
12833.8 --> 4.639
child of the alert dialogues so instead


4772
12837.56 --> 2.759
what we're going to do is we're going to


4773
12838.439 --> 4.441
use the normal button here so you can


4774
12840.319 --> 4.08
just import button from do/ UI button or


4775
12842.88 --> 5.04
components UI


4776
12844.399 --> 7.561
button let's go down here and simply use


4777
12847.92 --> 6.08
that as simple as that but I believe we


4778
12851.96 --> 3.76
have to style this button a bit so let's


4779
12854 --> 5.199
give it a variant of


4780
12855.72 --> 9
ghost and let's go ahead uh and give


4781
12859.199 --> 8.721
this a text small a full width justify


4782
12864.72 --> 5.519
start and font normal so it doesn't


4783
12867.92 --> 4.08
differ from our drop down menu item


4784
12870.239 --> 3.601
component and I think that now we're


4785
12872 --> 3.84
going to have a nice confirmation flow


4786
12873.84 --> 3.92
so there we go the button doesn't really


4787
12875.84 --> 3.359
differ from the one above but when I


4788
12877.76 --> 3.439
click here you can see how I have a


4789
12879.199 --> 4.721
confirmation if I cancel nothing happens


4790
12881.199 --> 5.24
but if I click confirm then the board is


4791
12883.92 --> 5.439
deleted perfect so we just wrapped up


4792
12886.439 --> 5.241
the confirmation model uh now we have to


4793
12889.359 --> 3.88
do a similar thing but for the last


4794
12891.68 --> 3.24
option inside of these actions which is


4795
12893.239 --> 4.881
going to be the option to rename the


4796
12894.92 --> 6.76
board to something


4797
12898.12 --> 7.76
else so we can do that by first going


4798
12901.68 --> 6.04
back inside of convex board right here


4799
12905.88 --> 4.92
and we're going to go ahead and create a


4800
12907.72 --> 6.2
new method called update so let's write


4801
12910.8 --> 6.96
export const update to be a


4802
12913.92 --> 8.84
mutation let's get the arguments to take


4803
12917.76 --> 6.92
the ID which is going to be v. ID boards


4804
12922.76 --> 5.519
and we are also going to take in a new


4805
12924.68 --> 5.92
title which is going to be v.


4806
12928.279 --> 4.16
string and then let's go ahead and write


4807
12930.6 --> 4.48
a Handler which is an asynchronous


4808
12932.439 --> 4.241
function which has uh the context and


4809
12935.08 --> 4.44
the


4810
12936.68 --> 5.719
arguments so in here let's go ahead and


4811
12939.52 --> 4.44
let's get the title using arguments.


4812
12942.399 --> 3.761
tile.


4813
12943.96 --> 5.8
trim let's go ahead and check if there


4814
12946.16 --> 6.36
is no title we're going to throw new


4815
12949.76 --> 4.84
error and we're simply going to say


4816
12952.52 --> 3.919
title is


4817
12954.6 --> 3.639
required and then we're going to check


4818
12956.439 --> 5.721
if title


4819
12958.239 --> 7.441
length is more than 60 then we're going


4820
12962.16 --> 6.36
to throw new error title cannot be


4821
12965.68 --> 5.2
longer than 60


4822
12968.52 --> 4.6
characters so that's what we are pring


4823
12970.88 --> 4.16
it so that the user cannot pass empty


4824
12973.12 --> 4.56
whites space as


4825
12975.04 --> 6.96
characters uh and let's also get our


4826
12977.68 --> 6.519
identity so identity is await context


4827
12982 --> 5.92
out get user


4828
12984.199 --> 3.721
identity if there is no


4829
12988.239 --> 7.12
identity let's go ahead and do uh throw


4830
12992.64 --> 6.24
new error


4831
12995.359 --> 6.84
unauthorized all right and now let's go


4832
12998.88 --> 7.28
ahead and simply do to const board to be


4833
13002.199 --> 6.361
await context database patch and in here


4834
13006.16 --> 3.96
we're going to pass in the arguments ID


4835
13008.56 --> 3.719
and then we're very simply going to


4836
13010.12 --> 3.319
update the title using the arguments and


4837
13012.279 --> 3.92
the new


4838
13013.439 --> 5.601
title and you can return the board


4839
13016.199 --> 5.601
that's it we created our function to


4840
13019.04 --> 5.159
update the board and later we're going


4841
13021.8 --> 4.88
to go back inside of this remove and


4842
13024.199 --> 5.24
update function and we can further


4843
13026.68 --> 4.679
enhance the security of this it will be


4844
13029.439 --> 6.04
how you want it to be so if you want to


4845
13031.359 --> 5.96
allow anyone from the organization to


4846
13035.479 --> 4.121
delete the board you can check whether


4847
13037.319 --> 4.681
the identity has the matching


4848
13039.6 --> 4.52
organization or if you want to you can


4849
13042 --> 4.279
simply check if the user that created


4850
13044.12 --> 4.92
the board is the only one that can edit


4851
13046.279 --> 5.401
it and the one that can delete it or if


4852
13049.04 --> 5.239
you want even further you can modify uh


4853
13051.68 --> 4.04
so that only admins and the owners can


4854
13054.279 --> 3.361
delete that so we're going to play with


4855
13055.72 --> 5.44
that later for now I just want a very


4856
13057.64 --> 7.52
simple update and remove function it


4857
13061.16 --> 6.239
here uh okay so now what we have to do


4858
13065.16 --> 4.68
is we have to go ahead and create a hook


4859
13067.399 --> 3.441
called use rename model so this one is


4860
13069.84 --> 3.28
going to be different this is going to


4861
13070.84 --> 4.359
be a form model which I want to control


4862
13073.12 --> 4.56
in a different way more specifically I


4863
13075.199 --> 4.24
want to control it using two stand hooks


4864
13077.68 --> 4.92
so let's create a new folder in the root


4865
13079.439 --> 5.561
of our application called store and


4866
13082.6 --> 6.44
inside create use


4867
13085 --> 7.84
rename model. DS and let's go ahead and


4868
13089.04 --> 6.56
import create from


4869
13092.84 --> 5.32
suant and then let's go ahead and create


4870
13095.6 --> 2.56
default


4871
13100.279 --> 5.481
values which are going to be an empty ID


4872
13104.12 --> 4.44
and an empty


4873
13105.76 --> 4.28
title and let's create an interface I


4874
13108.56 --> 5.2
rename


4875
13110.04 --> 6.199
model is open is going to be a


4876
13113.76 --> 7.4
Boolean then we're going to have initial


4877
13116.239 --> 6.881
values to be a type of default values


4878
13121.16 --> 4.68
we're going to have on open which will


4879
13123.12 --> 5.199
accept the ID which is a type of string


4880
13125.84 --> 4.68
and a title which is a type of string


4881
13128.319 --> 4
and that's going to return a void and


4882
13130.52 --> 5.16
lastly we're going to have an onclose


4883
13132.319 --> 6.841
function which is going to return a


4884
13135.68 --> 6.2
void with no props inside and now let's


4885
13139.16 --> 5.68
do export con username


4886
13141.88 --> 6.479
model to use the create let's pass in


4887
13144.84 --> 6.2
the IR rename model interface here and


4888
13148.359 --> 5.201
let's get the set in the of this double


4889
13151.04 --> 4.8
parenthesis here and let's open and


4890
13153.56 --> 4.44
immediately destructure an object inside


4891
13155.84 --> 4.8
so we can set the default is open to be


4892
13158 --> 6.08
false let's pass in the


4893
13160.64 --> 5.04
onop to get the ID and the title and


4894
13164.08 --> 3.64
that's going to go ahead and call the


4895
13165.68 --> 5.16
set function in where we're going to


4896
13167.72 --> 4.2
call is open to be true and set the


4897
13170.84 --> 5.76
initial


4898
13171.92 --> 7.319
values to ID and the title like that and


4899
13176.6 --> 4.2
then let's go ahead and let's pass in on


4900
13179.239 --> 4.601
close


4901
13180.8 --> 6.599
to call set again and very simple call


4902
13183.84 --> 6.68
the is open to false and initial values


4903
13187.399 --> 5.401
to be default values and last thing we


4904
13190.52 --> 4.44
have to pass here is the actual initial


4905
13192.8 --> 5.2
values to be default


4906
13194.96 --> 7.12
values like that so now we have control


4907
13198 --> 7.76
over our model so now what I want to do


4908
13202.08 --> 8.319
is I want to go ahead and create uh a


4909
13205.76 --> 7.24
basic model to rename uh to rename name


4910
13210.399 --> 4.361
the board so for that let's go inside of


4911
13213 --> 4.399
components and let's create a new folder


4912
13214.76 --> 4.559
called models so in here we're going to


4913
13217.399 --> 4.88
store those kind of models which are


4914
13219.319 --> 6.201
reusable throughout and let's go ahead


4915
13222.279 --> 5.12
and create rename model. bsx if you want


4916
13225.52 --> 4.2
you can also drag and drop confirm model


4917
13227.399 --> 3.441
inside but confirm model is used


4918
13229.72 --> 3.44
differently so you can see that the


4919
13230.84 --> 4.68
confirm model is used through these


4920
13233.16 --> 3.64
triggers but rename model is not going


4921
13235.52 --> 5
to be used like that it's going to be


4922
13236.8 --> 5.639
controlled with a tand store which we


4923
13240.52 --> 4.719
are going to programmatically open


4924
13242.439 --> 4.481
depending on how we need that so you


4925
13245.239 --> 4.561
know your your choice where you want to


4926
13246.92 --> 5.439
keep that so rename model is going to be


4927
13249.8 --> 4.479
a client component and let's go ahead


4928
13252.359 --> 5.08
and very quickly import everything we


4929
13254.279 --> 5.561
need from components UI


4930
13257.439 --> 6.681
dialogue so in here I'm going to add a


4931
13259.84 --> 8.08
dialogue dialogue content dialogue


4932
13264.12 --> 6.96
description dialog header dialogue close


4933
13267.92 --> 5.76
dialogue footer and dialogue


4934
13271.08 --> 5.319
title and then we're going to go ahead


4935
13273.68 --> 6.799
and do export con rename


4936
13276.399 --> 6.681
model and as opposed to how we did it in


4937
13280.479 --> 6.92
the confirm model we are going to


4938
13283.08 --> 7.319
heavily rely on our username model from


4939
13287.399 --> 5.92
store so inside of here we're going to


4940
13290.399 --> 5.161
go ahead and extract it open on close


4941
13293.319 --> 5.361
and initial


4942
13295.56 --> 6.799
values and then what we're going to do


4943
13298.68 --> 3.679
is we're going to return our our


4944
13303.239 --> 5.641
dialogue and we're going to pass in open


4945
13306 --> 5.199
to be controlled programmatically by is


4946
13308.88 --> 4.08
open and on open change is always going


4947
13311.199 --> 3.96
to call on close so that will


4948
13312.96 --> 4.6
programmatically change this one to


4949
13315.159 --> 5.721
closed and let's add the dialogue


4950
13317.56 --> 6.24
content here dialog


4951
13320.88 --> 4.68
header dialogue title which is going to


4952
13323.8 --> 4.92
say edit board


4953
13325.56 --> 6.4
title and then let's go ahead and add a


4954
13328.72 --> 3.24
dialogue description


4955
13332.68 --> 5.519
which is going to say enter a new title


4956
13335.439 --> 5.401
for this board and I'm going to leave it


4957
13338.199 --> 4.96
at this for now because here's what we


4958
13340.84 --> 4.599
have to do now we could technically just


4959
13343.159 --> 6.16
put this in the root of our layout for


4960
13345.439 --> 6.481
example the problem is in nextjs when we


4961
13349.319 --> 6.04
use programmatic control of our models


4962
13351.92 --> 6
using something like tand um that can


4963
13355.359 --> 5.561
create hydration errors so I want to


4964
13357.92 --> 5.399
show you a bit of a practice that I do


4965
13360.92 --> 5.8
so whenever I have multiple models like


4966
13363.319 --> 6.04
this I create a model provider so that I


4967
13366.72 --> 4.439
can safely add as many as I want and I


4968
13369.359 --> 4.08
don't have to repeat a specific piece of


4969
13371.159 --> 4.32
code every single time so we're going to


4970
13373.439 --> 3.641
create that as well go inside of your


4971
13375.479 --> 5.281
providers where you have the convex


4972
13377.08 --> 6.239
client provider and add a model


4973
13380.76 --> 7.479
provider this is going to be use


4974
13383.319 --> 7.681
client and let's import use effect and


4975
13388.239 --> 6.08
use state for from


4976
13391 --> 6.479
react let's import our rename model from


4977
13394.319 --> 6.321
components models rename model and


4978
13397.479 --> 7.201
Export const model


4979
13400.64 --> 7
provider and in here we are very


4980
13404.68 --> 5.04
simply going to return all of the models


4981
13407.64 --> 4.28
we are going to have so in our case this


4982
13409.72 --> 4.439
is just the rename model but I'm showing


4983
13411.92 --> 4.439
you some a practice that I usually do


4984
13414.159 --> 4.561
when I have a lot of models here which


4985
13416.359 --> 4.88
all are programmatically controlled so


4986
13418.72 --> 5.679
what I do is I create a little check


4987
13421.239 --> 6.361
here is mounted set is


4988
13424.399 --> 6.681
mounted by default false meaning that


4989
13427.6 --> 5.559
the rendering starts in server side


4990
13431.08 --> 3.239
right but this cannot be shown on server


4991
13433.159 --> 4.681
side otherwise it's going to cause a


4992
13434.319 --> 6.321
hydration error so very simply if I'm


4993
13437.84 --> 5.319
not mounted I'm not going to render any


4994
13440.64 --> 4.799
of these models but only once I get to


4995
13443.159 --> 4.08
the client side will I show them so how


4996
13445.439 --> 4.601
do we know when do we get to the client


4997
13447.239 --> 5.361
side well very easy the use effect can


4998
13450.04 --> 4.84
only be called if it's finally come to


4999
13452.6 --> 4.44
the rendering on the client side so if I


5000
13454.88 --> 4.399
just create a use effect with an empty


5001
13457.04 --> 5.08
dependency array and add set is mounted


5002
13459.279 --> 5.521
to true this will ensure that this


5003
13462.12 --> 4.92
component is only ever rendered on


5004
13464.8 --> 4.84
server side because use client doesn't


5005
13467.04 --> 5.199
mean uh client side rendering it just


5006
13469.64 --> 4.679
means that it's not a server component


5007
13472.239 --> 4
and server component is not the same


5008
13474.319 --> 4
thing as server side rendering those are


5009
13476.239 --> 4.2
two different things components which


5010
13478.319 --> 4.561
are marked as used client are still


5011
13480.439 --> 3.441
server side rendered they are just not


5012
13482.88 --> 3.479
server


5013
13483.88 --> 5.16
components but this ensures that


5014
13486.359 --> 4.92
whatever I return here will only be


5015
13489.04 --> 4.239
visible completely on the client and the


5016
13491.279 --> 4.681
only reason we do this is because if we


5017
13493.279 --> 4.841
don't it will still work but you will


5018
13495.96 --> 3.92
get some cryptic hydration errors which


5019
13498.12 --> 3.119
are going to be very hard to debug


5020
13499.88 --> 3.439
unless you do this so the reason I'm


5021
13501.239 --> 3.881
doing this inside of a model provider is


5022
13503.319 --> 4.201
so that in the future I can have as many


5023
13505.12 --> 4.159
of these types of models as I want and I


5024
13507.52 --> 4.919
can just easily add them here as to


5025
13509.279 --> 5.641
oppose to adding this logic in every one


5026
13512.439 --> 5
of my models so I can just do it once


5027
13514.92 --> 4.479
and add all of them here and then what


5028
13517.439 --> 5.681
I'm going to do is I'm going to go back


5029
13519.399 --> 5.521
inside of my app layout. DSX and just


5030
13523.12 --> 3.96
below the toaster I'm going to add model


5031
13524.92 --> 4.68
provider so make sure you add your model


5032
13527.08 --> 4.319
provider otherwise your rename model


5033
13529.6 --> 3.679
will never be rendered so make sure you


5034
13531.399 --> 4.721
added the model provider in your root


5035
13533.279 --> 5.04
layout in the app folder and now what we


5036
13536.12 --> 4.96
can do is we can call the onopen


5037
13538.319 --> 6.721
function from the use name model so


5038
13541.08 --> 7.56
let's go ahead back inside of our


5039
13545.04 --> 6.399
actions so actions from our components


5040
13548.64 --> 5.719
folder right here and let's go ahead and


5041
13551.439 --> 7.561
add that so const


5042
13554.359 --> 6.88
onop from use rename model so make sure


5043
13559 --> 3.56
you import use rename model from store


5044
13561.239 --> 4.361
use rename


5045
13562.56 --> 6.759
model and now let's go ahead and very


5046
13565.6 --> 6.32
simply find uh the third option here so


5047
13569.319 --> 4.321
I'm going to go ahead uh and copy the


5048
13571.92 --> 4.96
drop- down menu item


5049
13573.64 --> 5.04
here let's go ahead and let's paste it


5050
13576.88 --> 5.72
just below the copyboard link and this


5051
13578.68 --> 7.04
one is going to be uh


5052
13582.6 --> 5.28
rename and the icon is going to be a


5053
13585.72 --> 4.88
pencil so make sure you import the


5054
13587.88 --> 4.88
pencil from Lucid react and on click is


5055
13590.6 --> 5.12
very simply going to call an arrow


5056
13592.76 --> 5.36
function on open passing the ID of the


5057
13595.72 --> 5.559
board and the title of the board like


5058
13598.12 --> 5.279
that so right now what should happen


5059
13601.279 --> 4.521
once I click rename there we go you can


5060
13603.399 --> 4.201
see how I programmatically open up my


5061
13605.8 --> 3.679
board so you might be asking why did I


5062
13607.6 --> 4.599
go through all of this trouble why not


5063
13609.479 --> 5.201
just do the same logic as confirm model


5064
13612.199 --> 5.441
you can go with that route as well but I


5065
13614.68 --> 6.2
did had some issues with the behavior of


5066
13617.64 --> 5.759
the actual drop down menu item and drop


5067
13620.88 --> 4.479
down uh itself and how it renders and


5068
13623.399 --> 3.8
all the portals basically it all got


5069
13625.359 --> 3.84
messed up and I got some unexpected


5070
13627.199 --> 3.761
behavior and I didn't want to put that


5071
13629.199 --> 4.08
in the tutorial because I couldn't


5072
13630.96 --> 5.56
ensure that you wouldn't run into some


5073
13633.279 --> 5.04
weird issues with it so what I did was I


5074
13636.52 --> 5.4
simply switched to programmatically


5075
13638.319 --> 5.641
controlling our model using uh tand I


5076
13641.92 --> 3.92
actually do that a lot in my tutorial so


5077
13643.96 --> 3.319
it might be even more familiar for some


5078
13645.84 --> 3.399
of you if you've been watching my


5079
13647.279 --> 4.2
tutorials but you're welcome to


5080
13649.239 --> 4.12
experiment yourself uh if you want to


5081
13651.479 --> 3.96
use it the same way like I did with the


5082
13653.359 --> 4
confirm model you can try and do that


5083
13655.439 --> 4.76
just remember you cannot use drop down


5084
13657.359 --> 4.401
menu item then then you have to use the


5085
13660.199 --> 5.601
button component and if you use the


5086
13661.76 --> 7.2
button component then uh this drop down


5087
13665.8 --> 6.12
menu will not close when you click on it


5088
13668.96 --> 5.479
right so as I said you will just run


5089
13671.92 --> 4.279
into a bunch of weird little issues you


5090
13674.439 --> 3.96
can see when I click delete here it


5091
13676.199 --> 5.401
doesn't close the reason it doesn't


5092
13678.399 --> 5.441
close is because in here in the delete


5093
13681.6 --> 4.879
we use a button instead of a drop down


5094
13683.84 --> 5.08
menu item but this is all right for me


5095
13686.479 --> 5.241
because the confirm model will actually


5096
13688.92 --> 6.479
delete the entire object so then this


5097
13691.72 --> 5.559
will be closed anyway but for the rename


5098
13695.399 --> 3.601
that's not going to be true so I want it


5099
13697.279 --> 3.04
to close immediately so that's just one


5100
13699 --> 3.68
of the reasons why I switched to


5101
13700.319 --> 4.281
programmatically do this instead great


5102
13702.68 --> 4.519
so just ensure that you can open your


5103
13704.6 --> 5.44
rename model and then we can go back


5104
13707.199 --> 5.721
inside of the rename model here and


5105
13710.04 --> 6.6
let's go ahead uh and actually write the


5106
13712.92 --> 7.96
logic for it so I'm going to go ahead


5107
13716.64 --> 6.679
here and let me just add my title and


5108
13720.88 --> 4.64
set Title Here to come from UST state


5109
13723.319 --> 6.12
from react and I'm going to pass in the


5110
13725.52 --> 6.16
initial values so I need to do that uh


5111
13729.439 --> 4.84
below the username model my apologies


5112
13731.68 --> 7.28
because we need the initial values so


5113
13734.279 --> 7.321
initial values. tile like that let's add


5114
13738.96 --> 5.16
a use effect from


5115
13741.6 --> 5.719
react which are going to watch for the


5116
13744.12 --> 5.48
changes of initial values. title so if


5117
13747.319 --> 4.761
we open up a new one and we're going to


5118
13749.6 --> 4.28
do set Title Here to be the new initial


5119
13752.08 --> 4.6
values.


5120
13753.88 --> 5.08
title usually I really don't like doing


5121
13756.68 --> 4.16
this in use effect you know the less we


5122
13758.96 --> 3.519
use use effect the better but you know


5123
13760.84 --> 3.72
I'm going to make an exception for this


5124
13762.479 --> 4.72
Edge case so just make sure you have use


5125
13764.56 --> 5.32
effect and new state imported from react


5126
13767.199 --> 5.401
I'm going to move that here to the top


5127
13769.88 --> 5.88
all right now that we have that uh let's


5128
13772.6 --> 5.28
go ahead and let's add Con on submit


5129
13775.76 --> 6.08
here to just be an empty Arrow function


5130
13777.88 --> 6.359
for now and and now let's go ahead uh


5131
13781.84 --> 5.28
just below our dialogue description


5132
13784.239 --> 5.721
let's add our form element and let's add


5133
13787.12 --> 4.8
our input from do /ui input so we


5134
13789.96 --> 4.72
already have this component we've used


5135
13791.92 --> 6
it for our search component so make sure


5136
13794.68 --> 5.08
to add the input component here and


5137
13797.92 --> 4.08
let's go ahead and give it a disabled


5138
13799.76 --> 5.36
prop to be false for now we're going to


5139
13802 --> 6.76
change that later to our pending State


5140
13805.12 --> 6.159
let's give it a uh Native required prop


5141
13808.76 --> 4.04
we can also give it a max length of 60


5142
13811.279 --> 4.281
because remember we do that on the back


5143
13812.8 --> 5.84
end as well let's give it a value of


5144
13815.56 --> 5.24
title let's give it on change to get the


5145
13818.64 --> 7.24
event and called set title of event


5146
13820.8 --> 9.519
Target value and a placeholder of board


5147
13825.88 --> 8.16
title like that and then outside of the


5148
13830.319 --> 6.561
form itself let's add a dialogue putter


5149
13834.04 --> 5.359
component my apologies inside of the


5150
13836.88 --> 4.599
form like that so in make sure it's


5151
13839.399 --> 5.441
inside of the form we're going to go


5152
13841.479 --> 5.121
ahead and add a dialogue close component


5153
13844.84 --> 4.96
which will simply say


5154
13846.6 --> 5.36
cancel and let's make sure this is as


5155
13849.8 --> 5.24
child because we're going to use a


5156
13851.96 --> 5.199
native button from shat sorry not native


5157
13855.04 --> 3.92
the shaten button so just make sure you


5158
13857.159 --> 3.961
add this


5159
13858.96 --> 4.64
import like


5160
13861.12 --> 4.359
that and let's go ahead and style it a


5161
13863.6 --> 3.719
bit by giving it a type of button which


5162
13865.479 --> 5.041
is important so it doesn't submit the


5163
13867.319 --> 5.481
form and the variant of out line and


5164
13870.52 --> 4.04
then we're going to have a dialogue uh


5165
13872.8 --> 5.359
we don't need a another one we just need


5166
13874.56 --> 6.24
a button which will say save this one is


5167
13878.159 --> 4.2
going to have disabled of false for now


5168
13880.8 --> 5.12
which we're going to change the pending


5169
13882.359 --> 6.12
and a type is going to be submit so now


5170
13885.92 --> 4.96
if I try and click on one of this I


5171
13888.479 --> 4.84
should be seeing Untitled right here and


5172
13890.88 --> 5.08
let's just uh give a little space in


5173
13893.319 --> 4.321
between these two buttons here so I


5174
13895.96 --> 4.08
believe we can go to directly to the


5175
13897.64 --> 4.24
form here and and let's go ahead and


5176
13900.04 --> 4.319
give it


5177
13901.88 --> 4.24
onsubmit to our onsubmit which is an


5178
13904.359 --> 4.88
empty Arrow function and let's give it a


5179
13906.12 --> 3.119
class name of space


5180
13911.56 --> 6.24
y4 like that I think this should already


5181
13914.56 --> 5.32
be better there we go great so we have


5182
13917.8 --> 4.479
that and I believe this will now be a


5183
13919.88 --> 5.76
controlled component which is working


5184
13922.279 --> 5.321
perfect so what I want to do now is I


5185
13925.64 --> 4.48
want to actually implement the onsubmit


5186
13927.6 --> 5.32
function in order to do that I'm going


5187
13930.12 --> 5.56
to go ahead and call my use API mutation


5188
13932.92 --> 5.12
hook so hooks use API mutation and I'm


5189
13935.68 --> 4.04
going to pass in the API from convex


5190
13938.04 --> 7.239
generated


5191
13939.72 --> 6.759
API board do update like that from here


5192
13945.279 --> 2.281
I'm going to be able to the structure


5193
13946.479 --> 4.361
mutate and


5194
13947.56 --> 7.24
bending and then I'm going to go inside


5195
13950.84 --> 6.439
of my onsubmit function in here let's go


5196
13954.8 --> 6
ahead and let's properly mark this as


5197
13957.279 --> 6.681
form event from react so import form


5198
13960.8 --> 6.2
event from react and it's going to


5199
13963.96 --> 6.319
handle an HTML form


5200
13967 --> 6.319
element and then in here we're going to


5201
13970.279 --> 5.721
have an


5202
13973.319 --> 5.801
event did I do this


5203
13976 --> 6.319
correctly onsubmit is a form oh it's not


5204
13979.12 --> 7.64
a form event it's a form event


5205
13982.319 --> 7.681
handler my apologies form event handler


5206
13986.76 --> 7.76
and then we can do event prevent def F


5207
13990 --> 7.319
here and then let's go ahead and call


5208
13994.52 --> 4.12
mutate and let's pass in the ID to be


5209
13997.319 --> 3.96
initial


5210
13998.64 --> 4.92
values. ID and title is very simply


5211
14001.279 --> 5.281
going to be the new title from the state


5212
14003.56 --> 5.759
controlled and let's add then


5213
14006.56 --> 6.12
here and let's call


5214
14009.319 --> 5.401
toast from soner so make sure you import


5215
14012.68 --> 5.719
this I'm going to move it here with the


5216
14014.72 --> 5.2
Global Imports so toast. success is


5217
14018.399 --> 2.88
going to be


5218
14019.92 --> 3.64
uh board


5219
14021.279 --> 3.721
renamed and since we programmatically


5220
14023.56 --> 3.32
opened this we also have to


5221
14025 --> 5.439
programmatically close it so we're going


5222
14026.88 --> 6.04
to call on close here and let's call do


5223
14030.439 --> 3.72
catch here which will very simply just


5224
14032.92 --> 6.359
toast the


5225
14034.159 --> 8.601
error failed to rename


5226
14039.279 --> 5.241
board like that so now I believe this


5227
14042.76 --> 3.439
should be it make sure you have is open


5228
14044.52 --> 4.52
on close and initial values from


5229
14046.199 --> 6.481
username model usually when I work with


5230
14049.04 --> 5.92
sand I like to do this state state but I


5231
14052.68 --> 4.679
think I don't have to do that I I I


5232
14054.96 --> 3.88
think I confused the docs somewhere


5233
14057.359 --> 3.521
reading that I have to do that for some


5234
14058.84 --> 3.76
shallow updates or something I'm not


5235
14060.88 --> 3.96
sure if you know in the comments whether


5236
14062.6 --> 4.08
I have to do this it seems to work just


5237
14064.84 --> 4.8
fine without it I think that's just


5238
14066.68 --> 5.4
default right I guess uh oh yeah and we


5239
14069.64 --> 4.04
also have the pending here so let's make


5240
14072.08 --> 4
sure we use this


5241
14073.68 --> 5.16
pending so I'm going to use the pending


5242
14076.08 --> 7.72
to disable the input and to disable


5243
14078.84 --> 8.519
disable the save button so now if I try


5244
14083.8 --> 6.599
and rename this there we go it is


5245
14087.359 --> 5.521
immediately renamed if I go ahead and


5246
14090.399 --> 4.281
change this there we go it is


5247
14092.88 --> 4.599
immediately renamed let's just confirm


5248
14094.68 --> 5.599
in our database that that is also


5249
14097.479 --> 4.92
working where are my names there we go


5250
14100.279 --> 4.761
title rename change this Untitled


5251
14102.399 --> 5.201
Untitled so if I go ahead here and


5252
14105.04 --> 5.199
rename this one to one two 3 it's


5253
14107.6 --> 5.32
immediately updated right here let's go


5254
14110.239 --> 5.681
ahead and try the delete one more time


5255
14112.92 --> 5.439
that is working as well perfect so we


5256
14115.92 --> 5.439
wrapped up all of the actions here the


5257
14118.359 --> 5.401
copy is working the rename is working


5258
14121.359 --> 4.281
and our delete is working as well


5259
14123.76 --> 3.96
perfect what's left is to create the


5260
14125.64 --> 5.28
favorite functionality and then we can


5261
14127.72 --> 5.599
go ahead and Implement uh the additional


5262
14130.92 --> 5.479
logic to query by favorites into to


5263
14133.319 --> 5.681
query by search great great


5264
14136.399 --> 5.241
job so now let's go ahead and let's


5265
14139 --> 4.68
implement the favoriting functionalities


5266
14141.64 --> 5.799
right now this button does nothing in


5267
14143.68 --> 6.16
fact it will redirect us to a404 page so


5268
14147.439 --> 6
the first thing I want to do is go


5269
14149.84 --> 5.24
inside of convex and go inside of schema


5270
14153.439 --> 4.04
right here and in here we're going to


5271
14155.08 --> 5.76
extend our schema so that we also have a


5272
14157.479 --> 7.241
user favorites table so let's go ahead


5273
14160.84 --> 6.08
and create a new table called user


5274
14164.72 --> 5.32
favorites and inside of here we're going


5275
14166.92 --> 4.12
to use Define table


5276
14170.04 --> 3.399
and we're going to pass in the


5277
14171.04 --> 5.239
organization ID for the favorites to be


5278
14173.439 --> 5.321
v. string we're going to pass in the


5279
14176.279 --> 5.16
user ID which favor it which is also a


5280
14178.76 --> 5.32
v. string and we're also going to pass


5281
14181.439 --> 5.521
in the board ID which is going to be v.


5282
14184.08 --> 5.52
ID boards because we have that relation


5283
14186.96 --> 5.04
right here above and now let's go ahead


5284
14189.6 --> 4.28
and add a couple of indexes here so


5285
14192 --> 4.279
we're going to use a very simple by


5286
14193.88 --> 5.559
board index which is going to use the


5287
14196.279 --> 8.08
board ID field then we're going to go


5288
14199.439 --> 6.88
ahead and add a bu user and


5289
14204.359 --> 3.561
organization we're going to go ahead and


5290
14206.319 --> 4.241
add the user ID field and the


5291
14207.92 --> 6.6
organization ID field then we're going


5292
14210.56 --> 6.679
to go ahead and have an index of by


5293
14214.52 --> 6.16
user and by the


5294
14217.239 --> 6.881
board so let's add the user ID and the


5295
14220.68 --> 6.24
board ID and last one is going to be an


5296
14224.12 --> 5.079
index by user


5297
14226.92 --> 4.559
board organization


5298
14229.199 --> 7.08
so let's add user


5299
14231.479 --> 6.521
ID board ID and organization ID so we're


5300
14236.279 --> 3.401
going to later check whether we need all


5301
14238 --> 5.8
of these indexes I might have gotten


5302
14239.68 --> 6
ahead of myself here so basically uh the


5303
14243.8 --> 5.72
way convex works is that it kind of


5304
14245.68 --> 5.84
allows you to do both SQL and no SQL


5305
14249.52 --> 6.08
kind of schema so you technically could


5306
14251.52 --> 8.32
have made you know uh favored


5307
14255.6 --> 7.12
users and add and make this a do array


5308
14259.84 --> 7.16
of v. string which would represent


5309
14262.72 --> 7.519
something like an array of user ID like


5310
14267 --> 5.239
that the problem is um that is not


5311
14270.239 --> 4.521
exactly scalable right and they


5312
14272.239 --> 4.721
themselves don't recommend doing that if


5313
14274.76 --> 5.8
you have more than you know a limited


5314
14276.96 --> 5.8
number of objects inside of an array so


5315
14280.56 --> 5.12
the proper way to do that is how you


5316
14282.76 --> 4.92
would do it in a SQL relational database


5317
14285.68 --> 4.679
which is that you would create a


5318
14287.68 --> 4.88
connecting table between the user and


5319
14290.359 --> 3.721
the boards we're going to call this user


5320
14292.56 --> 3.52
favorites we could have also called it


5321
14294.08 --> 4
user boards but I think it just makes


5322
14296.08 --> 3.92
more sense because these are favorites


5323
14298.08 --> 4.04
and inside we have all the necessary


5324
14300 --> 4.8
information we need to later check


5325
14302.12 --> 6
whether a board has been favored or to


5326
14304.8 --> 6.479
load or favorite boards great so now


5327
14308.12 --> 6.079
what I want to do is I want to go ahead


5328
14311.279 --> 5.321
inside of well first let's check if this


5329
14314.199 --> 5.12
is okay so go inside of the terminal


5330
14316.6 --> 5.24
where you are running npx convex Dev and


5331
14319.319 --> 4.96
just confirm that once you save this it


5332
14321.84 --> 5.319
says preparing functions and then convex


5333
14324.279 --> 7.16
functions are ready and you can always


5334
14327.159 --> 6.401
go inside of here and let's uh check our


5335
14331.439 --> 4.641
schema again and now we have user


5336
14333.56 --> 5.56
favorites here so if I show schema there


5337
14336.08 --> 5.6
we go we have user favorites right here


5338
14339.12 --> 5.039
perfect so now let's go ahead and let's


5339
14341.68 --> 4
create some functions to add something


5340
14344.159 --> 3.2
to the favorites so I'm going to go


5341
14345.68 --> 4.96
inside of convex and I'm going to go


5342
14347.359 --> 6.401
inside of an individual board right here


5343
14350.64 --> 5.12
so let's go ahead and do the


5344
14353.76 --> 5.8
following let's go ahead and write


5345
14355.76 --> 6.88
export con favorite to be a


5346
14359.56 --> 5.56
mutation which will accept arguments


5347
14362.64 --> 4.679
which are going to be an ID of the board


5348
14365.12 --> 5.159
we are trying to favorite which is a


5349
14367.319 --> 4.761
type of VI ID boards then it's going to


5350
14370.279 --> 5.721
have an organization ID which is a type


5351
14372.08 --> 5.96
of VI ID uh sorry v. string and we're


5352
14376 --> 5.8
also going to have a Handler function


5353
14378.04 --> 6.6
which will have the context and the


5354
14381.8 --> 5.76
arguments so first things first let's go


5355
14384.64 --> 6.92
ahead and let's check if we have the


5356
14387.56 --> 6
identity so context sorry await context


5357
14391.56 --> 4.839
out get user


5358
14393.56 --> 5.4
identity if we don't have


5359
14396.399 --> 5.681
identity we can immediately go ahead and


5360
14398.96 --> 4.92
break this function by throwing an error


5361
14402.08 --> 4.44
an


5362
14403.88 --> 5.599
authorized now let's go ahead and try


5363
14406.52 --> 5.919
and fetch the board where trying to


5364
14409.479 --> 5.281
favor it so const board is going to be a


5365
14412.439 --> 4.04
wait context. database and we don't have


5366
14414.76 --> 4.36
to use Query here because we're only


5367
14416.479 --> 5.561
fetching one so we can use get and


5368
14419.12 --> 5.52
because we established that the ID is of


5369
14422.04 --> 4.8
the board's schema we can just simply


5370
14424.64 --> 5.639
pass arguments. ID and that is going to


5371
14426.84 --> 6
load the board if it exists so then if


5372
14430.279 --> 6.16
there is no board we can just simply


5373
14432.84 --> 6.04
throw new error here board not


5374
14436.439 --> 5.361
found so now that we have those two


5375
14438.88 --> 4.359
checks let's extract the user ID so we


5376
14441.8 --> 4.479
don't have the right


5377
14443.239 --> 5.2
identity subject so it's clearer for us


5378
14446.279 --> 4.601
so this is the user ID and now let's


5379
14448.439 --> 4.561
attempt to fetch an existing favorite so


5380
14450.88 --> 4.439
we see so we have to check whether this


5381
14453 --> 4.479
item which we are trying to favorite is


5382
14455.319 --> 5.801
already in the list of our favorite


5383
14457.479 --> 6.401
items so const existing favorite is


5384
14461.12 --> 6.239
going to be a wait context. database and


5385
14463.88 --> 5.279
let's go ahead and chain a query of user


5386
14467.359 --> 5.201
favorites


5387
14469.159 --> 6.641
let's use with index by


5388
14472.56 --> 4.56
user and board organization let's get


5389
14475.8 --> 3.399
the


5390
14477.12 --> 3.279
query and I'm just going to collapse


5391
14479.199 --> 3.16
this in a new


5392
14480.399 --> 3.88
line


5393
14482.359 --> 5.401
query


5394
14484.279 --> 5.801
equals user ID to match user


5395
14487.76 --> 9.479
ID


5396
14490.08 --> 11.359
equals uh board ID to match boore ID and


5397
14497.239 --> 5.801
also organization ID to match arguments


5398
14501.439 --> 4.561
organization


5399
14503.04 --> 5.72
ID and let's just not add a comma here


5400
14506 --> 3.64
all of these are chained events and


5401
14508.76 --> 3.08
here's what we're going to do we're


5402
14509.64 --> 4
going to fetch the first that because


5403
14511.84 --> 4.319
it's supposed to be unique do we maybe


5404
14513.64 --> 4.839
have that unique yes I think we can also


5405
14516.159 --> 5.481
use that unique and then this will be


5406
14518.479 --> 6.081
just a single element right so if you


5407
14521.64 --> 6.16
used collect for example then this will


5408
14524.56 --> 5.4
become an array as you can see but since


5409
14527.8 --> 4.519
we know we are only expecting a single


5410
14529.96 --> 4.12
element like this to exist now you can


5411
14532.319 --> 4.12
see that this is just an object of a


5412
14534.08 --> 4.76
single element so in the original source


5413
14536.439 --> 4.201
code which I wrote I used DOT first but


5414
14538.84 --> 3.84
now I think it might be better to use


5415
14540.64 --> 4.48
unique we're going to see if this is if


5416
14542.68 --> 4.679
this is still working so now let's write


5417
14545.12 --> 5.44
if there is an existing


5418
14547.359 --> 7.561
favorite we're going to throw new error


5419
14550.56 --> 4.36
here board already


5420
14555.08 --> 5.6
favorited and then let's finally go


5421
14557.64 --> 6.48
ahead and do await context database


5422
14560.68 --> 5.679
insert inside of the user


5423
14564.12 --> 5.6
favorites let's go ahead and pass the


5424
14566.359 --> 6.401
user ID let's pass the board ID to be


5425
14569.72 --> 5.519
the fetched board uncore ID and


5426
14572.76 --> 5.639
organization ID to be arguments.


5427
14575.239 --> 4.16
organization ID and lastly we can return


5428
14578.399 --> 5.84
the


5429
14579.399 --> 6.481
board uh like that or we can do H yeah


5430
14584.239 --> 3.321
we can just return the board it doesn't


5431
14585.88 --> 2.88
really matter what we return because we


5432
14587.56 --> 3.08
are not going to


5433
14588.76 --> 4.08
redirecting or anything but yeah let's


5434
14590.64 --> 4.519
just return the board for now all right


5435
14592.84 --> 4.559
so now we have the functionality to add


5436
14595.159 --> 4.521
something to favorite so now let's go


5437
14597.399 --> 4.361
ahead and let's create the opposite one


5438
14599.68 --> 5.08
to unfavorite so I'm going to copy and


5439
14601.76 --> 5.439
paste this entire thing here and just


5440
14604.76 --> 5
below that I'm going to paste it and I'm


5441
14607.199 --> 2.561
going to call it


5442
14609.84 --> 4.2
unfavorite so it's going to work the


5443
14611.76 --> 5.28
same way first let's fetch the identity


5444
14614.04 --> 6.319
like that let's get the board let's get


5445
14617.04 --> 6.199
the user ID here here and in


5446
14620.359 --> 4.161
here uh what we're going to do is the


5447
14623.239 --> 3.401
opposite so we're going to attempt to


5448
14624.52 --> 4.48
fetch an existing favorite but this time


5449
14626.64 --> 5.04
we're going to do this if we are trying


5450
14629 --> 5.159
to unfavorite something that doesn't


5451
14631.68 --> 4.4
exist in our user favorites squarey so


5452
14634.159 --> 4.24
we have to use the opposite if Clause


5453
14636.08 --> 3.76
here by adding an exclamation point and


5454
14638.399 --> 3.441
then instead of this being the error


5455
14639.84 --> 4.639
message the error message is going to be


5456
14641.84 --> 4.8
favor board not found meaning that you


5457
14644.479 --> 4.241
cannot unfavor it something that you


5458
14646.64 --> 3.96
didn't favor in the first place place


5459
14648.72 --> 4.04
and then instead of insert we're going


5460
14650.6 --> 5.32
to use delete then that's going to be


5461
14652.76 --> 7.12
existing favorite undor


5462
14655.92 --> 6.2
ID like that there we go so now we have


5463
14659.88 --> 4.12
both favorite and unfavorite


5464
14662.12 --> 3.88
functionality here and for the


5465
14664 --> 4.64
unfavorite we actually don't need to


5466
14666 --> 4.399
pass the organization ID in here so let


5467
14668.64 --> 5.519
me just confirm that arguments.


5468
14670.399 --> 7.721
organization ID uh yes we can actually


5469
14674.159 --> 6.08
use the board organization ID so inside


5470
14678.12 --> 5.199
of the


5471
14680.239 --> 6
unfavorite since we fetch the board we


5472
14683.319 --> 7.92
know the organization ID for that board


5473
14686.239 --> 7.441
right here and also technically since


5474
14691.239 --> 5.2
board can only exist in a specific


5475
14693.68 --> 6
organization ID we actually might not


5476
14696.439 --> 6.521
need to use the this index so we can


5477
14699.68 --> 6.32
make it even simpler by removing this


5478
14702.96 --> 5.76
and using by user board let's go ahead


5479
14706 --> 4.88
and check my schema so we have by user


5480
14708.72 --> 5.599
board yeah so I don't think we need byy


5481
14710.88 --> 6.96
user board ID but when we are creating


5482
14714.319 --> 5.401
one we do need it so I'm going to add a


5483
14717.84 --> 4.8
little comment


5484
14719.72 --> 6.92
here to do


5485
14722.64 --> 5.44
check check if or ID needed so I think


5486
14726.64 --> 3.44
we don't need it I think we're going to


5487
14728.08 --> 3.76
use organization ID to fetch something


5488
14730.08 --> 3.279
else but I'm just going to leave a


5489
14731.84 --> 3.8
little comment here in case we have a


5490
14733.359 --> 4.96
bug this is the first place I'm going to


5491
14735.64 --> 6.04
look at so what I did is inside of the


5492
14738.319 --> 7
unfavorite mutation I uh changed it to


5493
14741.68 --> 7
use a simpler index so I'm using by user


5494
14745.319 --> 8.08
board instead of a bu user board and


5495
14748.68 --> 7.4
organization ID because I don't think I


5496
14753.399 --> 4.721
need to fetch by that because a board ID


5497
14756.08 --> 3.96
can only exist inside of a specific


5498
14758.12 --> 3.44
organization so let's go ahead let's


5499
14760.04 --> 3.96
continue for now and let's just see


5500
14761.56 --> 6.36
perhaps we can also simplify the


5501
14764 --> 6.88
original existing favorite Den I might


5502
14767.92 --> 5.64
think we'll see okay let's leave it like


5503
14770.88 --> 6.04
this for now and now what I want to do


5504
14773.56 --> 7.599
is revisit my app folder dashboard unor


5505
14776.92 --> 7.399
components board card right here and


5506
14781.159 --> 4.881
inside of here where we have our footer


5507
14784.319 --> 3.641
we have to create this onclick


5508
14786.04 --> 5.199
functionality which is going to toggle


5509
14787.96 --> 5.92
between favoriting something and unfavor


5510
14791.239 --> 6.92
something so first things first I want


5511
14793.88 --> 8.279
to go ahead and I want to import my use


5512
14798.159 --> 7.361
API mutation from hooks use API mutation


5513
14802.159 --> 8
and then I want to import API from


5514
14805.52 --> 7.799
convex generated API like that so let's


5515
14810.159 --> 7.721
go ahead and let's extract uh


5516
14813.319 --> 6.04
our options here so use API mutation API


5517
14817.88 --> 3.88
board


5518
14819.359 --> 4.641
favorite and let's copy and paste this


5519
14821.76 --> 4.96
one for unfavorite so we're going to


5520
14824 --> 6.279
have three of those and let's go ahead


5521
14826.72 --> 5.96
and the structure both of those so the


5522
14830.279 --> 4
first one is going to have a mutate


5523
14832.68 --> 3.679
which we're going to change on to be an


5524
14834.279 --> 3.761
alias on favorite and is going to have


5525
14836.359 --> 3.96
pending state which we're going to


5526
14838.04 --> 4.359
rename to pending


5527
14840.319 --> 4.601
favorite this one is also going to have


5528
14842.399 --> 4.96
a mutate of un


5529
14844.92 --> 4.12
unfavorite and a pending state of


5530
14847.359 --> 4.681
pending


5531
14849.04 --> 6.359
unfavorite like that and then what we


5532
14852.04 --> 7.68
can do is create con toggle


5533
14855.399 --> 4.321
favorite if is favorite


5534
14860 --> 4.52
we're going to go ahead and call on


5535
14862 --> 5.479
unfavorite and pass in the


5536
14864.52 --> 3.759
ID else we're going to go ahead and call


5537
14867.479 --> 3.281
on


5538
14868.279 --> 4.241
favorite and pass in the ID and


5539
14870.76 --> 5.8
organization


5540
14872.52 --> 7.839
ID like that so let's go ahead and use


5541
14876.56 --> 6.599
this toggle favorite here and let's just


5542
14880.359 --> 4.201
paste it inside of here I think that


5543
14883.159 --> 4.24
should be enough and then for the


5544
14884.56 --> 6.839
disabled we can use if pending favorite


5545
14887.399 --> 5.521
or or if ending unfavorite like that uh


5546
14891.399 --> 4
and now here's the thing so we are


5547
14892.92 --> 5.64
hardcoding the is favorite so right now


5548
14895.399 --> 6.521
whenever I click on this uh it should


5549
14898.56 --> 6.48
give me uh it should give me the create


5550
14901.92 --> 6.199
action right so here's what I'm going to


5551
14905.04 --> 4.64
do we don't need a success message for


5552
14908.119 --> 3.24
this because it's going to be


5553
14909.68 --> 4.16
immediately shown to the user that


5554
14911.359 --> 5.601
something has been favored later when we


5555
14913.84 --> 5.639
implement the actual logic to to load


5556
14916.96 --> 4.8
that but but I do want to get the errors


5557
14919.479 --> 7.88
so what I'm going to do is add catch


5558
14921.76 --> 8.04
toast from soner error failed to un


5559
14927.359 --> 7.12
favorite and I'm also going to go ahead


5560
14929.8 --> 7.84
and add a catch for on favorite here so


5561
14934.479 --> 5.96
we know if something goes wrong so fail


5562
14937.64 --> 5.2
to favorite and make sure you import the


5563
14940.439 --> 5.76
toast from soner


5564
14942.84 --> 5.2
itself and let's try it out now so now I


5565
14946.199 --> 3.881
believe that my user favorit is


5566
14948.04 --> 5.56
completely empty here but if I click on


5567
14950.08 --> 6.159
one of this right here uh this


5568
14953.6 --> 4.559
redirected me and user favorites has


5569
14956.239 --> 4.2
been successfully created you can see I


5570
14958.159 --> 4.801
have my user ID I have my organization


5571
14960.439 --> 5.96
ID and I have my board ID which is


5572
14962.96 --> 6.56
linked to my actual board right here


5573
14966.399 --> 7.76
with the title rename perfect so this


5574
14969.52 --> 8.759
works definitely and now what I want to


5575
14974.159 --> 6.441
do is go inside of I believe that if I


5576
14978.279 --> 4.721
try it again I'm going to get an error


5577
14980.6 --> 5.48
but let's go ahead quickly inside of the


5578
14983 --> 8.319
footer right here and I think that we


5579
14986.08 --> 7.159
can improve this um on click right here


5580
14991.319 --> 6.281
let's do the following let's create our


5581
14993.239 --> 7.481
own const handle click to get an event


5582
14997.6 --> 6.08
which is a type of react. mouse


5583
15000.72 --> 5.719
event HTML button


5584
15003.68 --> 5.759
element and mouse


5585
15006.439 --> 3
event


5586
15009.479 --> 5.561
so let me just see if I imported any of


5587
15011.72 --> 6.04
those no all right so HTML nothing okay


5588
15015.04 --> 5.319
all of this should just be uh existing


5589
15017.76 --> 6.16
in the scope and what I'm going to do is


5590
15020.359 --> 6.441
event stop propagation and event prevent


5591
15023.92 --> 5.68
default and then I'm going to call on


5592
15026.8 --> 5.28
click and then use this handle click


5593
15029.6 --> 4.36
instead of direct on click here when we


5594
15032.08 --> 4
favored something and now when I click


5595
15033.96 --> 4.56
on the star icon I should not be


5596
15036.08 --> 5.92
redirected but there we go I got an


5597
15038.52 --> 6.28
error failed to favorite why because


5598
15042 --> 5.199
this is already in my database of user


5599
15044.8 --> 4.559
favorites so I cannot favor it again


5600
15047.199 --> 3.881
something that has already been favored


5601
15049.359 --> 3.201
but if I click on this let's just wait


5602
15051.08 --> 4.52
for this to hide if I click on another


5603
15052.56 --> 4.559
one then then I have no errors here and


5604
15055.6 --> 3.92
I have a new record inside of my


5605
15057.119 --> 5.12
database but if I try again I get an


5606
15059.52 --> 5.919
error because that one is already favor


5607
15062.239 --> 5.96
so what I want to do now is I want to


5608
15065.439 --> 7.04
modify my main


5609
15068.199 --> 6.401
uh board my main convex boards function


5610
15072.479 --> 5.041
right here so that in the end I also


5611
15074.6 --> 5.4
include a field is favor for this logged


5612
15077.52 --> 5.48
in user also if this is not working for


5613
15080 --> 5.88
you here's what I recommend that you do


5614
15083 --> 6.52
so inside of app uh where were we we


5615
15085.88 --> 7.519
were in the board card


5616
15089.52 --> 6.36
index so if you want to you can use the


5617
15093.399 --> 4.8
alternative you can use


5618
15095.88 --> 6.479
const uh hand


5619
15098.199 --> 7.881
favorite and use use use mutation from


5620
15102.359 --> 6.04
convex react and pass in API board


5621
15106.08 --> 6
favorite and then when you call handle


5622
15108.399 --> 5.401
favorite here you're going to have oh


5623
15112.08 --> 3.56
you can see that you're you have some


5624
15113.8 --> 7.12
type errors right so you would have to


5625
15115.64 --> 5.28
write this as ID as type of


5626
15121.399 --> 5.561
ID boards like that for example so if


5627
15124.84 --> 4.96
you're having any errors it could be due


5628
15126.96 --> 4.72
to invalid typings so you can always


5629
15129.8 --> 5
check that here yeah so perhaps we are


5630
15131.68 --> 5.08
losing a lot with my custom use API


5631
15134.8 --> 4.28
mutation but I really like the fact that


5632
15136.76 --> 4.479
we have pending here so yeah you can


5633
15139.08 --> 5.399
always fall back to using use mutation


5634
15141.239 --> 6.281
from convex react if you are confused uh


5635
15144.479 --> 6.561
and then you can check your types more


5636
15147.52 --> 5.919
thoroughly great so let's go ahead now


5637
15151.04 --> 6.199
uh and let's go inside of the boards


5638
15153.439 --> 7.081
here and what I want to do is I want


5639
15157.239 --> 7.04
want to query them so that all of them


5640
15160.52 --> 6.28
have a favorite relation so after I load


5641
15164.279 --> 4.96
my boards what I'm going to do is I'm


5642
15166.8 --> 4
going to write const boards with


5643
15169.239 --> 4.2
favorite


5644
15170.8 --> 4.679
relation and that's going to be boards.


5645
15173.439 --> 5.04
map we're going to get the individual


5646
15175.479 --> 5.041
board and then I'm going to open a


5647
15178.479 --> 3.76
function and I'm going to return


5648
15180.52 --> 3.56
context.


5649
15182.239 --> 3.481
databasequery


5650
15184.08 --> 6.48
user


5651
15185.72 --> 7.8
favorites Within index by user


5652
15190.56 --> 7.12
board let's get the


5653
15193.52 --> 7.48
query I'm going to send this to new line


5654
15197.68 --> 10.32
and I'm going to call uh


5655
15201 --> 11.76
query do equals user ID to be identity.


5656
15208 --> 7.68
subject and equals board ID to be the


5657
15212.76 --> 5.96
current board that we are iterating over


5658
15215.68 --> 6.639
ID and let's let go ahead and get


5659
15218.72 --> 6.8
unique and then if we have a


5660
15222.319 --> 6.88
favorite let's go ahead and return an


5661
15225.52 --> 5.32
object of this exact board but also is


5662
15229.199 --> 3.761
favorite which is simply going to be a


5663
15230.84 --> 4.8
Boolean based on the fact that whether


5664
15232.96 --> 7.279
we can load the user favorite or not


5665
15235.64 --> 8.759
like that uh great so after we've added


5666
15240.239 --> 7.561
that then what we can do is write const


5667
15244.399 --> 4.641
boards with favorite Boolean is going to


5668
15247.8 --> 3.96
be


5669
15249.04 --> 4.84
promise.all and we can pass in boards


5670
15251.76 --> 6
with favorite relation


5671
15253.88 --> 7.559
inside like that so let me see if I can


5672
15257.76 --> 6.88
expand this basically in one line and


5673
15261.439 --> 8.161
make sure you return the new boards with


5674
15264.64 --> 7.08
favorite Boolean right here so now if


5675
15269.6 --> 4.08
you go back inside of board list


5676
15271.72 --> 5.36
component right here I don't know why


5677
15273.68 --> 6.2
it's collapsed the data now uh should


5678
15277.08 --> 5.159
should have the is favorite Boolean you


5679
15279.88 --> 5.96
can see that my data has is favorite


5680
15282.239 --> 6.2
Boolean in here so what I can do is I


5681
15285.84 --> 4.479
can change this from his favorite false


5682
15288.439 --> 5.8
to where we are itating over our board


5683
15290.319 --> 6.04
cards and use board and add is favorite


5684
15294.239 --> 5.321
like that and let's see if that is


5685
15296.359 --> 6.681
working there we go so now if I click


5686
15299.56 --> 5.4
again I unfavor it if I click here I


5687
15303.04 --> 4.439
unfavored it again and you can see how


5688
15304.96 --> 5.6
I'm no longer getting any errors because


5689
15307.479 --> 5.68
now our function knows when it should


5690
15310.56 --> 6.16
favor it something and when it should


5691
15313.159 --> 6.561
unfavor it something great great job so


5692
15316.72 --> 4.96
you wrap that up and one more time you


5693
15319.72 --> 3.8
know if you're having trouble with this


5694
15321.68 --> 5.679
I would highly recommend that you go


5695
15323.52 --> 6
ahead and use the uh Native use Query


5696
15327.359 --> 4.201
from convex react I thought this would


5697
15329.52 --> 4.959
be maybe a fun exercise but I can see


5698
15331.56 --> 4.559
how with this any typings uh some of you


5699
15334.479 --> 3.481
might be losing you know the idea of


5700
15336.119 --> 4.12
what actually needs to to be passed


5701
15337.96 --> 4.159
there uh but yeah you can see that


5702
15340.239 --> 5.2
obviously this is still working but if


5703
15342.119 --> 5.721
you're getting confused you can go ahead


5704
15345.439 --> 4.121
and uh write it alternatively so I can


5705
15347.84 --> 3.12
do it just for this for a little


5706
15349.56 --> 2.919
exercise I'm going to do that now you


5707
15350.96 --> 3.72
can speed up the part if you don't want


5708
15352.479 --> 4.601
to but this is how you would write that


5709
15354.68 --> 4.799
so I'm going to call const handle


5710
15357.08 --> 3.96
favorite to be use


5711
15359.479 --> 4.84
mutation


5712
15361.04 --> 6.68
API board


5713
15364.319 --> 6.761
favorite and then const handle on


5714
15367.72 --> 5
favorite is going to be use mutation API


5715
15371.08 --> 4.239
word


5716
15372.72 --> 5.759
unfavorite I'm getting the use mutation


5717
15375.319 --> 5.441
from convex react and then in here I


5718
15378.479 --> 5.521
would very simply called handle


5719
15380.76 --> 6.16
unfavorite and in here I will do handle


5720
15384 --> 5
favorite and then in here I'm going to


5721
15386.92 --> 5.84
go ahead and map this as


5722
15389 --> 6.64
ID which we can import I believe let me


5723
15392.76 --> 6.559
just check if we can import it uh I


5724
15395.64 --> 3.679
should be able to import for


5725
15399.72 --> 3.84
this


5726
15401.72 --> 5.88
ID


5727
15403.56 --> 6.639
boards oh my apologies so id id as the


5728
15407.6 --> 6.2
type ID which you can import from ATC


5729
15410.199 --> 6.721
convex generated so let's go back here


5730
15413.8 --> 5.399
there we go so import ID from at/ convex


5731
15416.92 --> 4.239
generated data model and then when


5732
15419.199 --> 3.601
you're using that ID specifically you


5733
15421.159 --> 4.761
can specify even further that this


5734
15422.8 --> 5.2
should is supposed to be an ID of boards


5735
15425.92 --> 5.319
but the thing is even though typescript


5736
15428 --> 5.68
throws an error you can see that this as


5737
15431.239 --> 5.16
doesn't change what we actually send


5738
15433.68 --> 7.4
here so that's why our solution with use


5739
15436.399 --> 6.521
API mutation also works just fine right


5740
15441.08 --> 3.079
so let's try it out and this if this


5741
15442.92 --> 3.96
will work just


5742
15444.159 --> 5.04
fine there we go you can see how this is


5743
15446.88 --> 5.319
working but you can also see that my


5744
15449.199 --> 5.04
state is not disabled why I'm doing that


5745
15452.199 --> 3.641
because I have to now manually write is


5746
15454.239 --> 3.441
pending here so I'm just going to revert


5747
15455.84 --> 3
it back to the old one


5748
15457.68 --> 2.799
but I just wanted to show you an


5749
15458.84 --> 3
alternative way if you're having issues


5750
15460.479 --> 4.76
with this or if you simply want to


5751
15461.84 --> 6.88
practice you know typescript with convex


5752
15465.239 --> 7.04
here all right I think I have all the


5753
15468.72 --> 5.399
Imports I need here I think all of this


5754
15472.279 --> 3.801
is working for me let me just confirm


5755
15474.119 --> 6.08
one more time so I can wrap up this


5756
15476.08 --> 7.359
chapter yes nicely I can add to favorite


5757
15480.199 --> 5.2
and I can remove from favorites perfect


5758
15483.439 --> 3.84
what we're going to do next is wrap this


5759
15485.399 --> 6.96
entire thing up by any enabling the


5760
15487.279 --> 8.08
search and querying by actually favor


5761
15492.359 --> 6.241
items and now let's go ahead and wrap up


5762
15495.359 --> 4.92
our search and our favorite query here


5763
15498.6 --> 4.48
but just before we do that I want to


5764
15500.279 --> 6.2
bring your attention to the fact that if


5765
15503.08 --> 6.399
I favorite a board and then have that


5766
15506.479 --> 6.561
inside of my user favorites and then if


5767
15509.479 --> 6.84
I go ahead and delete a board what will


5768
15513.04 --> 4.199
happen is that I have an existing user


5769
15516.319 --> 3.401
favor


5770
15517.239 --> 5.681
but I don't have a proper proper


5771
15519.72 --> 5.8
relation with the board and that will in


5772
15522.92 --> 4.8
exchange cause an error so if you've


5773
15525.52 --> 4.16
deleted a board while working on this


5774
15527.72 --> 3.88
user favorites here's what you can do so


5775
15529.68 --> 3.84
every time inside of your database here


5776
15531.6 --> 4.839
you can always delete all documents


5777
15533.52 --> 4.719
right so you can just select select all


5778
15536.439 --> 3.76
and delete all documents you can always


5779
15538.239 --> 3.88
do that quite easily inside of here


5780
15540.199 --> 4.761
there we go like that so let's make


5781
15542.119 --> 7.801
everything empty for now and let's go


5782
15544.96 --> 9.159
ahead inside of our convex board. TS and


5783
15549.92 --> 6.88
let's find our remove function and in


5784
15554.119 --> 5.721
here we actually have to do later check


5785
15556.8 --> 4.84
to delete favorite relation as well so


5786
15559.84 --> 4.439
that's exactly what we're going to do


5787
15561.64 --> 6.4
we're going to go ahead here now and


5788
15564.279 --> 6.761
we're going to write const


5789
15568.04 --> 3
existing


5790
15571.439 --> 7.68
favorite and just before we do that we


5791
15573.96 --> 7.76
can also get the user ID to be identity.


5792
15579.119 --> 7.561
subject so then inside of here let's go


5793
15581.72 --> 7.479
ahead and write await context.


5794
15586.68 --> 6.799
database


5795
15589.199 --> 6.841
query user favorites like that with


5796
15593.479 --> 4.561
index and we're going to go ahead and


5797
15596.04 --> 3.68
use by


5798
15598.04 --> 4.199
user


5799
15599.72 --> 6.559
board let me just quickly check the


5800
15602.239 --> 7.04
schema so by user board exists all right


5801
15606.279 --> 5.681
so by user board then we're going to go


5802
15609.279 --> 4.96
ahead and get the


5803
15611.96 --> 4.239
query then we can do


5804
15614.239 --> 3.481
query do


5805
15616.199 --> 6.881
equals


5806
15617.72 --> 11.2
user ID to be user ID and equals board


5807
15623.08 --> 8.68
ID to be uh the arguments. ID like that


5808
15628.92 --> 5.199
and let's go ahead and get unique from


5809
15631.76 --> 4.28
this uh


5810
15634.119 --> 5.561
combination and then I'm going to write


5811
15636.04 --> 7.079
if existing favorite exists let's make


5812
15639.68 --> 7.08
sure to remove that relation so await


5813
15643.119 --> 5.601
context. database. delete existing


5814
15646.76 --> 5.32
favorite uncore


5815
15648.72 --> 5.32
ID like that so let's try that out now


5816
15652.08 --> 4.88
so I'm going to go ahead and I'm going


5817
15654.04 --> 6.88
to create a new board here so let me


5818
15656.96 --> 7.399
just confirm inside of here in my board


5819
15660.92 --> 6.479
I have a new board and I don't have any


5820
15664.359 --> 5.92
user favorites here one once I add this


5821
15667.399 --> 6.241
to my favorites I now have a user


5822
15670.279 --> 5.481
favorite and I have one board and if I


5823
15673.64 --> 5.24
go ahead and delete this


5824
15675.76 --> 6.96
board I should have empty user favorites


5825
15678.88 --> 7.279
and I do zero documents and zero boards


5826
15682.72 --> 6.24
so we successfully fixed that issue


5827
15686.159 --> 5.401
great now that we have that


5828
15688.96 --> 6.199
resolved uh let's go ahead and let's try


5829
15691.56 --> 5.4
one more thing in our favorite function


5830
15695.159 --> 3.521
I think we can speed up the this query


5831
15696.96 --> 4.72
for existing favorite I don't think we


5832
15698.68 --> 5.719
need to fetch by organization so we can


5833
15701.68 --> 6.28
remove organization from here and simply


5834
15704.399 --> 5.88
use by user board and we can also safely


5835
15707.96 --> 4.92
then remove this commment here to do


5836
15710.279 --> 5.561
check if organization ID is needed I


5837
15712.88 --> 6.04
don't think we need that if you notice


5838
15715.84 --> 5.76
that we do need it you can bring it back


5839
15718.92 --> 5.92
but I think that that query is not


5840
15721.6 --> 5.639
needed for us this all seems to be in


5841
15724.84 --> 5.96
sync if I remove this


5842
15727.239 --> 7.681
both of this get removed perfect so all


5843
15730.8 --> 8
of this seems to be working exactly as


5844
15734.92 --> 6.279
it should let me just try this perfect


5845
15738.8 --> 4.439
okay so now let's go ahead and let's


5846
15741.199 --> 5.841
actually Implement that when we search


5847
15743.239 --> 6.24
for something we actually query by our


5848
15747.04 --> 5.159
search index which we have inside of our


5849
15749.479 --> 5.76
schema so we have a search index here


5850
15752.199 --> 6.16
for the search title so in order to do


5851
15755.239 --> 7.761
that we have to to go inside of


5852
15758.359 --> 7.321
our convex boards right here and we have


5853
15763 --> 5.6
to allow other arguments we have to


5854
15765.68 --> 5.519
allow arguments other than organization


5855
15768.6 --> 5.839
ID so that's going to be search which is


5856
15771.199 --> 8.16
going to be optional and a type of


5857
15774.439 --> 8.281
string like that perfect so now let's go


5858
15779.359 --> 6.241
ahead and let's do the following here


5859
15782.72 --> 5.88
we're going to add a constant for our


5860
15785.6 --> 6.12
search so con title is going to be


5861
15788.6 --> 5.48
arguments. search as string then we're


5862
15791.72 --> 4.479
going to go ahead and write let boards


5863
15794.08 --> 4.76
to be an empty array initially and we're


5864
15796.199 --> 4.481
going to remove the constant from here


5865
15798.84 --> 4.8
and this is what we're going to do if we


5866
15800.68 --> 7.559
have the title we're going to write uh


5867
15803.64 --> 7.559
to do query with search index else we're


5868
15808.239 --> 6.401
going to go ahead and query our boards


5869
15811.199 --> 7.08
as we usually would like this so let's


5870
15814.64 --> 8.599
go ahead now and let's modify the boards


5871
15818.279 --> 7.16
here to now be uh await context.


5872
15823.239 --> 5.681
database we're going to go ahead and


5873
15825.439 --> 8.641
query the boards but we're going to use


5874
15828.92 --> 6.88
with search Index this time search title


5875
15834.08 --> 5.159
we're going to get the


5876
15835.8 --> 7.559
query and then we're going to do query.


5877
15839.239 --> 7.761
search title and title but we are also


5878
15843.359 --> 5.84
only going to search inside of our


5879
15847 --> 5.68
organization ID which comes from the


5880
15849.199 --> 6.721
arguments as well and let's do do


5881
15852.68 --> 6.12
collect there we go so now this should


5882
15855.92 --> 6.359
work just fine the only thing that we


5883
15858.8 --> 6.28
are not passing is the search so let's


5884
15862.279 --> 6.2
find where we have to pass that let's go


5885
15865.08 --> 5.84
inside of app dashboard components board


5886
15868.479 --> 4.481
list and do I have the queries here I do


5887
15870.92 --> 4.319
have all the queries here so I think


5888
15872.96 --> 3.72
that we are pretty safe to Simply uh


5889
15875.239 --> 3.24
write search


5890
15876.68 --> 5.24
query.


5891
15878.479 --> 5.161
search besides organization ID so let's


5892
15881.92 --> 4.04
try that out now I'm going to go ahead


5893
15883.64 --> 3.479
and remove everything here and if I


5894
15885.96 --> 3.479
write


5895
15887.119 --> 4.32
Untitled there we go you can see that I


5896
15889.439 --> 4.441
have Untitled if I type something


5897
15891.439 --> 5.081
completely different we don't have that


5898
15893.88 --> 4.599
perfect so let me try renaming this to


5899
15896.52 --> 5.12
for example


5900
15898.479 --> 6.601
specific just specific if I type


5901
15901.64 --> 7.639
Untitled it no longer exists if I type


5902
15905.08 --> 7.239
specific it exists perfect our search is


5903
15909.279 --> 5.241
now officially working so now what I


5904
15912.319 --> 4.84
want to do is I want to do the same


5905
15914.52 --> 5.4
thing but allow it to be queried for


5906
15917.159 --> 4.601
favorites as well so here's what we can


5907
15919.92 --> 4.08
do let's go ahead and while we are


5908
15921.76 --> 4.639
inside of this board list instead of


5909
15924 --> 5.04
passing this individually we're just


5910
15926.399 --> 5.681
going to spread the query like that and


5911
15929.04 --> 6.119
then let's go back inside of boards. DS


5912
15932.08 --> 6.039
and let's also add favorites to bb.


5913
15935.159 --> 5.401
optional and let's go ahead and Mark


5914
15938.119 --> 4.28
this uh as


5915
15940.56 --> 5.639
v.n like


5916
15942.399 --> 6.281
this actually I think we can make it uh


5917
15946.199 --> 5.641
a string let me just check inside of


5918
15948.68 --> 6.28
board list this is a type of string so


5919
15951.84 --> 5.16
let's make this a string then yes uh all


5920
15954.96 --> 5.6
right and now we have to do a similar


5921
15957 --> 5.64
thing so let's go ahead and go just


5922
15960.56 --> 4.599
before we check the identity let's do if


5923
15962.64 --> 5.799
ARS do favorites in that case we're


5924
15965.159 --> 6.441
going to do con favorited boards are


5925
15968.439 --> 5.76
going to be await


5926
15971.6 --> 6.28
context.


5927
15974.199 --> 6.641
database query user


5928
15977.88 --> 7.12
favorites we're going to use with index


5929
15980.84 --> 7.479
here by user and by


5930
15985 --> 6.319
organization that that user is in let's


5931
15988.319 --> 8.8
get the query and let's do query


5932
15991.319 --> 8.561
equals user ID to be identity. subject


5933
15997.119 --> 6.16
and equals organization ID to be


5934
15999.88 --> 5.519
arguments. organization ID and let's go


5935
16003.279 --> 5.04
ahead and order all of them by


5936
16005.399 --> 5.601
descending so the latest added to the


5937
16008.319 --> 4.641
favorite list and let's collect all of


5938
16011 --> 5
them so this way we're going to get all


5939
16012.96 --> 5.8
of the favor boards and now let's go


5940
16016 --> 6
ahead and get all the IDS by using


5941
16018.76 --> 5.639
favorit boards. map and let's go ahead


5942
16022 --> 5.199
and extract


5943
16024.399 --> 7.04
board ID


5944
16027.199 --> 7.321
sorry bore ID out of every one of those


5945
16031.439 --> 5.641
boards and now what we can do is we can


5946
16034.52 --> 5.2
install convex helpers so let's go ahead


5947
16037.08 --> 5.84
and do that so I'm going to go ahead and


5948
16039.72 --> 7.04
shut down convex for now and let's do


5949
16042.92 --> 6.84
npm install uh convex dashh


5950
16046.76 --> 5.92
helpers like that let's wait a second


5951
16049.76 --> 5.16
for this to install and once it is ready


5952
16052.68 --> 6.28
we're going to go ahead and do


5953
16054.92 --> 7.12
npm npx convex Dev again so just make


5954
16058.96 --> 7.399
sure you have npm run Dev running in one


5955
16062.04 --> 7.239
terminal and in another npx convex Dev


5956
16066.359 --> 7.401
and in here I'm going to go ahead now


5957
16069.279 --> 9.88
and I'm going to import get all or throw


5958
16073.76 --> 7.84
from convex helpers SLS server SL


5959
16079.159 --> 4.841
relationships like that so we don't have


5960
16081.6 --> 5.96
to write any complex quaries here


5961
16084 --> 7.6
instead what we can do is const board


5962
16087.56 --> 7.919
to be await get all or


5963
16091.6 --> 6.92
throw context. database and simply pass


5964
16095.479 --> 5.64
in the IDS as the second argument and


5965
16098.52 --> 6.48
then we can do boards.


5966
16101.119 --> 6.481
map get the individual board and let's


5967
16105 --> 5.159
go ahead and immediately return and


5968
16107.6 --> 5.16
spread the existing board and simply map


5969
16110.159 --> 4.401
is favorite to true we don't need to do


5970
16112.76 --> 3.519
any calculation here we know it's going


5971
16114.56 --> 4.919
to be true because we we are only


5972
16116.279 --> 5.521
loading the wordss uh by the favorite


5973
16119.479 --> 4.601
wordss IDs right here and I made a


5974
16121.8 --> 5.519
mistake here so this will actually not


5975
16124.08 --> 5.48
give us the result we want so the I list


5976
16127.319 --> 5.201
of IDs that I wanted to make was the


5977
16129.56 --> 4.799
list of relationships inside of our


5978
16132.52 --> 3.839
schema for we can you can see how I


5979
16134.359 --> 4.601
actually have an error here so this


5980
16136.359 --> 5.561
tells me that this doesn't exist that's


5981
16138.96 --> 5.159
because I'm supposed to use board ID


5982
16141.92 --> 5.08
here and there we go once I change this


5983
16144.119 --> 5.601
to board ID this will actually load the


5984
16147 --> 5.279
boards and now you can see that this is


5985
16149.72 --> 4.559
favorite will still exist so let's try


5986
16152.279 --> 4.441
it out now so if I click on favorite


5987
16154.279 --> 4.92
boards it says no favorite boards try


5988
16156.72 --> 4.84
favoriting a board if I add this to my


5989
16159.199 --> 5.2
favorite boards and click here there we


5990
16161.56 --> 5.48
go if I remove it from here it no longer


5991
16164.399 --> 4.321
exists perfect so let's try this with a


5992
16167.04 --> 4.439
couple of more elements here so I'm


5993
16168.72 --> 5.679
going to randomly add a couple of them


5994
16171.479 --> 5.161
there we go so only they appear here


5995
16174.399 --> 3.88
perfect let's go ahead and and try


5996
16176.64 --> 3.799
searching for something that should


5997
16178.279 --> 3.681
bring us back to the theme boards let's


5998
16180.439 --> 4.641
be more


5999
16181.96 --> 7.359
specific that still seems to be working


6000
16185.08 --> 7.239
just fine perfect amazing amazing job


6001
16189.319 --> 5.401
you just added uh complete search


6002
16192.319 --> 5.481
querying and everything that we need


6003
16194.72 --> 8.04
here and what we are finally ready to do


6004
16197.8 --> 6.559
next is build this actual screen uh


6005
16202.76 --> 3.439
which will happen when we click on that


6006
16204.359 --> 4.76
but just before we do that we can


6007
16206.199 --> 5.881
already prepare ourselves by doing this


6008
16209.119 --> 6.481
so let's find everywhere where we use


6009
16212.08 --> 7.039
API board create so we have that in two


6010
16215.6 --> 6.4
files in empty boards component in app


6011
16219.119 --> 5.721
dashboard components and new board


6012
16222 --> 5.439
button so let's go in empty boards first


6013
16224.84 --> 6.439
let's see where it's located app folder


6014
16227.439 --> 5.68
dashboard uh components empty board so


6015
16231.279 --> 3.361
we can now actually do this redirect


6016
16233.119 --> 4.561
right here right we know how it's going


6017
16234.64 --> 4.28
to look like so constr router use router


6018
16237.68 --> 4.04
from next


6019
16238.92 --> 6.359
navigation I'm just going to move


6020
16241.72 --> 6.399
that right here and what I'm going to do


6021
16245.279 --> 6.801
now is do router.


6022
16248.119 --> 6.561
push board and I'm going to pass in that


6023
16252.08 --> 5.119
specific ID like that and I can remove


6024
16254.68 --> 3.479
the Tod do comment and the other one


6025
16257.199 --> 3.561
which we


6026
16258.159 --> 4.96
had let's see if we have another one new


6027
16260.76 --> 4.32
board button so this one is located in


6028
16263.119 --> 4.08
the same place I believe so app


6029
16265.08 --> 5.72
dashboard underscore components new


6030
16267.199 --> 6.841
board button so in here we have the same


6031
16270.8 --> 6.479
thing let's go ahead and get our router


6032
16274.04 --> 5.56
here CL router use router from next


6033
16277.279 --> 5
navigation so just ensure you're using


6034
16279.6 --> 4.599
next navigation here and let's just try


6035
16282.279 --> 3.361
that out so now every time that we


6036
16284.199 --> 4.681
create a new board we should get


6037
16285.64 --> 5.759
redirected to the currently 404 page


6038
16288.88 --> 5.84
which in a next chapter is going to


6039
16291.399 --> 5.281
start looking like an actual board so


6040
16294.72 --> 5.16
let me just go ahead head and remove all


6041
16296.68 --> 5.799
of my elements here so we can


6042
16299.88 --> 5
confirm uh that it is actually working


6043
16302.479 --> 4.161
from that empty screen as well we


6044
16304.88 --> 4.76
confirm that the button works but how


6045
16306.64 --> 6.04
about this one same thing it works


6046
16309.64 --> 6.44
perfect great great


6047
16312.68 --> 6.08
job so let's go ahead and let's create


6048
16316.08 --> 4.68
this 404 page which appears when we


6049
16318.76 --> 4.84
click on something so I'm going to


6050
16320.76 --> 5.679
create that route outside of our


6051
16323.6 --> 6.599
dashboard route group so I don't want it


6052
16326.439 --> 6.321
to have this layout with the sidebar


6053
16330.199 --> 5.361
with the organizational sidebar or the


6054
16332.76 --> 5.559
nov bar instead I want it to be a


6055
16335.56 --> 6.2
completely blank slate so I'm going to


6056
16338.319 --> 5.16
go ahead and just create a board folder


6057
16341.76 --> 4.399
in the app folder outside of the


6058
16343.479 --> 5.401
dashboard and then in here I'm going to


6059
16346.159 --> 5.24
go ahead and create a board ID Dynamic


6060
16348.88 --> 4.72
route so this way this will be part of


6061
16351.399 --> 4.521
the URL which is dynamic and using that


6062
16353.6 --> 5.36
I will be able to load the board Bo


6063
16355.92 --> 5.239
information and its storage and history


6064
16358.96 --> 4.6
of all the drawings we're going to have


6065
16361.159 --> 6.24
inside now inside it's important that


6066
16363.56 --> 8.04
you create a convention file page. DSX


6067
16367.399 --> 5.361
and let's go ahead and name this board


6068
16371.6 --> 5.599
ID


6069
16372.76 --> 7.479
page let's return a div board ID page


6070
16377.199 --> 7.52
and important to export


6071
16380.239 --> 6.281
default board ID page like this and now


6072
16384.719 --> 4.48
if you go ahead and click on this you


6073
16386.52 --> 7.56
should no longer be having a 404 instead


6074
16389.199 --> 7.76
it should say board ID page like that


6075
16394.08 --> 5
now go ahead inside of this board ID and


6076
16396.959 --> 3.961
create a new folder underscore


6077
16399.08 --> 4.879
components this is where we're going to


6078
16400.92 --> 7.039
put some reusable components and let's


6079
16403.959 --> 6.201
start with the first one canvas. TSX


6080
16407.959 --> 3.561
we're going to mark this as use client


6081
16410.16 --> 4.08
because it's going to be very


6082
16411.52 --> 5.88
interactive and let's just export cons


6083
16414.24 --> 5.719
the canvas component for now let's


6084
16417.4 --> 6.08
return a div saying


6085
16419.959 --> 6.641
canvas now let's go back inside of page.


6086
16423.48 --> 5.879
TSX here and all I'm going to do is


6087
16426.6 --> 4.72
render that canvas component from our


6088
16429.359 --> 5.721
underscore components so what you should


6089
16431.32 --> 5.959
see is just the text saying canvas now


6090
16435.08 --> 4.68
let's go ahead inside of the canvas here


6091
16437.279 --> 5.201
and let's replace this div with a main


6092
16439.76 --> 5.76
element and let's go ahead and give this


6093
16442.48 --> 8.959
a class name the class name is going to


6094
16445.52 --> 9.4
be H full width full relative BG neutral


6095
16451.439 --> 6.28
100 and touch none so by giving it this


6096
16454.92 --> 5.119
BG neutral 100 it should darken the


6097
16457.719 --> 5.281
background a little bit if you want a


6098
16460.039 --> 5.76
better effect you can go to 500 but keep


6099
16463 --> 4.639
it at 100 it will look good because our


6100
16465.799 --> 3.84
floating elements will be completely


6101
16467.639 --> 4.8
white and have a little Shadow so it's


6102
16469.639 --> 5.201
going to look okay now let's go ahead


6103
16472.439 --> 6.081
and let's create another component which


6104
16474.84 --> 7.439
is going to be called info. TSX so let's


6105
16478.52 --> 6.439
go ahead and Export const info here and


6106
16482.279 --> 5.08
let's just return a d saying


6107
16484.959 --> 4.521
info now let's go back inside of the


6108
16487.359 --> 5.721
canvas and we are very simply going to


6109
16489.48 --> 6.68
import that info component from


6110
16493.08 --> 6.84
doino and now let's go ahead and


6111
16496.16 --> 9.68
actually give this info component a


6112
16499.92 --> 11.6
class name of absolute top to left to to


6113
16505.84 --> 11.519
BG white rounded MD PX


6114
16511.52 --> 8.519
1.5 height of 12 Flex items Center and


6115
16517.359 --> 6.52
Shadow medium and there we go you can


6116
16520.039 --> 6.201
now see our info component right here in


6117
16523.879 --> 6.281
this corner on the right side so I'm


6118
16526.24 --> 5.84
going to write this to do information


6119
16530.16 --> 4.08
about the


6120
16532.08 --> 3.959
board there we go so you can see how


6121
16534.24 --> 3.44
it's going to look when it has a bit


6122
16536.039 --> 3.481
more information around it so in here


6123
16537.68 --> 4.08
we're going to have a logo to click on


6124
16539.52 --> 4.32
so we can go back to all boards and then


6125
16541.76 --> 4
we're going to have the current board


6126
16543.84 --> 3.599
name so that we can rename it and in


6127
16545.76 --> 3.76
here we're going to have additional


6128
16547.439 --> 3.961
options in our reusable actions


6129
16549.52 --> 3.88
component to delete the board copy the


6130
16551.4 --> 4.28
board ID so we can share it and stuff


6131
16553.4 --> 6.039
like that so this will be floating right


6132
16555.68 --> 6.359
here in a fixed position great now


6133
16559.439 --> 4.84
besides info let's go ahead and create


6134
16562.039 --> 3.641
another reusable component inside of


6135
16564.279 --> 4.561
underscore component


6136
16565.68 --> 3.16
which is going to be called


6137
16569.4 --> 5.92
participants. TSX so let's go ahead


6138
16572.439 --> 6.44
inside of participants here and let's


6139
16575.32 --> 3.559
very simply export con


6140
16579.32 --> 5.84
participants which is going to be very


6141
16582.84 --> 5.48
similar so let's go back inside of


6142
16585.16 --> 5.6
convas and Below info add the


6143
16588.32 --> 4.959
participants from do/


6144
16590.76 --> 4
participants and now inside of here


6145
16593.279 --> 4.721
we're going to have we're going to go


6146
16594.76 --> 8.76
ahead and write class name absolute


6147
16598 --> 10.199
height 12 top two right two background


6148
16603.52 --> 8.72
white rounded MD padding of three Flex


6149
16608.199 --> 6.721
items Center and Shadow medium and in


6150
16612.24 --> 4.84
here I'm going to write list of


6151
16614.92 --> 4.119
users there we go so you can see how


6152
16617.08 --> 4.359
this is going to look like in here we're


6153
16619.039 --> 4.481
going to have avatars of the all users


6154
16621.439 --> 3.881
which are currently inside of this board


6155
16623.52 --> 4.519
and their borders are going to have


6156
16625.32 --> 4.68
respective colors to their cursor which


6157
16628.039 --> 4.441
will appear right here alongside their


6158
16630 --> 4.439
name when they are active and the last


6159
16632.48 --> 4.559
one we're going to create is right here


6160
16634.439 --> 6
and that's going to be our toolbar so


6161
16637.039 --> 5.441
let's go ahead inside and create the


6162
16640.439 --> 8.122
another component here called


6163
16642.48 --> 6.081
toolbar. DSX let's export con toolbar


6164
16649.4 --> 6
here toolbar like this and let's go back


6165
16653.76 --> 4.08
inside of the convas component component


6166
16655.4 --> 4.239
and let's render the toolbar from do/


6167
16657.84 --> 4.32
toolbar there we go so you should have


6168
16659.639 --> 4.441
the info the toolbar and the


6169
16662.16 --> 4.479
participants let's go inside of the


6170
16664.08 --> 5
toolbar now and let's go ahead and style


6171
16666.639 --> 8.361
it as well so I'm going to give this div


6172
16669.08 --> 8.08
a class name of absolute top 50% so it's


6173
16675 --> 6.24
at half of my screen then I'm going to


6174
16677.16 --> 8.401
give it minus translate minus y again


6175
16681.24 --> 9.92
50% and then let's give it a left two a


6176
16685.561 --> 8.039
flex Flex call Gap y4 and then inside


6177
16691.16 --> 7.6
I'm going to create a div with a class


6178
16693.6 --> 6.8
name of BG white rounded MD like this


6179
16698.76 --> 8.24
padding


6180
16700.4 --> 10.559
1.5 Flex Gap y1 Flex call items Center


6181
16707 --> 10.719
and Shadow medium and in here I'm going


6182
16710.959 --> 11
to write uh for example we can do divs


6183
16717.719 --> 8.881
pencil then this one is going to be


6184
16721.959 --> 8
square then this one is going to be a


6185
16726.6 --> 6
circle right so just so you get the idea


6186
16729.959 --> 5.361
this one will be for example uh I don't


6187
16732.6 --> 6.32
know what else do we have let's just


6188
16735.32 --> 7
write ellipses again all right so that's


6189
16738.92 --> 5.08
going to be like our toolbar here but


6190
16742.32 --> 4.92
besides these elements we're also going


6191
16744 --> 6.119
to have a one additional uh kind of part


6192
16747.24 --> 7.039
of the toolbar which is separated from


6193
16750.119 --> 5.76
this div which has BG white so outside


6194
16754.279 --> 4.52
of that div which is currently


6195
16755.879 --> 6.281
encapsulating this mock items go ahead


6196
16758.799 --> 6.961
and create another div which is going to


6197
16762.16 --> 6.639
have a very similar style so in here


6198
16765.76 --> 8.801
we're going to have a class name of BG


6199
16768.799 --> 10
white rounded MD padding 1.5 Flex Flex


6200
16774.561 --> 4.238
Dash column items


6201
16778.84 --> 7.48
Center and Shadow medium like this and


6202
16783.08 --> 8.2
then inside let's create a div and write


6203
16786.32 --> 6.68
undo and let's do one for redo like that


6204
16791.28 --> 4.12
there we go so you can now kind of see


6205
16793 --> 3.718
the layout which we are going to have in


6206
16795.4 --> 3.52
this corner right here we're going to


6207
16796.718 --> 3.362
have information about the board in this


6208
16798.92 --> 3.4
corner right here we're going to have a


6209
16800.08 --> 4.96
list of active users which is going to


6210
16802.32 --> 4.44
only show a maximum of three users and


6211
16805.04 --> 3.918
above that it's going to just display a


6212
16806.76 --> 4.118
number of how many users are there in


6213
16808.958 --> 4.082
total and in here we're going to have


6214
16810.878 --> 4.042
our Toolbar to select the pencil Square


6215
16813.04 --> 4.12
Circle or whatever else we're going to


6216
16814.92 --> 5.48
have below that we're going to have our


6217
16817.16 --> 4.638
undo and redo buttons right here and the


6218
16820.4 --> 5.16
rest is going to be the logic which


6219
16821.798 --> 6.722
we're going to work uh inside of here


6220
16825.56 --> 5.12
great so just before we wrap this up


6221
16828.52 --> 5.56
let's just go ahead back to Local Host


6222
16830.68 --> 5.44
3000 here let's confirm that this is


6223
16834.08 --> 4.52
surely working when I create a new board


6224
16836.12 --> 5.28
I'm redirected here perfect let's go


6225
16838.6 --> 5.198
back and let me just delete this to


6226
16841.4 --> 5.12
ensure this is working when I go from


6227
16843.798 --> 4.722
here as well that is working one thing


6228
16846.52 --> 3.92
that I'm interested in is that if I


6229
16848.52 --> 3.68
favorite this board and going into my


6230
16850.44 --> 4.4
favorite boards it's right here all


6231
16852.2 --> 5
right but if I switch on organization


6232
16854.84 --> 4.878
then it's not here perfect let me just


6233
16857.2 --> 4.96
confirm that in here I should have a new


6234
16859.718 --> 5.92
one so this is new


6235
16862.16 --> 5.68
org so if I add this to face faes that


6236
16865.638 --> 4
is only inside of this organization if I


6237
16867.84 --> 3.48
go back to the other one then it's


6238
16869.638 --> 4.482
Untitled perfect so everything is


6239
16871.32 --> 6.52
working just as we expect and now let's


6240
16874.12 --> 6
just go ahead inside of page. TSX here


6241
16877.84 --> 4.68
and let's just prepare our props so go


6242
16880.12 --> 5.36
inside of let me just close everything


6243
16882.52 --> 6.8
go inside of uh app folder board board


6244
16885.48 --> 6.96
ID page. TSX and let's go ahead and


6245
16889.32 --> 7.68
create an interface board ID page props


6246
16892.44 --> 6.24
to have Rams which our board ID which is


6247
16897 --> 4.16
a type of


6248
16898.68 --> 4.72
string and in here we're going to have


6249
16901.16 --> 5.718
board ID page


6250
16903.4 --> 6.36
props and in here we can extract our


6251
16906.878 --> 6.442
pams and let's also prepare the canvas


6252
16909.76 --> 6.52
to accept the board ID prop from pams


6253
16913.32 --> 5.92
board ID so we can go back inside of


6254
16916.28 --> 5.12
underscore components canvas right here


6255
16919.24 --> 5.44
and let's just go ahead and quickly


6256
16921.4 --> 7.2
create our canvas props so interface


6257
16924.68 --> 6.84
convas props is going to have a board ID


6258
16928.6 --> 6.278
which is a type of string and let's go


6259
16931.52 --> 6.358
ahead and destructure that and now we


6260
16934.878 --> 5.122
have our board ID and we're going to go


6261
16937.878 --> 5.202
ahead and use it later in the info


6262
16940 --> 7.04
component right here great so we created


6263
16943.08 --> 6.798
a nice little skeleton layout for our


6264
16947.04 --> 4.4
application and now in the next chapter


6265
16949.878 --> 4.162
we're going to go ahead and actually


6266
16951.44 --> 4.6
connect to live blocks so that we can


6267
16954.04 --> 4.44
actually authenticate the user


6268
16956.04 --> 4.44
attempting to enter this board because


6269
16958.48 --> 4.72
we're only going to allow users from the


6270
16960.48 --> 4.52
same organization to look at a board


6271
16963.2 --> 3.84
we're not going to allow anyone to just


6272
16965 --> 5.52
join and we're going to make sure that


6273
16967.04 --> 6.28
that logic is working great great


6274
16970.52 --> 5.68
job so now let's go ahead and let's


6275
16973.32 --> 5.2
connect to live blocks so use the link


6276
16976.2 --> 5.64
in the description or go to live blocks


6277
16978.52 --> 5.56
doio and go ahead and create an


6278
16981.84 --> 4.44
account once you're inside you're going


6279
16984.08 --> 4.878
to have two default projects the


6280
16986.28 --> 4.8
development and production so for this


6281
16988.958 --> 4.882
one I'm going to click on development


6282
16991.08 --> 5.24
right here and then inside of my API


6283
16993.84 --> 4.68
keys right here section I can see my


6284
16996.32 --> 5.6
public key which I'm going to need to


6285
16998.52 --> 5.278
create a live blocks client so now let's


6286
17001.92 --> 3.92
go ahead and let's go inside of our


6287
17003.798 --> 4.362
terminal so we can set up live blocks


6288
17005.84 --> 5.038
properly so for this step I'm going to


6289
17008.16 --> 4.84
shut down all of my terminals I don't


6290
17010.878 --> 4.76
want anything running because I will


6291
17013 --> 6.16
just be installing live blocks so let's


6292
17015.638 --> 6
go ahead and run mpm install at live


6293
17019.16 --> 5.28
blocks SL


6294
17021.638 --> 6.562
client and after that let's go ahead and


6295
17024.44 --> 6.358
install live blocks SL react so let's


6296
17028.2 --> 6.8
wait a second for this to finish and


6297
17030.798 --> 6.882
then live blocks SL


6298
17035 --> 4.84
react after this has been installed


6299
17037.68 --> 5.72
we're going to be able to run an npx


6300
17039.84 --> 7.958
command to initialize the live blocks.


6301
17043.4 --> 8.84
config.sys so for that run npx create


6302
17047.798 --> 8.242
live blocks Dasa at latest and then


6303
17052.24 --> 6.718
let's write-- init D-


6304
17056.04 --> 5.4
framework and then react so let me zoom


6305
17058.958 --> 5.362
out and try and show you this in one


6306
17061.44 --> 6.198
line so npx create live blocks app at


6307
17064.32 --> 7.04
latest D- init D- framework


6308
17067.638 --> 7.08
react all right and let's run enter and


6309
17071.36 --> 5.84
that should set up our uh live PL box


6310
17074.718 --> 4.482
config so just confirm the newest


6311
17077.2 --> 4.4
version if you get this


6312
17079.2 --> 4.84
prompt uh would you like to use our


6313
17081.6 --> 4.96
react suspense hooks you can select yes


6314
17084.04 --> 5.12
for that are you using typescript yes


6315
17086.56 --> 5.68
for that as well and there we go live


6316
17089.16 --> 6.04
blocks config TS has been generated so


6317
17092.24 --> 7.96
now you should be able to find this file


6318
17095.2 --> 5
right here live blocks. config.txt


6319
17103.28 --> 4.16
uh


6320
17105.04 --> 5.758
added here and it's expecting an actual


6321
17107.44 --> 5.358
public API key so let's go ahead for now


6322
17110.798 --> 3.562
and remove the out end point let's


6323
17112.798 --> 5
remove the throttle and let's just


6324
17114.36 --> 7
uncomment the public API key and then we


6325
17117.798 --> 6.362
can use this one from our API key


6326
17121.36 --> 6.4
settings here so just click to copy


6327
17124.16 --> 6.28
this and I'm going to paste it here like


6328
17127.76 --> 6.36
that so it should be in one line of


6329
17130.44 --> 6.32
course like this there we go great and


6330
17134.12 --> 6.12
now now let's go ahead and let's create


6331
17136.76 --> 6.64
a reusable room component which will


6332
17140.24 --> 5.24
wrap our existing canvas so for that I'm


6333
17143.4 --> 6.398
going to go inside of components here


6334
17145.48 --> 7.44
and I'm going to create a file room. DSX


6335
17149.798 --> 4.362
let's mark this as use client and let's


6336
17152.92 --> 4.36
go ahead and


6337
17154.16 --> 7.2
import react node from


6338
17157.28 --> 7.598
react let's import room Provider from


6339
17161.36 --> 6.518
/live blocks. config


6340
17164.878 --> 5.722
and let's go ahead and import client


6341
17167.878 --> 4.682
side suspense from live blocks react I'm


6342
17170.6 --> 5.56
just going to keep these two separate


6343
17172.56 --> 5.8
because this is our Alias path to a file


6344
17176.16 --> 4.4
right which we have right here live


6345
17178.36 --> 4.84
blocks. config and in here you can see


6346
17180.56 --> 4.64
everything that is uh exporting like a


6347
17183.2 --> 4.758
room provider which we are importing


6348
17185.2 --> 4.2
here and this is an npm package so


6349
17187.958 --> 3.402
that's why I like to separate this


6350
17189.4 --> 4.96
Imports because this is an alias to my


6351
17191.36 --> 6.84
file and this is an npm package and and


6352
17194.36 --> 6.84
now let's just export const


6353
17198.2 --> 5.88
room let's go ahead and give it a type


6354
17201.2 --> 6.12
of children to be react


6355
17204.08 --> 6.4
node children like


6356
17207.32 --> 6.36
this and then in here very simply we're


6357
17210.48 --> 5.92
going to return a room


6358
17213.68 --> 4.958
provider and in here we're not just


6359
17216.4 --> 5.88
going to accept the children we are also


6360
17218.638 --> 6.842
going to accept an actual room ID so


6361
17222.28 --> 6.278
let's just go ahead and add room ID prop


6362
17225.48 --> 6.078
as well and Define it here to be a


6363
17228.558 --> 6.08
string and then we can pass in the ID to


6364
17231.558 --> 4.962
be room ID right here and initial


6365
17234.638 --> 4.122
presence is just going to be an empty


6366
17236.52 --> 4.92
object for now and then inside we're


6367
17238.76 --> 4.92
going to add client side


6368
17241.44 --> 4.88
suspense and we're simply going to go


6369
17243.68 --> 6.16
ahead and render the


6370
17246.32 --> 6.238
children and let's add a f back here for


6371
17249.84 --> 6.24
now to just be a


6372
17252.558 --> 3.522
div loading


6373
17256.558 --> 5.722
like that


6374
17259.36 --> 5.24
perfect so I just want to be consistent


6375
17262.28 --> 4.84
with the way I'm creating props so I'm


6376
17264.6 --> 5.958
going to separate this like I always do


6377
17267.12 --> 6.2
room props like that and then I will


6378
17270.558 --> 4.042
simply use room props here you don't


6379
17273.32 --> 4.398
have to do it I just like to be


6380
17274.6 --> 6.198
consistent with my types and now let's


6381
17277.718 --> 7.282
go ahead back inside of app uh board


6382
17280.798 --> 7.402
board ID page. TSX right here and now


6383
17285 --> 6.04
we're going to go ahead and import room


6384
17288.2 --> 7.48
not from live blocks client but


6385
17291.04 --> 8.48
from components room like this and now


6386
17295.68 --> 6.76
we can wrap our canvas in a


6387
17299.52 --> 5.92
room just like


6388
17302.44 --> 7.04
this and let's go ahead and pass in room


6389
17305.44 --> 7.8
ID to be uh pams board


6390
17309.48 --> 5.318
ID like that so now if you take a look


6391
17313.24 --> 4.318
in your uh


6392
17314.798 --> 4.16
live kit here rooms I'm not sure if


6393
17317.558 --> 3.602
we're going to have any rooms there we


6394
17318.958 --> 4.282
go we have no rooms yet but I think that


6395
17321.16 --> 5.16
just by refreshing this page after we


6396
17323.24 --> 5.52
run npm runev the fact that we wrapped


6397
17326.32 --> 5.12
our canvas in a room component that is


6398
17328.76 --> 5.56
going to trigger a new room so let's do


6399
17331.44 --> 7.48
npm run Dev let's open a new terminal


6400
17334.32 --> 7.84
for npx convex Dev like that and let's


6401
17338.92 --> 5.52
go directly to Local Host 3000 first so


6402
17342.16 --> 4.638
we ensure that our Authentication and


6403
17344.44 --> 4.16
everything is working so I'm just going


6404
17346.798 --> 4.402
to refresh one more time to make sure


6405
17348.6 --> 3.68
this is synchronized there we go so once


6406
17351.2 --> 4.358
I click


6407
17352.28 --> 6.358
here and once I refresh here there we go


6408
17355.558 --> 8.16
you can see how I have a new room ID


6409
17358.638 --> 7.92
which has the same ID as my uh board ID


6410
17363.718 --> 6.682
from convex so this way we synchronized


6411
17366.558 --> 6.482
live blocks with our convex database uh


6412
17370.4 --> 5.158
in that way by using the same unique ID


6413
17373.04 --> 6.44
so we know which which live blocks room


6414
17375.558 --> 5.922
relates to which canvas uh board perfect


6415
17379.48 --> 4.12
so if you go ahead and click on some


6416
17381.48 --> 4.96
other boards that you have that's going


6417
17383.6 --> 4.88
to go ahead and create uh a new live


6418
17386.44 --> 5.96
blocks room for you so right now I only


6419
17388.48 --> 6.52
have one room but if I go to some other


6420
17392.4 --> 5.64
uh organization right here there we go


6421
17395 --> 5.2
now I have two rooms and it uses the ID


6422
17398.04 --> 5.28
of that board you can see the the ID is


6423
17400.2 --> 5.72
the same as here perfect so now that we


6424
17403.32 --> 5.08
have that I want to go ahead and extend


6425
17405.92 --> 5.28
this room component a bit since it's


6426
17408.4 --> 5.96
reusable I want to make sure that the


6427
17411.2 --> 5.32
fallback that I'm passing it's also


6428
17414.36 --> 5
reusable so this is what I'm going to do


6429
17416.52 --> 5.118
I'm going to go ahead and add all back


6430
17419.36 --> 5.8
here and I'm going to attempt to use


6431
17421.638 --> 6.482
this non-nullable react node or


6432
17425.16 --> 6.28
null like that and then I'm going to


6433
17428.12 --> 6.92
extract the F back here and I'm going to


6434
17431.44 --> 6.08
pass the fall back like this


6435
17435.04 --> 4.88
all right no errors here but now my page


6436
17437.52 --> 8.08
should have an error and in here instead


6437
17439.92 --> 8.2
now I can pass uh a div for example


6438
17445.6 --> 5.32
loading like that and now if I refresh


6439
17448.12 --> 5.2
here this should still work just fine


6440
17450.92 --> 6.56
great what I want to do now is I want to


6441
17453.32 --> 7.12
create an actual loading for my board so


6442
17457.48 --> 6.36
inside of here uh I'm going to go ahead


6443
17460.44 --> 6
and create a canvas loading element so


6444
17463.84 --> 4.4
let's go ahead and create canvas


6445
17466.44 --> 5.6
loading.


6446
17468.24 --> 5.88
TSX or maybe we can just name it


6447
17472.04 --> 4.56
loading let's name it


6448
17474.12 --> 6.28
loading uh and basically what we're


6449
17476.6 --> 6.358
going to do here is we are going


6450
17480.4 --> 5.478
to uh


6451
17482.958 --> 5.962
import skeleton from components UI


6452
17485.878 --> 6.562
skeleton and we are going to import


6453
17488.92 --> 6.28
loader from Lucid


6454
17492.44 --> 6.118
react and then then let's go ahead and


6455
17495.2 --> 8.08
Export const uh


6456
17498.558 --> 8.042
loading and let's return a main


6457
17503.28 --> 8.48
element and I want it to be the same as


6458
17506.6 --> 8.038
my canvas right so we can copy this


6459
17511.76 --> 5.36
specifically like this and let's see if


6460
17514.638 --> 5.522
we have to change anything so we need


6461
17517.12 --> 7.28
relative we need VG neutral but let's


6462
17520.16 --> 6.398
also do this let's add Flex items Center


6463
17524.4 --> 4.44
and justify Center so the reason I'm


6464
17526.558 --> 3.482
adding this is because I'm going to have


6465
17528.84 --> 4
a


6466
17530.04 --> 5.12
loader which I've imported in the middle


6467
17532.84 --> 5.6
of the screen so class name height six


6468
17535.16 --> 6.398
with six text muted


6469
17538.44 --> 5.24
foreground and animate


6470
17541.558 --> 5.482
Spin and let me just see if I can


6471
17543.68 --> 7.76
already use this so inside of my page.


6472
17547.04 --> 4.4
vsx I'm going to remove this and use


6473
17551.68 --> 4.56
loading from do/ comp components loading


6474
17554.4 --> 3.72
and I think that if you have a slow


6475
17556.24 --> 4.12
connection you might see a little loader


6476
17558.12 --> 4.08
for a second the thing is that there's


6477
17560.36 --> 4.16
nothing loading from live blocks at the


6478
17562.2 --> 4.8
moment so perhaps we won't even able we


6479
17564.52 --> 4.68
are not even able to see it right now so


6480
17567 --> 6.08
here's what I want to do let's just


6481
17569.2 --> 3.88
manually return


6482
17573.48 --> 5.398
loading just so we can see what we're


6483
17575.958 --> 4.482
building there we go so now we can see


6484
17578.878 --> 4.322
our loading element here so I want to


6485
17580.44 --> 4.518
create that room loading uh component


6486
17583.2 --> 3.88
first and let's go ahead and continue


6487
17584.958 --> 4.282
developing it so now I want to create


6488
17587.08 --> 4.12
like little skeletons or placeholders


6489
17589.24 --> 3.76
for all of those floating Elements which


6490
17591.2 --> 3.8
we're going to have which are the info


6491
17593 --> 6.08
here the participants and the toolbar


6492
17595 --> 6.84
here so let's go ahead and let me open


6493
17599.08 --> 5.878
up the info component so what we can


6494
17601.84 --> 6.76
technically do is write info. skeleton


6495
17604.958 --> 3.642
to be function infos


6496
17609.6 --> 5.88
skeleton and then we can just return


6497
17613.16 --> 5.398
this


6498
17615.48 --> 5.238
right and it can actually be a self


6499
17618.558 --> 3.442
closing tag I believe because it doesn't


6500
17620.718 --> 3.762
matter what's inside it's going to be


6501
17622 --> 5.32
empty either


6502
17624.48 --> 5.6
way and I you can use the skeleton


6503
17627.32 --> 4.92
component if you want to Let's actually


6504
17630.08 --> 5.718
use the skeleton component yeah so I'm


6505
17632.24 --> 7.04
going to expand this my


6506
17635.798 --> 5.602
bad let's use this skeleton inside from


6507
17639.28 --> 3.438
components UI skeleton like this so we


6508
17641.4 --> 4.04
are actually going to import that here


6509
17642.718 --> 6.442
in the info let's give the skeleton a


6510
17645.44 --> 7.6
class name of H full with full and BG


6511
17649.16 --> 6.44
muted 400 like


6512
17653.04 --> 5.8
that and let's go ahead and give the


6513
17655.6 --> 5.56
outer div some changes in the class name


6514
17658.84 --> 5.32
so we are going to have to manually give


6515
17661.16 --> 5.32
it uh a specific width so let's go ahead


6516
17664.16 --> 6.24
and do that let's give it a width of


6517
17666.48 --> 5.96
fixed 300 pixels like that and let's see


6518
17670.4 --> 4.28
how this looks for a skeleton so if I go


6519
17672.44 --> 7.64
back to my loading and below the loader


6520
17674.68 --> 7.878
if I add info from do/ info do


6521
17680.08 --> 4.638
skeleton and I can remove this skeleton


6522
17682.558 --> 5.362
from my loading there we go I think this


6523
17684.718 --> 5.322
looks okay right because if you add you


6524
17687.92 --> 3.76
can change the skeleton to be more


6525
17690.04 --> 4.96
visible for example you can remove this


6526
17691.68 --> 5.44
BG muted but then it just looks weird


6527
17695 --> 5.12
because the background itself is already


6528
17697.12 --> 5.2
dark so I think you can just increase


6529
17700.12 --> 4
this and then it looks better because


6530
17702.32 --> 3.398
it's just a blank space indicating


6531
17704.12 --> 3.56
something is loading here and we have


6532
17705.718 --> 4.122
this loader here so I think it's kind of


6533
17707.68 --> 4.16
clear that it's loading that information


6534
17709.84 --> 4
above and the same way we created this


6535
17711.84 --> 5.4
info skeleton here we're now going to


6536
17713.84 --> 5.2
create the uh participants skeleton as


6537
17717.24 --> 4.96
well so let's write


6538
17719.04 --> 5.8
participants do


6539
17722.2 --> 5.64
skeleton is going to be function


6540
17724.84 --> 3
participants


6541
17728.28 --> 4.12
skeleton and we're going to go ahead and


6542
17730.68 --> 3.878
copy and paste


6543
17732.4 --> 5.28
this


6544
17734.558 --> 5.802
like this and let's just add a skeleton


6545
17737.68 --> 4.6
component from components UI skeleton


6546
17740.36 --> 7.358
let's give it a class


6547
17742.28 --> 8.518
name H full and with full and BG muted


6548
17747.718 --> 9.482
400 and let's give this one a fixed


6549
17750.798 --> 8.242
width of let's do uh I don't know 100


6550
17757.2 --> 4.24
pixels like


6551
17759.04 --> 4.598
that and let's try it out so let's go


6552
17761.44 --> 4.84
back inside of loading here and below


6553
17763.638 --> 2.642
that add


6554
17766.558 --> 4.522
participants do


6555
17768.84 --> 4.798
skeleton there we go we now have a


6556
17771.08 --> 4.718
loading for our participants here and


6557
17773.638 --> 3.16
the last one we're going to do is for


6558
17775.798 --> 3.282
our


6559
17776.798 --> 8.642
toolbar so let's go at the bottom and


6560
17779.08 --> 9.08
write toolbar skeleton function toolbar


6561
17785.44 --> 4.118
skeleton and in here we're going to go


6562
17788.16 --> 4.12
ahead and


6563
17789.558 --> 5.562
add first let's do


6564
17792.28 --> 5.96
this


6565
17795.12 --> 5.2
like that and let's add a skeleton


6566
17798.24 --> 5.52
component inside from components UI


6567
17800.32 --> 5.72
skeleton so I just copied this outer div


6568
17803.76 --> 4
right and instead of creating you know


6569
17806.04 --> 3.72
so in this toolbar we have like the


6570
17807.76 --> 4.4
outer div which just positions the


6571
17809.76 --> 5.64
elements and then inside we have this BG


6572
17812.16 --> 8.16
white so how about I combine the two so


6573
17815.4 --> 9.478
what I can do right here is just add BG


6574
17820.32 --> 7.68
white and then I can also fix the height


6575
17824.878 --> 5.882
of this to be 360 pixels because that's


6576
17828 --> 5.84
how much elements I expect inside later


6577
17830.76 --> 5.92
and let's also fix the width to be 52


6578
17833.84 --> 7.68
pixels like that and let's give this a


6579
17836.68 --> 7.76
class name height full width full and BG


6580
17841.52 --> 2.92
muted


6581
17845.24 --> 6.318
400 oh BG muted 400 doesn't exist at all


6582
17848.76 --> 4.52
that's why it looks white okay so we're


6583
17851.558 --> 4.522
going to refactor this let's just uh


6584
17853.28 --> 4.56
take a look at how this looks now so


6585
17856.08 --> 4.32
toolbar do


6586
17857.84 --> 5.16
skeleton so make sure you have info


6587
17860.4 --> 5.64
toolbar and skeleton and let's refresh


6588
17863 --> 4.878
this uh okay so this looks good this


6589
17866.04 --> 4.12
looks good and the toolbar is missing a


6590
17867.878 --> 5.162
shadow so let's go inside of the toolbar


6591
17870.16 --> 6.92
here and just add a shadow


6592
17873.04 --> 6.758
MD okay and we also need rounded MD I


6593
17877.08 --> 4.4
believe there we go now it looks just


6594
17879.798 --> 3.442
like the others and I think we actually


6595
17881.48 --> 3.76
don't need the skeleton inside so if I


6596
17883.24 --> 3.92
remove the skeleton yeah nothing has


6597
17885.24 --> 4.558
changed so we don't need a skeleton and


6598
17887.16 --> 5
all of these can be self closing divs so


6599
17889.798 --> 4.482
I just fix that in the toolbar skeleton


6600
17892.16 --> 3.92
so we don't need nothing inside we can


6601
17894.28 --> 4
be a self closing tag like this and you


6602
17896.08 --> 3.878
can remove the unnecessary skeleton now


6603
17898.28 --> 2.92
I'm going to go inside of info and do


6604
17899.958 --> 3.802
the same thing we don't need the


6605
17901.2 --> 4.92
skeleton import and we don't need this


6606
17903.76 --> 4.198
inside we don't need the ending tag


6607
17906.12 --> 4.16
because this can just be a self-closing


6608
17907.958 --> 4.68
tag and let me just refresh to confirm


6609
17910.28 --> 5
this is still working this is still


6610
17912.638 --> 5.042
working also yeah when you're modifying


6611
17915.28 --> 5.598
code inside of this info skeleton like


6612
17917.68 --> 6
this uh don't rely on hot reload too


6613
17920.878 --> 4.522
much manually reload to see your changes


6614
17923.68 --> 5.08
because I think that if I just change


6615
17925.4 --> 4.84
this to BG red 500 okay now it works of


6616
17928.76 --> 3.958
course when I try to demonstrate it it


6617
17930.24 --> 4.6
works but while I was developing hot


6618
17932.718 --> 4.482
reload gets kind of confused with this


6619
17934.84 --> 4.64
kind of experts so if you're not seeing


6620
17937.2 --> 4.88
your changes immediately just refresh


6621
17939.48 --> 4.92
manually all right so we fixed that for


6622
17942.08 --> 4.04
the info we didn't need that skeleton


6623
17944.4 --> 3.64
component and the same thing is true for


6624
17946.12 --> 3.838
the participants component right here we


6625
17948.04 --> 5
don't need the skeleton import we don't


6626
17949.958 --> 5.562
need to use it here and we don't need we


6627
17953.04 --> 4.918
can just use the uh self closing tag


6628
17955.52 --> 5.52
like this there we go so now we have a


6629
17957.958 --> 5.722
nice little skeleton page uh our


6630
17961.04 --> 5.598
suspense for actually loading the canvas


6631
17963.68 --> 5.198
room connected to live blocks so why are


6632
17966.638 --> 4.442
we even going to need the loading for


6633
17968.878 --> 4.322
that we are going to need the loading


6634
17971.08 --> 4.6
because uh we're going to in this this


6635
17973.2 --> 5.32
room component later so we can now


6636
17975.68 --> 4.878
remove this return right we can now just


6637
17978.52 --> 4.32
let it go back to it's going to use that


6638
17980.558 --> 4.522
loading as a fallback we've now know


6639
17982.84 --> 3.44
that it works we know how it looks like


6640
17985.08 --> 3.44
uh otherwise it would have been very


6641
17986.28 --> 4.598
hard to develop it so the reason the


6642
17988.52 --> 7.4
loading is later going to be needed is


6643
17990.878 --> 5.042
because inside of our live blocks.


6644
18001.958 --> 6.442
config.sys allowed or not allowed to


6645
18005.16 --> 5.28
visit this board so we successfully


6646
18008.4 --> 4.88
connected to our live blocks and we are


6647
18010.44 --> 5.518
now ready to do that great great


6648
18013.28 --> 5.678
job so now let's go ahead and let's


6649
18015.958 --> 6.202
authenticate each user trying to access


6650
18018.958 --> 7
our room in order to do that the first


6651
18022.16 --> 7.478
thing I want to create is a way to fetch


6652
18025.958 --> 5.962
the board using the ID so we can see uh


6653
18029.638 --> 5.482
whether the user has permission to enter


6654
18031.92 --> 6.36
that board so let's go ahead inside of


6655
18035.12 --> 5.438
convex inside of board. THS and I'm


6656
18038.28 --> 3.56
going to go all the way to the top here


6657
18040.558 --> 5.24
actually let's go all the way to the


6658
18041.84 --> 7.718
bottom and let's export const uh get to


6659
18045.798 --> 5.882
be a query from SL generated server so


6660
18049.558 --> 4.282
import it from the same place where you


6661
18051.68 --> 5.64
imported the


6662
18053.84 --> 7.718
mutation and this query is very simply


6663
18057.32 --> 7.398
going to have arguments to accept the ID


6664
18061.558 --> 4.762
and then that's going to be do ID boards


6665
18064.718 --> 3.24
and then we're going to have a simple


6666
18066.32 --> 4.52
Handler which is an asynchronous


6667
18067.958 --> 5.642
function which has the context and the


6668
18070.84 --> 6.28
arguments and all this is going to do is


6669
18073.6 --> 6.8
get the board using context database get


6670
18077.12 --> 4.56
arguments ID and return the board and no


6671
18080.4 --> 3.08
we are not going to add any


6672
18081.68 --> 5.24
authentication here because we're going


6673
18083.48 --> 6.44
to use this only to access it through


6674
18086.92 --> 4.92
our uh route Handler which we're going


6675
18089.92 --> 4.16
to create now and in there we're going


6676
18091.84 --> 3.64
to have separate authentication so


6677
18094.08 --> 3.16
you're going to see in a second why we


6678
18095.48 --> 3.96
need to do it this way so for now just


6679
18097.24 --> 5.12
make sure that you have a very simple


6680
18099.44 --> 5.48
get query inside of the convex function


6681
18102.36 --> 4.24
here what we're going to do now is we're


6682
18104.92 --> 3.76
going to follow the instructions on


6683
18106.6 --> 4.6
setting up authentication for live


6684
18108.68 --> 4.76
blocks so in here in the documentation


6685
18111.2 --> 4.598
you have the authentication column you


6686
18113.44 --> 4.278
can use their authentication or you can


6687
18115.798 --> 4
build your own authentication so I'm


6688
18117.718 --> 5.122
going to do that using the access token


6689
18119.798 --> 5.322
and select nextjs so let's go ahead and


6690
18122.84 --> 5.038
install this package npm install live


6691
18125.12 --> 6
blocks node I'm going to go ahead inside


6692
18127.878 --> 5.84
of my terminal here and I will shut down


6693
18131.12 --> 7.32
convex Dev for now and just run npm


6694
18133.718 --> 8.84
install at live blocks SL


6695
18138.44 --> 7.08
node and then we can do npx convex Dev


6696
18142.558 --> 5.442
again like this let me just shut all of


6697
18145.52 --> 4.198
this down and then what we're going to


6698
18148 --> 5.798
have to do is we're going to have to


6699
18149.718 --> 7.722
create an endpoint live blocks Al route.


6700
18153.798 --> 5.362
THS so let's go ahead and do that so I'm


6701
18157.44 --> 3.4
going to go inside of the app folder and


6702
18159.16 --> 4.52
I'm going to create a new folder called


6703
18160.84 --> 6.2
API and inside of here I'm going to go


6704
18163.68 --> 6.16
ahead and create a new folder which is


6705
18167.04 --> 6.36
also going to be the name of our path


6706
18169.84 --> 6.2
live blocks Das out and then inside


6707
18173.4 --> 5.318
route. THS so this is the exact same


6708
18176.04 --> 6.758
Convention as creating uh client side


6709
18178.718 --> 9.122
pages but instead of page. DSX we have


6710
18182.798 --> 8.08
out. CS so let's go ahead now and let's


6711
18187.84 --> 7.6
import live


6712
18190.878 --> 7.84
blocks from at live blocks SL node which


6713
18195.44 --> 5.64
we've just installed and then in here


6714
18198.718 --> 5.92
we're going to initialize live blocks


6715
18201.08 --> 6.52
using new live blocks and then we have


6716
18204.638 --> 5.802
to pass in the secret this time so


6717
18207.6 --> 5.56
inside of our live blocks config we use


6718
18210.44 --> 5.24
this public key but in here we need to


6719
18213.16 --> 4.52
use a secret and you can see that inside


6720
18215.68 --> 4.198
of this configuration right here it uses


6721
18217.68 --> 4.198
a secret key so you need to go back


6722
18219.878 --> 5.242
inside of your project here inside of


6723
18221.878 --> 5.92
the API keys and this time reveal your


6724
18225.12 --> 5.518
secret key and copy it so we have to use


6725
18227.798 --> 5.962
the secret key here on the back end and


6726
18230.638 --> 5.442
let's paste the secret key here like


6727
18233.76 --> 4.958
that then what we have to do is we have


6728
18236.08 --> 5.52
to initialize convex so that we can use


6729
18238.718 --> 5.362
convex inside of our route handlers and


6730
18241.6 --> 3.88
there is a way to do that so let's go


6731
18244.08 --> 6.16
ahead and


6732
18245.48 --> 7.92
import convex HTTP client from convex SL


6733
18250.24 --> 5.96
browser and let's also import API from


6734
18253.4 --> 6.158
convex generated API and then let's


6735
18256.2 --> 7.48
define a convex instance here using new


6736
18259.558 --> 5.32
convex HTTP client process. environment.


6737
18263.68 --> 6.958
nextt


6738
18264.878 --> 8.362
corpu convex uncore URL like that so let


6739
18270.638 --> 4.362
me just collapse this so you can see see


6740
18273.24 --> 4.2
how this is supposed to look like and of


6741
18275 --> 5.04
course confirm in your environment local


6742
18277.44 --> 4.438
that you have next Publix convex URL


6743
18280.04 --> 3.8
it's supposed to match here and you can


6744
18281.878 --> 3.92
add an exclamation point at the end to


6745
18283.84 --> 3.92
get rid of the error so you should now


6746
18285.798 --> 4.16
have an instance of convex and live


6747
18287.76 --> 4.798
blocks inside of your nextjs route


6748
18289.958 --> 6.242
handlers so in here what we can now do


6749
18292.558 --> 6.042
is export asynchronous function post


6750
18296.2 --> 5.2
which has the request which is a type of


6751
18298.6 --> 5.198
request and what we can do here is we


6752
18301.4 --> 4.478
can use Clerk because we have a


6753
18303.798 --> 4.76
middleware file which means that we've


6754
18305.878 --> 4.92
used we've protected our entire back end


6755
18308.558 --> 5.282
and front end with clerk so we can


6756
18310.798 --> 5.962
import some useful utils here like out


6757
18313.84 --> 4.64
from Clerk nextjs and current user from


6758
18316.76 --> 4.64
clerk


6759
18318.48 --> 5.64
nextjs so let's add both of them inside


6760
18321.4 --> 6.68
of this post request here so I'm going


6761
18324.12 --> 6.56
to add const authorization to be await


6762
18328.08 --> 5.28
out and I'm going to have cons user to


6763
18330.68 --> 5.64
be await current user


6764
18333.36 --> 5.518
like that if we don't have authorization


6765
18336.32 --> 5.12
or if we don't have the user in that


6766
18338.878 --> 4.442
case we're going to return new


6767
18341.44 --> 4.04
response


6768
18343.32 --> 4.238
unauthorized and we're going to pass in


6769
18345.48 --> 4.72
a status of


6770
18347.558 --> 5.122
403 and then let's go ahead and extract


6771
18350.2 --> 5.28
the room that we are trying to join from


6772
18352.68 --> 5
await request. Json so this is where


6773
18355.48 --> 4.52
live blocks is going to send the room


6774
18357.68 --> 4.038
information in so if you're wondering


6775
18360 --> 3.92
where are we going to fire this live


6776
18361.718 --> 5.16
blocks out throughout we're going to do


6777
18363.92 --> 4.878
that by modifying our live blocks config


6778
18366.878 --> 4.562
so inside of this create client we're


6779
18368.798 --> 5.402
going to change this to Target to this


6780
18371.44 --> 5.6
API route every time the room component


6781
18374.2 --> 4.56
loads so that's how I know that this


6782
18377.04 --> 4.16
room is going to be inside of my


6783
18378.76 --> 4.68
request. Json and of course because


6784
18381.2 --> 4
that's how it's written right here in


6785
18383.44 --> 5.358
the


6786
18385.2 --> 6.438
documentation so we get the room and


6787
18388.798 --> 6.242
then let's go ahead and get the board


6788
18391.638 --> 6.042
using that room so const board is going


6789
18395.04 --> 7
to be a wait convex do


6790
18397.68 --> 7.44
query API board get and we are very


6791
18402.04 --> 5.8
simply going to pass the ID as the room


6792
18405.12 --> 7.4
itself and now let's go ahead and check


6793
18407.84 --> 7.878
if board question mark organization ID


6794
18412.52 --> 8.438
is not equal to authorization of the


6795
18415.718 --> 9.962
current user do organization ID like


6796
18420.958 --> 8.042
this return new response


6797
18425.68 --> 5.92
unauthorized like this and then let's go


6798
18429 --> 5.16
ahead and let's actually create the user


6799
18431.6 --> 6.64
info which we're going to pass back to


6800
18434.16 --> 7.96
the client so const user info is going


6801
18438.24 --> 6.558
to have a name of user first name and


6802
18442.12 --> 4.88
it's also going to have a picture of


6803
18444.798 --> 6.042
user uh image


6804
18447 --> 6
URL like this and then let's go ahead


6805
18450.84 --> 6.32
and create a session which is going to


6806
18453 --> 7.08
be live blocks. prepare session and pass


6807
18457.16 --> 5.04
in the user. ID as the first argument


6808
18460.08 --> 5.52
and for the second argument open an


6809
18462.2 --> 5.64
object and pass in user info to be user


6810
18465.6 --> 4.24
info or you can use a shorthand like


6811
18467.84 --> 5.038
this and now you're going to have this


6812
18469.84 --> 5.718
two errors here which you can easily fix


6813
18472.878 --> 5.08
by adding exclamation points at the end


6814
18475.558 --> 5.08
or you can use aliases like Anonymous


6815
18477.958 --> 5.162
for example if the name isn't available


6816
18480.638 --> 5.042
so you can choose one of those


6817
18483.12 --> 6.678
so either do it like this or add an


6818
18485.68 --> 7.6
exclamation point or maybe a


6819
18489.798 --> 5.242
teammate and now that we have this let's


6820
18493.28 --> 4.72
check if we have a


6821
18495.04 --> 8.8
room in that case let's go ahead and do


6822
18498 --> 8.558
session do allow room session full


6823
18503.84 --> 7.36
access let's go ahead and destructure


6824
18506.558 --> 8.522
status and the body from await session


6825
18511.2 --> 8.16
authorized and return new


6826
18515.08 --> 4.28
response body and


6827
18519.4 --> 4.318
status and to make it easier for


6828
18522 --> 3.878
ourselves to understand what's going on


6829
18523.718 --> 4.202
here let's do the following so once we


6830
18525.878 --> 5.322
hit the post route I'm going to go ahead


6831
18527.92 --> 5.2
and add a console log here and I'm going


6832
18531.2 --> 4.48
to say out


6833
18533.12 --> 5.2
info and I'm going to open an object as


6834
18535.68 --> 5.76
the second argument for my authorization


6835
18538.32 --> 4.6
and for my user like that so when this


6836
18541.44 --> 3.278
endpoint hits I'm going to see in the


6837
18542.92 --> 4.28
terminal whether I have


6838
18544.718 --> 5.722
authorization then in here I'm going to


6839
18547.2 --> 5.28
go ahead and I'm going to check if I


6840
18550.44 --> 5
have the room I'm going to check if I


6841
18552.48 --> 5.478
have the board I'm going to check the


6842
18555.44 --> 4.72
board organization ID using board


6843
18557.958 --> 5.082
question mark organization ID and I'm


6844
18560.16 --> 4
going to check user organization ID


6845
18563.04 --> 3.36
which is going to be


6846
18564.16 --> 4.04
authorization. organization ID you don't


6847
18566.4 --> 4.12
have to do this but I'm just giving you


6848
18568.2 --> 4.88
some tips on how you can debug this to


6849
18570.52 --> 5
see if something goes wrong or why it


6850
18573.08 --> 4.52
works in the first place and the last


6851
18575.52 --> 6.32
thing we can do for example is just


6852
18577.6 --> 6.32
check conso log user info here I like to


6853
18581.84 --> 5.28
add this in an object is easier for me


6854
18583.92 --> 6.44
to see that way great and the last thing


6855
18587.12 --> 6.12
here we're going to do is conso


6856
18590.36 --> 6.598
log let's do it just before we return


6857
18593.24 --> 5.8
the session let's add status and body


6858
18596.958 --> 3.84
allowed like that so I just added a


6859
18599.04 --> 3.88
couple of console logs so it's easier


6860
18600.798 --> 5.08
for us to follow the flow of what's


6861
18602.92 --> 4.48
going on inside of this API route so now


6862
18605.878 --> 4.242
we're going to go back inside of Live


6863
18607.4 --> 2.72
blocks.


6864
18611.08 --> 5
config.sys And instead we're going to


6865
18614.08 --> 7.12
add out endpoint and that's going to go


6866
18616.08 --> 8
to SL API SL live blocks Das out so


6867
18621.2 --> 6.4
first things first confirm that this/


6868
18624.08 --> 8.44
API live blocks D out matches your new


6869
18627.6 --> 7.4
API structure app folder API live blocks


6870
18632.52 --> 4.32
out make sure you don't have any typos


6871
18635 --> 4.798
otherwise this is going to be a 404


6872
18636.84 --> 5.2
route so first things first let's check


6873
18639.798 --> 4.642
if we have this inside of our Network


6874
18642.04 --> 5.2
tab at all so I'm going to go ahead and


6875
18644.44 --> 6.48
search for live


6876
18647.24 --> 5.52
blocks SL dash out to confirm that


6877
18650.92 --> 4.12
that's going to be loaded here once I


6878
18652.76 --> 5.198
refresh let's take a look and there we


6879
18655.04 --> 5.44
go you can see how it's spending and it


6880
18657.958 --> 4.562
received back a token perfect and you


6881
18660.48 --> 5
can see how we have the payload with our


6882
18662.52 --> 5.438
room ID and now because of all of those


6883
18665.48 --> 5.158
console logs which we've added you can


6884
18667.958 --> 5.722
go inside of your server terminal and in


6885
18670.638 --> 4.842
here where you're running npm run Dev


6886
18673.68 --> 4.32
you're going to see all of that useful


6887
18675.48 --> 5.44
information so let's take a look at it


6888
18678 --> 5.92
from the start let me just go ahead and


6889
18680.92 --> 5.4
find where this is starting all right so


6890
18683.92 --> 4.68
first I have the out info you can see


6891
18686.32 --> 5.398
that I have the authorization that is


6892
18688.6 --> 5.118
great and I have the user model that is


6893
18691.718 --> 4.442
great great and let's take a look at my


6894
18693.718 --> 4.682
authorization which is important so your


6895
18696.16 --> 4.638
authorization object should have the


6896
18698.4 --> 5.2
organization ID I also have the


6897
18700.798 --> 5.402
organization role so in case you don't


6898
18703.6 --> 5.08
have organization ID or organization


6899
18706.2 --> 4.598
role which you can also confirm a bit


6900
18708.68 --> 6.24
lower here I think we created a custom


6901
18710.798 --> 5.682
object let me just scroll a bit down uh


6902
18714.92 --> 4.2
there we go you can see that my board


6903
18716.48 --> 4.92
organization ID matches my user


6904
18719.12 --> 4.838
organization ID so that's why I allow


6905
18721.4 --> 4.96
this user to visit this board so in case


6906
18723.958 --> 4.802
for some reason you don't have that you


6907
18726.36 --> 4.518
can always visit Clerk and inside of


6908
18728.76 --> 4.198
your jbt token just confirm that you


6909
18730.878 --> 3.76
have the organization ID passed and I


6910
18732.958 --> 3.76
also have the organization role passed


6911
18734.638 --> 6.682
for example even though I'm not exactly


6912
18736.718 --> 6.962
sure that this jvt template relates to


6913
18741.32 --> 5.96
what I do in my back end I'm not


6914
18743.68 --> 5.68
entirely sure uh great but uh basically


6915
18747.28 --> 3.84
if in your console log right here you


6916
18749.36 --> 4.68
can see this allowed you can see this


6917
18751.12 --> 6.438
state is too high 100 and inside of here


6918
18754.04 --> 5.44
of course you don't have any errors you


6919
18757.558 --> 3.722
should be able to see this completely so


6920
18759.48 --> 5.12
now what I'm going to do is I'm going to


6921
18761.28 --> 7.518
copy the URL from here and I'm going to


6922
18764.6 --> 6.72
go ahead and create a completely new uh


6923
18768.798 --> 4.682
completely new user and see if I can


6924
18771.32 --> 4.558
visit that board


6925
18773.48 --> 5.12
then all right so I'm in a completely


6926
18775.878 --> 5.122
new account and if I paste that board


6927
18778.6 --> 4.92
URL let's go ahead and see what happens


6928
18781 --> 5.12
it looks like I can still access this


6929
18783.52 --> 6.68
but we can see that authentication did


6930
18786.12 --> 6.598
fail so our API route is working and our


6931
18790.2 --> 4.96
authentication is working but I may be


6932
18792.718 --> 4.92
doing something wrong so we do have


6933
18795.16 --> 6.36
unauthorized but for some reason we


6934
18797.638 --> 7.362
still have access to this right here so


6935
18801.52 --> 8.6
I'm going to go ahead and debug this a


6936
18805 --> 8.92
bit so let's try this so find the inside


6937
18810.12 --> 6.64
of your API live blocks out where we do


6938
18813.92 --> 6.44
return new response unauthorized try and


6939
18816.76 --> 3.6
also give it a status of


6940
18820.76 --> 5.08
403 like that and let's see if that's


6941
18823.24 --> 5.52
going to change anything if I refresh


6942
18825.84 --> 5.64
here let's see anything new from the


6943
18828.76 --> 4.16
error unauthorized 403 so it definitely


6944
18831.48 --> 4.238
is


6945
18832.92 --> 5.84
working oh and the web and it seems like


6946
18835.718 --> 5.442
the web socket server has closed I think


6947
18838.76 --> 5
this is actually Okay the reason uh we


6948
18841.16 --> 5.478
can see still see these things is


6949
18843.76 --> 4.56
because they are hardcoded right so


6950
18846.638 --> 3.802
usually what we're going to do next is


6951
18848.32 --> 4.52
we're going to attempt to load the


6952
18850.44 --> 5.32
information of the pre presence of the


6953
18852.84 --> 5.52
users but none of that is going to work


6954
18855.76 --> 5.118
because we're not authorized so I think


6955
18858.36 --> 4.48
that for now this is actually completely


6956
18860.878 --> 4.442
okay I'm going to research later if


6957
18862.84 --> 6.798
there is a way to redirect the user if


6958
18865.32 --> 8.04
we are um if we are unauthorized but for


6959
18869.638 --> 6.562
now I think this should be uh just fine


6960
18873.36 --> 7.04
uh great so we just wrapped up and added


6961
18876.2 --> 6.678
the authorization uh to our project and


6962
18880.4 --> 4.6
let's go ahead and see what happens I


6963
18882.878 --> 5.042
think we can confirm this even further


6964
18885 --> 4.28
by then going inside of the client here


6965
18887.92 --> 4.878
so we did


6966
18889.28 --> 7.4
this and let's go ahead now and we have


6967
18892.798 --> 3.882
to extend our live blocks.


6968
18900.6 --> 5.68
config.sys of our routed THS here let me


6969
18903.958 --> 4.642
just remove all of these console logs I


6970
18906.28 --> 5.24
don't need them anymore so we confirm


6971
18908.6 --> 5.198
that this works uh oh yeah so in this


6972
18911.52 --> 4.72
user info we have name and picture so we


6973
18913.798 --> 5.042
need to add that to our typescript


6974
18916.24 --> 6.84
inside of live blocks so let's quickly


6975
18918.84 --> 8
go inside of live blocks. config uh. THS


6976
18923.08 --> 5.84
right here and let's find user meta


6977
18926.84 --> 4.48
right here so I'm going to remove these


6978
18928.92 --> 4.6
comments inside I'm going to add an


6979
18931.32 --> 4.88
option optional ID to be a type of


6980
18933.52 --> 5.038
string and I'm going to get info to be


6981
18936.2 --> 4.72
an object which will have name which is


6982
18938.558 --> 6.24
an optional string and picture which is


6983
18940.92 --> 6
an optional string as well like this


6984
18944.798 --> 4.882
great and let's see if there is a way


6985
18946.92 --> 4.52
for us to see if we can render the


6986
18949.68 --> 5.038
authenticated


6987
18951.44 --> 6.08
user uh all right so we yes we did this


6988
18954.718 --> 5.802
that is fine oh and then we can use use


6989
18957.52 --> 7.52
self hook so let's try that out very


6990
18960.52 --> 6.8
quickly so we have to use that somewhere


6991
18965.04 --> 6.48
inside uh of


6992
18967.32 --> 7
our canvas let me inside of uh a room my


6993
18971.52 --> 4.6
apologies so inside of this so let's go


6994
18974.32 --> 3.6
inside of canvas here and let's just


6995
18976.12 --> 5.4
this is already marked as used client


6996
18977.92 --> 6.2
perfect so let's go ahead and import use


6997
18981.52 --> 5.198
self from live blocks


6998
18984.12 --> 4.56
config and let's see if we can get that


6999
18986.718 --> 5.802
here so what does the documentation say


7000
18988.68 --> 6.038
we should be able to export name


7001
18992.52 --> 4.198
from


7002
18994.718 --> 7.122
yourself is


7003
18996.718 --> 8
it oh use self then we get me me


7004
19001.84 --> 6.84
doino like


7005
19004.718 --> 3.962
that name does not


7006
19009.798 --> 4.402
exist let me just try and write


7007
19014.44 --> 7.56
X how about we just mark this as info in


7008
19018.36 --> 5.8
general and console log in


7009
19022 --> 6.48
for so


7010
19024.16 --> 7.88
now let's check this out if I go


7011
19028.48 --> 5.478
here so right now I'm in a place where I


7012
19032.04 --> 3.598
shouldn't be able to see anything and it


7013
19033.958 --> 4.162
looks like it's working you can see how


7014
19035.638 --> 4.842
my board is just infinitely loading


7015
19038.12 --> 4.48
because I get 403 Forbidden because I'm


7016
19040.48 --> 4.478
in that other account so I'm going to go


7017
19042.6 --> 5.92
ahead and log out


7018
19044.958 --> 5.84
now and I'm going to go back in my old


7019
19048.52 --> 4.118
account all right so let's try it out


7020
19050.798 --> 5.402
I'm back


7021
19052.638 --> 6.042
here and let's see there we go you can


7022
19056.2 --> 4.758
see how here it finally loads and you


7023
19058.68 --> 5.08
can see how nice our uh client s side


7024
19060.958 --> 5.76
suspense loading component in is there


7025
19063.76 --> 5.56
we go my name is please know the same


7026
19066.718 --> 4.92
person I'm logged in with and you saw


7027
19069.32 --> 4.8
what happened if I try to enter this


7028
19071.638 --> 4.682
board using another user so you can see


7029
19074.12 --> 4.48
how now we have this nice loading


7030
19076.32 --> 4.478
indicator because we are authenticating


7031
19078.6 --> 4.52
our user perfect and you can see how it


7032
19080.798 --> 5.562
happens right here looks very smooth so


7033
19083.12 --> 6.28
I'm going to try it just one more time


7034
19086.36 --> 5.56
uh by logging out and going in another


7035
19089.4 --> 5.6
account all right I'm in a new account


7036
19091.92 --> 6.12
here and if I paste that previous board


7037
19095 --> 5.44
it never loads for me perfect and I have


7038
19098.04 --> 5
a bunch of 403 forbiddens and you can


7039
19100.44 --> 5.358
see that I can never conso log that use


7040
19103.04 --> 5.56
self hook information perfect so this is


7041
19105.798 --> 6.362
now officially working we successfully


7042
19108.6 --> 7.08
added authorization to our


7043
19112.16 --> 5.16
um authorization to our uh uh uh live


7044
19115.68 --> 4.6
blocks and one thing that I want to do


7045
19117.32 --> 7.44
now is confirm that if I invite this


7046
19120.28 --> 7.8
user which currently gets 403 to my


7047
19124.76 --> 4.84
organization they should then be able to


7048
19128.08 --> 3.84
visit this they should no longer get a


7049
19129.6 --> 4.358
403 so how about we do that I'm going to


7050
19131.92 --> 5.52
go and invite


7051
19133.958 --> 5.642
myself all right so I just went back and


7052
19137.44 --> 4.64
there we go I can now join this


7053
19139.6 --> 5.198
organization and we have the board here


7054
19142.08 --> 6
and if I click here let's take a look


7055
19144.798 --> 5.362
there we go I can successfully see my


7056
19148.08 --> 4.32
information my name is Antonio from


7057
19150.16 --> 4.32
another account perfect so we just


7058
19152.4 --> 3.88
confirm that all of those things are


7059
19154.48 --> 3.56
working also if you're wondering where


7060
19156.28 --> 3.518
you can invite people you can just click


7061
19158.04 --> 3.838
invite members or click manage


7062
19159.798 --> 4.042
organization here and add the email and


7063
19161.878 --> 5.162
select the role of the user you want to


7064
19163.84 --> 5.798
add beautiful so this is officially


7065
19167.04 --> 4.758
working we uh wrapped up the


7066
19169.638 --> 4.042
authentication uh for our live blocks


7067
19171.798 --> 4.242
and now we are ready to start working on


7068
19173.68 --> 4.84
this information about the board and


7069
19176.04 --> 5.16
then add the list of participants then


7070
19178.52 --> 5.56
add our toolbar and start doing some


7071
19181.2 --> 6
cursor matching here great great


7072
19184.08 --> 7.478
job so let's go ahead and let's create


7073
19187.2 --> 7.358
this uh info component right here so I


7074
19191.558 --> 4.762
wanted to have a logo of my application


7075
19194.558 --> 4.522
that I can click and then I can go back


7076
19196.32 --> 6.28
to all boards I want it to have the


7077
19199.08 --> 7.2
title of my board and I want it to have


7078
19202.6 --> 7.038
additional menu right here in the corner


7079
19206.28 --> 6.48
so let's find the info component which


7080
19209.638 --> 6.92
is inside of our app folder board board


7081
19212.76 --> 7.44
ID components info and first things


7082
19216.558 --> 5.922
first let's mark this as use client so


7083
19220.2 --> 3.358
we can add some interactive stuff to


7084
19222.48 --> 3.72
this


7085
19223.558 --> 6.24
component uh and let's see so once I've


7086
19226.2 --> 7.96
added this it seems to broke my app uh


7087
19229.798 --> 6.562
can I just refresh can I restart my app


7088
19234.16 --> 4.2
I'm pretty sure this should not be


7089
19236.36 --> 6.88
breaking my


7090
19238.36 --> 8.24
app or oh maybe I think I know what this


7091
19243.24 --> 5.28
might be okay so make sure you have npx


7092
19246.6 --> 4.92
convex Dev running make sure you have


7093
19248.52 --> 5.52
mpm Dev running let's see if this is


7094
19251.52 --> 6.24
still an issue I think I might have an


7095
19254.04 --> 6.8
idea yeah okay I think that the issue is


7096
19257.76 --> 6.44
that we are using this and then we are


7097
19260.84 --> 5.56
doing do that inside of loading here so


7098
19264.2 --> 3.88
I think that I have to mark loading as


7099
19266.4 --> 4.72
used


7100
19268.08 --> 5.878
client does that fix it there we go that


7101
19271.12 --> 5.28
fixes it yeah so when you're experting


7102
19273.958 --> 4.722
loading functions like this and if that


7103
19276.4 --> 5.64
is from a client component you cannot


7104
19278.68 --> 5.76
import that in a uh server component


7105
19282.04 --> 4.518
like this so usually you can import


7106
19284.44 --> 3.76
client components inside of server but


7107
19286.558 --> 4.842
it looks like when you destructure it


7108
19288.2 --> 5.84
like this it breaks the app so so the


7109
19291.4 --> 4.36
alternative is that you can do things


7110
19294.04 --> 5.2
like export


7111
19295.76 --> 3.48
const info


7112
19300.28 --> 5.2
skeleton something like this let me just


7113
19303.12 --> 5.04
try it out so I can export infos


7114
19305.48 --> 6.478
skeleton separately and then in here I


7115
19308.16 --> 6.2
would import info skeleton


7116
19311.958 --> 5.562
directly and then I think that I can


7117
19314.36 --> 6
remove use client from loading and I


7118
19317.52 --> 5.358
think everything should still work fine


7119
19320.36 --> 5.04
yeah this doesn't break the app so I


7120
19322.878 --> 4.84
really want to do that rather than this


7121
19325.4 --> 4.478
kind of export because it just feels


7122
19327.718 --> 3.962
like it's breaking my app so I'm not


7123
19329.878 --> 4.76
going to add use uh client to the


7124
19331.68 --> 4.958
Loading and I'm not going to use info.


7125
19334.638 --> 4.08
skeleton instead I'm going to export it


7126
19336.638 --> 4.122
manually now I'm going to go inside of


7127
19338.718 --> 3.522
the toolbar and do the same thing


7128
19340.76 --> 3.52
because I feel like I'm breaking some


7129
19342.24 --> 4.68
rules of react server and client


7130
19344.28 --> 5.12
components here so let's export con


7131
19346.92 --> 4.32
toolbar skeleton it's a very simple


7132
19349.4 --> 3.92
refactor so we just turn this into to an


7133
19351.24 --> 5.8
arrow function and a constant and then


7134
19353.32 --> 6.72
in here we directly import the toolbar


7135
19357.04 --> 5.16
skeleton so let's just add that and


7136
19360.04 --> 4.918
let's go inside of participants and do


7137
19362.2 --> 6.28
the same thing so this will be export


7138
19364.958 --> 6.402
const participants skeleton very simple


7139
19368.48 --> 5.88
go back inside of here and import


7140
19371.36 --> 3
participants


7141
19374.52 --> 5.8
skeleton there we go so interesting bug


7142
19377.92 --> 5.24
but luckily we resolved it quite quickly


7143
19380.32 --> 5.08
so there we go now our loading can be a


7144
19383.16 --> 4.2
server component it doesn't matter and


7145
19385.4 --> 3.44
we can mix and match server and client


7146
19387.36 --> 4.72
components instead I just feel like


7147
19388.84 --> 5.718
that's a safer thing to do all right


7148
19392.08 --> 5.558
let's go back inside of our info


7149
19394.558 --> 6.32
component right here and this is now


7150
19397.638 --> 5.642
marked as used client so what I want to


7151
19400.878 --> 6.242
do is I want to create an interface info


7152
19403.28 --> 7.12
props to accept board ID which is a


7153
19407.12 --> 5.758
string and then let's add that here info


7154
19410.4 --> 2.478
props


7155
19413.04 --> 4.56
board


7156
19414.84 --> 6.32
ID and then inside we're going to have


7157
19417.6 --> 6.08
to fetch the current board using convex


7158
19421.16 --> 5
use Query but before we do that let's


7159
19423.68 --> 4.68
actually go inside of convas where we


7160
19426.16 --> 3.96
render the info component we no longer


7161
19428.36 --> 3.64
need this conso log and we no longer


7162
19430.12 --> 4.838
need this use self hook we just did that


7163
19432 --> 4.32
to test out out so let's pass in the


7164
19434.958 --> 4.68
board


7165
19436.32 --> 5.92
ID to this component right here remember


7166
19439.638 --> 6.08
we have this in the props because inside


7167
19442.24 --> 5.96
of the page. DSX we pass that using


7168
19445.718 --> 4.282
params like that great so make sure it's


7169
19448.2 --> 3.84
in the canvas make sure it's in the info


7170
19450 --> 4.24
and then you should have it here and


7171
19452.04 --> 5.678
then let's do const data is going to be


7172
19454.24 --> 7.6
used query from convex react it's going


7173
19457.718 --> 8.642
to use API from convex generated


7174
19461.84 --> 6.92
API it's going to Target API board get


7175
19466.36 --> 6.68
and we're going to go ahead and pass in


7176
19468.76 --> 8.958
ID to be board ID as


7177
19473.04 --> 7.758
ID from convex generated data model and


7178
19477.718 --> 5.722
specify that it's an ID of boards like


7179
19480.798 --> 5.202
this so This API board get is that


7180
19483.44 --> 5.438
simple function query we created when we


7181
19486 --> 5.16
needed it for the out of the room so go


7182
19488.878 --> 4.522
back inside of here and now I'm simply


7183
19491.16 --> 5.68
going to write if there is no data we


7184
19493.4 --> 3.44
can just return info


7185
19496.92 --> 6.56
skeleton otherwise let's go ahead and


7186
19500.16 --> 7.16
let's actually add some information here


7187
19503.48 --> 7.2
so I'm going to go ahead and import uh


7188
19507.32 --> 5.2
image from next image I'm going to


7189
19510.68 --> 5.32
import


7190
19512.52 --> 8
Poppins from next phone to Google I'm


7191
19516 --> 8.798
going to import CN from lib utils I'm


7192
19520.52 --> 8.88
going to import button component from


7193
19524.798 --> 8.482
components UI button uh and I think for


7194
19529.4 --> 7.558
now that should be all right so let me


7195
19533.28 --> 7.04
just quickly Define my font here I think


7196
19536.958 --> 5.68
I already have that somewhere in org


7197
19540.32 --> 4.68
sidebar that's right in organization


7198
19542.638 --> 4
sidebar I have this so let me just copy


7199
19545 --> 4
it and paste that


7200
19546.638 --> 3.642
here all right so now we have this in


7201
19549 --> 4.04
our info


7202
19550.28 --> 4.88
component and now let me remove this


7203
19553.04 --> 4.36
text saying to do information about the


7204
19555.16 --> 6.84
board and instead let me add a button


7205
19557.4 --> 7.558
component let me add an image here


7206
19562 --> 7.84
I'm going to pass in the source to be/


7207
19564.958 --> 7.322
logo SVG the alt is going to be logo the


7208
19569.84 --> 4.718
height is going to be 40 and the width


7209
19572.28 --> 5.08
is going to be 40 as well and now I


7210
19574.558 --> 4.802
should have uh my logo here in the


7211
19577.36 --> 5.8
button so the same way you did in the


7212
19579.36 --> 6.04
organization sidebar right/


7213
19583.16 --> 3.32
logo.svg and if you want for an ALT it


7214
19585.4 --> 4.6
might be


7215
19586.48 --> 5.96
better to like be more specific and say


7216
19590 --> 5.12
your company your app name


7217
19592.44 --> 6.72
logo and now let's go ahead and style


7218
19595.12 --> 8
this button by giving it a property uh


7219
19599.16 --> 8.16
class name px2 like that and I want to


7220
19603.12 --> 7.438
create a separate variant for my button


7221
19607.32 --> 7
whenever it is used inside of a canvas


7222
19610.558 --> 5.562
board so let's go inside let me just I


7223
19614.32 --> 4.72
have too many stuff open let's go inside


7224
19616.12 --> 5.04
of components UI button and we're going


7225
19619.04 --> 5.96
to add a new variant here the last one


7226
19621.16 --> 7
for me is link so I'm going to add board


7227
19625 --> 7.48
so that one is going to be on Hover BG


7228
19628.16 --> 6.16
blue 500 with a 20% opacity and also


7229
19632.48 --> 5.44
it's going to change the text to Blue


7230
19634.32 --> 6
800 and we're going to have board active


7231
19637.92 --> 6.84
which is very simply going to be BG blue


7232
19640.32 --> 7.318
520 and text blue 800 so without the


7233
19644.76 --> 6.16
hover effect now we can go back inside


7234
19647.638 --> 5.08
of our info component where we just were


7235
19650.92 --> 4.76
and let's give that new variant to our


7236
19652.718 --> 5.322
button so variant


7237
19655.68 --> 5.68
board there we go you can see how now


7238
19658.04 --> 5.2
when I hover it has a nice little effect


7239
19661.36 --> 6
and it fits nicely inside of this whole


7240
19663.24 --> 6.68
canvas uh design uh great so we now have


7241
19667.36 --> 4.4
that and besides this image I also want


7242
19669.92 --> 4.84
to render the name of my application so


7243
19671.76 --> 6.878
let's render that in a span the name of


7244
19674.76 --> 6.198
our app and let's give this a class name


7245
19678.638 --> 6.202
CN so it's going to be dynamic


7246
19680.958 --> 8.362
let's write font semi bold text Excel


7247
19684.84 --> 6.48
margin left two and text black actually


7248
19689.32 --> 3.84
we don't need explicit text black


7249
19691.32 --> 3.72
actually we do because it's inside of


7250
19693.16 --> 3.32
that button I don't want this one to


7251
19695.04 --> 3.918
change the color so I'm going to over


7252
19696.48 --> 5.8
write it and let's add font. class name


7253
19698.958 --> 5.242
so it takes that popins font and there


7254
19702.28 --> 4.48
we go so just make sure that you have


7255
19704.2 --> 4.64
the font constant here popins which we


7256
19706.76 --> 4.44
imported from next font


7257
19708.84 --> 5.44
Google uh and there there we go this is


7258
19711.2 --> 4.358
what that looks like very very nice and


7259
19714.28 --> 3.438
now what I want to do is that when I


7260
19715.558 --> 4.282
click on this I want it to redirect me


7261
19717.718 --> 3.362
back to all of my boards so for that


7262
19719.84 --> 6.36
we're going to be


7263
19721.08 --> 5.12
using link from next


7264
19726.6 --> 5.958
link uh link like that and let's go


7265
19730.44 --> 5.278
ahead and


7266
19732.558 --> 6.562
wrap uh ins everything inside of the


7267
19735.718 --> 5.92
button with a link component so


7268
19739.12 --> 5.838
including both the image and the span


7269
19741.638 --> 5.92
like this and the H ref is very simply


7270
19744.958 --> 5.122
going to go to a root


7271
19747.558 --> 5.24
slash and in order not to break the


7272
19750.08 --> 4.638
button we have to pass in as child prop


7273
19752.798 --> 4.882
when we use Link inside of it there we


7274
19754.718 --> 5.84
go so now when I click here I should be


7275
19757.68 --> 4.878
redirected back to my boards perfect and


7276
19760.558 --> 4.24
now I want to add a little popover


7277
19762.558 --> 3.802
indicator like a tool tip to tell the


7278
19764.798 --> 3.442
user what's going to happen once they


7279
19766.36 --> 5.198
click on this so for that we're going to


7280
19768.24 --> 6.76
use our reusable hint component so let's


7281
19771.558 --> 5.922
import hint from components


7282
19775 --> 6.36
hint and let's go ahead and wrap the


7283
19777.48 --> 7.398
entire button in a hint


7284
19781.36 --> 8.518
component like that let's go ahead and


7285
19784.878 --> 7.722
give it a label go to boards so now if I


7286
19789.878 --> 5.322
hover there we go it says go to boards


7287
19792.6 --> 5.278
and let me just position it slightly


7288
19795.2 --> 6.518
better so I'm going to give it a side of


7289
19797.878 --> 7.362
bottom explicitly and side off set of 10


7290
19801.718 --> 7.402
like that and I think now this looks


7291
19805.24 --> 6.2
very very nice beautiful and now let's


7292
19809.12 --> 5.16
go ahead and render the actual board


7293
19811.44 --> 5.6
name that we are in so for that I want


7294
19814.28 --> 6.8
to create one small reusable


7295
19817.04 --> 4.04
component called tab


7296
19822 --> 3.558
separator and let's go ahead and we


7297
19824.12 --> 5
don't need to export it so it's just


7298
19825.558 --> 6.122
going to be used here and let's return a


7299
19829.12 --> 6.758
div which is going to render a


7300
19831.68 --> 6.118
pipe and the class name text neutral 300


7301
19835.878 --> 5.68
and PX


7302
19837.798 --> 6.282
1.5 uh like this and you can actually


7303
19841.558 --> 6
render it


7304
19844.08 --> 4.638
above uh it really doesn't matter I


7305
19847.558 --> 3.482
don't know why I'm changing it it


7306
19848.718 --> 5.682
doesn't matter where you render it okay


7307
19851.04 --> 6.598
and now let's just use that right after


7308
19854.4 --> 4.76
our hint let's add the tab separator


7309
19857.638 --> 3.362
like that so you can see that now we


7310
19859.16 --> 4
have this nice little


7311
19861 --> 8.12
uh separator


7312
19863.16 --> 8.32
here and now let's go ahead and add a


7313
19869.12 --> 5.598
button


7314
19871.48 --> 6.76
again but this time it's going to render


7315
19874.718 --> 5.802
data. title so the name of your board


7316
19878.24 --> 6.04
let's go ahead and give this a variant


7317
19880.52 --> 4.84
of board as well and a class name of


7318
19884.28 --> 6.358
text


7319
19885.36 --> 7.56
base F normal and px2 like that there we


7320
19890.638 --> 5.602
go so now you can see how it has the


7321
19892.92 --> 5.92
name of my board and it matches the name


7322
19896.24 --> 5.12
here so if I go ahead and rename this


7323
19898.84 --> 6.08
and click here again now it says rename


7324
19901.36 --> 6.438
and I want this exact thing this popup


7325
19904.92 --> 6
to happen once I click on this name


7326
19907.798 --> 4.602
board right here and because we made our


7327
19910.92 --> 4.12
rename


7328
19912.4 --> 6.478
model uh programmatically controlled


7329
19915.04 --> 6.36
using tan hooks we can now easily uh


7330
19918.878 --> 6.522
open it up by simply calling this


7331
19921.4 --> 6.96
username model on open function so let's


7332
19925.4 --> 6.52
go ahead and import that I'm going to


7333
19928.36 --> 8.438
import username model from hooks sorry


7334
19931.92 --> 8.92
from store username model and in here


7335
19936.798 --> 9.92
I'm going to go ahead uh and call const


7336
19940.84 --> 8.64
on open use rename model like this and


7337
19946.718 --> 5.24
then I'm going to give this button uh an


7338
19949.48 --> 5.28
on click


7339
19951.958 --> 6.84
here it's going to call that on open and


7340
19954.76 --> 8.48
it's going to pass in dataor ID and


7341
19958.798 --> 6.282
data. title just like this and make sure


7342
19963.24 --> 4.08
that you're rendering something if data


7343
19965.08 --> 4.12
is not available otherwise I think


7344
19967.32 --> 3.2
you're going to have to put a question


7345
19969.2 --> 4.96
marks


7346
19970.52 --> 8.118
here and let's try this out perfect so


7347
19974.16 --> 6.84
can I change this real time immediately


7348
19978.638 --> 6.122
reflected here that's the power of


7349
19981 --> 6
convex real time database perfect also


7350
19984.76 --> 5
this also has like a character limit if


7351
19987 --> 5.718
you didn't notice yeah because we added


7352
19989.76 --> 4.84
uh we used Native HTML character limit


7353
19992.718 --> 4.362
and it also has front end validation


7354
19994.6 --> 4.76
just in case you were wondering perfect


7355
19997.08 --> 4.798
so this is working and last thing we


7356
19999.36 --> 5.598
need to add is our menu to copy the


7357
20001.878 --> 6.122
board link and to delete the board and


7358
20004.958 --> 5
we don't have to do much either because


7359
20008 --> 3.92
we already have our actions comp


7360
20009.958 --> 3.642
component which we can reuse but just


7361
20011.92 --> 4.52
before we do that I also want to tell


7362
20013.6 --> 6.52
the user with a little hint component


7363
20016.44 --> 7.56
what this button will do H so it's going


7364
20020.12 --> 6.56
to be very simple it's edit


7365
20024 --> 5
title side is going to be explicitly to


7366
20026.68 --> 5.958
the bottom and side offset is going to


7367
20029 --> 6.798
be 10 like this so if you try now there


7368
20032.638 --> 5.642
we go you can see how it matches that


7369
20035.798 --> 5
perfect so let's go ahead and now and


7370
20038.28 --> 4.84
let's import a


7371
20040.798 --> 4.84
from components actions which is just


7372
20043.12 --> 6.598
another one of our reusable components


7373
20045.638 --> 7
we use this one in board card index if


7374
20049.718 --> 5.642
you remember so in here we have actions


7375
20052.638 --> 4.842
we pass in ID title and we also have


7376
20055.36 --> 4.438
some side properties so we already used


7377
20057.48 --> 4.2
that here if you're wondering let's go


7378
20059.798 --> 5.442
back inside of our info


7379
20061.68 --> 6.16
now so at the end of this hint let's add


7380
20065.24 --> 5.318
another tab separator


7381
20067.84 --> 4.718
here and then let's Rend under our


7382
20070.558 --> 4.362
actions


7383
20072.558 --> 4.762
component uh and the actions component


7384
20074.92 --> 3.4
needs a child element so it's not a self


7385
20077.32 --> 4.558
closing


7386
20078.32 --> 8.36
tag so let's pass into the actions ID to


7387
20081.878 --> 6.442
be data underscore ID title data title


7388
20086.68 --> 5.24
we're also going to have a side of


7389
20088.32 --> 6.84
bottom this time instead of right and


7390
20091.92 --> 5.52
we're going to have a side offset of 10


7391
20095.16 --> 4.28
and let's go ahead and render a div


7392
20097.44 --> 3.118
inside which is going to render a hint


7393
20099.44 --> 3.118
element


7394
20100.558 --> 5.762
which is going to have a label of main


7395
20102.558 --> 5.482
menu with a side of bottom itself and


7396
20106.32 --> 5.28
side of set of


7397
20108.04 --> 5.44
10 and the hint is going to wrap our


7398
20111.6 --> 6.198
button component which is going to


7399
20113.48 --> 6.68
render our menu icon from Lucid react so


7400
20117.798 --> 4.242
we have a lot of composable elements


7401
20120.16 --> 4.44
here make sure you import menu from


7402
20122.04 --> 5.758
Lucid react and let's go ahead and give


7403
20124.6 --> 6.92
this button a size of Icon and a variant


7404
20127.798 --> 6.402
of board there we we go let's try it out


7405
20131.52 --> 4.8
perfect and we now have a main menu and


7406
20134.2 --> 5.28
we can copy our link let's see if that


7407
20136.32 --> 6.398
works that works just fine perfect and


7408
20139.48 --> 5.318
we can also remove the board so now I


7409
20142.718 --> 4.602
believe if we remove the board it's just


7410
20144.798 --> 5.122
going to be in this weird empty State


7411
20147.32 --> 6.08
later we can add some redirects to it so


7412
20149.92 --> 5.36
let me just go back here and I think I


7413
20153.4 --> 3.8
need to create a new board now there we


7414
20155.28 --> 3.92
go you can see how now when you create a


7415
20157.2 --> 4.8
new board you immediately redirected


7416
20159.2 --> 4.96
here so you can rename it from here then


7417
20162 --> 4.52
perfect and you can delete it from here


7418
20164.16 --> 5.16
everything is working fine so now our


7419
20166.52 --> 5.358
redirects are also immediately working


7420
20169.32 --> 5.68
uh great so we've wrapped this up the


7421
20171.878 --> 5.402
next thing we have to do is we have to


7422
20175 --> 4.4
uh create this participants block which


7423
20177.28 --> 6.04
will load all active users which are


7424
20179.4 --> 6.72
currently in this board great great


7425
20183.32 --> 5.6
job so now let's go ahead and let's


7426
20186.12 --> 5.438
create the participants component right


7427
20188.92 --> 6.038
here so in order to do that we are going


7428
20191.558 --> 6.442
to need the Avatar component from shaten


7429
20194.958 --> 5.962
so let's head inside of our terminal


7430
20198 --> 5.92
here and let me open a new one and we're


7431
20200.92 --> 8
going to go ahead and run npx Shad cnii


7432
20203.92 --> 7.038
at latest ad Avatar and using this basic


7433
20208.92 --> 5.56
Avatar component we're going to create a


7434
20210.958 --> 6.642
new component called user Avatar and


7435
20214.48 --> 6.36
then we're going to render them in this


7436
20217.6 --> 4.88
list of users in the corner so let's go


7437
20220.84 --> 5.958
ahead and do the following we're going


7438
20222.48 --> 7.2
to go uh inside of app folder dashboard


7439
20226.798 --> 4.16
my apologies board board ID components


7440
20229.68 --> 2.32
and we're going to create a new file


7441
20230.958 --> 2.68
user


7442
20232 --> 4.878
avatar.


7443
20233.638 --> 5.602
TSX and this one is going to have a hint


7444
20236.878 --> 5.08
wrapped around it which is our reusable


7445
20239.24 --> 6.28
hint component but it's also going to


7446
20241.958 --> 5.442
use uh this new components UI Avatar


7447
20245.52 --> 6.118
which we've just added so that is an


7448
20247.4 --> 6.72
Avatar Avatar fullback and Avatar


7449
20251.638 --> 6.16
image and now let's create an interface


7450
20254.12 --> 6.92
user Avatar props to accept a source


7451
20257.798 --> 5
image which will be an optional string a


7452
20261.04 --> 4.24
name which is also going to be an


7453
20262.798 --> 7.08
optional string a


7454
20265.28 --> 6.56
fullback and a border color so all of


7455
20269.878 --> 4.402
these things are going to be optional


7456
20271.84 --> 4.878
strings here and now let's go ahead and


7457
20274.28 --> 6.32
Export con user


7458
20276.718 --> 5.84
Avatar let's just assign this prop user


7459
20280.6 --> 5.52
Avatar


7460
20282.558 --> 6.32
props let's destructure them Source name


7461
20286.12 --> 5.56
fullback and Border


7462
20288.878 --> 5.68
color and then inside of here we're


7463
20291.68 --> 7.68
going to return a hint component with a


7464
20294.558 --> 4.802
label of name or


7465
20299.6 --> 6.358
teammate so basically make it match


7466
20302.16 --> 5.16
whatever you did in the live kit uh live


7467
20305.958 --> 4.642
block


7468
20307.32 --> 5.8
out right in here if we don't get the


7469
20310.6 --> 4.32
name we write teammate so it makes sense


7470
20313.12 --> 3.598
that you also displayed teammate here if


7471
20314.92 --> 5.2
for any reason we just can't get the


7472
20316.718 --> 5.042
name of the user the side of this uh tip


7473
20320.12 --> 3.2
is going to be on the bottom and the


7474
20321.76 --> 4.44
side


7475
20323.32 --> 5.76
offset is going to be


7476
20326.2 --> 4.56
18 and now let's go ahead and render the


7477
20329.08 --> 5.32
actual Avatar


7478
20330.76 --> 6.28
component this Avatar component will


7479
20334.4 --> 6.52
have a class


7480
20337.04 --> 6.12
name height 8 withth eight and Border


7481
20340.92 --> 4.76
two and for the Border color we're going


7482
20343.16 --> 4.798
to use the style prop because Tailwind


7483
20345.68 --> 5.08
uses just in time compiler so you cannot


7484
20347.958 --> 5
do Dynamic classes in that way so it's


7485
20350.76 --> 5.08
safer to do it using just border color


7486
20352.958 --> 5.52
to be border color or you can use the


7487
20355.84 --> 5.6
shorthand operator and then inside we're


7488
20358.478 --> 5.32
going to add an avatar


7489
20361.44 --> 6.32
image pass in the source to be the


7490
20363.798 --> 5.84
source prop and an avatar


7491
20367.76 --> 5.08
fallback this one is going to going to


7492
20369.638 --> 6.282
render the fullback whatever that is


7493
20372.84 --> 4.84
well it's a string yeah and a class name


7494
20375.92 --> 6.52
for the fullback is going to be text


7495
20377.68 --> 7.24
extra small and font semi bold like this


7496
20382.44 --> 5.038
great so now we have our usable user


7497
20384.92 --> 6.038
Avatar and we can now head back into the


7498
20387.478 --> 6.642
participants. CSX right here and we can


7499
20390.958 --> 5.84
go ahead and Mark this as use


7500
20394.12 --> 5.32
client and let's just refresh our app to


7501
20396.798 --> 4.802
ensure that this doesn't break the app


7502
20399.44 --> 6.6
like our info component did looks like


7503
20401.6 --> 6.64
our fix for the skeleton refactor worked


7504
20406.04 --> 4.4
so now in here we're going to go ahead


7505
20408.24 --> 6.28
and import user


7506
20410.44 --> 5.84
avatar from do/ user Avatar and we're


7507
20414.52 --> 5.4
also going to


7508
20416.28 --> 6.518
import uh use others from live blocks


7509
20419.92 --> 4.76
config and use self from live blocks


7510
20422.798 --> 4.16
config and then inside of the


7511
20424.68 --> 5.798
participants here we can first get the


7512
20426.958 --> 5.802
other users by using use others hook and


7513
20430.478 --> 6.442
then we can get con current user using


7514
20432.76 --> 6
use uh self like this and let's add a


7515
20436.92 --> 5.24
limit to how many users we are going to


7516
20438.76 --> 6.16
show here so const max shown


7517
20442.16 --> 6
users is going to be in my case two


7518
20444.92 --> 6.08
users like that and then let's do const


7519
20448.16 --> 6.88
has more users than the limit it's going


7520
20451 --> 5.52
to be users. length is larger than Max


7521
20455.04 --> 4.96
shown


7522
20456.52 --> 5.6
users there we go and we already have


7523
20460 --> 4.6
this ready so let's remove this text


7524
20462.12 --> 7.56
list of users and instead let's add a


7525
20464.6 --> 9.24
div with a class name flex and GAP


7526
20469.68 --> 6.68
X2 and then we can use users.


7527
20473.84 --> 6.638
slice and we are going to limit to the


7528
20476.36 --> 7.4
max shown users map and in here we can D


7529
20480.478 --> 5.762
structure the connection ID and the info


7530
20483.76 --> 4.36
of that user so let me just see if I can


7531
20486.24 --> 3.76
collapse this map like this maybe it's


7532
20488.12 --> 5.518
more visible that way


7533
20490 --> 7.24
and in here we are simply going to


7534
20493.638 --> 3.602
return a user


7535
20497.28 --> 5.64
Avatar and let's go ahead and pass the


7536
20499.68 --> 6.36
key to be connection ID let's pass in


7537
20502.92 --> 5.6
the source to be info


7538
20506.04 --> 5.04
picture let's pass in the name to be


7539
20508.52 --> 6.358
info


7540
20511.08 --> 7.08
name and let's pass in the fullback to


7541
20514.878 --> 5.08
be the first letter of the name so info


7542
20518.16 --> 6.398
name


7543
20519.958 --> 7.92
like that or we can add a like this


7544
20524.558 --> 5.522
actually t as in teammate right uh right


7545
20527.878 --> 4.92
now you should not be seeing anything


7546
20530.08 --> 5.28
except if you try and copy this local


7547
20532.798 --> 4.442
host and go in another browser so let me


7548
20535.36 --> 3.68
try doing that I'm going to go in uh


7549
20537.24 --> 4.44
another browser that I have on the side


7550
20539.04 --> 6.12
here and I'm going to log in as uh the


7551
20541.68 --> 6.92
user that has access to this board here


7552
20545.16 --> 6.12
let me just try this out there we go so


7553
20548.6 --> 4.68
now I'm in a new account and you can see


7554
20551.28 --> 4
that so make sure that you have another


7555
20553.28 --> 4.198
browser open and you have to be either


7556
20555.28 --> 3.438
in incognito mode or use just a


7557
20557.478 --> 2.762
completely different browser like


7558
20558.718 --> 3.282
Mozilla or something because you can't


7559
20560.24 --> 3.76
have two logged in sessions in the same


7560
20562 --> 4.16
browser or use like a different session


7561
20564 --> 4.2
like I do with my chromes so there we go


7562
20566.16 --> 4.44
now I'm logged in this is not who I'm


7563
20568.2 --> 4.358
logged in as so this is not my user this


7564
20570.6 --> 4.52
is the user that is looking at this


7565
20572.558 --> 4.362
board at the same time that I am and now


7566
20575.12 --> 5.48
besides that we're going to add


7567
20576.92 --> 6.44
ourselves as well so in order to add


7568
20580.6 --> 4.72
ourselves we're going to go ahead and


7569
20583.36 --> 5.84
add the


7570
20585.32 --> 5.04
following so let's just indent this


7571
20589.2 --> 2.2
we're going to add if we have the


7572
20590.36 --> 3.24
current


7573
20591.4 --> 4.238
user we're going to go ahead and render


7574
20593.6 --> 4.44
the user


7575
20595.638 --> 6.24
Avatar and we're going to pass in the


7576
20598.04 --> 5.678
source to be current user. info picture


7577
20601.878 --> 4.562
and we're going to pass in the name to


7578
20603.718 --> 7.602
be open


7579
20606.44 --> 6.64
btic current user. info name and in


7580
20611.32 --> 3.6
parenthesis we're going to say that is


7581
20613.08 --> 4.718
you in case someone has the same name


7582
20614.92 --> 5.2
and image as you and let's go ahead and


7583
20617.798 --> 5.362
write a fullback for this also to be


7584
20620.12 --> 6.358
current user. info


7585
20623.16 --> 5.84
name and the first


7586
20626.478 --> 5.602
character like this and there we go now


7587
20629 --> 5.04
you can see two users here so one is me


7588
20632.08 --> 6.04
and one is the user in my another


7589
20634.04 --> 7.28
browser also logged in perfect uh now


7590
20638.12 --> 5.96
that we have this this let's go ahead


7591
20641.32 --> 5.478
and add a third combination which is if


7592
20644.08 --> 5.478
we have more users so it has more users


7593
20646.798 --> 4.202
we want to display another user Avatar


7594
20649.558 --> 3.882
component which is very simply going to


7595
20651 --> 4.36
tell the user how many other uh users


7596
20653.44 --> 4.68
are inside so for that we're going to


7597
20655.36 --> 9.08
use name


7598
20658.12 --> 10.48
backx users. length minus whoops minus


7599
20664.44 --> 7.038
Max shown users more like that so three


7600
20668.6 --> 5.16
users more so three more two more that's


7601
20671.478 --> 4.522
how it's going to say and fullback is


7602
20673.76 --> 7.08
going to be


7603
20676 --> 7.638
plus users. length minus Max shown users


7604
20680.84 --> 6.52
and in order to see that now change this


7605
20683.638 --> 6.362
from two to one or maybe to zero and


7606
20687.36 --> 5.16
there we go now you can see how it will


7607
20690 --> 4.24
say one more if you only want to display


7608
20692.52 --> 4.038
yourself and no one else so if you


7609
20694.24 --> 3.718
change it to one then it will allow two


7610
20696.558 --> 3
users to be displayed if you change it


7611
20697.958 --> 4.282
to two and it's going to allow three


7612
20699.558 --> 5.16
users to be displayed perfect so let me


7613
20702.24 --> 5.16
just try it out I'm going to go ahead uh


7614
20704.718 --> 4.442
and invite another user to this board


7615
20707.4 --> 3.84
and then we're going to see see three


7616
20709.16 --> 4.638
members


7617
20711.24 --> 4.558
inside there we go so I just joined with


7618
20713.798 --> 4.68
a third account and there we go you can


7619
20715.798 --> 4.242
see now it displays three users so if


7620
20718.478 --> 4.16
you don't want to display three users


7621
20720.04 --> 4.48
you can change this to one and then you


7622
20722.638 --> 3.92
can see how it's going to look like it


7623
20724.52 --> 3.48
will only display two users so I think


7624
20726.558 --> 3.762
we can maybe improve this because it


7625
20728 --> 3.92
kind of doesn't make sense sense so how


7626
20730.32 --> 3.398
about we do this I want to display a


7627
20731.92 --> 5.12
maximum of three


7628
20733.718 --> 5.682
users so that currently or let's say I


7629
20737.04 --> 5.08
want to display a maximum of two users


7630
20739.4 --> 5.12
every additional user I want them to be


7631
20742.12 --> 4.32
displayed as a number so right now I


7632
20744.52 --> 5.48
have to put one for that so it doesn't


7633
20746.44 --> 6.4
really make sense right so let's see how


7634
20750 --> 5.12
we can improve this all right so the


7635
20752.84 --> 7.28
reason this works like that is because I


7636
20755.12 --> 7.88
forgot so it actually it should be Max


7637
20760.12 --> 5.678
shown other users because I forgot that


7638
20763 --> 4.76
ourselves we are not part of this users.


7639
20765.798 --> 4.882
length so that's why this is confusing


7640
20767.76 --> 5.16
because I say okay only show one user


7641
20770.68 --> 5.038
but it's showing two users uh it's not


7642
20772.92 --> 5.6
it's only showing one user here but it's


7643
20775.718 --> 5.482
only showing the one from the use others


7644
20778.52 --> 4.24
hook because we exclude ourselves from


7645
20781.2 --> 3.12
that so yeah you have to kind of


7646
20782.76 --> 3.878
mentally keep in mind all right if you


7647
20784.32 --> 4.84
say two users that means it's only going


7648
20786.638 --> 5.482
to display these two users which are not


7649
20789.16 --> 4.68
you but you don't count in that so if


7650
20792.12 --> 4.678
you want to display a maximum of three


7651
20793.84 --> 5.878
users put the number two if you want to


7652
20796.798 --> 4.882
display a maximum of two users put the


7653
20799.718 --> 4.08
number one because you are the other


7654
20801.68 --> 4.64
user like that so pick and choose the


7655
20803.798 --> 4.402
one you like I think two is just fine


7656
20806.32 --> 3.96
and that will allow you for more than


7657
20808.2 --> 4.2
three users they're going to look with a


7658
20810.28 --> 3.84
plus number as you just saw it great so


7659
20812.4 --> 3.68
one thing that's missing is the Border


7660
20814.12 --> 4.64
color so the way we're going to do


7661
20816.08 --> 5.398
border colors is we're going to use the


7662
20818.76 --> 4.84
users's connection ID to generate a


7663
20821.478 --> 6.282
unique color for


7664
20823.6 --> 9.48
them so let's go inside of


7665
20827.76 --> 7.24
our uh lib utils right here and in here


7666
20833.08 --> 4.32
just go ahead and make an array of


7667
20835 --> 4.84
colors as many as you want so if you


7668
20837.4 --> 4.88
want you can copy these ones from my


7669
20839.84 --> 2.44
source


7670
20842.32 --> 6.08
code just make sure they all look


7671
20845.52 --> 8.6
good uh with the font that's in them


7672
20848.4 --> 10.12
like this so DC 2626 D9 7706 05 9669 7


7673
20854.12 --> 6.32
C3 a e d and db2 777 so that's my choice


7674
20858.52 --> 3.92
of colors you can add as many as you


7675
20860.44 --> 4.438
want the more you add the more unique


7676
20862.44 --> 4.76
users are going to be uh and now what


7677
20864.878 --> 5.882
we're going to do is we're simply going


7678
20867.2 --> 6.438
to export a function called connection


7679
20870.76 --> 5.76
ID to color and that's going to accept a


7680
20873.638 --> 6.362
connection ID which is a type of string


7681
20876.52 --> 6.118
uh sorry a type of number


7682
20880 --> 5.76
and it's going to return back a string


7683
20882.638 --> 6.602
and let's go ahead and do return from


7684
20885.76 --> 9.32
the array of our


7685
20889.24 --> 8.318
colors simply do connection ID mod


7686
20895.08 --> 6.2
colors.


7687
20897.558 --> 7.522
length there we go and now let's head


7688
20901.28 --> 6.04
back inside of our participants. TSX


7689
20905.08 --> 6.6
right here and we're going to do a very


7690
20907.32 --> 8.52
simple thing by by uh adding the Border


7691
20911.68 --> 8.32
color and using the new connection ID to


7692
20915.84 --> 6.718
color from our lib utils like this so


7693
20920 --> 3.798
connection ID to color and simply pass


7694
20922.558 --> 5.562
in connection


7695
20923.798 --> 7.16
ID like this and let's copy this and


7696
20928.12 --> 5.438
let's add that to ourselves


7697
20930.958 --> 5.402
here and in here we're going to pass


7698
20933.558 --> 6.442
current user connection


7699
20936.36 --> 6.04
ID and for the last one uh we don't need


7700
20940 --> 4.84
to pass anything and let's try this out


7701
20942.4 --> 5.72
now so go into all the browsers that you


7702
20944.84 --> 5.32
are and refresh yourself and I think you


7703
20948.12 --> 4.2
you can be you could get like a new


7704
20950.16 --> 4.2
color every time there we go so now this


7705
20952.32 --> 5.318
one is brown this one is purple and this


7706
20954.36 --> 7
one uh is yellow and this is going to


7707
20957.638 --> 6.16
also match their cursor when they are uh


7708
20961.36 --> 4.56
when later we add matching cursors great


7709
20963.798 --> 5.322
so you successfully added the


7710
20965.92 --> 5.638
participants here you can try it out by


7711
20969.12 --> 5.838
going by adding even more people into


7712
20971.558 --> 5.282
this board if you want to and now what


7713
20974.958 --> 3.562
we're going to do is we're going to wrap


7714
20976.84 --> 3.76
up this toolbox here and then we're


7715
20978.52 --> 4.84
finally going to start uh selecting the


7716
20980.6 --> 6.038
toolbox and rendering some drawings and


7717
20983.36 --> 6.96
elements on the canas great great


7718
20986.638 --> 6.682
job so now I want to go ahead and create


7719
20990.32 --> 5.04
this toolbar right here and in order to


7720
20993.32 --> 5.28
do that I first want to create


7721
20995.36 --> 5.518
individual component called tool button


7722
20998.6 --> 5.118
which we are going to render depending


7723
21000.878 --> 5
on what element we want to draw or what


7724
21003.718 --> 5.122
action we want to perform from the


7725
21005.878 --> 5.122
toolbar so we don't need to import any


7726
21008.84 --> 4.958
new packages for this one all we have to


7727
21011 --> 8.4
do is go into the components and board


7728
21013.798 --> 7.362
ID and create tool button. PSX like this


7729
21019.4 --> 4.88
and then let's go ahead and Mark this as


7730
21021.16 --> 7.28
use client let's go ahead and import a


7731
21024.28 --> 7.08
type Lucid icon from Lucid react let


7732
21028.44 --> 5.84
let's go ahead and import hint so we can


7733
21031.36 --> 5.118
explain to the user exactly what tool or


7734
21034.28 --> 5.4
action they are performing and let's


7735
21036.478 --> 5.962
import button from components UI button


7736
21039.68 --> 6.958
let's create an interface tool button


7737
21042.44 --> 6.038
props to accept label which is a string


7738
21046.638 --> 4.762
it's going to accept an icon which is a


7739
21048.478 --> 5.16
type of lucid icon it's also going to


7740
21051.4 --> 5.2
accept an onclick action which will just


7741
21053.638 --> 6.202
be empty void and we're going to have


7742
21056.6 --> 4.358
two booleans is active which is optional


7743
21059.84 --> 4
and is


7744
21060.958 --> 6.242
disabled which is optional as


7745
21063.84 --> 5.44
well and now let's go ahead an export


7746
21067.2 --> 5.12
con tool


7747
21069.28 --> 5.278
button let's assign all of these props


7748
21072.32 --> 5.12
here tool button


7749
21074.558 --> 8.042
props so we're going to have label icon


7750
21077.44 --> 8.68
on click is active and is


7751
21082.6 --> 6.76
disabled and let's go ahead and return a


7752
21086.12 --> 6.48
hint component where the label is going


7753
21089.36 --> 7.24
to be the prop label side is going to be


7754
21092.6 --> 5.64
right and side offset is going to be 14


7755
21096.6 --> 4.358
and then inside we're going to render


7756
21098.24 --> 5.318
our button component which is going to


7757
21100.958 --> 5.802
render our icon component so we need to


7758
21103.558 --> 5.362
turn this from a prop into an icon which


7759
21106.76 --> 3.958
we can render and since this is a type


7760
21108.92 --> 3.798
of lucid icon that means that we're


7761
21110.718 --> 4.76
going to be able to immediately render


7762
21112.718 --> 5.24
it all we have to do is create an alias


7763
21115.478 --> 4.602
and make it capital I so once it's


7764
21117.958 --> 4.282
capital ized then it can be used as a


7765
21120.08 --> 5.36
component immediately so I can just pass


7766
21122.24 --> 7.8
in icon like this and now let's go ahead


7767
21125.44 --> 6.72
and give this button a disabled off is


7768
21130.04 --> 4.32
disabled we're going to give it an on


7769
21132.16 --> 6.398
click on on


7770
21134.36 --> 7.24
click size of Icon and variant is going


7771
21138.558 --> 4.882
to be dependent on the is active prop if


7772
21141.6 --> 4.6
we are active is going to be board


7773
21143.44 --> 4.6
active which we've created a while ago


7774
21146.2 --> 4.24
so let's just revisit that to refresh


7775
21148.04 --> 4.838
our our knowledge so inside of our


7776
21150.44 --> 5.08
components UI Library we've added a new


7777
21152.878 --> 5.442
variant to the button variants with


7778
21155.52 --> 5
board and board active so confirm you


7779
21158.32 --> 5.04
have both of those if you don't pause


7780
21160.52 --> 7.118
the video and simply add board and board


7781
21163.36 --> 6.92
active great and that is it we have our


7782
21167.638 --> 6.362
tool button now so we can now go back


7783
21170.28 --> 7.278
inside of the toolbar itself and now


7784
21174 --> 6.68
let's go ahead and remove this divs and


7785
21177.558 --> 7.24
instead I'm going to render the tool


7786
21180.68 --> 6.64
button from do/ Tool button like this


7787
21184.798 --> 3.722
and let's go ahead and let's give it a


7788
21187.32 --> 4.88
label of


7789
21188.52 --> 6.8
Select let's give it an icon of mouse


7790
21192.2 --> 5.64
pointer two from Lucid react so just


7791
21195.32 --> 4.88
make sure you add this let's give it an


7792
21197.84 --> 4.56
on click for now to just be an empty


7793
21200.2 --> 4
Arrow function like that and Let me


7794
21202.4 --> 3.84
refresh my Local Host to see if


7795
21204.2 --> 4.598
everything is working or whether


7796
21206.24 --> 5.96
something is broken and there we go you


7797
21208.798 --> 7
can now see how I have a uh tool button


7798
21212.2 --> 7
right here and it shows me the select uh


7799
21215.798 --> 5.882
label great and now what we are going to


7800
21219.2 --> 5.598
do is we're going to pass in the


7801
21221.68 --> 5
isactive to be manually false simply so


7802
21224.798 --> 5.482
we remember that we have to change this


7803
21226.68 --> 5.92
to be modular later later and now let's


7804
21230.28 --> 5.96
go ahead and add another one for the


7805
21232.6 --> 6.08
text whereas the icon is going to be


7806
21236.24 --> 5.84
type you can import that from Lucid


7807
21238.68 --> 6.56
react as well let's copy and paste this


7808
21242.08 --> 6.32
one and the third one is going to be a


7809
21245.24 --> 5.638
sticky note the icon is going to be


7810
21248.4 --> 5.238
sticky note from Lucid


7811
21250.878 --> 5.362
react and let's go ahead and do the same


7812
21253.638 --> 6.32
thing for


7813
21256.24 --> 6.36
rectangle and for ellipses so the icon


7814
21259.958 --> 5.76
is going to be Square from Lucid


7815
21262.6 --> 6.118
react and let's go ahead and


7816
21265.718 --> 5.322
add ellipse


7817
21268.718 --> 6.482
the icon is


7818
21271.04 --> 8.598
circle and last one from here is going


7819
21275.2 --> 7.88
to be the pen so a label is pen and icon


7820
21279.638 --> 5.522
is pencil from Lucid react there we go


7821
21283.08 --> 6.12
so make sure that you have Circle Mouse


7822
21285.16 --> 8.318
pointer 2 pencil Square sticky note and


7823
21289.2 --> 6.358
type icons from Lucid react and let me


7824
21293.478 --> 6.042
just go ahead and see how this looks


7825
21295.558 --> 6.522
like and there we go we have a very nice


7826
21299.52 --> 4.438
selection of items here and one is


7827
21302.08 --> 3.2
always going to be selected right so


7828
21303.958 --> 3.402
it's either going to be the select


7829
21305.28 --> 4.56
itself or it's going to be one of the


7830
21307.36 --> 5.84
other elements here and now let's do the


7831
21309.84 --> 6.48
same thing for the undo and redo buttons


7832
21313.2 --> 5.4
here so here at the bottom we're going


7833
21316.32 --> 3.6
to remove these two we're going to add


7834
21318.6 --> 3.32
tool


7835
21319.92 --> 4.798
button and this one is going to


7836
21321.92 --> 5.52
represent the label undo and it's going


7837
21324.718 --> 3.92
to have an icon undo two from Lucid


7838
21327.44 --> 2.72
react


7839
21328.638 --> 3.882
we're going to have on click here to be


7840
21330.16 --> 5.6
an empty Arrow function and we're going


7841
21332.52 --> 4.88
to have is disabled for now to be


7842
21335.76 --> 4.36
explicitly


7843
21337.4 --> 5.96
false and let's copy and paste this and


7844
21340.12 --> 7.72
this one is going to be redo to icon


7845
21343.36 --> 7.118
with a label redo like this there we go


7846
21347.84 --> 4.84
and this undo and redo icons are


7847
21350.478 --> 4.802
actually going to be disabled until we


7848
21352.68 --> 3.958
actually have some history inside so you


7849
21355.28 --> 2.64
can take a look at how that's going to


7850
21356.638 --> 3.042
look like there are going to be this


7851
21357.92 --> 4
disabled until we start drawing


7852
21359.68 --> 4.798
something and then when we have history


7853
21361.92 --> 4.958
we're going to be able to undo and redo


7854
21364.478 --> 4.642
um perfect so now if you refresh you can


7855
21366.878 --> 4.162
see how our loading skeleton makes much


7856
21369.12 --> 3.518
more sense because it takes the exact


7857
21371.04 --> 5.16
almost the exact height which we are


7858
21372.638 --> 7.282
going to have here perfect so that is


7859
21376.2 --> 6.84
the basic layout for our skeleton here


7860
21379.92 --> 5.08
oh sorry for our toolbar here so what


7861
21383.04 --> 4.838
we're going to do next is we're going to


7862
21385 --> 5.24
actually uh create an ability that when


7863
21387.878 --> 5.362
when we click on one of these items it


7864
21390.24 --> 5.6
actually stays selected and it's kept in


7865
21393.24 --> 5.04
our canvas state which is what we are


7866
21395.84 --> 5.4
going to call well the state which


7867
21398.28 --> 6.96
decides which drawing tool or element is


7868
21401.24 --> 7.44
currently present great great


7869
21405.24 --> 5.96
job so now I want to implement the


7870
21408.68 --> 6.08
ability to select items from this


7871
21411.2 --> 6.278
toolbar and for them to stay selected so


7872
21414.76 --> 5.16
in order to do that I first want to go


7873
21417.478 --> 5.362
inside ins of the toolbar here and give


7874
21419.92 --> 5.798
the toolbar component some new props so


7875
21422.84 --> 5.36
let's create an interface toolbar props


7876
21425.718 --> 5.482
here and just above it we're going to


7877
21428.2 --> 5.358
create a type called canvas state which


7878
21431.2 --> 4.56
for now is just going to be any


7879
21433.558 --> 4.122
obviously we're going to create this be


7880
21435.76 --> 4.84
a proper state in a moment but let's


7881
21437.68 --> 4.92
just have it as a type here let's go


7882
21440.6 --> 3.52
ahead and actually pass the prop called


7883
21442.6 --> 3.64
canvas


7884
21444.12 --> 4.358
state which is going to be a type of


7885
21446.24 --> 5.238
canvas state


7886
21448.478 --> 4.682
then let's give it a set convas state


7887
21451.478 --> 4.042
which is going to be a method which


7888
21453.16 --> 3.68
accepts new state which again is a type


7889
21455.52 --> 5.08
of canvas


7890
21456.84 --> 5.52
State and it is returning a void then


7891
21460.6 --> 5.278
let's add undo


7892
21462.36 --> 7.118
function let's add redo


7893
21465.878 --> 8.6
function and now let's add can undo to


7894
21469.478 --> 8.642
be a Boolean and can redo to be a


7895
21474.478 --> 6.202
Boolean so now with these we can control


7896
21478.12 --> 5.32
all of this on clicks and all of this is


7897
21480.68 --> 5.72
active booleans but now what I want to


7898
21483.44 --> 5.518
do is I want to create an actual canvas


7899
21486.4 --> 6.12
State here so let's just give this


7900
21488.958 --> 6.202
toolbar props an assignment here let's


7901
21492.52 --> 6.08
extract the canvas


7902
21495.16 --> 6.798
State let's extract set convas State


7903
21498.6 --> 8.48
undo redo can undo and can


7904
21501.958 --> 7.042
redo like this and now let's go ahead


7905
21507.08 --> 5.798
close every everything and let's create


7906
21509 --> 6.798
a root folder called types and inside of


7907
21512.878 --> 4.482
it create canvas. DS so these are going


7908
21515.798 --> 5.202
to be common types which we're going to


7909
21517.36 --> 6.8
use for the canvas component and the


7910
21521 --> 7.24
first type that I want to create here is


7911
21524.16 --> 5.68
an Anum canvas mode so let's export Anum


7912
21528.24 --> 4.398
canvas


7913
21529.84 --> 7.44
mode and let's go ahead and simply set


7914
21532.638 --> 8.122
none to be the default one like this and


7915
21537.28 --> 7.518
then let's go ahead and let's export a


7916
21540.76 --> 6.76
type canvas state which for now is just


7917
21544.798 --> 5.84
going to be a possibility of objects


7918
21547.52 --> 5.48
right so I'm going to add a pipe element


7919
21550.638 --> 4.682
and then I'm going to open an object and


7920
21553 --> 5.12
inside I'm going to write mode to be


7921
21555.32 --> 6.158
canvas mode.


7922
21558.12 --> 6.678
none like this and then later in here


7923
21561.478 --> 4.642
we're going to add some more options so


7924
21564.798 --> 4.442
that's why I'm adding a little pipe


7925
21566.12 --> 7.28
element here all right so just go ahead


7926
21569.24 --> 8.718
and add this and now let's go back


7927
21573.4 --> 9.318
inside of our app folder board board ID


7928
21577.958 --> 7.282
components canvas uh not canvas uh


7929
21582.718 --> 5.602
toolbar and we can remove this type


7930
21585.24 --> 6.16
canvas State any and instead we're going


7931
21588.32 --> 6.08
to use this canvas State here so let's


7932
21591.4 --> 7.84
go ahead and


7933
21594.4 --> 8.28
import canvas state from at slash types


7934
21599.24 --> 5.718
slash canvas like this and I will just


7935
21602.68 --> 5.48
separate these two


7936
21604.958 --> 5.722
Imports there we go now what I want to


7937
21608.16 --> 5.76
do is I want to go inside of my canvas.


7938
21610.68 --> 5.56
vsx ensure that this is a used client


7939
21613.92 --> 5.48
component and now what we're going to do


7940
21616.24 --> 5.84
is a very simple set State here so let


7941
21619.4 --> 7.28
me just prepare the Imports for


7942
21622.08 --> 6.16
that use state from react and let's


7943
21626.68 --> 6.038
import


7944
21628.24 --> 7.558
canvas state from types canvas and in


7945
21632.718 --> 7.602
here I'm going to go ahead and set the


7946
21635.798 --> 7.92
uh canvas State set canvas state to be


7947
21640.32 --> 7
used State and let's go ahead and pass


7948
21643.718 --> 7.122
the canvas State here and inside I'm


7949
21647.32 --> 6.96
going to go ahead and write mode canvas


7950
21650.84 --> 5.44
mode from types canvas so we have that


7951
21654.28 --> 4.24
exported as well make sure you export


7952
21656.28 --> 7
both the enum and the canas State like


7953
21658.52 --> 9.438
this so it's going to be canvas mode uh.


7954
21663.28 --> 7.32
none like that and now let's go ahead


7955
21667.958 --> 4.68
and pass that to the toolbar so now we


7956
21670.6 --> 3.16
have the canvas state so we can pass the


7957
21672.638 --> 4.482
canvas


7958
21673.76 --> 8.08
State let's also pass set convas state


7959
21677.12 --> 7.96
to be set convas State and we have can


7960
21681.84 --> 6.52
redo I believe let's make that false can


7961
21685.08 --> 7.638
redo let's make that false as well but


7962
21688.36 --> 7.278
we also have undo oops this is one of


7963
21692.718 --> 5.16
this is should be can undo we also have


7964
21695.638 --> 5.16
undo methods


7965
21697.878 --> 5.76
right and we also have redo


7966
21700.798 --> 5.522
method there we go so we need to fill


7967
21703.638 --> 6.362
this for now as well and luckily for us


7968
21706.32 --> 7.68
we can do that quite easily simply uh by


7969
21710 --> 8.08
using use history and use can undo and


7970
21714 --> 6.6
use can redo so let's go ahead let's


7971
21718.08 --> 6.398
actually keep this at the top here let's


7972
21720.6 --> 6.958
add const history to we use


7973
21724.478 --> 6.442
history so that's going to be from live


7974
21727.558 --> 6
blocks config that is our file which we


7975
21730.92 --> 4.68
have in the root of our application


7976
21733.558 --> 5.522
right here live blocks. configs in here


7977
21735.6 --> 7.8
you can see we have use can redo use can


7978
21739.08 --> 7.16
undo and use history


7979
21743.4 --> 6.64
itself all right so we have use history


7980
21746.24 --> 6.238
and let's also do use use uh can undo


7981
21750.04 --> 5.678
use can


7982
21752.478 --> 6.802
redo so we have all of that


7983
21755.718 --> 6.282
prepared let's assign that const can


7984
21759.28 --> 7.72
undo use can


7985
21762 --> 10
undo const can redo use can


7986
21767 --> 9.12
redo like that let's pass in the can


7987
21772 --> 7.12
redo and can undo to the props make sure


7988
21776.12 --> 7.518
you don't mismatch them accidentally so


7989
21779.12 --> 7.56
redo redo undo undo all right and now


7990
21783.638 --> 5.722
let's go ahead and use history and pass


7991
21786.68 --> 6.118
the undo and redo


7992
21789.36 --> 5.88
methods so that's very simply just going


7993
21792.798 --> 4.642
to be


7994
21795.24 --> 4.52
history.


7995
21797.44 --> 6.6
undo and


7996
21799.76 --> 6.84
history. redo there we go and now let's


7997
21804.04 --> 7.12
go inside of our toolbar and let's


7998
21806.6 --> 7.68
actually use that for our tool button


7999
21811.16 --> 6.558
components at the bottom here so the


8000
21814.28 --> 6.16
undo and the redo buttons so on click


8001
21817.718 --> 5.84
this one is going to use undo is


8002
21820.44 --> 6.56
disabled is going to be if we can not


8003
21823.558 --> 6.16
undo so exclamation point can undo like


8004
21827 --> 5.4
this and for this one we're going to


8005
21829.718 --> 6.042
have redo and it's going to be disabled


8006
21832.4 --> 5.76
if we cannot redo so with an exclamation


8007
21835.76 --> 5
point as well and there we go now you


8008
21838.16 --> 5.04
should have both of them uh disabled so


8009
21840.76 --> 4.08
let me comment out the disabled prop to


8010
21843.2 --> 3.84
see if we're going to get any error


8011
21844.84 --> 4.48
perhaps if we try to redo we don't get


8012
21847.04 --> 4.518
an error but nothing happens either way


8013
21849.32 --> 4.72
all right so just make sure this is then


8014
21851.558 --> 6.24
disabled if there's nothing we can redo


8015
21854.04 --> 6.2
or undo great so now that we have that


8016
21857.798 --> 6.202
we added some control for our undo and


8017
21860.24 --> 7.08
redo how about we now enable the select


8018
21864 --> 8.12
button to be active so we can do that


8019
21867.32 --> 8.68
quite easily now simply by defining when


8020
21872.12 --> 6.88
this active prop should be true so we


8021
21876 --> 8.798
can set that to be if canvas state from


8022
21879 --> 8.32
our prop mode is equal to Canvas mode


8023
21884.798 --> 5.322
from our types canvas make sure you've


8024
21887.32 --> 5.52
added the canvas mode import here is


8025
21890.12 --> 6.28
also


8026
21892.84 --> 6.638
none like this and there we go you can


8027
21896.4 --> 4.8
now see that by default my cursor here


8028
21899.478 --> 3.842
is selected because that's going to be


8029
21901.2 --> 4.64
selected when convas State mode is


8030
21903.32 --> 4.72
convas none but also is going to be some


8031
21905.84 --> 5.32
more elements like translating when we


8032
21908.04 --> 5.28
are uh resizing when we are pressing and


8033
21911.16 --> 6.44
when we are making a selection net


8034
21913.32 --> 9.238
around multiple elements and let's also


8035
21917.6 --> 8.6
add set canvas State here to add mode


8036
21922.558 --> 5.682
canvas mode none like this so if


8037
21926.2 --> 4.32
something else is selected and once we


8038
21928.24 --> 6.638
click here this will bring back the


8039
21930.52 --> 7.24
canvas mode To None great so now what I


8040
21934.878 --> 6.202
want to do is I want to go back inside


8041
21937.76 --> 6.24
of my canvas types here and I want to


8042
21941.08 --> 4.798
add some more types which this is going


8043
21944 --> 4.08
to have so first things first let's go


8044
21945.878 --> 4.882
inside of canvas mode and let's add all


8045
21948.08 --> 5
the other abilities here so besides none


8046
21950.76 --> 5.16
we're going to have pressing we're also


8047
21953.08 --> 5.92
going to have selection net we're going


8048
21955.92 --> 3.08
to have transla


8049
21959.718 --> 3.362
we're also going to have


8050
21961.478 --> 5.562
inserting


8051
21963.08 --> 7.52
resizing and a pencil mode like


8052
21967.04 --> 5.48
this so now I want to go ahead and go


8053
21970.6 --> 4
inside of the canvas State here and


8054
21972.52 --> 5
select some other possibilities of the


8055
21974.6 --> 7.4
state so this one is going to be mode


8056
21977.52 --> 7.958
canvas mode. selection net like


8057
21982 --> 8.638
this then we are also going to


8058
21985.478 --> 5.16
have mode of canvas mode.


8059
21992.718 --> 7.08
translating we're also going to have a


8060
21995.04 --> 4.758
mode of canvas mode.


8061
22001.558 --> 7.522
inserting and we're also going to have


8062
22004.52 --> 4.56
mode of canvas mode.


8063
22010.878 --> 7.282
pencil we are going to have canvas mode.


8064
22015.92 --> 6.08
pressing


8065
22018.16 --> 6.2
and we are going to have a mode canvas


8066
22022 --> 5.92
mode.


8067
22024.36 --> 7.118
resizing like


8068
22027.92 --> 9.08
this and now let's go ahead and let's


8069
22031.478 --> 8.08
use this back inside of our toolbar. vsx


8070
22037 --> 5.798
right here so first let's go ahead


8071
22039.558 --> 6.882
inside of text right here and see how we


8072
22042.798 --> 4.84
can make uh that be selected for example


8073
22046.44 --> 4.72
so I'm going to going to go ahead and


8074
22047.638 --> 5.92
change this textt to be is active if


8075
22051.16 --> 5.92
conas state.


8076
22053.558 --> 5.4
mode is canvas


8077
22057.08 --> 5.2
mode.


8078
22058.958 --> 7.242
inserting like this and I'm going to add


8079
22062.28 --> 7.72
an unclick here to change set canvas


8080
22066.2 --> 8.2
State and it's going to call mode to be


8081
22070 --> 6.36
canvas mode do inserting like this so


8082
22074.4 --> 3.84
let's try it out now by default this is


8083
22076.36 --> 4
selected but when I click here there we


8084
22078.24 --> 4.96
go you can see that now text is selected


8085
22080.36 --> 4.518
if I click back then this is selected


8086
22083.2 --> 5.72
perfect so we are now controlling our


8087
22084.878 --> 7.122
toolbar on the canvas mode but you might


8088
22088.92 --> 6.08
already notice that canvas mode simply


8089
22092 --> 5.44
isn't enough for us to determine uh what


8090
22095 --> 5.6
is selected and what isn't selected


8091
22097.44 --> 6
right because all of multiple Fields


8092
22100.6 --> 5.48
will be able to use the convas mode in


8093
22103.44 --> 4.6
the insert mode for example sticky note


8094
22106.08 --> 4.12
will be inserting rectangle will be


8095
22108.04 --> 3.918
inserting ellipse will be inserting the


8096
22110.2 --> 3.92
pencil all of these elements will be


8097
22111.958 --> 5.52
inserting something so we need to


8098
22114.12 --> 6.758
introduce another convas state property


8099
22117.478 --> 5.682
which is going to be called layer type


8100
22120.878 --> 5.162
so we're going to create a bunch of new


8101
22123.16 --> 5.84
layer types now for each of these uh


8102
22126.04 --> 5.758
elements like text rectangle uh sticky


8103
22129 --> 7.878
note ellipse and


8104
22131.798 --> 10.202
pen so let's go back inside of our types


8105
22136.878 --> 7.522
so inside of types canvas. vs and let's


8106
22142 --> 4.68
go ahead and let's first add some small


8107
22144.4 --> 4.76
reusable types which we're going to need


8108
22146.68 --> 5.56
so export type


8109
22149.16 --> 6.12
color that's going to be a type of RGB


8110
22152.24 --> 5.76
so R is going to be a number G is going


8111
22155.28 --> 5.96
to be a number and B is going to be a


8112
22158 --> 7.16
number and we have to add equal sign


8113
22161.24 --> 6
here let's export type camera as


8114
22165.16 --> 5.08
well this is going to have have the


8115
22167.24 --> 7.28
coordinates X and


8116
22170.24 --> 7.638
Y and now let's create our layer type


8117
22174.52 --> 6.84
enum so export enum layer


8118
22177.878 --> 5.482
type that's going to have a


8119
22181.36 --> 7.518
rectangle and


8120
22183.36 --> 7.68
ellipse a path text and a note so I'm


8121
22188.878 --> 4.802
not going to refer to note as sticky


8122
22191.04 --> 5.32
note anywhere outside of you know to the


8123
22193.68 --> 5.878
user internally I'm going to call that


8124
22196.36 --> 5.68
just a note it's easier and now when we


8125
22199.558 --> 3.522
have the layer type uh let's go ahead


8126
22202.04 --> 6
and let's


8127
22203.08 --> 4.96
create let's export a type called


8128
22208.12 --> 5.04
rectangle


8129
22210.2 --> 4.72
layer so this rectangle layer is going


8130
22213.16 --> 5.2
to have the properties which we are


8131
22214.92 --> 7
going to use to determine where and how


8132
22218.36 --> 6.64
to render it on our canvas so the type


8133
22221.92 --> 5.958
is going to be layer type.


8134
22225 --> 5.04
rectangle then we're going to have X


8135
22227.878 --> 4.122
which is a number Y which is a number so


8136
22230.04 --> 4.758
these are the coordinates we're going to


8137
22232 --> 5.52
get the height and the width which we


8138
22234.798 --> 4.802
will be able to resize we're going to


8139
22237.52 --> 4.32
have a fill which is going to be a type


8140
22239.6 --> 4.118
of color to determine what color


8141
22241.84 --> 4.24
something is and we're also going to add


8142
22243.718 --> 4.482
an optional field value which will not


8143
22246.08 --> 4.878
be used for this rectangle layer but it


8144
22248.2 --> 5
will be used later in note and I found


8145
22250.958 --> 5.92
it that it's easier that all of our


8146
22253.2 --> 5.278
layers have the same types uh so we just


8147
22256.878 --> 3.84
going to make the ones that are not used


8148
22258.478 --> 3.562
by all of them optional like this


8149
22260.718 --> 3.802
because later it's just going to be


8150
22262.04 --> 5
easier when it comes to typescript great


8151
22264.52 --> 5.358
so now we have rectangle layer and we


8152
22267.04 --> 4.918
can now copy and paste this one and


8153
22269.878 --> 4.522
create an ellipse layer in exactly the


8154
22271.958 --> 4.76
same way so let's rename this to ellipse


8155
22274.4 --> 5.76
layer which is going to be a layer type


8156
22276.718 --> 6.642
of ellipse it's going to have the X it's


8157
22280.16 --> 6.16
going to have y height width fill and


8158
22283.36 --> 7.4
value and that is pretty much it and now


8159
22286.32 --> 6.52
let's go ahead and let's add the uh path


8160
22290.76 --> 3.798
layer so the path is going to be for


8161
22292.84 --> 5.16
when we are drawing something so path


8162
22294.558 --> 8.042
layer is going to have a type of


8163
22298 --> 7
path it's going to have x y height width


8164
22302.6 --> 4.56
it's going to have a fill but it's also


8165
22305 --> 5.76
going to have points which is going to


8166
22307.16 --> 6.318
be a matrix of numbers like this so


8167
22310.76 --> 6.56
double twice the array make sure you do


8168
22313.478 --> 6
it like this great and now let's go


8169
22317.32 --> 6.638
ahead and copy and paste this


8170
22319.478 --> 7.042
again and let's create a text layer so


8171
22323.958 --> 5.562
that's going to be a type of layer type


8172
22326.52 --> 5.72
text uh and it's going to have the x


8173
22329.52 --> 4.6
coordinate y coordinate uh it's going to


8174
22332.24 --> 3.478
have the height and the width is going


8175
22334.12 --> 3.08
to have fill but it's not going to have


8176
22335.718 --> 4.042
the


8177
22337.2 --> 5.72
points and let's copy and paste this


8178
22339.76 --> 5.68
again and this one is simply going to be


8179
22342.92 --> 5.798
the note


8180
22345.44 --> 7.118
layer so layer type is going to be


8181
22348.718 --> 8.122
note we're going to have x y height


8182
22352.558 --> 7.122
width uh fill and value and I think that


8183
22356.84 --> 5.36
should be it great and now I just want


8184
22359.68 --> 4.038
to create a couple of more three more


8185
22362.2 --> 3.24
additional types which we are going to


8186
22363.718 --> 3.722
reuse throughout the project so we don't


8187
22365.44 --> 5.358
forget them while we are here so that's


8188
22367.44 --> 5.64
going to be a type point which is very


8189
22370.798 --> 5.122
simply going to be a


8190
22373.08 --> 7.84
coordinate like this then we're going to


8191
22375.92 --> 6.68
have a Type X Y width and height which


8192
22380.92 --> 5.16
is going to be used for translating


8193
22382.6 --> 7.358
something and resizing so coordinates


8194
22386.08 --> 5.24
like in above but also withth and the


8195
22389.958 --> 4.68
height


8196
22391.32 --> 5.158
itself and we're also going to have an


8197
22394.638 --> 5.122
Anum


8198
22396.478 --> 5.48
side so that's going to be uh used for


8199
22399.76 --> 3.718
when we are resizing something we're


8200
22401.958 --> 4.882
going to have


8201
22403.478 --> 5.602
top we're going to have bottom we're


8202
22406.84 --> 5.638
going to have


8203
22409.08 --> 6.76
left and we're going to have right like


8204
22412.478 --> 5.762
this so one two four and eight


8205
22415.84 --> 6.92
respectfully make sure that you add them


8206
22418.24 --> 7.04
exactly like this and now we can expand


8207
22422.76 --> 4.56
this canvas state to be a bit more


8208
22425.28 --> 5.56
specific when it comes to our objects


8209
22427.32 --> 6.04
here so the first object can stay the


8210
22430.84 --> 5.118
same but the second object convas mode


8211
22433.36 --> 3.68
selection net will also need to have an


8212
22435.958 --> 3.6
or


8213
22437.04 --> 4.12
which is going to be a type of point and


8214
22439.558 --> 3.962
it's also going to have an optional


8215
22441.16 --> 3.96
current property which is also going to


8216
22443.52 --> 4.358
be a type of point so we're going to


8217
22445.12 --> 5.16
have uh the origin from where we start


8218
22447.878 --> 4.242
selecting something to the current


8219
22450.28 --> 3.678
coordinates from where we currently are


8220
22452.12 --> 5.16
and that's how we are going to calculate


8221
22453.958 --> 5.322
which uh the web or the net that we are


8222
22457.28 --> 5.278
using to select certain layers and


8223
22459.28 --> 5.56
elements great for the Translating we're


8224
22462.558 --> 4.16
going to have the current property which


8225
22464.84 --> 6
is going to be required and that's going


8226
22466.718 --> 6
to be a point and for the inserting


8227
22470.84 --> 4.44
we're going to have to differentiate


8228
22472.718 --> 4.16
between a layer type so these are the


8229
22475.28 --> 5.12
possible layer types when we are


8230
22476.878 --> 8
inserting something layer type.


8231
22480.4 --> 6.558
ellipse layer type.


8232
22484.878 --> 4.92
rectangle


8233
22486.958 --> 8.562
layer type.


8234
22489.798 --> 7.282
text and layer type. note like this so


8235
22495.52 --> 2.76
just make sure all all of this are in


8236
22497.08 --> 4.84
one


8237
22498.28 --> 7.04
line all right we have that canvas mode


8238
22501.92 --> 6.52
pencil can just stay as it is no need to


8239
22505.32 --> 5.2
add anything here for the pressing we're


8240
22508.44 --> 7.16
going to go ahead and give it an origin


8241
22510.52 --> 8.56
of Point like this and for resizing


8242
22515.6 --> 7.84
we're going to add the initial bounds to


8243
22519.08 --> 8.08
be a type of x y withth and height and


8244
22523.44 --> 6
corner is going to be a type of side so


8245
22527.16 --> 6.04
we're going to use the XY with and hide


8246
22529.44 --> 7.198
and side for resizing so just make sure


8247
22533.2 --> 5.88
that you write those like this great


8248
22536.638 --> 5.32
great job so now we have more


8249
22539.08 --> 5.36
information more specific information


8250
22541.958 --> 4.402
about what's actually going on inside of


8251
22544.44 --> 4.96
our canvas


8252
22546.36 --> 5.56
State now we can go back inside of our


8253
22549.4 --> 5.04
toolbar and we can be more specific when


8254
22551.92 --> 4.92
we are selecting something so let's go


8255
22554.44 --> 5.198
inside of the app folder board


8256
22556.84 --> 5.24
components board ID components


8257
22559.638 --> 3.882
toolbar and let's go ahead you can


8258
22562.08 --> 3.12
already see how we have an error here


8259
22563.52 --> 4.278
because when we are inserting something


8260
22565.2 --> 5.358
we also need to have a layer type so you


8261
22567.798 --> 5.562
can see how much that types helps us so


8262
22570.558 --> 5.562
first things first let's improve when


8263
22573.36 --> 5.198
the select Mouse pointer icon should be


8264
22576.12 --> 4.88
active so it's not just when canvas mode


8265
22578.558 --> 4.4
is none it's also going to be when


8266
22581 --> 8
canvas State


8267
22582.958 --> 9.722
mode is the following it has to be


8268
22589 --> 6.558
translating or it can be selection


8269
22592.68 --> 6.798
net or it can be


8270
22595.558 --> 8
pressing or it can be resizing all of


8271
22599.478 --> 6.362
those modes will trigger the uh this


8272
22603.558 --> 4.722
select icon to be active in the toolbar


8273
22605.84 --> 4.36
so when we are moving something when we


8274
22608.28 --> 5.04
are selecting something when we are


8275
22610.2 --> 5.88
pressing and when we are resizing all of


8276
22613.32 --> 4.88
that is going to fall back to this item


8277
22616.08 --> 3.68
being selected to indicate the user that


8278
22618.2 --> 3.438
none of the new elements are going to


8279
22619.76 --> 4.64
appear because they're doing a specific


8280
22621.638 --> 5.08
action like translating selecting


8281
22624.4 --> 5.478
pressing resizing or nothing at all you


8282
22626.718 --> 5.962
know just uh moving the cursor around


8283
22629.878 --> 6.442
and the set canvas State can stay as it


8284
22632.68 --> 5.44
is now let's go inside of the type text


8285
22636.32 --> 4.08
so first things first let's resolve the


8286
22638.12 --> 4.16
set canvas State what we're going to do


8287
22640.4 --> 4.478
is that if we are selecting mode


8288
22642.28 --> 4.92
inserting we also need to add one of the


8289
22644.878 --> 5.362
appropriate layer types here so we can


8290
22647.2 --> 6.12
see that inside of our canvas here uh


8291
22650.24 --> 5.96
let's just find there we go so if mode


8292
22653.32 --> 5.44
is canvas mode inserting then layer type


8293
22656.2 --> 5.56
needs to be one of these so later if you


8294
22658.76 --> 4.36
decide to add I don't know a triangle


8295
22661.76 --> 3.92
you can do that you can create a new


8296
22663.12 --> 5.08
layer type triangle and you will have to


8297
22665.68 --> 4.56
add it here as one of the possibilities


8298
22668.2 --> 5.04
so that's what I did you know I just


8299
22670.24 --> 4.84
added all the elements I could think of


8300
22673.24 --> 3.84
and you're going to learn how I did that


8301
22675.08 --> 4.878
so that then you can add I don't know a


8302
22677.08 --> 5.2
triangle a a hexagon or something so


8303
22679.958 --> 5.802
let's go ahead and add the layer type in


8304
22682.28 --> 5.518
this case to be layer type. text and we


8305
22685.76 --> 3.52
have to import layer type from types


8306
22687.798 --> 5.242
canvas so just make sure you import


8307
22689.28 --> 6.76
layer type here layer type. text there


8308
22693.04 --> 5.758
we go no more error and we also have to


8309
22696.04 --> 5.64
be more specific with our is active prop


8310
22698.798 --> 7.84
here so let's also use canvas state.


8311
22701.68 --> 7.24
layer type is layer type. text


8312
22706.638 --> 4.682
there we go so let's try and click here


8313
22708.92 --> 4.28
and there we go it stays selected


8314
22711.32 --> 4.68
meaning that we are properly switching


8315
22713.2 --> 4.12
the conas state and is active now let's


8316
22716 --> 3.558
go ahead and do the same thing for the


8317
22717.32 --> 5.8
sticky note so sticky note is going to


8318
22719.558 --> 6
call set canvas State and we can copy


8319
22723.12 --> 4.518
and paste this too so it's going to be


8320
22725.558 --> 4.92
inserting but the layer type is going to


8321
22727.638 --> 6.562
be note we can also copy the isactive


8322
22730.478 --> 6.042
prop and paste it here and the isactive


8323
22734.2 --> 5.438
uh prop is going to check for inserting


8324
22736.52 --> 5.278
yes but the layer type needs to be note


8325
22739.638 --> 4.84
right let's try it out so when I click


8326
22741.798 --> 5
on note there we go note is selected


8327
22744.478 --> 4.202
test text is selected and select is


8328
22746.798 --> 3.76
selected perfect so we can differentiate


8329
22748.68 --> 4.038
between those two so I'm going to keep


8330
22750.558 --> 4.962
copying these two props on click on and


8331
22752.718 --> 5.562
is active for the rest so for the


8332
22755.52 --> 4.6
rectangle let's do the same thing canvas


8333
22758.28 --> 3.08
mode inserting and layer type is going


8334
22760.12 --> 3.64
to be


8335
22761.36 --> 4.64
rectangle and for the is active we're


8336
22763.76 --> 4.878
going to check if the canvas State layer


8337
22766 --> 5.76
type is rectangle as well when I click


8338
22768.638 --> 5.802
here there we go it stays selected let's


8339
22771.76 --> 5.958
do the same thing for ellipse here so


8340
22774.44 --> 6.88
layer type ellipse and layer type


8341
22777.718 --> 6.802
ellipse when I select there we go and


8342
22781.32 --> 7.318
last one left is the


8343
22784.52 --> 7.358
pen so set canvas State for the pencil


8344
22788.638 --> 5.362
right here is going to be uh a bit


8345
22791.878 --> 5.802
simpler so it's not exactly going to


8346
22794 --> 7.12
work on inserting the the reason is that


8347
22797.68 --> 5.84
pencil is kind of going to be different


8348
22801.12 --> 4.08
because we're going to keep drawing


8349
22803.52 --> 5
things and we're going to have to


8350
22805.2 --> 6.24
translate that live live to the other


8351
22808.52 --> 5.8
user and only when we uh press our


8352
22811.44 --> 6
cursor up when we stop drawing is that


8353
22814.32 --> 5.158
going to become a layer so it's not like


8354
22817.44 --> 4.4
with rectangle and ellipse when we


8355
22819.478 --> 4.882
immediately click on something that's


8356
22821.84 --> 4.718
going to insert a new ellipse layer or a


8357
22824.36 --> 4.92
new rectangle or a new text or a new


8358
22826.558 --> 5.08
sticky note but with pen it's not going


8359
22829.28 --> 5.96
to officially become a layer in our


8360
22831.638 --> 6.682
storage until we uh do the mouse button


8361
22835.24 --> 5.12
or mous press up event I'm not sure what


8362
22838.32 --> 3.68
what's it called only then are we going


8363
22840.36 --> 3.16
to create that so that's why the rules


8364
22842 --> 4.4
are going to be a little bit different


8365
22843.52 --> 6
for the pencil here so change the set


8366
22846.4 --> 5.478
canvas state for this one to very simply


8367
22849.52 --> 4.8
just change the mode to Canvas mode


8368
22851.878 --> 4.76
pencil we have an entire separate mode


8369
22854.32 --> 4.76
for the pencil and and the only thing to


8370
22856.638 --> 5
check is active that's needed is check


8371
22859.08 --> 5.32
if canvas mode is pencil that's it so


8372
22861.638 --> 5.562
canvas mode pencil is the simplest out


8373
22864.4 --> 4.92
of all of this here let's go ahead and


8374
22867.2 --> 5.278
try that out now so I can click on


8375
22869.32 --> 5.68
ellipse and I can click on pencil


8376
22872.478 --> 6.522
perfect and if I refresh the default one


8377
22875 --> 8.36
should be the select uh icon right here


8378
22879 --> 6.08
there we go perfect so if you are having


8379
22883.36 --> 3.76
trouble with this you can of course


8380
22885.08 --> 3.92
always with visit my GitHub I would


8381
22887.12 --> 3.12
actually recommend that you take a look


8382
22889 --> 3.24
at my source code while you're


8383
22890.24 --> 5.68
developing so in here you can go inside


8384
22892.24 --> 6.8
of types inside of canvas. Cs and you


8385
22895.92 --> 5.08
can visit the entire Source codes here


8386
22899.04 --> 4.56
and see whether you made any mistakes


8387
22901 --> 5.36
whether you should changes something uh


8388
22903.6 --> 5.52
great so now what we are going to do uh


8389
22906.36 --> 6.16
is we're going to go ahead and make it


8390
22909.12 --> 5.758
so that when other users are present and


8391
22912.52 --> 4.48
they move their cursors we can see their


8392
22914.878 --> 4.522
name at attached to their cursor and


8393
22917 --> 4.84
their cursor has a color matching their


8394
22919.4 --> 5.12
presence great great


8395
22921.84 --> 5.4
job so now let's go ahead and let's


8396
22924.52 --> 4.88
build the cursor presence component


8397
22927.24 --> 5.398
which is going to render other users


8398
22929.4 --> 5.238
cursors in real time so in order to do


8399
22932.638 --> 5.802
this chapter make sure that you have at


8400
22934.638 --> 5.602
least two users inside of your uh board


8401
22938.44 --> 4.518
right so you need to invite someone to


8402
22940.24 --> 4.478
your organization or if for any reason


8403
22942.958 --> 4.882
you're having trouble with that and you


8404
22944.718 --> 6.962
skip that part you can also


8405
22947.84 --> 7.52
modify uh the API live blocks out right


8406
22951.68 --> 7.32
here so if you want to you don't have to


8407
22955.36 --> 6.16
throw 403 for a person which isn't part


8408
22959 --> 4.84
of your organization so you can comment


8409
22961.52 --> 4.16
this out if for any reason you're having


8410
22963.84 --> 4.56
trouble with the invites and just want


8411
22965.68 --> 5.36
to share the URL across browsers so you


8412
22968.4 --> 5.078
can do that little trick here great so


8413
22971.04 --> 5.72
just ensure that at least two users are


8414
22973.478 --> 6.202
inside of your application and now let's


8415
22976.76 --> 6.24
go ahead inside of the app folder board


8416
22979.68 --> 6.76
board ID components convas


8417
22983 --> 6
dosx and now what we are going to do is


8418
22986.44 --> 6.438
just below this toolbar we're going to


8419
22989 --> 7
open up an SVG element so let's write


8420
22992.878 --> 7.642
SVG like this and inside we're going to


8421
22996 --> 7.28
open a g element like that and then


8422
23000.52 --> 7.438
let's go ahead and give this SVG element


8423
23003.28 --> 9.518
a class name of height height of 100 VH


8424
23007.958 --> 7.68
and a width of 100 VW like this so


8425
23012.798 --> 5.84
inside of this G element is where we're


8426
23015.638 --> 6.602
going to store all of our drawable


8427
23018.638 --> 6.122
resizable translatable elements of all


8428
23022.24 --> 4.36
the way from texts to Sticky Notes


8429
23024.76 --> 4.08
everything will be inside of this SVG


8430
23026.6 --> 5.198
element and I don't know what this error


8431
23028.84 --> 7.16
is but I'm pretty sure it's just some


8432
23031.798 --> 6.68
weird cache okay and inside of this G


8433
23036 --> 4.558
element I want to go ahead and add a


8434
23038.478 --> 5.442
component


8435
23040.558 --> 6.362
cursors presence and the reason I want


8436
23043.92 --> 5.44
to do that inside of SVG why wouldn't I


8437
23046.92 --> 4.92
add that uh you know on the same level


8438
23049.36 --> 4.32
as toolbar for example well we could but


8439
23051.84 --> 4.638
we are also going to reuse the cursor's


8440
23053.68 --> 5.76
presence to also render when another


8441
23056.478 --> 4.882
user is drawing in real time so for that


8442
23059.44 --> 5.72
it's going to have to be inside of our


8443
23061.36 --> 5.68
SVG element because later this SVG and


8444
23065.16 --> 4.92
this G element are going to have


8445
23067.04 --> 5.8
functionality on our scroll wheel to


8446
23070.08 --> 4.878
kind of change the camera position so


8447
23072.84 --> 4.6
that's why we need to put that inside of


8448
23074.958 --> 4.68
here now let's go ahead and create the


8449
23077.44 --> 3.64
cursor's presence so inside of


8450
23079.638 --> 3.962
underscore components I'm going to


8451
23081.08 --> 7.28
create cursors


8452
23083.6 --> 8
presents. TSX like that and all I'm


8453
23088.36 --> 5.92
going to do is Mark this as use client


8454
23091.6 --> 6.4
and then I'm going to go ahead and


8455
23094.28 --> 6.358
import Memo from react since this will


8456
23098 --> 4.798
often change let's go ahead and ensure


8457
23100.638 --> 4.042
that the throttle is minimal that the


8458
23102.798 --> 4.242
connection is fast so for that we're


8459
23104.68 --> 6.278
going to memorize this component and


8460
23107.04 --> 7.72
let's go ahead and Export const cursor


8461
23110.958 --> 7.362
presence to be memo and return an arrow


8462
23114.76 --> 7.92
function which for now can just return a


8463
23118.32 --> 6.36
fragment and a paragraph of cursors and


8464
23122.68 --> 3.4
now we have this error because we have


8465
23124.68 --> 3.76
to add


8466
23126.08 --> 5.92
display name to this cursor's presence


8467
23128.44 --> 6.96
and let's just add that cursor's


8468
23132 --> 5.32
presence like this now you can go back


8469
23135.4 --> 5.2
inside of convas and you can import


8470
23137.32 --> 5.52
cursor's presence and there we go like


8471
23140.6 --> 4.278
that and nothing should really be


8472
23142.84 --> 4.2
visible right now I don't think that


8473
23144.878 --> 4.76
text that text probably is somewhere but


8474
23147.04 --> 4.4
we cannot see it right now neveress


8475
23149.638 --> 6.202
let's go back inside of the cursor's


8476
23151.44 --> 8.038
presence now and I want to go ahead


8477
23155.84 --> 3.638
and I want to


8478
23159.638 --> 10.202
import uh use others connection IDs from


8479
23166.08 --> 5.32
live blocks config like that and then


8480
23169.84 --> 4.56
I'm going to go ahead and create another


8481
23171.4 --> 5.8
component here here called


8482
23174.4 --> 6.28
cursors and that is very simply going to


8483
23177.2 --> 6
get the IDS from use others connection


8484
23180.68 --> 5.038
IDs and it's going to go ahead and


8485
23183.2 --> 5.92
return a fragment where we're going to


8486
23185.718 --> 7.682
go ahead and iterate our IDs do map


8487
23189.12 --> 6.4
connection ID like this and inside we're


8488
23193.4 --> 4.558
going to render an individual cursor


8489
23195.52 --> 4.92
element which doesn't exist yet but it


8490
23197.958 --> 5.562
is going to exist in a second and let's


8491
23200.44 --> 5.358
pass in the key to be connection ID and


8492
23203.52 --> 3.72
let's pass in connection ID to be


8493
23205.798 --> 5.442
connection


8494
23207.24 --> 6.88
ID like that there we go and now let's


8495
23211.24 --> 5.398
actually use these cursors and let's


8496
23214.12 --> 4.518
render them right here inside of this


8497
23216.638 --> 6.362
fragment so later inside of this


8498
23218.638 --> 7.32
fragment we are also going to have draft


8499
23223 --> 5.16
pencil component which is going to track


8500
23225.958 --> 5.322
and display to all users what another


8501
23228.16 --> 4.558
user is drawing at that time but for now


8502
23231.28 --> 3.598
we're just going to handle the cursor


8503
23232.718 --> 5.042
movement and now we have to create this


8504
23234.878 --> 4.322
cursor component so inside of underscore


8505
23237.76 --> 3.718
components create


8506
23239.2 --> 5.48
cursor do


8507
23241.478 --> 5.282
TSX and inside of the cursor let's go


8508
23244.68 --> 4.958
ahead and Mark mark it as use client


8509
23246.76 --> 6.56
let's import memo here from


8510
23249.638 --> 8.362
react let's import connection ID to


8511
23253.32 --> 8.08
color from lib utils and let's also


8512
23258 --> 5.878
import Mouse pointer two from Lucid


8513
23261.4 --> 5.2
react so we have this connection ID to


8514
23263.878 --> 4.962
color in our lib utils if you remember


8515
23266.6 --> 5.52
when we created our colors array and


8516
23268.84 --> 5.52
then we use the connection ID mod on the


8517
23272.12 --> 4.438
colors length to get a random color from


8518
23274.36 --> 4.118
the array


8519
23276.558 --> 4.042
and now we're going to use that again


8520
23278.478 --> 4.682
here first let's actually create an


8521
23280.6 --> 4.958
interface


8522
23283.16 --> 4.52
cursor cursor


8523
23285.558 --> 4.362
props is simply going to have the


8524
23287.68 --> 3.958
connection ID which is going to be a


8525
23289.92 --> 5.44
required


8526
23291.638 --> 6.92
string so now let's write memo and let's


8527
23295.36 --> 5.64
go ahead and return this and let's go


8528
23298.558 --> 5.442
ahead and immediately write cursor


8529
23301 --> 4.6
display name to be


8530
23304 --> 5.558
cursor


8531
23305.6 --> 5.84
and let's go in here and return a


8532
23309.558 --> 5
paragraph for now just so we get rid of


8533
23311.44 --> 4.4
the error and then inside we can assign


8534
23314.558 --> 5.442
the


8535
23315.84 --> 7.76
props and extract the connection ID like


8536
23320 --> 5.84
that great so first let's get the info


8537
23323.6 --> 4.68
of the user using the connection ID so


8538
23325.84 --> 5.52
for that I'm going to use use other from


8539
23328.28 --> 6.32
live blocks config let me just move that


8540
23331.36 --> 4.8
here so use other is going to use the


8541
23334.6 --> 4.038
connect


8542
23336.16 --> 5.478
ID it's going to get the user and


8543
23338.638 --> 6.962
extract user


8544
23341.638 --> 6.84
info and let's go ahead and connection


8545
23345.6 --> 5.84
ID is a type of number my apologies not


8546
23348.478 --> 6.962
a type of string and then we're going to


8547
23351.44 --> 10.16
have cursor to be use other connection


8548
23355.44 --> 6.16
ID user user presence


8549
23361.92 --> 5.12
cursor and then we're going to go ahead


8550
23364.6 --> 7.72
and write con's name to be info question


8551
23367.04 --> 7.758
mark. name or teammate let's do


8552
23372.32 --> 4.6
that and if there is no


8553
23374.798 --> 3.362
cursor we're going to go ahead and


8554
23376.92 --> 4.12
return


8555
23378.16 --> 4.44
null and ignore this typescript error


8556
23381.04 --> 3.8
for now we're going to go ahead and


8557
23382.6 --> 5.278
extend the presence object in a second


8558
23384.84 --> 4.36
so we can resolve that great and then


8559
23387.878 --> 3.642
what we're able we're going to be able


8560
23389.2 --> 6.278
to do is extract the coordinates from


8561
23391.52 --> 6.64
our cursor the problem is right now none


8562
23395.478 --> 4.562
of these things are defined right here


8563
23398.16 --> 4.28
you can see that cursor can be a type of


8564
23400.04 --> 4.32
any and our user presence does not


8565
23402.44 --> 5.56
recognize it so we have to go ahead


8566
23404.36 --> 7.8
inside of live blocks config and modify


8567
23408 --> 6.92
this let's go inside of live blocks


8568
23412.16 --> 7.12
config so this root


8569
23414.92 --> 9.12
file and in here we can find just above


8570
23419.28 --> 6.76
user meta I believe the type presence so


8571
23424.04 --> 4.16
let's go ahead and we can just uncomment


8572
23426.04 --> 6.2
this line or write it if you don't have


8573
23428.2 --> 6.758
it so cursor can be an object with


8574
23432.24 --> 5.12
coordinates or null and you can see how


8575
23434.958 --> 4.082
now we no longer have that issue here


8576
23437.36 --> 4.08
and we can safely extract the


8577
23439.04 --> 4.96
coordinates here and let's just do one


8578
23441.44 --> 6
more thing and that is we're going to go


8579
23444 --> 6.398
inside of our reusable component room


8580
23447.44 --> 5.08
right here and we're going to pass in


8581
23450.398 --> 3.922
the initial presence so we get rid of


8582
23452.52 --> 3.958
this error right here because we now


8583
23454.32 --> 7.078
added some something to the presence so


8584
23456.478 --> 7.682
we have to go ahead and pass cursor to


8585
23461.398 --> 5.602
be null by default and that way we no


8586
23464.16 --> 5.6
longer have the typescript error here


8587
23467 --> 4.52
great so that resolves the cursor


8588
23469.76 --> 3.958
component and now let's go inside of


8589
23471.52 --> 4.278
cursor's presence and let's just import


8590
23473.718 --> 6.92
that so we don't have the error here


8591
23475.798 --> 6.84
either so cursor from do/ cursor


8592
23480.638 --> 5.562
component there we go and now we can


8593
23482.638 --> 7.962
safely continue to develop right here


8594
23486.2 --> 9.16
so in order to render the icon inside of


8595
23490.6 --> 8.198
an SVG parent we have to use an element


8596
23495.36 --> 5.88
called foreign object so let's go ahead


8597
23498.798 --> 5.442
and add foreign object and then inside


8598
23501.24 --> 5.84
we can render Mouse pointer 2 which is a


8599
23504.24 --> 6.8
self closing tag and let's give this a


8600
23507.08 --> 6.638
class name of H5 and a width of five and


8601
23511.04 --> 4.2
let's go ahead and give this a style


8602
23513.718 --> 4.08
property because all these are going to


8603
23515.24 --> 5.8
be dynamic so Phil is going to use


8604
23517.798 --> 6.042
connection ID to color and pass in the


8605
23521.04 --> 6.56
connection ID props and we're going to


8606
23523.84 --> 6.718
have the color itself be the exact same


8607
23527.6 --> 6.44
thing with the exact same


8608
23530.558 --> 5.642
param and now we have to find a way to


8609
23534.04 --> 4.64
move the foreign object according to


8610
23536.2 --> 5.32
these coordinates right here so let's


8611
23538.68 --> 6.52
give this a style


8612
23541.52 --> 6.278
prop and pass in the transform


8613
23545.2 --> 7.278
open back and write


8614
23547.798 --> 8.482
translate X open parenthesis and open a


8615
23552.478 --> 5.882
template literal like this PX and then


8616
23556.28 --> 6.438
we're going to go ahead and copy this


8617
23558.36 --> 4.358
and do the same thing for the Y


8618
23562.958 --> 7.44
AIS like this and now let's go ahead and


8619
23566.958 --> 6.282
pass in the height to be 50 and let's


8620
23570.398 --> 5.722
give 50 to the width as well and let's


8621
23573.24 --> 7.28
give this a class name of relative and


8622
23576.12 --> 7.56
drop shadow medium like this and I


8623
23580.52 --> 6.52
believe that this already might be


8624
23583.68 --> 5.76
enough for us to Showcase a cursor so go


8625
23587.04 --> 4.758
into your other browser let's try and


8626
23589.44 --> 3.76
refresh this so we're going to debug if


8627
23591.798 --> 5.522
it doesn't


8628
23593.2 --> 6.96
work so I am moving my other cursor but


8629
23597.32 --> 5.04
I cannot see anything on my screen so it


8630
23600.16 --> 4.398
looks like we didn't do something


8631
23602.36 --> 5.278
properly so I'm going to go ahead and


8632
23604.558 --> 5.32
and add some conso logs debug and tell


8633
23607.638 --> 5.202
you what I found


8634
23609.878 --> 5.322
out so the reason we are not seeing


8635
23612.84 --> 4.84
anything is because I completely forgot


8636
23615.2 --> 6.12
that in our canvas component we actually


8637
23617.68 --> 7.48
need to update our presence so what I


8638
23621.32 --> 5.44
did was I just did a console log of info


8639
23625.16 --> 5.6
and


8640
23626.76 --> 6.36
cursor in this component here and then I


8641
23630.76 --> 4.52
made sure that in my other browser I


8642
23633.12 --> 4.758
refreshed my screen and then I refresh


8643
23635.28 --> 5.278
the screen here as well so let me just


8644
23637.878 --> 6.562
expand this and there we go this is what


8645
23640.558 --> 6.602
I saw I saw that I am logged in uh in


8646
23644.44 --> 5.6
another browser I can see the other user


8647
23647.16 --> 4.638
but their cursor presence is null which


8648
23650.04 --> 4.48
is the initial presence which we've just


8649
23651.798 --> 5.08
passed in the common room comp component


8650
23654.52 --> 5.878
so I remembered yes that is correct


8651
23656.878 --> 6.52
actually because I never update the uh


8652
23660.398 --> 5.442
cursor presence once I move so we need


8653
23663.398 --> 4.602
to add an own Mouse move event and


8654
23665.84 --> 4.958
update the cursor presence so we're


8655
23668 --> 4.718
going to leave this as it is for now and


8656
23670.798 --> 5.6
let's head back inside of our convas


8657
23672.718 --> 6.642
dosx component right here and let's just


8658
23676.398 --> 7.48
collapse all of our imports from live


8659
23679.36 --> 6.358
blocks here and let's add use mutation


8660
23683.878 --> 5.962
so use mutation is a hook which can be


8661
23685.718 --> 6.562
used to kind of broadcast or stream uh


8662
23689.84 --> 5.798
some changes to the entire group of


8663
23692.28 --> 7.198
people connected inside of a live blocks


8664
23695.638 --> 8.08
room so let's go ahead and create a


8665
23699.478 --> 5.48
function const on pointer move to be


8666
23703.718 --> 5
used


8667
23704.958 --> 7.042
mutation and it's going to uh extract a


8668
23708.718 --> 5.76
method called set my


8669
23712 --> 4.798
presence and in the other argument is


8670
23714.478 --> 5.562
going to take the event which is a type


8671
23716.798 --> 6.202
of react. pointer


8672
23720.04 --> 5.72
event and let's go ahead and open this


8673
23723 --> 4.92
up let's prevent


8674
23725.76 --> 6.16
default in


8675
23727.92 --> 7.478
here and let's go ahead and simply do


8676
23731.92 --> 6.08
concurrent to be pointer uh well we have


8677
23735.398 --> 9.042
to actually create a lip for this so let


8678
23738 --> 6.44
me add for now is going to be x0


8679
23745.16 --> 7.6
y0 and let's just do set my presence and


8680
23749.24 --> 5.44
passing the cursor to be the current


8681
23752.76 --> 5
like that and then we have add the


8682
23754.68 --> 6
dependency array and I don't think we


8683
23757.76 --> 5.68
have to add anything in here for now


8684
23760.68 --> 5.798
this can just stay as it is because


8685
23763.44 --> 5.438
we're not actually using anything yet


8686
23766.478 --> 5.16
later the onp pointer move of course is


8687
23768.878 --> 5.882
going to have a lot of options but not


8688
23771.638 --> 6.16
for now let me just collapse my elements


8689
23774.76 --> 6.24
here all right and now what we have to


8690
23777.798 --> 7.042
do is we have to make the current


8691
23781 --> 6.92
actually get calculated by the our


8692
23784.84 --> 6.28
pointer event and the state of the


8693
23787.92 --> 6.24
canvas and the state of the camera so we


8694
23791.12 --> 6.838
have a couple of more things to


8695
23794.16 --> 5.36
add so first let's initialize the camera


8696
23797.958 --> 4.482
that's going to be very simple it's


8697
23799.52 --> 6.278
going to be just a simple set state so


8698
23802.44 --> 4.518
const camera set camera is going to be


8699
23805.798 --> 3.362
use


8700
23806.958 --> 5.402
State and we're going to pass in the


8701
23809.16 --> 5.478
default X of z and y of zero basically


8702
23812.36 --> 4.76
what I just did right here that's going


8703
23814.638 --> 4.16
to be the default camera movement and we


8704
23817.12 --> 4.48
can already Define the type of the


8705
23818.798 --> 5.482
camera thanks to our types from canvas


8706
23821.6 --> 5.92
so in here we Define the type camera so


8707
23824.28 --> 6.08
we can use that camera from types canvas


8708
23827.52 --> 6.48
so just make sure that you import this


8709
23830.36 --> 7.16
great and now besides on pointer move


8710
23834 --> 6.638
let's also go ahead and Implement on


8711
23837.52 --> 6.198
Wheel so const on wheel is going to


8712
23840.638 --> 5.76
change the camera so we can have


8713
23843.718 --> 5.92
infinite space once we do once we use


8714
23846.398 --> 5.802
the scroll wheel so that's going to be


8715
23849.638 --> 5.16
react. wheel


8716
23852.2 --> 4.518
event and I believe I need to import use


8717
23854.798 --> 4.122
callback from react so let me just


8718
23856.718 --> 4.68
import that make sure that you added use


8719
23858.92 --> 4.958
callback let's add an empty dependency


8720
23861.398 --> 5.442
array here and in here all we're going


8721
23863.878 --> 4.242
to do is set camera we're going to get


8722
23866.84 --> 5.16
the existing


8723
23868.12 --> 6.758
camera open an immediate object the new


8724
23872 --> 8.28
x coordinate is going to be camerax x


8725
23874.878 --> 10.402
minus event. Delta X and Y is going to


8726
23880.28 --> 6.76
be camera doy minus E do Delta y so


8727
23885.28 --> 4.358
basically what we are doing here is


8728
23887.04 --> 6.4
panning the camera based on the wheel


8729
23889.638 --> 7.08
Delta and now we can use this on wheel


8730
23893.44 --> 6.518
and on pointer move and assign it to


8731
23896.718 --> 6.402
this SVG element right here so let's go


8732
23899.958 --> 5.52
ahead and pass in the on Wheel here and


8733
23903.12 --> 5.758
let's write on Wheel


8734
23905.478 --> 6.92
and let's add onp pointer move to be onp


8735
23908.878 --> 5.68
pointer move so we have those two now


8736
23912.398 --> 4.48
but we are still not done there is just


8737
23914.558 --> 6.362
one more thing we have to do we have to


8738
23916.878 --> 7.282
create a reusable util which is called


8739
23920.92 --> 5.718
pointer event to Canvas point so we're


8740
23924.16 --> 4.76
going to use the position of the camera


8741
23926.638 --> 4.602
the position of our pointer and then


8742
23928.92 --> 5.2
we're going to calculate the coordinates


8743
23931.24 --> 4.8
on the screen that the user can see and


8744
23934.12 --> 3.64
where they are currently scroll that on


8745
23936.04 --> 3.96
their canvas because remember thanks to


8746
23937.76 --> 5.118
this on wheel and moving the camera they


8747
23940 --> 6.558
have infinite place to move their camera


8748
23942.878 --> 8.122
so let's go ahead and go inside


8749
23946.558 --> 6.84
of lib utils and here at the bottom I'm


8750
23951 --> 7.08
going to export


8751
23953.398 --> 7.522
function pointer event to Canvas


8752
23958.08 --> 7.04
point it will accept two arguments the


8753
23960.92 --> 7.638
event which is react. pointer event


8754
23965.12 --> 6.358
and Camera which is the camera event


8755
23968.558 --> 6.682
from sorry the camera type from types


8756
23971.478 --> 7.32
camera so I'm going to import that right


8757
23975.24 --> 6.2
here and let's go ahead and open this


8758
23978.798 --> 5.442
function up and very simply is going to


8759
23981.44 --> 4.118
return an object with an x value which


8760
23984.24 --> 4.88
is


8761
23985.558 --> 5.24
math.round e. client and this is not an


8762
23989.12 --> 5.96
arrow function my


8763
23990.798 --> 8.16
apologies so event. client X minus


8764
23995.08 --> 10.44
camera. X and Y is going to be math.


8765
23998.958 --> 7.802
round e. client y minus camera y like


8766
24005.52 --> 4.6
that we're going to get the new


8767
24006.76 --> 6.958
coordinates for our pointer and then we


8768
24010.12 --> 5.8
can use that right here so let's go


8769
24013.718 --> 6.482
ahead now and let's


8770
24015.92 --> 7.038
add the current to be our new function


8771
24020.2 --> 4.84
pointer event to Canvas point so just


8772
24022.958 --> 5.202
make sure you add this import from lib


8773
24025.04 --> 5.24
utils I'm just going to move that here


8774
24028.16 --> 4.36
so pointer event to Canvas point is


8775
24030.28 --> 6.4
going to accept two arguments the event


8776
24032.52 --> 7.72
and the camera State like this there we


8777
24036.68 --> 6.4
go so this should now actually control


8778
24040.24 --> 7.2
our presence and update our cursor so


8779
24043.08 --> 6.96
let's go ahead and conso log the current


8780
24047.44 --> 6.038
here make sure that you've added on


8781
24050.04 --> 6.358
pointer move to the SVG element here my


8782
24053.478 --> 6.32
apologies I can't focus the scroll and


8783
24056.398 --> 6.08
let's also add the on whe console log


8784
24059.798 --> 7.242
here so I'm going to add console log and


8785
24062.478 --> 7.722
I'm going to log X to be uh e do Delta X


8786
24067.04 --> 5.16
and Y to be e do Delta y just to


8787
24070.2 --> 6.438
convince ourselves that this is actually


8788
24072.2 --> 6.24
moving so let me go ahead and open my uh


8789
24076.638 --> 3.882
my inspect element and when I'm moving


8790
24078.44 --> 4.64
the cursor you can see that I have a


8791
24080.52 --> 5
presence so you can see that these


8792
24083.08 --> 4.28
values are changing every single time


8793
24085.52 --> 4.118
that's great and now let's try and do


8794
24087.36 --> 4.56
the following let's try and scroll there


8795
24089.638 --> 5
we go you can see how when I scroll on


8796
24091.92 --> 5.24
to the bottom you can see how my canvas


8797
24094.638 --> 5.84
increases right I also have a vertical


8798
24097.16 --> 5.318
scroll so my x value increases so that's


8799
24100.478 --> 4.522
how we going to simulate an infinite


8800
24102.478 --> 5.522
board so we need all of that information


8801
24105 --> 4.958
to properly display it to other users


8802
24108 --> 5.36
and I think that already if I go into my


8803
24109.958 --> 5.44
other application now and refresh I


8804
24113.36 --> 4.88
think I should be able to see my other


8805
24115.398 --> 6.442
users cursor without almost any changes


8806
24118.24 --> 5.558
there we go I have my other users cursor


8807
24121.84 --> 4.08
and I can also see my cursor well you


8808
24123.798 --> 3.282
can see that on the screen but don't


8809
24125.92 --> 3.878
worry later I'm going to join the


8810
24127.08 --> 6.24
screens but we can see that it is quite


8811
24129.798 --> 5.562
tacky right it looks like kind of laggy


8812
24133.32 --> 4.238
but we can improve that by fixing the


8813
24135.36 --> 4.64
throttling and well by removing all of


8814
24137.558 --> 4.602
this conso logs right we don't need them


8815
24140 --> 3.958
so let's go ahead and do the following


8816
24142.16 --> 4.638
we can now remove the conso log here


8817
24143.958 --> 6.042
here and we can remove the conso log


8818
24146.798 --> 6.122
here as well and now what we can do is


8819
24150 --> 5.16
we can go back inside of our livelocks


8820
24152.92 --> 2.24
doc


8821
24155.2 --> 6.87
[Music]


8822
24172.68 --> 5.958
config.sys great and now what I want to


8823
24175.718 --> 4.202
do is I also want to render the user's


8824
24178.638 --> 3.202
name so you can already see that the


8825
24179.92 --> 3.958
color is matching this is my other user


8826
24181.84 --> 5.44
and their color are matching so now


8827
24183.878 --> 8.402
let's also add the name of that user in


8828
24187.28 --> 8.72
the sidebar uh in the little box


8829
24192.28 --> 7.08
below for that we have to head back


8830
24196 --> 7.12
inside of our cursor component so that


8831
24199.36 --> 5.08
is located in up board board ID


8832
24203.12 --> 3.598
components


8833
24204.44 --> 5.438
cursor and now here's what I want to


8834
24206.718 --> 5.442
change I want to dynamically calculate


8835
24209.878 --> 4.322
the width of this foreign object because


8836
24212.16 --> 4.6
we can't really use flex here and stuff


8837
24214.2 --> 4.32
like that well we can but in the inside


8838
24216.76 --> 3.878
elements we cannot use it on the foreign


8839
24218.52 --> 4.72
object so in here we need to use the


8840
24220.638 --> 5.042
length of our username to calculate the


8841
24223.24 --> 6.76
width of the foreign object so I'm going


8842
24225.68 --> 8.198
to write name. length * 10 plus an


8843
24230 --> 8
offset of 24 for our padding and let's


8844
24233.878 --> 6.202
go ahead now here and let's render a div


8845
24238 --> 5.92
element which is going to render the


8846
24240.08 --> 7.36
name of our user and let's give this


8847
24243.92 --> 5.28
div a class name of absolute so make


8848
24247.44 --> 3.84
sure that your foreign object has the


8849
24249.2 --> 5.04
class name relative so we can absolutely


8850
24251.28 --> 5.438
position it here left


8851
24254.24 --> 5.318
D5 PX


8852
24256.718 --> 7.402
1.5 py


8853
24259.558 --> 7.882
0.5 rounded medium text extra small text


8854
24264.12 --> 5.16
white and font semi bold and we're going


8855
24267.44 --> 4.6
to have a style so we can add the


8856
24269.28 --> 6.48
Dynamic Color specifically background


8857
24272.04 --> 7.758
color to be connection ID to color and


8858
24275.76 --> 6
passing the connection ID like that so


8859
24279.798 --> 6.282
let's try that out now and you can


8860
24281.76 --> 7.28
already see my cursor right here amazing


8861
24286.08 --> 5.68
amazing job so there is one more thing


8862
24289.04 --> 4.678
that I want to do so right now uh you


8863
24291.76 --> 5.4
can't really see it but in my other


8864
24293.718 --> 5.402
browser if I go outside of my window


8865
24297.16 --> 5.04
what happens is that you can see this


8866
24299.12 --> 5.518
cursor right here being stuck here what


8867
24302.2 --> 4.96
I want to happen if a user goes outside


8868
24304.638 --> 5.282
of canvas is that their pointer gets


8869
24307.16 --> 5.52
reset to null I want their pointer to be


8870
24309.92 --> 5.6
disappeared because this way if they go


8871
24312.68 --> 4.92
you know to the top and switch their tab


8872
24315.52 --> 3.72
they are still positioned as being here


8873
24317.6 --> 4.198
but that's no longer true they're moving


8874
24319.24 --> 6.238
their cursor in another tab so we can


8875
24321.798 --> 6.522
resolve that by going back inside of our


8876
24325.478 --> 6.122
canvas and let's add another function


8877
24328.32 --> 6.158
called on pointer leave and we simply


8878
24331.6 --> 7.08
have to assign that to the SVG element


8879
24334.478 --> 6.32
as well so just below our on pointer


8880
24338.68 --> 4.08
move let's


8881
24340.798 --> 6.442
add a


8882
24342.76 --> 5.52
constant on pointer leave that is also


8883
24347.24 --> 3.68
going to be a


8884
24348.28 --> 6.4
mutation from where we're going to


8885
24350.92 --> 6.878
extract set my presence


8886
24354.68 --> 3.118
and all we have to


8887
24358.878 --> 6.722
do is call set my presence and pass in


8888
24363.28 --> 6.08
an object cursor


8889
24365.6 --> 9.08
null like that so let's go ahead and


8890
24369.36 --> 8.72
assign on pointer leave now to our SVG


8891
24374.68 --> 5.48
element I think this is uh an the right


8892
24378.08 --> 4.398
Handler it is onp pointer leave matches


8893
24380.16 --> 4.318
onp pointer leave great let me see if I


8894
24382.478 --> 7.442
can actually


8895
24384.478 --> 8.122
make this like that great so now if I


8896
24389.92 --> 5.478
refresh this and if I refresh my other


8897
24392.6 --> 4.44
element now what should happen is that


8898
24395.398 --> 3.842
there we go I'm here and if I go to the


8899
24397.04 --> 4.678
top you can see how I disappear now


8900
24399.24 --> 4.76
because I'm I'm now switching tabs in my


8901
24401.718 --> 5
other browser right or if I go and


8902
24404 --> 4.36
choose a tool my cursor disappears


8903
24406.718 --> 4.322
because that's not what I'm currently


8904
24408.36 --> 5.64
doing perfect and you can see how again


8905
24411.04 --> 5.32
it matches my color and now to wrap this


8906
24414 --> 4.398
up I'm just going to show you a side by


8907
24416.36 --> 3.68
side example of two browsers and my


8908
24418.398 --> 4.602
cursors


8909
24420.04 --> 6.28
matching here we go so in here you can


8910
24423 --> 5.92
see that I am a user called please no


8911
24426.32 --> 4.12
and here I'm a user called Antonio so


8912
24428.92 --> 4.08
you can see that in here I can see the


8913
24430.44 --> 5
Antonio cursor and in here I can see the


8914
24433 --> 5
please no cursor when I go outside of


8915
24435.44 --> 6
the canvas element my cursor now


8916
24438 --> 5.36
disappears great amazing amazing job as


8917
24441.44 --> 4.08
always if you're having any trouble you


8918
24443.36 --> 3.438
can always visit my GitHub directly I


8919
24445.52 --> 3.08
don't know if you know this but I


8920
24446.798 --> 3.962
actually make my GitHub commits


8921
24448.6 --> 4.038
according to the chapter so all you


8922
24450.76 --> 4.76
would have to do is find the chapter


8923
24452.638 --> 5.08
under the number 21 and you're going to


8924
24455.52 --> 6.52
see the exact code that I have changed


8925
24457.718 --> 7.402
for this exact feature great great


8926
24462.04 --> 6.2
job all right so now I think it's time


8927
24465.12 --> 4.72
for us to finally create a functionality


8928
24468.24 --> 4.12
that when we click on a rectangle and


8929
24469.84 --> 6.24
then click on our canvas we actually


8930
24472.36 --> 7.96
render the rectangle so first things


8931
24476.08 --> 7.36
first let's go ahead back inside of our


8932
24480.32 --> 5.84
canvas and one thing that I forgot here


8933
24483.44 --> 7.16
is to actually apply the coordinates of


8934
24486.16 --> 6.96
the camera to our SVG element right here


8935
24490.6 --> 5.278
so right now our on wheel is changing


8936
24493.12 --> 6.08
the movement but nothing is actually


8937
24495.878 --> 6.722
happening so let's go ahead and find our


8938
24499.2 --> 7.278
G element here and give it a style


8939
24502.6 --> 6.118
transform form open back Tex translate


8940
24506.478 --> 4.92
open parenthesis for the first argument


8941
24508.718 --> 5.16
we're going to use camera x coordinate


8942
24511.398 --> 6.922
and write pixels and then we're going to


8943
24513.878 --> 6.92
write comma camera y coordinate pixels


8944
24518.32 --> 4.238
like this right now if you try scrolling


8945
24520.798 --> 3.482
nothing is going to happen but later


8946
24522.558 --> 3.762
when we actually render something on the


8947
24524.28 --> 5.56
canvas we're going to see whether this


8948
24526.32 --> 6.478
is working or not great now let's go to


8949
24529.84 --> 6.36
the top of our app here and let's define


8950
24532.798 --> 5.802
a constant Max layers and let's put it


8951
24536.2 --> 5.08
at a 100 so for this tutorial I'm going


8952
24538.6 --> 4.198
to limit the layers to a 100 this is a


8953
24541.28 --> 3.04
good practice to have you can increase


8954
24542.798 --> 3.84
it to a thousand to a million if you


8955
24544.32 --> 5.36
want to but it's a good practice to have


8956
24546.638 --> 5.76
a limit of layers inside of your conas


8957
24549.68 --> 6.48
here now let's go ahead and let's


8958
24552.398 --> 6.802
revisit our types for a second so types


8959
24556.16 --> 6.558
canvas. TS and let's go all the way to


8960
24559.2 --> 5.16
the bottom here and I want to export a


8961
24562.718 --> 4.442
type


8962
24564.36 --> 5.4
called layer so a layer is going to be


8963
24567.16 --> 4.36
all of our possible uh layers which we


8964
24569.76 --> 6.48
have defined above so that's going to be


8965
24571.52 --> 6.56
our rectangle layer our ellipse layer


8966
24576.24 --> 4.318
our path


8967
24578.08 --> 7.28
layer our text


8968
24580.558 --> 6.722
layer and our note layer so just confirm


8969
24585.36 --> 5.24
that you have the rectangle layer


8970
24587.28 --> 7.4
confirm that you have the ellipse layer


8971
24590.6 --> 6.52
the path layer and the last last one is


8972
24594.68 --> 6.52
the text layer and of course the note


8973
24597.12 --> 7.24
layer great now let's go ahead inside of


8974
24601.2 --> 3.16
live blocks.


8975
24607.32 --> 5.6
config.log client let's add some


8976
24610.24 --> 6.88
additional Imports here so we going to


8977
24612.92 --> 7.6
need live list live map and live


8978
24617.12 --> 6.72
object and from our


8979
24620.52 --> 5.52
types we are going to need


8980
24623.84 --> 6.24
so from types canvas we are going to


8981
24626.04 --> 6.8
need our newly created layer and


8982
24630.08 --> 5.68
color and now let's go ahead and find


8983
24632.84 --> 5.24
the storage so let me just find where


8984
24635.76 --> 4.44
that is there we go type storage just


8985
24638.08 --> 4.878
above user meta and just below the


8986
24640.2 --> 5.438
presence where we added our cursor and


8987
24642.958 --> 5.282
I'm going to remove the comment from


8988
24645.638 --> 5.682
here and inside I'm going to go ahead


8989
24648.24 --> 7.84
and write layers to be a type of line


8990
24651.32 --> 7.96
map open pointy brackets string and live


8991
24656.08 --> 6.84
object open pointy brackets again layer


8992
24659.28 --> 8.518
like this and then layer IDs are going


8993
24662.92 --> 8.6
to be live list and string inside like


8994
24667.798 --> 6.882
that great now let's go ahead inside of


8995
24671.52 --> 4.878
our reusable room component so


8996
24674.68 --> 5.68
components


8997
24676.398 --> 5.24
room and in here let's go ahead and add


8998
24680.36 --> 5.64
initial


8999
24681.638 --> 7.16
storage to have layers to be new live


9000
24686 --> 5.04
map from live blocks client so just make


9001
24688.798 --> 3.76
sure you add this import and let's


9002
24691.04 --> 3.758
actually import everything we need from


9003
24692.558 --> 5.08
live blocks client so live


9004
24694.798 --> 5.962
map and live


9005
24697.638 --> 6.722
object uh live map of I did this twice


9006
24700.76 --> 8.638
sorry live list is one of those and


9007
24704.36 --> 7.278
let's also import layer from types conas


9008
24709.398 --> 4.4
so live map live list and live object


9009
24711.638 --> 5.962
from live blocks client and layer from


9010
24713.798 --> 5.522
types canvas and now in here we can go


9011
24717.6 --> 4.118
ahead and Define the initial storage


9012
24719.32 --> 5.558
layers to be new live map pass in the


9013
24721.718 --> 6.522
string and then live object and pass in


9014
24724.878 --> 4.482
the layer and execute it like this and


9015
24728.24 --> 4.96
layer


9016
24729.36 --> 7.358
IDs are going to be new live


9017
24733.2 --> 6.598
list like that


9018
24736.718 --> 5.76
great now let's head back inside of our


9019
24739.798 --> 7.08
canas component so that's inside of the


9020
24742.478 --> 7.4
app board board ID conas right here and


9021
24746.878 --> 6.642
let's go ahead and let's define our


9022
24749.878 --> 5.962
layer IDs here so const layer IDs are


9023
24753.52 --> 5.08
going to be used storage which we can


9024
24755.84 --> 4.44
import from atlive blocks. config so let


9025
24758.6 --> 3.64
me show you that right here so the same


9026
24760.28 --> 5.358
place where we have history undo redo


9027
24762.24 --> 5.08
mutation and other stuff and from here


9028
24765.638 --> 5.042
from the root we are simply going to


9029
24767.32 --> 5.68
extract root layer IDs so layer IDs are


9030
24770.68 --> 4.878
going to be information about everything


9031
24773 --> 5.638
that we have to display on our canvas so


9032
24775.558 --> 5.24
we are going to do a map iteration over


9033
24778.638 --> 4.042
those layer IDs and depending on the


9034
24780.798 --> 4.962
layer type we are going to know whether


9035
24782.68 --> 5.84
to show the rectangle sticky note text


9036
24785.76 --> 5.84
pencil or an ellypse and depending on


9037
24788.52 --> 5.278
even more information like width height


9038
24791.6 --> 4.278
and the X and Y coordinates we're going


9039
24793.798 --> 5.442
to know exactly where and how to


9040
24795.878 --> 6.122
position them on our canvas great and


9041
24799.24 --> 4.08
besides the layer IDs let's go ahead and


9042
24802 --> 5.6
below the camera


9043
24803.32 --> 9.04
let's add a new state for our last used


9044
24807.6 --> 6.878
color and set last used color that's


9045
24812.36 --> 6.76
going to be use


9046
24814.478 --> 6.642
state with a type of color from types


9047
24819.12 --> 3.88
canvas so make sure you import color


9048
24821.12 --> 4.64
from types canvas which is just a very


9049
24823 --> 5.76
simple RGB object so R is going to be


9050
24825.76 --> 5
zero g is going to be zero and B is


9051
24828.76 --> 4.6
going to be zero this represents the


9052
24830.76 --> 6.16
black color as the initial color we are


9053
24833.36 --> 6.518
going to paint everything with


9054
24836.92 --> 6.038
great now let's create a function to


9055
24839.878 --> 6.482
insert a layer so I'm going to do that


9056
24842.958 --> 5.202
after this uh well actually let's do it


9057
24846.36 --> 3.96
right here after we initialize this


9058
24848.16 --> 4.88
hooks here I'm going to write const


9059
24850.32 --> 6.158
insert layer to be used mutation which


9060
24853.04 --> 8.16
we already have and in here I'm going to


9061
24856.478 --> 6.762
go ahead and extract storage and set my


9062
24861.2 --> 4.72
presence and from the the second


9063
24863.24 --> 4.36
argument I'm going to extract layer type


9064
24865.92 --> 4.44
which is going to be a type of layer


9065
24867.6 --> 5.278
type which you can import from at/ types


9066
24870.36 --> 5.598
canvas so again let's just collapse all


9067
24872.878 --> 6.52
of this nicely so we can refresh


9068
24875.958 --> 5.722
exactly what we need from types canvas


9069
24879.398 --> 4.202
so make sure you add layer type as the


9070
24881.68 --> 4.278
second argument and now we're going to


9071
24883.6 --> 4.08
Define what layer types can be added


9072
24885.958 --> 5.642
here so it's going to be layer type.


9073
24887.68 --> 8.038
ellipse it's going to be layer type uh


9074
24891.6 --> 6.16
rectangle it's going to be layer type


9075
24895.718 --> 5.642
uh.


9076
24897.76 --> 5.56
text and it's going to be layer type.


9077
24901.36 --> 4.358
note but it's not going to be layer


9078
24903.32 --> 4.398
type. path that's going to work on its


9079
24905.718 --> 3.362
own insert function because remember


9080
24907.718 --> 3.642
drawing is going to be a little bit


9081
24909.08 --> 3.558
different so that's the second argument


9082
24911.36 --> 3.84
so make sure you write all of this in


9083
24912.638 --> 6
one line and the third argument is going


9084
24915.2 --> 6.48
to be a point uh sorry position which is


9085
24918.638 --> 6.92
a type of point and I think we already


9086
24921.68 --> 7.64
have point in imported let me go here do


9087
24925.558 --> 8.762
we have a type Point let me just find it


9088
24929.32 --> 7.44
here point we do have a type point do I


9089
24934.32 --> 4.558
export it I do but I don't import it so


9090
24936.76 --> 4.68
make sure you import type point from


9091
24938.878 --> 5.562
here so you can work with it and it


9092
24941.44 --> 5.64
feels like I didn't assign this


9093
24944.44 --> 5.278
properly


9094
24947.08 --> 4.878
um for some reason this doesn't seem to


9095
24949.718 --> 4.642
be working Point refers to a type but


9096
24951.958 --> 5.482
it's being used this value okay how


9097
24954.36 --> 6.96
about we just continue um doing this


9098
24957.44 --> 6.68
extract this into a function and add the


9099
24961.32 --> 5.6
dependency array okay it looks like I


9100
24964.12 --> 5.518
was just missing this part so point is


9101
24966.92 --> 5.36
now definitely referring to this import


9102
24969.638 --> 4.402
which I've added here so just ensure


9103
24972.28 --> 4.678
that you have the import for point and


9104
24974.04 --> 5.8
if I don't import that great I have uh


9105
24976.958 --> 6.722
an error here perfect so make sure you


9106
24979.84 --> 7.24
import point from types can as I did


9107
24983.68 --> 5.6
right here Point great and now what we


9108
24987.08 --> 4.718
are going to do with this information is


9109
24989.28 --> 6
first let's get all the layers so const


9110
24991.798 --> 8.242
live layers are going to be our


9111
24995.28 --> 6.358
storage. getet layers like this and then


9112
25000.04 --> 5.12
we're going to check if we've hit a


9113
25001.638 --> 7.92
limit on our layers so if live layers.


9114
25005.16 --> 6.28
size is higher or equal than Max layers


9115
25009.558 --> 3.482
which we Define at the top in a constant


9116
25011.44 --> 4.08
which is just a number 100


9117
25013.04 --> 4.598
we're going to break this function


9118
25015.52 --> 6.48
otherwise let's go ahead and let's load


9119
25017.638 --> 8.562
the layer IDs so const live layer IDs


9120
25022 --> 7.92
are going to be storage doget layer


9121
25026.2 --> 7.48
IDs and then let's go ahead and Define


9122
25029.92 --> 5.92
const layer ID to be an ID and for this


9123
25033.68 --> 4.84
I'm going to use Nano ID so let's go


9124
25035.84 --> 6.76
inside of the terminal quickly and let's


9125
25038.52 --> 8.438
just do npm install Nano ID like this


9126
25042.6 --> 7.358
great and now we can import Nano


9127
25046.958 --> 5.282
ID and let me just go ahead to the top


9128
25049.958 --> 5.44
here and add


9129
25052.24 --> 5.76
import from Nano ID I'm not sure this is


9130
25055.398 --> 5.802
a default import Nano


9131
25058 --> 7.76
ID I think that


9132
25061.2 --> 7.04
this yes this looks fine so layer ID is


9133
25065.76 --> 4.48
nano ID and then let's actually create


9134
25068.24 --> 5.44
the new layer so con layer is going to


9135
25070.24 --> 6.44
be new live object from live blocks


9136
25073.68 --> 7.16
client so just make sure you add uh this


9137
25076.68 --> 5.84
import I'm going to move that uh with


9138
25080.84 --> 4.118
the types


9139
25082.52 --> 4.198
here not with the types with the Global


9140
25084.958 --> 4.68
Imports here so import live object from


9141
25086.718 --> 5.202
live blocks client so now that we have a


9142
25089.638 --> 4.602
new layer ID let's go ahead and give


9143
25091.92 --> 4.28
this a type of layer type which is going


9144
25094.24 --> 5.12
to come from the second argument right


9145
25096.2 --> 5.758
here in this insert layer function then


9146
25099.36 --> 7.16
we're going to have X to be our position


9147
25101.958 --> 6.202
dox X Y position doy and in here we're


9148
25106.52 --> 3.64
going to define the default height and


9149
25108.16 --> 5.76
width of this element so height is going


9150
25110.16 --> 5.6
to be 100 width is going to be 100 as


9151
25113.92 --> 3.76
well you can of course change this later


9152
25115.76 --> 3.28
you can even change it depending on the


9153
25117.68 --> 3.44
layer type so you have all the


9154
25119.04 --> 3.598
information you want here so if you for


9155
25121.12 --> 5.838
example if


9156
25122.638 --> 7.562
layer type is layer type do text for


9157
25126.958 --> 5.562
example you can use the width to be 500


9158
25130.2 --> 3.96
initially right you can just play around


9159
25132.52 --> 3.68
with that if you want to but for now


9160
25134.16 --> 4.638
just follow along exactly like I do so


9161
25136.2 --> 5.72
you are not that prone to errors uh


9162
25138.798 --> 4.442
right and fill is going to be last used


9163
25141.92 --> 3.76
color so that's how we're going to


9164
25143.24 --> 5.76
define the default color and once we


9165
25145.68 --> 7.08
have our new layer we can then push this


9166
25149 --> 5.04
to our live layer IDs so live layer IDs


9167
25152.76 --> 4.24
do


9168
25154.04 --> 5.438
push is going to get a new layer


9169
25157 --> 8.08
ID and live


9170
25159.478 --> 9.522
layers do set layer layer ID and layer


9171
25165.08 --> 5.96
object like this and finally let's call


9172
25169 --> 4.24
set my


9173
25171.04 --> 6.518
presence


9174
25173.24 --> 6.6
selection an array and layer ID inside


9175
25177.558 --> 6
and add to


9176
25179.84 --> 5.6
history is going to be true so let's


9177
25183.558 --> 4.722
ignore this error for now we need to add


9178
25185.44 --> 5.198
the selection uh we need to that


9179
25188.28 --> 5.8
selection to our live block config and


9180
25190.638 --> 9
let's call set State here


9181
25194.08 --> 11.08
here uh yes set canvas State mode canvas


9182
25199.638 --> 8.32
mode do none like this and let's add


9183
25205.16 --> 5.68
last used color in the dependency array


9184
25207.958 --> 6
here perfect so now let's go ahead and


9185
25210.84 --> 8.638
resolve this little selection


9186
25213.958 --> 9.802
issue let's go back inside of our live


9187
25219.478 --> 6.842
blocks. config dots and in the presence


9188
25223.76 --> 3.36
here let's go ahead below the cursor and


9189
25226.32 --> 4
add


9190
25227.12 --> 6.08
selection to be string and an array so


9191
25230.32 --> 4.72
an array of strings and that resolves


9192
25233.2 --> 3.8
this issue with selection but now we


9193
25235.04 --> 5.48
have to go back inside of our reusable


9194
25237 --> 6.68
room component and in here very simply


9195
25240.52 --> 7.438
we're going to add the


9196
25243.68 --> 7.32
selection to be an empty array like this


9197
25247.958 --> 5.962
and then we can go back inside of canvas


9198
25251 --> 7.32
right here great so now that we have our


9199
25253.92 --> 9.68
method to insert a new layer we have to


9200
25258.32 --> 8.12
create a method called on Mouse up I


9201
25263.6 --> 6.198
believe because that's the Handler uh


9202
25266.44 --> 6.118
actually let's call it on pointer up and


9203
25269.798 --> 6.322
then depending on the current layer mode


9204
25272.558 --> 7.442
and canvas State mode we're going to


9205
25276.12 --> 6.48
call the insert layer if we are one of


9206
25280 --> 5.28
these layer types other one wise we're


9207
25282.6 --> 4.68
going to call some other methods so let


9208
25285.28 --> 3.56
me go ahead and actually do that instead


9209
25287.28 --> 4.678
of just talking about it so make sure


9210
25288.84 --> 6.08
that you have defined the uh insert


9211
25291.958 --> 5.482
layer method here and then we have onp


9212
25294.92 --> 7.558
pointer move we have onp pointer leave


9213
25297.44 --> 7
and now let's add const on pointer up


9214
25302.478 --> 5.16
that's also going to be used


9215
25304.44 --> 5.16
mutation and it's actually not going to


9216
25307.638 --> 3.642
extract anything from the first argument


9217
25309.6 --> 4.358
it's just going to work with the event


9218
25311.28 --> 2.678
here


9219
25314.04 --> 4.48
and let's go ahead and add an empty


9220
25315.958 --> 4.642
array inside for now later it's going to


9221
25318.52 --> 5.198
be


9222
25320.6 --> 6.798
filled and then what we are going to do


9223
25323.718 --> 6.042
is write coin const point to be uh


9224
25327.398 --> 4.56
pointer event to Canvas so we're going


9225
25329.76 --> 4.48
to reuse that method and pass in our


9226
25331.958 --> 5.482
event and the camera so we know exactly


9227
25334.24 --> 8.478
where to insert something and then we're


9228
25337.44 --> 9.08
going to write if canvas state do mode


9229
25342.718 --> 6.122
is equal to Canvas mode do


9230
25346.52 --> 6.358
inserting we're going to call insert


9231
25348.84 --> 9.16
layer and passing canvas state. layer


9232
25352.878 --> 8.402
type and the point like that else we're


9233
25358 --> 5.76
going to call set canvas State and we're


9234
25361.28 --> 5.76
going to pass in the mode to be canvas


9235
25363.76 --> 5
mode. none and let's see if there is


9236
25367.04 --> 5.678
something we can already pass inside of


9237
25368.76 --> 5.36
this dependency array so how about


9238
25372.718 --> 5.122
we pass


9239
25374.12 --> 5.88
in the camera and the canvas State


9240
25377.84 --> 6.36
because I think we rely on them we rely


9241
25380 --> 7.12
on canvas and we rely on canvas State


9242
25384.2 --> 5.518
great and let's also do uh one more


9243
25387.12 --> 5.4
thing so after this if Clause finishes


9244
25389.718 --> 6.722
let's add history. resume


9245
25392.52 --> 7.56
here and let's also add history


9246
25396.44 --> 6.438
itself in here and also insert layer


9247
25400.08 --> 4.84
because that also uses use mutation


9248
25402.878 --> 4.162
perfect and now let's revisit our insert


9249
25404.92 --> 5.038
layer here just to see if there's


9250
25407.04 --> 5.88
something uh we could


9251
25409.958 --> 5.482
add inside of this dependency array so


9252
25412.92 --> 4.558
insert layer or did we already add


9253
25415.44 --> 4.08
something insert layer has last used


9254
25417.478 --> 4.48
color and yeah that's actually the only


9255
25419.52 --> 5.358
thing we rely on here because everything


9256
25421.958 --> 5.322
else we fetch inside of this method uh


9257
25424.878 --> 6.042
great and now what we have to do is we


9258
25427.28 --> 5.04
have to add that on pointer up method to


9259
25430.92 --> 5.558
our SVG


9260
25432.32 --> 10.44
so let's go ahead here to our


9261
25436.478 --> 9.602
SVG and add on pointer up on pointer up


9262
25442.76 --> 6.52
like this so the best way to try this


9263
25446.08 --> 6.798
out is by console logging so I'm going


9264
25449.28 --> 6.198
to go ahead and console log our point


9265
25452.878 --> 4.122
and our mode which is going to be canvas


9266
25455.478 --> 6.24
state.


9267
25457 --> 8.28
mode and let's also add layer type kind


9268
25461.718 --> 5.442
canvas State layer do we have canvas


9269
25465.28 --> 5.4
State oh we only have mode okay let's


9270
25467.16 --> 5.76
leave it like this so let's try it out


9271
25470.68 --> 6.278
I'm going to go ahead and open my


9272
25472.92 --> 7.038
terminal here I will select a rectangle


9273
25476.958 --> 7.52
and there we go when I click I have a


9274
25479.958 --> 8.082
Mode 4 and I have a point right here


9275
25484.478 --> 5.362
perfect so mode four is an enum which I


9276
25488.04 --> 4.24
believe represents that something is


9277
25489.84 --> 5.958
being inserted and I don't know if you


9278
25492.28 --> 6.678
noticed but once I clicked on something


9279
25495.798 --> 5.122
so once I uh pressed something let me


9280
25498.958 --> 4.482
just wait for this to load right now my


9281
25500.92 --> 5.92
undo and redo are disabled but once I


9282
25503.44 --> 6.24
press you can see that I now have undo


9283
25506.84 --> 7.038
because I finally have my history and I


9284
25509.68 --> 7.44
can undo and redo great so something


9285
25513.878 --> 5.482
obviously exists inside of here but it's


9286
25517.12 --> 4.56
not currently visible so we did a good


9287
25519.36 --> 5.16
job with our insert layer and with our


9288
25521.68 --> 5.48
our on pointer up but now what we have


9289
25524.52 --> 4.84
to do to check whether this point is


9290
25527.16 --> 4.478
actually correct where we inserted that


9291
25529.36 --> 5.56
whether our camera translation is


9292
25531.638 --> 6.32
working we have to add an iteration over


9293
25534.92 --> 5.558
our layer IDs so let's go just above the


9294
25537.958 --> 6.362
cursor presence inside of the G element


9295
25540.478 --> 6.722
and go over our layer IDs map let's get


9296
25544.32 --> 6.28
individual layer ID and we're going to


9297
25547.2 --> 4.92
render layer preview


9298
25550.6 --> 4.92
component


9299
25552.12 --> 6.278
let's pass in the key to be layer ID


9300
25555.52 --> 8.52
let's pass in the ID to be layer


9301
25558.398 --> 7.682
ID and on layer pointer down to be uh


9302
25564.04 --> 4.96
well for now just an empty Arrow


9303
25566.08 --> 6.2
function and selection


9304
25569 --> 7
color for now let's


9305
25572.28 --> 6.16
Also let's make this empty for now as


9306
25576 --> 4.24
well and now let's go inside of this


9307
25578.44 --> 4.6
underscore components and create a new


9308
25580.24 --> 5.76
file layer preview


9309
25583.04 --> 4.88
vsx let's import use client sorry let's


9310
25586 --> 4.32
mark this as use client and let's export


9311
25587.92 --> 5.6
con layer preview


9312
25590.32 --> 5.8
here and let's return a


9313
25593.52 --> 5.8
div so it really doesn't matter we just


9314
25596.12 --> 6.88
want to fix the import error and then we


9315
25599.32 --> 6.72
can import that from SL layer preview


9316
25603 --> 5.558
like this let's go back here let's go


9317
25606.04 --> 5.678
back inside of layer preview now and


9318
25608.558 --> 6.24
let's add this props here so interface


9319
25611.718 --> 6.442
layer preview props is going to have an


9320
25614.798 --> 9.202
ID of string it's going to have on layer


9321
25618.16 --> 9.44
Point down an event of react. pointer


9322
25624 --> 7.04
event and layer ID which is a string and


9323
25627.6 --> 7.44
it's going to call a void and selection


9324
25631.04 --> 6.438
color is simply going to be a


9325
25635.04 --> 7.518
string like that and then you can


9326
25637.478 --> 10.4
extract all of those layer preview props


9327
25642.558 --> 8.442
ID on layer pointer down and selection


9328
25647.878 --> 6.482
color so let's explain this props a


9329
25651 --> 4.92
little bit so selection color we're


9330
25654.36 --> 3
going to generate that in a moment


9331
25655.92 --> 4.038
basically what selection color is going


9332
25657.36 --> 5.8
to be is it's going to be an indicator


9333
25659.958 --> 5.242
that when another user has clicked on a


9334
25663.16 --> 4.6
rectangle for example we're going to


9335
25665.2 --> 5.758
make sure that all other users can see


9336
25667.76 --> 5.68
an indicator that someone else is moving


9337
25670.958 --> 5.84
or ADD in that object and that color is


9338
25673.44 --> 5.64
going to be matching their color ID so


9339
25676.798 --> 7.962
just for now I'm going to make this an


9340
25679.08 --> 9.478
hex code of uh black right so just three


9341
25684.76 --> 6.08
zeros like this and on pointer down well


9342
25688.558 --> 4.16
for now we don't really have to resolve


9343
25690.84 --> 5.92
that immediately we can also just make


9344
25692.718 --> 7.282
this completely empty and add to do fix


9345
25696.76 --> 5.44
types let's see if that on layer pointer


9346
25700 --> 4.32
down still doesn't do it


9347
25702.2 --> 7.72
oh my apologies maybe I didn't have to


9348
25704.32 --> 5.6
move the types uh so on layer pointer


9349
25711.44 --> 7.32
down there we go that seems to uh


9350
25715.44 --> 5.56
resolve the issue great and


9351
25718.76 --> 4.44
now we can just leave this like this


9352
25721 --> 4.6
let's go inside of layer preview props


9353
25723.2 --> 4.72
and let's import use memo sorry let's


9354
25725.6 --> 5
import Memo from react so we can


9355
25727.92 --> 5.798
memorize this as well so we're going to


9356
25730.6 --> 5.56
wrap this entire starting in a memo like


9357
25733.718 --> 7.322
this and then we need to add layer


9358
25736.16 --> 4.88
preview display name to be layer


9359
25742.04 --> 6
preview and then let's go ahead and


9360
25745.478 --> 5.16
let's find out what layer we are


9361
25748.04 --> 4.918
currently iterating over so for that


9362
25750.638 --> 3.84
we're going to use use storage so con


9363
25752.958 --> 5.52
layer is use


9364
25754.478 --> 6.362
storage from our live blocks


9365
25758.478 --> 3.642
config so we're going to call use


9366
25760.84 --> 3.44
storage


9367
25762.12 --> 6.438
specifically we're going to get root and


9368
25764.28 --> 7.438
then root layers get not layer IDs


9369
25768.558 --> 5.762
layers. getet and then the ID of that


9370
25771.718 --> 5.802
layer and if we cannot find that layer


9371
25774.32 --> 5.2
in our storage we simply w't going to


9372
25777.52 --> 3.878
aren going to render this layer preview


9373
25779.52 --> 3.92
there's nothing we can do here and


9374
25781.398 --> 4.48
here's the cool part now the way we're


9375
25783.44 --> 5.76
going to uh reuse this layer preview


9376
25785.878 --> 6
component for all of our types for text


9377
25789.2 --> 5.56
for sticky notes for rect


9378
25791.878 --> 5.52
for all of those things we are simply


9379
25794.76 --> 8.32
going to do a switch statement over the


9380
25797.398 --> 8.802
layer type so let's write switch layer.


9381
25803.08 --> 8.84
type and for now let's just write a case


9382
25806.2 --> 9.278
for layer type. rectangle and we need to


9383
25811.92 --> 5.958
import layer type from types canvas so


9384
25815.478 --> 5.202
just make sure you add layer type here


9385
25817.878 --> 5.442
so if layer type is rectangle we're


9386
25820.68 --> 7.198
going to go ahead head and simply return


9387
25823.32 --> 9.638
for now let's just say a div


9388
25827.878 --> 5.08
rectangle and then let's add a


9389
25833.638 --> 4.362
default we're going to add a console


9390
25835.92 --> 5
warn


9391
25838 --> 6.32
unnown layer type so in case that


9392
25840.92 --> 6.038
happens you are going to know and return


9393
25844.32 --> 5.84
now like that and that's how we are


9394
25846.958 --> 5.92
dynamically going to decide what we are


9395
25850.16 --> 6.08
rendering so now we have to actually


9396
25852.878 --> 5.242
create this rectangle uh object so let's


9397
25856.24 --> 3.238
go inside of underscore components and


9398
25858.12 --> 3
create


9399
25859.478 --> 3.762
rectangle.


9400
25861.12 --> 4.48
DSX if you want you can give this


9401
25863.24 --> 6.2
components some kind of prefix like


9402
25865.6 --> 6.84
rectangle layer or layer rectangle and


9403
25869.44 --> 6.76
in here let's create an interface


9404
25872.44 --> 6.24
rectangle props to accept an ID which is


9405
25876.2 --> 3.678
a string a layer which is going to be a


9406
25878.68 --> 6.68
rectangle


9407
25879.878 --> 7.76
layer from types canvas on pointer down


9408
25885.36 --> 7.038
which is going to have an event of react


9409
25887.638 --> 8.562
pointer event and ID which is a string


9410
25892.398 --> 6.56
and then a void and selection color


9411
25896.2 --> 5.438
which is going to be an optional


9412
25898.958 --> 5.562
string and then let's go ahead and do


9413
25901.638 --> 6.402
export const


9414
25904.52 --> 7.72
rectangle and let's assign this props


9415
25908.04 --> 6.72
right here so rectangle prop props we


9416
25912.24 --> 6.92
can then extract them and I think I have


9417
25914.76 --> 8.198
a typo here so rectangle props ID layer


9418
25919.16 --> 6
on pointer down and selection color and


9419
25922.958 --> 5.242
very simply what we're going to do is


9420
25925.16 --> 6.28
we're going to extract from layer the


9421
25928.2 --> 6.598
following x coordinate y coordinate


9422
25931.44 --> 5.16
width height and fill and we know we're


9423
25934.798 --> 4
going to have those because of the


9424
25936.6 --> 4.278
rectangle layer type schema so we know


9425
25938.798 --> 5.92
that if type layer is rectangle we have


9426
25940.878 --> 5.52
the the x y height width and fill I also


9427
25944.718 --> 3.562
added the value because I know is going


9428
25946.398 --> 4.16
to mess with us later but we're not


9429
25948.28 --> 4.4
going to use value for the rectangle and


9430
25950.558 --> 5.92
then we're going to return a


9431
25952.68 --> 5.84
rect which is a self closing tag and in


9432
25956.478 --> 5.882
here we're going to give this a class


9433
25958.52 --> 7.118
name of drop shadow MD we're going to


9434
25962.36 --> 6.278
give it an on pointer


9435
25965.638 --> 7.122
down to be


9436
25968.638 --> 7.682
event on pointer down and pass in the


9437
25972.76 --> 8.84
event and ID


9438
25976.32 --> 11.28
style is going to be transform open btic


9439
25981.6 --> 7.798
Translate passing X in pixels comma y


9440
25987.6 --> 4.72
coordinate in


9441
25989.398 --> 7.882
pixels we are manually going to set X to


9442
25992.32 --> 8.28
be zero here and Y to be zero here width


9443
25997.28 --> 4.438
is going to be width height is going to


9444
26000.6 --> 3.798
be height


9445
26001.718 --> 6.442
these are by default 100 if you remember


9446
26004.398 --> 8.282
from our insert layer method stroke


9447
26008.16 --> 7.12
width is going to be one bill is going


9448
26012.68 --> 7.118
to be let's go ahead and manually just


9449
26015.28 --> 9.84
add black for now and let's go ahead and


9450
26019.798 --> 9.242
give this a stroke of transparent for


9451
26025.12 --> 6.08
now great so let's go ahead and see if


9452
26029.04 --> 4.88
it's possible to maybe see the this


9453
26031.2 --> 5.12
already or if we are missing something


9454
26033.92 --> 4.92
so if I add a rectangle and click it


9455
26036.32 --> 4.8
looks like nothing is appearing so let's


9456
26038.84 --> 4.118
go ahead and debug a little bit first


9457
26041.12 --> 6.678
thing that I'm interested in is whether


9458
26042.958 --> 6.76
this rectangle ever loads so let's add


9459
26047.798 --> 4.962
let's log ID and


9460
26049.718 --> 6.402
layer will this ever log


9461
26052.76 --> 5.76
here let's go ahead and click here looks


9462
26056.12 --> 5.438
like this is never


9463
26058.52 --> 4.278
loading so now what I want to do do is


9464
26061.558 --> 5.522
check


9465
26062.798 --> 7.442
inside of my layer preview here so I


9466
26067.08 --> 6.6
have a layer so let's console


9467
26070.24 --> 6.44
log layer and let me just add a little


9468
26073.68 --> 7.278
comma layer


9469
26076.68 --> 7.118
preview so I know where this is coming


9470
26080.958 --> 4.76
from okay so it looks like I do have an


9471
26083.798 --> 3.84
object here I do have a


9472
26085.718 --> 5.482
layer right


9473
26087.638 --> 6.802
here and then it looks like it it


9474
26091.2 --> 6
doesn't have the oh well because I never


9475
26094.44 --> 4.88
rendered the rectangle I apologize for


9476
26097.2 --> 5.16
that so let's actually render the


9477
26099.32 --> 5.078
rectangle inside of here and we also


9478
26102.36 --> 4.72
have to pass in uh all of the props I


9479
26104.398 --> 3.722
completely forgot my apologies so let's


9480
26107.08 --> 3.798
render


9481
26108.12 --> 5.88
rectangle from do/ rectangle which we've


9482
26110.878 --> 5.6
just created let's pass in the ID let's


9483
26114 --> 4.92
pass in the layer let's pass in on


9484
26116.478 --> 5.48
pointer down to be on


9485
26118.92 --> 7
pointer do we have on pointer down ahuh


9486
26121.958 --> 6.92
on layer pointer down and selection


9487
26125.92 --> 6.6
color selection


9488
26128.878 --> 5.08
color and there we go once I did that so


9489
26132.52 --> 2.8
just make sure you imported rectangle


9490
26133.958 --> 3.92
from do/


9491
26135.32 --> 6.28
rectangle and let me remove my console


9492
26137.878 --> 6.442
logs which I luckily don't need


9493
26141.6 --> 4.56
anymore let's try this out now there we


9494
26144.32 --> 4.078
go you can see that when I click here


9495
26146.16 --> 4.68
and I select here this is where my


9496
26148.398 --> 4.962
rectangle appears and if I click undo it


9497
26150.84 --> 4.638
disappears and let's try with my camera


9498
26153.36 --> 4.598
as you can see I can move my camera up


9499
26155.478 --> 5.4
and down I can completely hide this if I


9500
26157.958 --> 5.882
want to so everything seems to be


9501
26160.878 --> 5.08
working just fine what I'm interested in


9502
26163.84 --> 3.92
is whether a another user can add their


9503
26165.958 --> 4.562
own rectangle so this what you're seeing


9504
26167.76 --> 5.76
is another user my other browser and


9505
26170.52 --> 6.56
there we go in real time you can see


9506
26173.52 --> 7.358
them adding their very own rectangles


9507
26177.08 --> 7.798
perfect so this is now working so what


9508
26180.878 --> 5.242
we have to do now is we have to uh


9509
26184.878 --> 5
create the


9510
26186.12 --> 6.518
functionality to move these elements to


9511
26189.878 --> 6.362
select these elements to transform and


9512
26192.638 --> 4.962
resize these elements and also to change


9513
26196.24 --> 3.76
their


9514
26197.6 --> 5.52
colors so I'm going to leave it this


9515
26200 --> 5.638
chapter like this for now uh and let's


9516
26203.12 --> 4.64
just quickly recap exactly what's going


9517
26205.638 --> 6.442
on because it can be a little bit


9518
26207.76 --> 6.638
confusing so inside of our app folder


9519
26212.08 --> 5.12
board board ID components we have the


9520
26214.398 --> 6.202
canvas let's go step by step and see


9521
26217.2 --> 7.72
what happens so we have an onp pointer


9522
26220.6 --> 7.08
up event which is added to the SVG


9523
26224.92 --> 5.28
element which takes up 100% of our


9524
26227.68 --> 4.798
screen so when we click somewhere in the


9525
26230.2 --> 5.84
screen what happens is that on pointer


9526
26232.478 --> 7.282
up event is triggered in here we check


9527
26236.04 --> 7.438
if we have a canvas state of inserting


9528
26239.76 --> 6.32
if we do we insert the layer so that's


9529
26243.478 --> 5.202
this action when I select a rectangle I


9530
26246.08 --> 5.76
have changed my canvas State because if


9531
26248.68 --> 5.36
you remember in my toolbar when I select


9532
26251.84 --> 5.718
my rectangle let's find


9533
26254.04 --> 6.56
it there we go I do I call set convas


9534
26257.558 --> 5.362
State and I change the mode to inserting


9535
26260.6 --> 4.878
uh sorry this is sticky note right here


9536
26262.92 --> 5.28
rectangle I Chang the mode to inserting


9537
26265.478 --> 5.722
and the layer type to rectangle and then


9538
26268.2 --> 5.518
when the pointer up event fires again


9539
26271.2 --> 5.758
it goes through this if check because


9540
26273.718 --> 6
conas State mode is inserting so I pass


9541
26276.958 --> 5.962
in the layer type and the point where


9542
26279.718 --> 5.322
the user moved their Mouse up so where


9543
26282.92 --> 4.68
where they stopped pressing and then the


9544
26285.04 --> 4.96
insert layer has that information it has


9545
26287.6 --> 4.64
the layer type and it has the position


9546
26290 --> 3.878
it also has the storage and my presence


9547
26292.24 --> 5.28
because of the use mutation which we are


9548
26293.878 --> 5.08
using from live blocks so let me f


9549
26297.52 --> 4.4
insert


9550
26298.958 --> 4.44
later okay and then what we do is we


9551
26301.92 --> 3.6
confirm that we haven't reached the


9552
26303.398 --> 4.682
maximum level level of our layers which


9553
26305.52 --> 6.64
is just a constant 100 so make sure you


9554
26308.08 --> 6.878
have this defined to and then we go


9555
26312.16 --> 5.96
ahead and generate a new layer using


9556
26314.958 --> 5
Nano ID just to get a random ID and then


9557
26318.12 --> 4.8
we use all the information about our


9558
26319.958 --> 5.162
current pointer like position and X and


9559
26322.92 --> 4.478
Y coordinates we add some default height


9560
26325.12 --> 7.04
and width we use the last used color


9561
26327.398 --> 7.24
which is just an empty uh state of RGB Z


9562
26332.16 --> 5.638
representing the color black and then we


9563
26334.638 --> 5.76
push that two layer IDs and two live


9564
26337.798 --> 5.362
layers which are all controlled by live


9565
26340.398 --> 4.682
blocks and then we update the presence


9566
26343.16 --> 4.638
we add it to history so then


9567
26345.08 --> 5.798
automatically those hooks uh use can


9568
26347.798 --> 4.882
undo use can redo and use history are


9569
26350.878 --> 4.162
automatically functional now which you


9570
26352.68 --> 5.198
just saw if I click undo here this one


9571
26355.04 --> 6.16
goes away so that works if I click redo


9572
26357.878 --> 5.562
it goes back and we reset the con State


9573
26361.2 --> 4.72
back to the select so after I click


9574
26363.44 --> 5.48
rectangle it goes back to select and now


9575
26365.92 --> 4.92
we're going to go ahead and just wrap up


9576
26368.92 --> 4.24
some other functionalities like clicking


9577
26370.84 --> 5.36
on this resizing this and collecting a


9578
26373.16 --> 4.44
selection net and then it's quite easy


9579
26376.2 --> 3.24
from there because we're going to have a


9580
26377.6 --> 4.358
bunch of features already and we're just


9581
26379.44 --> 4.958
going to have to modify different things


9582
26381.958 --> 5.52
inside of this layer preview component


9583
26384.398 --> 4.922
so if switch case goes to layer ellipse


9584
26387.478 --> 4.16
we're going to render ellipse sticky


9585
26389.32 --> 6.078
note we render the sticky note path we


9586
26391.638 --> 5.722
render the path so great great job uh


9587
26395.398 --> 3.602
you are really doing great this is a


9588
26397.36 --> 4.08
really hard project I've had a really


9589
26399 --> 4.84
hard time just grasping the concept of


9590
26401.44 --> 4.72
the live board so if you've got up to


9591
26403.84 --> 4.038
this point with or without errors great


9592
26406.16 --> 5.318
great


9593
26407.878 --> 6.08
job so now let's add an ability to


9594
26411.478 --> 6.24
select one of the elements which we are


9595
26413.958 --> 6.402
able now to add to our canvas and once


9596
26417.718 --> 5.042
we are able to select an element later


9597
26420.36 --> 5.08
we will be able to transform them around


9598
26422.76 --> 5.038
to resize them and also to change their


9599
26425.44 --> 5.4
color for example or completely remove


9600
26427.798 --> 6.802
it or change the depth of the layer it's


9601
26430.84 --> 7.28
in so first thing that I want to do is I


9602
26434.6 --> 6.6
want to go back inside of my app board


9603
26438.12 --> 4.8
board ID components canvas and in here


9604
26441.2 --> 5.12
we have a couple of things left


9605
26442.92 --> 5.32
unfinished so we manually hardcode the


9606
26446.32 --> 4
selection color and we don't pass


9607
26448.24 --> 4.28
anything from the for the on layer point


9608
26450.32 --> 5.078
pointer down so the first thing I want


9609
26452.52 --> 4.56
to resolve is the selection color issue


9610
26455.398 --> 4.802
so I'm going to go outside of the return


9611
26457.08 --> 6.318
function here and in here I'm going to


9612
26460.2 --> 5.4
generate a method to get that selection


9613
26463.398 --> 4.882
color depending on which user is


9614
26465.6 --> 4.56
currently uh selecting that element so


9615
26468.28 --> 3.92
we know if someone else is editing that


9616
26470.16 --> 5.84
element so for that we're going to get


9617
26472.2 --> 8.04
the selections of from our uh from other


9618
26476 --> 7.04
users presence we can use use others map


9619
26480.24 --> 5.478
from at live blocks so that Global


9620
26483.04 --> 6.72
import file that we have we can then


9621
26485.718 --> 8.562
extract the other user and we can use


9622
26489.76 --> 6.118
other. presence do selection so how do


9623
26494.28 --> 4.64
we have selection there we have


9624
26495.878 --> 5.6
selection because in the presence type


9625
26498.92 --> 4.32
alongside our cursor we prepared the


9626
26501.478 --> 3.962
selection so every user will have their


9627
26503.24 --> 5.318
own selection so that way we can keep


9628
26505.44 --> 7.118
track of who is selecting what and now


9629
26508.558 --> 6.362
we're going to write const layer IDs to


9630
26512.558 --> 5.282
color selection and that's going to be


9631
26514.92 --> 5.878
memoized so let's add use memo here so


9632
26517.84 --> 5.878
import this from


9633
26520.798 --> 5.242
react in this use memo we're going to go


9634
26523.718 --> 4.08
ahead and in the dependency array for


9635
26526.04 --> 4.12
now just add these selections because


9636
26527.798 --> 5.92
we're going to work with them and in


9637
26530.16 --> 7.6
here add const layer IDs to color


9638
26533.718 --> 6.68
selection again is going to be a record


9639
26537.76 --> 5.16
with string inside and let's get give it


9640
26540.398 --> 8.602
a default value of an empty


9641
26542.92 --> 6.08
string and let's do for const user of


9642
26549.28 --> 9.198
selections let's extract from the


9643
26552.958 --> 5.52
user connection ID and the


9644
26558.6 --> 9.958
selection and then for const layer ID of


9645
26565.92 --> 5.798
selection we're going to go ahead and


9646
26568.558 --> 5.962
create a map using this layer IDs to


9647
26571.718 --> 7.642
color selection here we're going to


9648
26574.52 --> 8.56
attach a layer ID to our method


9649
26579.36 --> 5.48
connection ID to color from lib utils so


9650
26583.08 --> 4.718
make sure you've imported connection ID


9651
26584.84 --> 5.32
to color from our lib utils let me just


9652
26587.798 --> 5.482
collapse those


9653
26590.16 --> 6.798
two and in this layer ID we're simply


9654
26593.28 --> 7.358
going to pass in our connection ID for


9655
26596.958 --> 6.122
that user like that and I think I I


9656
26600.638 --> 6.08
accidentally removed something here yes


9657
26603.08 --> 5.718
my apologies so I just somehow removed


9658
26606.718 --> 3.68
this end Clause here don't know how


9659
26608.798 --> 4
basically make sure you have connection


9660
26610.398 --> 5
ID to color imported and then passing


9661
26612.798 --> 4.84
the connection ID from that user there


9662
26615.398 --> 6.282
we go so this is all supposed to be in


9663
26617.638 --> 7
one line let me just confirm that like


9664
26621.68 --> 7.44
this uh and then what we are going to do


9665
26624.638 --> 6.84
is just return this object uh layer IDs


9666
26629.12 --> 4.598
to color selection


9667
26631.478 --> 5.08
like this there we


9668
26633.718 --> 5.122
go so make sure that you have layer this


9669
26636.558 --> 5.202
to color selection object here we


9670
26638.84 --> 5.038
iterate over our other users selections


9671
26641.76 --> 3.878
we de structure their connection IDs and


9672
26643.878 --> 3.68
their current selection we look at the


9673
26645.638 --> 4.92
layers they are selecting because we're


9674
26647.558 --> 5.042
going to be able to do a uh map or a net


9675
26650.558 --> 4.84
of multiple selections and then we match


9676
26652.6 --> 5.718
their connection ID and create a color


9677
26655.398 --> 4.4
matching to their cursor and also uh in


9678
26658.318 --> 3.56
this presence bar above so you're going


9679
26659.798 --> 4.962
to exactly know which user is currently


9680
26661.878 --> 5.202
selecting those elements and now we can


9681
26664.76 --> 6.28
use these layer IDs to color


9682
26667.08 --> 7.2
selection down here in the selection uh


9683
26671.04 --> 6
color prop so all we can do now is


9684
26674.28 --> 6.56
simply pass in layer IDs to color


9685
26677.04 --> 7.96
selection and passing the layer ID like


9686
26680.84 --> 7.92
this uh great so now what I want to do


9687
26685 --> 5.68
is I want to go uh back inside of my


9688
26688.76 --> 3.718
rectangle here


9689
26690.68 --> 3.118
so let's actually keep track of this


9690
26692.478 --> 3.562
selection color to see if we are


9691
26693.798 --> 4.482
hardcoding it anywhere else so inside of


9692
26696.04 --> 5.08
layer preview here let's take a look we


9693
26698.28 --> 4.32
have selection color we have it here and


9694
26701.12 --> 3.678
we pass it to the rectangle so that


9695
26702.6 --> 5.24
seems to be all right but in the


9696
26704.798 --> 5.722
rectangle we don't actually use that and


9697
26707.84 --> 5.558
we also don't use a fill as well so for


9698
26710.52 --> 4.56
the selection color what we can do we're


9699
26713.398 --> 3.042
only going to use it for the stroke so


9700
26715.08 --> 3.44
it's not going to change the color of


9701
26716.44 --> 3.6
the object only the outline to indicate


9702
26718.52 --> 2.958
that something is going on so so we're


9703
26720.04 --> 4.48
going to turn this into either a


9704
26721.478 --> 6.362
selection color or


9705
26724.52 --> 5.32
transparent like this uh naturally this


9706
26727.84 --> 4.118
is now not going to work so I have my


9707
26729.84 --> 3.68
other browser open Let me refresh so


9708
26731.958 --> 4
you're going to see another user pop up


9709
26733.52 --> 4.64
here now in a second let's just wait for


9710
26735.958 --> 4.402
this to load there we go I am selecting


9711
26738.16 --> 4.558
this but nothing is happening that's


9712
26740.36 --> 4.038
because we haven't implemented a method


9713
26742.718 --> 4.522
that when we click on something we


9714
26744.398 --> 5
actually add to our selection presence


9715
26747.24 --> 4.28
so we have a map to iterate our other


9716
26749.398 --> 4.962
user ctions but we are yet to implement


9717
26751.52 --> 5.76
the actual functionality for that uh


9718
26754.36 --> 4.88
great and here's another thing that we


9719
26757.28 --> 4.56
have hardcoded here before we can move


9720
26759.24 --> 4.68
on and that's this fill which currently


9721
26761.84 --> 4.038
is hardcoded to color black which is


9722
26763.92 --> 4.398
technically correct because inside of


9723
26765.878 --> 5.92
our canvas we do


9724
26768.318 --> 7.442
have uh where is it last used color to


9725
26771.798 --> 6.52
be RGB uh black but let's actually use


9726
26775.76 --> 5.118
that fill property which is the type of


9727
26778.318 --> 5.122
color which is basically RG GB object


9728
26780.878 --> 5.44
and let's go ahead and create a util uh


9729
26783.44 --> 5.08
which is going to be called CSS uh color


9730
26786.318 --> 5.64
to


9731
26788.52 --> 6.76
CSS that method will help us transform


9732
26791.958 --> 6.642
from an RGB into a hex code so let's go


9733
26795.28 --> 6.198
inside of lib utils here so if you want


9734
26798.6 --> 4.798
you can write it along with me uh or you


9735
26801.478 --> 4.84
can always visit my GitHub and go


9736
26803.398 --> 4.32
directly inside of lib utils right here


9737
26806.318 --> 3.202
and you can do that every time we are


9738
26807.718 --> 3.882
here in the utils so this is what we


9739
26809.52 --> 3.68
have right now this export function


9740
26811.6 --> 4.84
color to


9741
26813.2 --> 6.358
CSS uh so let's go ahead and build


9742
26816.44 --> 6.8
this so in here let's go ahead and


9743
26819.558 --> 6.442
Export function color to CSS so this


9744
26823.24 --> 5.92
method will accept the color property


9745
26826 --> 5.84
which is a type of color from our types


9746
26829.16 --> 4.44
canvas and you can already see that this


9747
26831.84 --> 3.958
is an RGB so basically we're going to


9748
26833.6 --> 5.64
use these three values to generate a hex


9749
26835.798 --> 6
code out of this so let's go ahead and


9750
26839.24 --> 4.76
let's r return a string beginning with a


9751
26841.798 --> 5.6
hashtag because hex Codes start with a


9752
26844 --> 5.36
hashtag we're going to use color. R


9753
26847.398 --> 4.16
because that's the first one we're going


9754
26849.36 --> 7.598
to use two


9755
26851.558 --> 9.4
string 16 like that pad start


9756
26856.958 --> 6.44
to zero like that then we're going to


9757
26860.958 --> 9.722
immediately add the second which is


9758
26863.398 --> 11.08
color. g to string 16 do pad star start


9759
26870.68 --> 6.16
to and zero again and then we're going


9760
26874.478 --> 6.202
to go and do the last one which is


9761
26876.84 --> 9.92
color. B two string


9762
26880.68 --> 7.798
16 P start two and zero like that and


9763
26886.76 --> 5.4
then uh well that is it because we're


9764
26888.478 --> 6.442
immediately returning that right uh


9765
26892.16 --> 4.798
perfect so you can probably understand


9766
26894.92 --> 5.32
how it works basically we're using the


9767
26896.958 --> 5.962
radics in the two string on uh hex


9768
26900.24 --> 7.8
hexad decimal value so it's going to


9769
26902.92 --> 8.28
revert value like 255 or 255 to which


9770
26908.04 --> 6.08
would technically be ZX FF which


9771
26911.2 --> 4.96
converts to FF right you can also like


9772
26914.12 --> 3.92
do an mpm package for this if you want


9773
26916.16 --> 3.88
to right or you can just copy it from my


9774
26918.04 --> 4.24
utils it really doesn't matter you just


9775
26920.04 --> 6.2
need to find a way to transfer an object


9776
26922.28 --> 7.358
of RGB to a hex code uh great so now


9777
26926.24 --> 6.238
that we have this we can go back inside


9778
26929.638 --> 7.802
of our rectangle


9779
26932.478 --> 8.042
component app board board ID components


9780
26937.44 --> 5.68
rectangle and now we can go ahead and


9781
26940.52 --> 4.64
use that right here so let's go ahead


9782
26943.12 --> 4.198
and check if we have the fill color


9783
26945.16 --> 5.44
we're going to use color to CSS from


9784
26947.318 --> 5.362
liues and pass in the fill color or


9785
26950.6 --> 5.24
we're going to use a


9786
26952.68 --> 5
default gray color like this or you can


9787
26955.84 --> 4.2
use the default black color whatever you


9788
26957.68 --> 5.32
want it to be in case for any reason you


9789
26960.04 --> 4.88
don't pass the fill or it somehow fails


9790
26963 --> 4.68
uh there we go so now you can see


9791
26964.92 --> 5.28
nothing really is changing but what


9792
26967.68 --> 6.44
should happen now is that if you go


9793
26970.2 --> 6.758
ahead inside of your


9794
26974.12 --> 4.64
board canvas and change the last used


9795
26976.958 --> 4.52
color to


9796
26978.76 --> 4.92
something different I don't even know


9797
26981.478 --> 4.682
these values specifically but if I


9798
26983.68 --> 4.16
choose a rectangle now and press it it


9799
26986.16 --> 4.798
should have a different color but it


9800
26987.84 --> 5.558
seems like it's not so let's go ahead


9801
26990.958 --> 5.642
and debug whether we are actually


9802
26993.398 --> 5.842
passing this yes it seems to still be


9803
26996.6 --> 5.4
generating plain black what if I change


9804
26999.24 --> 5.398
everything to 255 this should be white


9805
27002 --> 4.958
oh it looks like I just don't know RGB


9806
27004.638 --> 6.442
there we go it's working uh so just try


9807
27006.958 --> 6.44
it with 255 and uh completely black


9808
27011.08 --> 4.84
perfect so I'm going to bring this black


9809
27013.398 --> 4.882
uh Back to Black and now if I try all of


9810
27015.92 --> 5.398
them are black perfect so we are now no


9811
27018.28 --> 5.278
longer hard coding those colors and now


9812
27021.318 --> 5.442
uh we are ready to actually create a


9813
27023.558 --> 6
function which we had have right here on


9814
27026.76 --> 5.4
layer pointer


9815
27029.558 --> 5.282
down so this is the method that I was


9816
27032.16 --> 5
talking about so right now in my other


9817
27034.84 --> 4.4
browser here if I press on this nothing


9818
27037.16 --> 4.478
happens because there is nothing


9819
27039.24 --> 3.84
happening on layer pointer down so we


9820
27041.638 --> 4.362
have to create that method so that we


9821
27043.08 --> 6.398
can actually store uh selection in other


9822
27046 --> 5.84
users and our presence so let's create


9823
27049.478 --> 5.762
on layer pointer down I'm going to do


9824
27051.84 --> 7.08
that just below our or let's do it above


9825
27055.24 --> 6.318
layer Idis color selection here so const


9826
27058.92 --> 6.038
on layer pointer down is going to be use


9827
27061.558 --> 7.92
mutation and in here let's go ahead and


9828
27064.958 --> 6.52
the structure self and set my


9829
27069.478 --> 4
presence let me just immediately go


9830
27071.478 --> 4.202
ahead and return this object just so we


9831
27073.478 --> 4.362
don't have any type errors here so self


9832
27075.68 --> 3.68
and set my presence and the second


9833
27077.84 --> 4.478
argument is going to be event which


9834
27079.36 --> 5.198
which is react. pointer event and the


9835
27082.318 --> 3.362
third argument is going to be layer ID


9836
27084.558 --> 3.282
which is a


9837
27085.68 --> 5.52
string and now what we're going to do is


9838
27087.84 --> 6.2
we're going to check if canvas State


9839
27091.2 --> 8.92
mode is canvas


9840
27094.04 --> 8.96
mode. pencil or if convas State mode is


9841
27100.12 --> 5
canvas mode inserting so if it's any of


9842
27103 --> 3.798
those two we're going to break this


9843
27105.12 --> 3.64
function because it means that we are


9844
27106.798 --> 4.242
currently inserting something so no


9845
27108.76 --> 4.638
point in trying to select a layer or we


9846
27111.04 --> 4.96
are drawing something with the pencil so


9847
27113.398 --> 4.4
only if we have our freehand selected


9848
27116 --> 3.958
here that means that we are selecting


9849
27117.798 --> 5.08
something if we are inserting something


9850
27119.958 --> 5.802
which is text sticky note rectangle or


9851
27122.878 --> 4.562
ellipse then this method will not fire


9852
27125.76 --> 5.198
and if we are using the pencil which is


9853
27127.44 --> 6.48
the separate mode for itself great so if


9854
27130.958 --> 5.962
we are doing this let's do history


9855
27133.92 --> 6.038
pause let's stop


9856
27136.92 --> 5.44
propagation and then let's get the point


9857
27139.958 --> 4.962
where the user is selecting so point is


9858
27142.36 --> 4.84
going to be pointer event to Canvas


9859
27144.92 --> 6.2
point which we already used and it


9860
27147.2 --> 8.72
passes the pointer uh event and the


9861
27151.12 --> 7.4
camera and now let's do if not self


9862
27155.92 --> 4.398
presence


9863
27158.52 --> 5.118
selection


9864
27160.318 --> 6.4
includes layer ID so if we don't have


9865
27163.638 --> 6.602
this selected in that case we are going


9866
27166.718 --> 5.282
to make sure we select it so set my


9867
27170.24 --> 4.12
presence


9868
27172 --> 5.798
selection and passing the layer ID we


9869
27174.36 --> 6.038
are selecting and let's also add to


9870
27177.798 --> 2.6
history


9871
27180.44 --> 7.64
true like that and let's call set canvas


9872
27184.958 --> 6
state after this so we reset the mode to


9873
27188.08 --> 6.2
Canvas mode.


9874
27190.958 --> 4.84
translating and current is going to be


9875
27194.28 --> 6.678
our


9876
27195.798 --> 8.482
Point like that and for this we


9877
27200.958 --> 6.68
need set canvas


9878
27204.28 --> 7.88
State we need camera


9879
27207.638 --> 9.562
history and we also need canvas State


9880
27212.16 --> 7.158
mode like that so now let's copy this on


9881
27217.2 --> 4.32
layer pointer down and let's append it


9882
27219.318 --> 3.282
to on layer pointer down in the layer


9883
27221.52 --> 4.6
preview


9884
27222.6 --> 5.878
here we have no type errors our layer


9885
27226.12 --> 4.518
preview component accepts this normally


9886
27228.478 --> 4.642
it seems and let's just confirm that it


9887
27230.638 --> 4.84
passes it down to the rectangle it does


9888
27233.12 --> 5.198
the rectangle on pointer down is used


9889
27235.478 --> 5.722
and passes in the event and the ID so I


9890
27238.318 --> 5.122
think that now we might already see


9891
27241.2 --> 4.48
something I'm not 100%


9892
27243.44 --> 4.198
sure I might just figure out that we are


9893
27245.68 --> 3.6
missing something but if I try and click


9894
27247.638 --> 3.962
here there we go I don't know if you can


9895
27249.28 --> 4.4
see it there we go you can see it on the


9896
27251.6 --> 4.84
on the white one so now when another


9897
27253.68 --> 5.76
user selects it is very visible that


9898
27256.44 --> 7.16
they are selecting so how does this this


9899
27259.44 --> 6.6
work well let's go ahead and recap so


9900
27263.6 --> 4.68
what happens is that let's go all the


9901
27266.04 --> 4.16
way from the rectangle when something


9902
27268.28 --> 5.08
when someone presses on the rectangle


9903
27270.2 --> 5.64
here we fire the on pointer down with


9904
27273.36 --> 4.56
the event so we have information about


9905
27275.84 --> 4
where the user clicked and we pass in


9906
27277.92 --> 3.6
the layer ID so we know that this was


9907
27279.84 --> 4.24
clicked on a layer and not randomly


9908
27281.52 --> 5.278
somewhere on the canvas then this on


9909
27284.08 --> 4.76
pointer down goes to the layer preview


9910
27286.798 --> 4.402
and it fires the on layer pointer down


9911
27288.84 --> 5.2
which is simply passed down from the


9912
27291.2 --> 5.278
canas function and then on layer pointer


9913
27294.04 --> 4.918
down ensures that this was not that this


9914
27296.478 --> 5.32
was done intentionally and not during


9915
27298.958 --> 5.322
drawing or during inserting something


9916
27301.798 --> 5.442
and then what it does is it generates


9917
27304.28 --> 4.8
our uh pointer rent to Canvas point


9918
27307.24 --> 5.04
which we use in combination with our


9919
27309.08 --> 6
camera right and we add that to our


9920
27312.28 --> 5.72
presence storage and in the form of


9921
27315.08 --> 5.36
selection array passing that new layer


9922
27318 --> 5.52
ID here and then we also change the


9923
27320.44 --> 4.64
convas state to translating so that we


9924
27323.52 --> 3.92
can you're going to see that in a second


9925
27325.08 --> 4.92
so when when we select something right


9926
27327.44 --> 3.8
now on our side nothing is happening but


9927
27330 --> 3
on our side it's going to be a little


9928
27331.24 --> 3.52
bit different yeah I don't know if you


9929
27333 --> 3.36
notice that but if you have another


9930
27334.76 --> 3.798
account when you click this is visible


9931
27336.36 --> 4.438
only for the other user but if you


9932
27338.558 --> 3.882
yourself click here it's not visible


9933
27340.798 --> 3.6
because we haven't implemented that yet


9934
27342.44 --> 4.68
but it is visible for the other user


9935
27344.398 --> 4.602
ironically so that's what we're going to


9936
27347.12 --> 4.24
do next now we're going to go ahead and


9937
27349 --> 4.958
implemented so that when we select on


9938
27351.36 --> 4.598
this there is like a selection bound


9939
27353.958 --> 5.402
around this and then we're going to have


9940
27355.958 --> 6.76
some handles to resize and expand


9941
27359.36 --> 6.48
that great great


9942
27362.718 --> 4.642
job now let's go ahead and create the


9943
27365.84 --> 4.08
selection box which is going to be


9944
27367.36 --> 4.84
visible to us the person that is


9945
27369.92 --> 6.558
actually clicking on this elements and


9946
27372.2 --> 7.4
not just the other person like this so


9947
27376.478 --> 7.442
let's go ahead back inside of our convas


9948
27379.6 --> 6.48
dosx right here let me just close


9949
27383.92 --> 4.638
everything but the


9950
27386.08 --> 4.6
canvas and what we're going to do is


9951
27388.558 --> 5.962
we're going to go inside of our SVG


9952
27390.68 --> 5.198
element right below the layer iteration


9953
27394.52 --> 3.84
and in here we're going to add a new


9954
27395.878 --> 4.68
component called selection box it's


9955
27398.36 --> 5.518
going to be a self-closing tag and it's


9956
27400.558 --> 7.4
going to accept one prop on


9957
27403.878 --> 5.92
resize handle pointer down for now


9958
27407.958 --> 3.962
that's just going to be an empty Arrow


9959
27409.798 --> 3.68
function now let's go inside of our


9960
27411.92 --> 3.6
components and let's create the


9961
27413.478 --> 5.16
selection


9962
27415.52 --> 7.798
box so the selection box is going to be


9963
27418.638 --> 8.84
a client component let's go ahead and


9964
27423.318 --> 5.962
import Memo from react like this also I


9965
27427.478 --> 5.08
don't know if you notice but you don't


9966
27429.28 --> 6.438
have to always Define use client so if


9967
27432.558 --> 5.562
the child element If the child element's


9968
27435.718 --> 4.6
parent is used client that will


9969
27438.12 --> 3.96
automatically turn this into a client


9970
27440.318 --> 5.64
component as well I don't know if you


9971
27442.08 --> 5.96
knew that uh except if you are passing


9972
27445.958 --> 5.122
uh it through CH children so if you did


9973
27448.04 --> 7.438
for example children here then children


9974
27451.08 --> 6.28
could be a server component but if um if


9975
27455.478 --> 3.522
you don't mark this as used client this


9976
27457.36 --> 3.48
will still be a client component the


9977
27459 --> 3.478
reason I like to mark it is so I


9978
27460.84 --> 4.478
explicitly know that this is a client


9979
27462.478 --> 5.602
component also if you were to import


9980
27465.318 --> 4.64
this in something else which is not a


9981
27468.08 --> 3.6
canvas then you would get an error


9982
27469.958 --> 5.52
because it doesn't have used client in


9983
27471.68 --> 5.24
it just a quick tip about that and let's


9984
27475.478 --> 3.562
go ahead and create an interface


9985
27476.92 --> 6.478
selection box


9986
27479.04 --> 6
props and let's pass in on resize handle


9987
27483.398 --> 4.24
pointer


9988
27485.04 --> 5.04
down and let's just make it an empty


9989
27487.638 --> 4.362
void for now and let's export con


9990
27490.08 --> 5.318
selection


9991
27492 --> 5.6
box be a memo


9992
27495.398 --> 5.32
method uh my apologies that's not how


9993
27497.6 --> 3.118
you write a memo function


9994
27504.08 --> 8.08
function like this


9995
27506.84 --> 8.36
selection box display name selection


9996
27512.16 --> 6.36
box and let's go ahead and this


9997
27515.2 --> 7.278
structure selection box props and on


9998
27518.52 --> 7.76
resize handle pointer down and in here


9999
27522.478 --> 6.282
we can return a div well just a div for


10000
27526.28 --> 4.518
now so we don't have any errors and now


10001
27528.76 --> 6
we can go back inside of the canvas and


10002
27530.798 --> 6.802
we can import the selection box from do/


10003
27534.76 --> 4.28
sele selection box great so now we're


10004
27537.6 --> 4.6
going to continue working in this


10005
27539.04 --> 5.64
selection box right here and the first


10006
27542.2 --> 4.278
thing I want to do is I want to properly


10007
27544.68 --> 3.48
add the types for this on resized handle


10008
27546.478 --> 4.24
pointer down so the props is going to


10009
27548.16 --> 6.238
accept is the corner which will have a


10010
27550.718 --> 7
type of side from our types conas and


10011
27554.398 --> 11
initial initial bounds which will be a


10012
27557.718 --> 10.122
type of x y w and H like that great uh


10013
27565.398 --> 5.802
and now let's go ahead and add a


10014
27567.84 --> 4.878
constant handle width to be eight you're


10015
27571.2 --> 3.278
going to see why we need this in a


10016
27572.718 --> 3.6
second so it's going to be the width of


10017
27574.478 --> 4.202
our handles which are going to appear in


10018
27576.318 --> 5.4
the corners so that we can resize our


10019
27578.68 --> 8.24
elements what we have to do now is we


10020
27581.718 --> 8.962
have to find our layer ID so const Soul


10021
27586.92 --> 9.52
layer ID is going to be use


10022
27590.68 --> 8.038
self from live blocks config let's get


10023
27596.44 --> 4.8
me and then this will just import


10024
27598.718 --> 4.84
yourself from live blocks config here


10025
27601.24 --> 5.718
then we have access to ourselves so


10026
27603.558 --> 5
we're going to write me. presence.


10027
27606.958 --> 5.042
selection.


10028
27608.558 --> 7
length is equal to one and let's go


10029
27612 --> 6.68
ahead in that case choose me. presence.


10030
27615.558 --> 5.16
selection the first in that array


10031
27618.68 --> 4.48
otherwise


10032
27620.718 --> 6
null and now let's go ahead and write


10033
27623.16 --> 5.478
const is showing handles so we are not


10034
27626.718 --> 3.522
always going to show the handles to


10035
27628.638 --> 4.92
resize so we're going to use that


10036
27630.24 --> 6.2
dynamically use storage again you can


10037
27633.558 --> 6.722
import this from live blocks


10038
27636.44 --> 3.84
config so we're going to get the


10039
27640.558 --> 6
root like


10040
27643.44 --> 6.84
this and let's go ahead and write if


10041
27646.558 --> 8.24
Soul layer ID if we have soulle layer ID


10042
27650.28 --> 7.278
and if root layers get so layer


10043
27654.798 --> 4.282
ID type make sure you put a little


10044
27657.558 --> 3.482
question mark here because it's possible


10045
27659.08 --> 4.6
that it doesn't exist so we are only


10046
27661.04 --> 6.12
going to show the handles if type is not


10047
27663.68 --> 6.638
layer type. path and we have to import


10048
27667.16 --> 6
layer type from types canvas so make


10049
27670.318 --> 4.202
sure you have layer type side and this


10050
27673.16 --> 3.28
from types


10051
27674.52 --> 4.958
canvas like


10052
27676.44 --> 6.16
that and now we have to create a hook


10053
27679.478 --> 6.882
called use selection bounds so that we


10054
27682.6 --> 6.278
actually know how to display how far to


10055
27686.36 --> 4.358
select uh an element so right now it's


10056
27688.878 --> 4.162
easy we know that we just have to use


10057
27690.718 --> 4.84
the height and some points around this


10058
27693.04 --> 6.12
boxes but how about later when we allow


10059
27695.558 --> 6.882
a selection net how will we know how big


10060
27699.16 --> 5.04
that selection box box needs to be well


10061
27702.44 --> 4.64
for that we're going to need a reusable


10062
27704.2 --> 4.8
hook called use selection bounds so as


10063
27707.08 --> 3.44
always you can go directly in my GitHub


10064
27709 --> 4.398
if you want to inside of the hooks


10065
27710.52 --> 5.24
folder or you can follow along so use


10066
27713.398 --> 5.08
selection


10067
27715.76 --> 4.48
bounce let's go ahead and import shallow


10068
27718.478 --> 5.362
from live blocks


10069
27720.24 --> 7.398
client uh actually let's import it from


10070
27723.84 --> 8.84
live blocks react like this and now


10071
27727.638 --> 5.84
let's import layer and let's import X Y


10072
27732.68 --> 3.68
uh


10073
27733.478 --> 5.642
wh let's import use


10074
27736.36 --> 6.08
storage and use self


10075
27739.12 --> 8.598
from live blocks config now let's create


10076
27742.44 --> 7.6
a method bounding box to accept layers


10077
27747.718 --> 7.24
which will be an array of our


10078
27750.04 --> 8.32
layer and it's going to return x uh y


10079
27754.958 --> 6.122
with and height or nothing or if we


10080
27758.36 --> 6.4
cannot find the bound and now let's go


10081
27761.08 --> 3.68
ahead and get the first layer so


10082
27764.798 --> 6.242
layers zero if there is no first layer


10083
27768.478 --> 6.122
we can immediately break and return


10084
27771.04 --> 7.64
null otherwise we are able to calculate


10085
27774.6 --> 7.718
some Bings so let's write four let I is


10086
27778.68 --> 5.958
equal 1 I is less than


10087
27782.318 --> 4.32
layers do


10088
27784.638 --> 6.24
length and


10089
27786.638 --> 7.882
i++ so we incremented every iteration


10090
27790.878 --> 5.802
now let's extract from the layer so we


10091
27794.52 --> 6.56
get the current layer using layers and


10092
27796.68 --> 5.92
then I let's extract the X Y coordinates


10093
27801.08 --> 3.878
width and


10094
27802.6 --> 5.08
height and now using those we're going


10095
27804.958 --> 6.642
to be able to assign the proper values


10096
27807.68 --> 7.798
for Left Right top and bottom so if left


10097
27811.6 --> 8.4
is larger than the x coordinate the new


10098
27815.478 --> 6.602
Left value is going to be uh X right and


10099
27820 --> 4.52
I forgot that we have to assign this


10100
27822.08 --> 4.08
values first so let me just remove this


10101
27824.52 --> 3.72
for now so before we go into the


10102
27826.16 --> 4.28
iteration loop we're going to add the


10103
27828.24 --> 5.92
initial values for Left Right top and


10104
27830.44 --> 7.518
bottom so let left is going to be first


10105
27834.16 --> 6.08
X let right is going to be first X Plus


10106
27837.958 --> 5.44
first width so it goes all the way to


10107
27840.24 --> 6.078
the other Corner let top is going to be


10108
27843.398 --> 6.802
first Y and left bottom is going to be


10109
27846.318 --> 6.962
first. y plus first do height so all the


10110
27850.2 --> 5.4
way to the bottom and now we're going to


10111
27853.28 --> 5.118
go ahead and check whether TR truly


10112
27855.6 --> 4.878
these are the largest bounds we can find


10113
27858.398 --> 6.16
or if there are some other combinations


10114
27860.478 --> 6.48
for example if left is larger than x in


10115
27864.558 --> 7.602
that case left is the new x


10116
27866.958 --> 8.802
value then if right is smaller than the


10117
27872.16 --> 7.88
com the combination of X Plus width in


10118
27875.76 --> 6.68
that case right is X Plus width


10119
27880.04 --> 6.4
now if top is


10120
27882.44 --> 6.24
larger than this layer's y coordinate in


10121
27886.44 --> 5.878
that case top is going to become the new


10122
27888.68 --> 6.48
y coordinate and if bottom is smaller


10123
27892.318 --> 6
than a combination of y +


10124
27895.16 --> 6.04
height in that case the new bottom


10125
27898.318 --> 6.802
coordinate is going to be y coordinate


10126
27901.2 --> 9.72
plus height like that and now what we


10127
27905.12 --> 10.64
have to do is return X to be left y to


10128
27910.92 --> 9.878
be top width to be right minus


10129
27915.76 --> 7.958
left and height to be bottom minus top


10130
27920.798 --> 5.68
like that so that's our calculation


10131
27923.718 --> 6.562
method Here and Now what we can do is


10132
27926.478 --> 6.602
export con use selection


10133
27930.28 --> 6.4
bounds and let's write con selection to


10134
27933.08 --> 6.478
be use self let me just write con


10135
27936.68 --> 5.038
selection use self let's get ourselves


10136
27939.558 --> 5
and write me presents


10137
27941.718 --> 7.122
selection and then let's go ahead and


10138
27944.558 --> 7.76
return use storage let's get the root


10139
27948.84 --> 7.2
let's get the selected layers to be


10140
27952.318 --> 7.16
selection do map layer


10141
27956.04 --> 7.678
ID and we're going to get root layers


10142
27959.478 --> 6.16
get layer ID and let's go ahead and put


10143
27963.718 --> 4.482
an exclamation point at the end to


10144
27965.638 --> 4.642
indicate that this can never be false


10145
27968.2 --> 5.04
because we have to use the filter on


10146
27970.28 --> 4.438
this and we're simply going to filter by


10147
27973.24 --> 3.8
a


10148
27974.718 --> 3.642
Boolean so I think if you remove the


10149
27977.04 --> 3.08
exclamation point you might might get an


10150
27978.36 --> 3.4
error but okay it looks like not but I'm


10151
27980.12 --> 3.88
just going to keep it here just in case


10152
27981.76 --> 5.16
because I think we are going to need it


10153
27984 --> 7.28
and let's return bounding box and


10154
27986.92 --> 6.878
selected layers inside and let's add a


10155
27991.28 --> 5.198
shallow which we imported above from


10156
27993.798 --> 5.642
live block react to our use storage so


10157
27996.478 --> 5.602
make sure you have this shallow here


10158
27999.44 --> 5.118
great so that is our use selection


10159
28002.08 --> 5.52
bounds ready to be used so we can go


10160
28004.558 --> 5.482
back inside of our selection box


10161
28007.6 --> 3.958
component component inside of underscore


10162
28010.04 --> 4.24
components in the board ID here


10163
28011.558 --> 6.482
selection box and then we can do con


10164
28014.28 --> 6.92
bounds to be use selection bounds like


10165
28018.04 --> 6.24
this so import use selection bounds from


10166
28021.2 --> 5.56
hooks use selection bounds and then if


10167
28024.28 --> 4.4
there are no bounds we are going to


10168
28026.76 --> 5.32
return null there is nothing for us to


10169
28028.68 --> 6.638
select here otherwise we are ready to


10170
28032.08 --> 5.44
create a fragment here and then we can


10171
28035.318 --> 3.882
add a rect element which is going to be


10172
28037.52 --> 4.4
a self closing


10173
28039.2 --> 6.08
tag and let's go ahead and give it a


10174
28041.92 --> 8.32
class name of fil


10175
28045.28 --> 8.4
transparent stroke blue 500 stroke one


10176
28050.24 --> 8.638
and pointer events none and let's pass


10177
28053.68 --> 7.68
in the style to be transform open backx


10178
28058.878 --> 7.722
Translate and now we're going to use the


10179
28061.36 --> 8.92
bounds x value in pixels and


10180
28066.6 --> 7.24
Bounds one y value in


10181
28070.28 --> 6.4
pixels the x is going to be zero Y is


10182
28073.84 --> 5.798
going to be zero initially as a


10183
28076.68 --> 6.278
property and let's now pass in the width


10184
28079.638 --> 4.482
again from bounds width and the height


10185
28082.958 --> 2.802
from


10186
28084.12 --> 5.32
bounds


10187
28085.76 --> 5
height like this there we go and now


10188
28089.44 --> 4.56
just make sure that you're actually


10189
28090.76 --> 4.76
rendering the selection box in here all


10190
28094 --> 3.04
right and I think that this should


10191
28095.52 --> 4.958
already be working so let me just


10192
28097.04 --> 5.48
refresh my screen screen here so now if


10193
28100.478 --> 4.682
I try to select something so not the


10194
28102.52 --> 6.52
other user there we go you can see how


10195
28105.16 --> 5.84
we have a nice bound right here perfect


10196
28109.04 --> 4.12
and if another user tries to do it you


10197
28111 --> 5.558
can see how we have a matching of their


10198
28113.16 --> 6.88
color so we can now do both theirs and


10199
28116.558 --> 5.722
we can do ours right here perfect so


10200
28120.04 --> 4.2
what I want to add now is further


10201
28122.28 --> 6.84
indication that we can resize this


10202
28124.24 --> 10.078
element by adding it little handles here


10203
28129.12 --> 8.4
so let's go back inside of our selection


10204
28134.318 --> 4.882
box component and in here we already


10205
28137.52 --> 4.92
prepared this


10206
28139.2 --> 5.88
Boolean is showing handles so now we can


10207
28142.44 --> 6.518
use it to actually display the handles


10208
28145.08 --> 6.84
below this RCT here so let's write if is


10209
28148.958 --> 5.36
showing handles only then are we going


10210
28151.92 --> 5.478
to render the


10211
28154.318 --> 5.602
following so let's write rect again


10212
28157.398 --> 4.522
which is going to be a self closing tag


10213
28159.92 --> 3.84
and now we have to find the corners and


10214
28161.92 --> 5.68
we have to attach it there so let's


10215
28163.76 --> 6.638
write class name here Phill white stroke


10216
28167.6 --> 6.278
one stroke blue


10217
28170.398 --> 6.802
500 x is going to be zero Y is going to


10218
28173.878 --> 6.962
be zero and now style is going to be


10219
28177.2 --> 6.84
dynamic so cursor in here is going to be


10220
28180.84 --> 6.36
NW SE


10221
28184.04 --> 7.358
resize width is going to be dynamic so


10222
28187.2 --> 6.84
let's go ahead and add handle withth in


10223
28191.398 --> 4.602
pixels and let's go ahead and copy that


10224
28194.04 --> 5.16
for the height as


10225
28196 --> 5.638
well so it matches because it's a square


10226
28199.2 --> 5.16
and now let's add transform to put it in


10227
28201.638 --> 4.32
a corner so let's open back Tex and


10228
28204.36 --> 5.24
write


10229
28205.958 --> 6.562
translate and we're going to use bounds.


10230
28209.6 --> 6.52
x and we are going to add an offset of


10231
28212.52 --> 6.438
our handle width like that and we're


10232
28216.12 --> 6.08
going to divide the handle width by two


10233
28218.958 --> 5.76
and let's write pixels outside so that's


10234
28222.2 --> 4.8
the first argument in the translate then


10235
28224.718 --> 3.482
write comma the second argument is going


10236
28227 --> 5.6
to be


10237
28228.2 --> 7.88
bouncey minus handle width / by two


10238
28232.6 --> 5.16
again in pixels like this so let me go


10239
28236.08 --> 4.52
ahead and try and there we go you can


10240
28237.76 --> 5.28
see now when I click on something I have


10241
28240.6 --> 4.92
a new indicator in a little box here


10242
28243.04 --> 4.32
that I can try and resize this you can


10243
28245.52 --> 3.958
see how it shows me that I I'm going to


10244
28247.36 --> 4.518
be a to do that in this or this


10245
28249.478 --> 4.762
direction right here great so now we


10246
28251.878 --> 4.84
have to do that uh eight times for


10247
28254.24 --> 6.52
different points around our box right


10248
28256.718 --> 5.76
here so let's go ahead and just add one


10249
28260.76 --> 3.24
more thing here which is going to be on


10250
28262.478 --> 4.522
pointer


10251
28264 --> 5.08
down and in here we're going to extract


10252
28267 --> 3.398
the event and there's just one more


10253
28269.08 --> 4.798
thing that I want to do here which is


10254
28270.398 --> 6.682
event do stop propagation like this and


10255
28273.878 --> 4.84
then in here I'm going to add to do add


10256
28277.08 --> 3.68
recite


10257
28278.718 --> 4.08
Handler because we're going to copy and


10258
28280.76 --> 4.44
paste this so that we don't forget to do


10259
28282.798 --> 5.08
that so let's copy and paste this now


10260
28285.2 --> 4.48
and now we have to create it for a for


10261
28287.878 --> 4.92
the other corner right so let's change


10262
28289.68 --> 5.198
the cursor to be NS resize the width and


10263
28292.798 --> 4.322
the height can stay the same but the


10264
28294.878 --> 4.76
translate function is going to be


10265
28297.12 --> 4.48
different so what this is going to do


10266
28299.638 --> 5.642
let's actually remove it so it's easier


10267
28301.6 --> 5.92
for us to do it so we're going to write


10268
28305.28 --> 8.198
translate the first one is going to be


10269
28307.52 --> 10.6
bounce. X Plus bounce do width / by


10270
28313.478 --> 5.962
2 minus handle width divided by two like


10271
28318.12 --> 3.08
that so that's going to be the first


10272
28319.44 --> 6.518
argument and the second argument is


10273
28321.2 --> 7.278
going to be bounce. y minus handle with


10274
28325.958 --> 4.562
divided two pixels so don't forget this


10275
28328.478 --> 5.84
pixels here and there we go you can see


10276
28330.52 --> 6
how now this one is in the middle of my


10277
28334.318 --> 3.602
uh in my on my top line right here so


10278
28336.52 --> 2.72
this one is in the corner this one is in


10279
28337.92 --> 3.16
the middle and now we're going to create


10280
28339.24 --> 4.078
this one right here and we have to do


10281
28341.08 --> 5.44
that throughout the entire


10282
28343.318 --> 5.602
element uh great so this is good so


10283
28346.52 --> 4.84
let's go ahead and I'm going to copy the


10284
28348.92 --> 4.878
first one again because I think it's


10285
28351.36 --> 6.24
going to be more similar so let's go


10286
28353.798 --> 6.642
ahead and paste that here so this one is


10287
28357.6 --> 6.118
going to have uh a different cursor of


10288
28360.44 --> 6.518
course this one is going to be uh


10289
28363.718 --> 5.962
NW resize like that and let me just


10290
28366.958 --> 5.282
remove the inside of the translate so


10291
28369.68 --> 6
it's easier for us to do this so


10292
28372.24 --> 9.28
translate in here is going to do bounds


10293
28375.68 --> 10.52
oops bounds. x minus handle width / 2


10294
28381.52 --> 8.84
plus bounds. width in pixels comma


10295
28386.2 --> 6.48
bounds. y coordinate minus handle width


10296
28390.36 --> 4.958
/ 2 in


10297
28392.68 --> 4.76
pixels and there we go we now have it in


10298
28395.318 --> 6.32
this corner like that and now we have to


10299
28397.44 --> 4.198
do the other ones so let's copy this


10300
28401.84 --> 6.84
one and let's just indent this properly


10301
28405.92 --> 4.68
all right so the next one here is going


10302
28408.68 --> 5.16
to be ew


10303
28410.6 --> 6.08
resize all right and let's clear up the


10304
28413.84 --> 4.92
translate so it's easier for us so the


10305
28416.68 --> 4.44
first value in translate is going to be


10306
28418.76 --> 7.32
bounce. x


10307
28421.12 --> 6.92
minus handle width / by 2 plus bounce.


10308
28426.08 --> 3.96
width pixel


10309
28428.04 --> 7.56
and the second argument is going to be


10310
28430.04 --> 9
bounce. y plus bounce. height ided by 2


10311
28435.6 --> 6
minus handle width divided by two in


10312
28439.04 --> 4.278
pixels and there we go that puts us here


10313
28441.6 --> 3.76
in the middle and always make sure that


10314
28443.318 --> 4.602
your cursors are correct right they need


10315
28445.36 --> 5.8
to make sense where you will be able to


10316
28447.92 --> 6.28
resize great let's copy this


10317
28451.16 --> 6.12
one now we're going to create the one in


10318
28454.2 --> 7.32
this corner here so that's going to be n


10319
28457.28 --> 6.518
w s e resize n WS resize like that let's


10320
28461.52 --> 5.48
clear up our translate as


10321
28463.798 --> 7.16
always so let's write uh the first one


10322
28467 --> 8.28
is bounce. x minus handle width ided by


10323
28470.958 --> 8.202
two plus bounce. width pixels the second


10324
28475.28 --> 8.678
argument is going to be bouncey


10325
28479.16 --> 10
minus bouncey minus handle width / by


10326
28483.958 --> 7
two uh plus bounds height pixel


10327
28489.16 --> 5.2
and I think I've messed something up


10328
28490.958 --> 9.082
because it added it here at the


10329
28494.36 --> 5.68
top oh it's because I do a double divide


10330
28500.76 --> 4.878
here there we go now it's working let me


10331
28503 --> 6.798
see if I can kind of display this in a


10332
28505.638 --> 4.16
nicer way for you is this


10333
28513.638 --> 5.562
possible yeah this looks clearer right


10334
28521.16 --> 3.88
like this okay I'm going to do it like


10335
28522.52 --> 5.438
this for now this looks much clearer for


10336
28525.04 --> 4.88
both of us okay and now let's copy this


10337
28527.958 --> 3.562
also if you think you're not learning


10338
28529.92 --> 3.32
much from for just repeating this you


10339
28531.52 --> 3.64
can just go into my GitHub and copy this


10340
28533.24 --> 4.318
like I understand this is just tedious


10341
28535.16 --> 4.158
work uh all right now let's go ahead and


10342
28537.558 --> 5.642
create the middle one


10343
28539.318 --> 7.362
here so the that one is going to be NS


10344
28543.2 --> 5.92
resize and let's go ahead and modify the


10345
28546.68 --> 5.08
first value in the translate


10346
28549.12 --> 8.32
here so that's going to


10347
28551.76 --> 10
be uh bounds X Plus bounds width ided by


10348
28557.44 --> 9.118
two minus handle width ided


10349
28561.76 --> 7.44
two uh in pixels and then the other one


10350
28566.558 --> 5.92
is going to be bounc at y minus handle


10351
28569.2 --> 8.88
width divided by two


10352
28572.478 --> 7.48
plus bounds height in pixels there we go


10353
28578.08 --> 4
we added that one successfully and it


10354
28579.958 --> 5.882
goes up and down Corner left right


10355
28582.08 --> 7.84
corner up and down great and two more to


10356
28585.84 --> 7.798
go so let me copy


10357
28589.92 --> 6.878
this uh let me just align this properly


10358
28593.638 --> 6
are the other ones aligned they are okay


10359
28596.798 --> 5.282
so this one let me ensure this is the


10360
28599.638 --> 3.642
last one uh well almost last this one is


10361
28602.08 --> 6.398
going to be


10362
28603.28 --> 8.64
NW resize and let's clear up the trans


10363
28608.478 --> 6.84
here so this one is going to have the


10364
28611.92 --> 6.478
first one of bounds. x minus handle


10365
28615.318 --> 6.842
withth divided by two pixels and the


10366
28618.398 --> 8.32
other one bounds y minus handle width


10367
28622.16 --> 7.318
divided by two plus bounds height


10368
28626.718 --> 5.24
pixels there we go and let's confirm


10369
28629.478 --> 4.202
this is a corner perfect and we are down


10370
28631.958 --> 7.242
to the last


10371
28633.68 --> 8.52
one so this one is going to have ew


10372
28639.2 --> 5.04
resize and let's clear up the translate


10373
28642.2 --> 6.08
here so the first one is going to be


10374
28644.24 --> 6.478
bounce x minus handle width ided by two


10375
28648.28 --> 8.278
pixels and the second one is going to be


10376
28650.718 --> 10.642
bounds y minus handle width divided by 2


10377
28656.558 --> 7.802
plus bounds height divided by two


10378
28661.36 --> 4.518
pixels there we go we've wrapped it up


10379
28664.36 --> 3.16
and what I want to do is I just want to


10380
28665.878 --> 2.92
go through all of my trend transforms


10381
28667.52 --> 3.118
here okay so this one is a simple


10382
28668.798 --> 4.402
transform and this one could have been


10383
28670.638 --> 5.122
displayed better so let me just go ahead


10384
28673.2 --> 4.16
and display this in a better way and you


10385
28675.76 --> 3.878
can do this with your code as well if


10386
28677.36 --> 4.518
you're genuinely trying to learn how


10387
28679.638 --> 3.882
this works right if you don't want to


10388
28681.878 --> 3.642
just type it if you just if you don't


10389
28683.52 --> 4.438
care if you just want to type it out


10390
28685.52 --> 4.68
that's okay uh but you know just in case


10391
28687.958 --> 4.962
you want to specifically learn how it


10392
28690.2 --> 5.32
works you can do


10393
28692.92 --> 4.718
this it just makes uh it's easier for


10394
28695.52 --> 5.198
the eyes to look at it in this way


10395
28697.638 --> 5.602
okay and I have this one


10396
28700.718 --> 4.442
left right you can of course just visit


10397
28703.24 --> 4.04
my GitHub I'm also doing this so it's


10398
28705.16 --> 4.44
easier for you to look at in the final


10399
28707.28 --> 5.16
GitHub I know this is tedious work but I


10400
28709.6 --> 4.878
don't know what is a better way to kind


10401
28712.44 --> 4.438
of teach you how to do this you just


10402
28714.478 --> 5.642
have to do it for all of the points we


10403
28716.878 --> 6.962
need uh okay so we have this and let me


10404
28720.12 --> 3.72
just collapse this as


10405
28724.12 --> 5.598
well okay so just make sure all of your


10406
28727.12 --> 4.598
translates uh are correct you can always


10407
28729.718 --> 4.16
visit directly in my GitHub and copy the


10408
28731.718 --> 5.16
individual transform methods here if


10409
28733.878 --> 5.202
you're having any problems uh and of


10410
28736.878 --> 4.362
course confirm that when you select


10411
28739.08 --> 4
something it matches so this should be


10412
28741.24 --> 6.12
up or down this should be the corner


10413
28743.08 --> 7.44
left right uh Corner up down left corner


10414
28747.36 --> 4.598
left right and another Corner great so


10415
28750.52 --> 3.438
what we're going to do next is the


10416
28751.958 --> 4.562
actual functionality to move these


10417
28753.958 --> 5.242
layers around when we hold and when we


10418
28756.52 --> 6.038
hold on each of these boxes that's going


10419
28759.2 --> 5
to fire this event which we having to do


10420
28762.558 --> 4.882
which is going to be called on reiz


10421
28764.2 --> 4.64
handle pointer down uh great great job


10422
28767.44 --> 3.48
again if you're having problems with


10423
28768.84 --> 5.558
this you can always visit my GitHub and


10424
28770.92 --> 6.718
just find the correct transforms for


10425
28774.398 --> 6.962
this so now let's go ahead and actually


10426
28777.638 --> 6.08
enable the resizing functionality so


10427
28781.36 --> 4.72
this is how we are going to do that


10428
28783.718 --> 5.68
first things first we are going to leave


10429
28786.08 --> 5.718
the on point down to be empty for now so


10430
28789.398 --> 4.842
we're not going to immediately add this


10431
28791.798 --> 5.122
instead let's just create this on reiz


10432
28794.24 --> 6.158
handle pointer down in the canvas


10433
28796.92 --> 8.038
component so inside of canvas. vsx right


10434
28800.398 --> 8.802
here I'm going to go uh above this all


10435
28804.958 --> 7.84
pointer stuff so let's see we can do it


10436
28809.2 --> 8
here where we have insert layer so above


10437
28812.798 --> 8.042
on Wheel let's write const on resize


10438
28817.2 --> 7.32
handle pointer down so when the user


10439
28820.84 --> 5.798
clicks on one of these little boxes here


10440
28824.52 --> 4.48
the doesn't start to drag yet just


10441
28826.638 --> 5.402
clicks on this that's when this function


10442
28829 --> 6.08
is going to be fired so that is going to


10443
28832.04 --> 5.32
be a callback function so use callback


10444
28835.08 --> 2.28
like


10445
28837.878 --> 6.562
this and in here we're going to go ahead


10446
28841.68 --> 6.118
and have the following props so we're


10447
28844.44 --> 6.958
going to have corner which is a type of


10448
28847.798 --> 6.122
side from our canvas types so make sure


10449
28851.398 --> 4.442
you import this from types canvas


10450
28853.92 --> 4.08
besides corner it's also going to have


10451
28855.84 --> 5.44
the initial bounds which are going to be


10452
28858 --> 5.68
our X Y width and height from types


10453
28861.28 --> 6.358
canvas as well so make sure you have


10454
28863.68 --> 5.718
side and this from canvas and now let's


10455
28867.638 --> 5.24
pause


10456
28869.398 --> 6.282
history and then let's do set canvas


10457
28872.878 --> 5.122
State and let's change the mode to be


10458
28875.68 --> 5.32
canvas mode


10459
28878 --> 5.798
resizing and if we pass resizing we also


10460
28881 --> 5.44
need to pass the initial bounds and we


10461
28883.798 --> 3.562
also need to pass the corner that is


10462
28886.44 --> 3.76
being


10463
28887.36 --> 6.76
resized and now we can pass the history


10464
28890.2 --> 4.92
in the dependency array here now let's


10465
28894.12 --> 4.24
use this


10466
28895.12 --> 5.8
oniz uh handle pointer down and let's


10467
28898.36 --> 4.92
actually pass it to our selection box


10468
28900.92 --> 5.038
here so on reiz handle pointer down


10469
28903.28 --> 5.24
we'll be calling the oniz handle pointer


10470
28905.958 --> 5.36
down function right here and now let's


10471
28908.52 --> 5.76
go inside of the selection box and let's


10472
28911.318 --> 5.802
actually use that uh function now so


10473
28914.28 --> 5.88
inside of the on pointer down here in


10474
28917.12 --> 5.678
the first handle let me just find it we


10475
28920.16 --> 5.12
have a to-do address siiz Handler let's


10476
28922.798 --> 5.92
go ahead and write on resize Handler


10477
28925.28 --> 9.598
pointer down we're going to call


10478
28928.718 --> 9.642
side. Top plus side. left and Bounds in


10479
28934.878 --> 6.08
the second argument like that so let's


10480
28938.36 --> 5.56
just see where we have the side from we


10481
28940.958 --> 4.68
have the side from types canvas so


10482
28943.92 --> 4.16
basically this is a


10483
28945.638 --> 5.32
corner uh bound right so you can see


10484
28948.08 --> 5.6
that when we resize we are resizing to


10485
28950.958 --> 4.642
the top and to the left right and we


10486
28953.68 --> 5.4
also pass in the bounds as the second


10487
28955.6 --> 7.6
argument so now we're going to copy this


10488
28959.08 --> 6.52
go to the other uh Handler right here


10489
28963.2 --> 4.8
the other Handler is simply going to be


10490
28965.6 --> 4.16
side top


10491
28968 --> 4.718
like that so that's this one it just


10492
28969.76 --> 4.24
goes to the top and then we go to the


10493
28972.718 --> 4.68
third


10494
28974 --> 7.2
one this is again a corner one so that


10495
28977.398 --> 7.122
one is going to be side top plus side.


10496
28981.2 --> 7.758
right right because it's a this corner


10497
28984.52 --> 7.038
right here so now let's go ahead and go


10498
28988.958 --> 4.52
to the right


10499
28991.558 --> 5.122
one right


10500
28993.478 --> 6.202
here so this one is very simply going to


10501
28996.68 --> 5.6
go to side right like


10502
28999.68 --> 5.038
this that's this one and then again we


10503
29002.28 --> 4.88
have a bottom corner here so we're going


10504
29004.718 --> 5.322
to use two of


10505
29007.16 --> 5.2
those let's go ahead and let's combine


10506
29010.04 --> 6.278
the side


10507
29012.36 --> 7.438
bottom and side


10508
29016.318 --> 6.24
right and pass in the bounce as


10509
29019.798 --> 7.202
usual and now let's go ahead to the


10510
29022.558 --> 7.562
lower one and this one is just side


10511
29027 --> 7.08
bottom right it's this one right here so


10512
29030.12 --> 8.518
we don't have to pass inside right like


10513
29034.08 --> 7.28
that great and let's go ahead and do the


10514
29038.638 --> 4.202
next one which is this corner which is


10515
29041.36 --> 5.518
bottom and


10516
29042.84 --> 6.878
left so lower


10517
29046.878 --> 6.44
one this is going to be side bottom plus


10518
29049.718 --> 8.08
side dot left like


10519
29053.318 --> 7.362
that uh and now let's go ahead and do


10520
29057.798 --> 2.882
the left


10521
29060.92 --> 5.2
one oh is this the last one oh yes


10522
29064.08 --> 5.36
because yes yes yes correct


10523
29066.12 --> 6.358
correct and this will just be side. left


10524
29069.44 --> 6.198
because all it does is goes inside of


10525
29072.478 --> 7.24
the left so let's go from bottom to top


10526
29075.638 --> 7.84
to confirm so this one the last wct is


10527
29079.718 --> 5.282
our side do left so that represents this


10528
29083.478 --> 5.92
one


10529
29085 --> 7.28
okay the one above it is this corner


10530
29089.398 --> 3.842
right here which should be bottom and


10531
29092.28 --> 4.24
side


10532
29093.24 --> 6.68
left then the one above that one is


10533
29096.52 --> 4.92
simply side bottom because it just goes


10534
29099.92 --> 4.038
down right


10535
29101.44 --> 6.278
here the one above


10536
29103.958 --> 6.162
that is bottom and right because it is


10537
29107.718 --> 6.76
this corner right


10538
29110.12 --> 6.598
here the one above that one is side


10539
29114.478 --> 4.32
right because it very simply just goes


10540
29116.718 --> 3.84
to the right so the opposite of our last


10541
29118.798 --> 6.322
one which is


10542
29120.558 --> 8.442
left and then above that one we have a


10543
29125.12 --> 7.358
corner one so side top plus side right


10544
29129 --> 5.718
which is this one and then after that


10545
29132.478 --> 4.882
one we simply have side


10546
29134.718 --> 6.68
top so it simply goes to the


10547
29137.36 --> 7.84
top and the first one is


10548
29141.398 --> 5.4
simply side top plus side left which is


10549
29145.2 --> 4.8
this right here


10550
29146.798 --> 5.08
perfect so now we are ready to go back


10551
29150 --> 5.68
inside of our canvas and right now if


10552
29151.878 --> 6.44
you try still nothing here is happening


10553
29155.68 --> 6.16
but inside of your on resized handle


10554
29158.318 --> 5.602
pointer down you should be getting uh


10555
29161.84 --> 4.44
some conso logs here so let's go ahead


10556
29163.92 --> 5.558
and conso loog the corner and the


10557
29166.28 --> 4.76
initial bounds so we can see this


10558
29169.478 --> 4.202
happening right here so I'm going to go


10559
29171.04 --> 4.678
ahead and open my terminal here let me


10560
29173.68 --> 5.92
try and selecting this one if I click


10561
29175.718 --> 9.522
here there we go Corner 9 Corner 8


10562
29179.6 --> 8.64
Corner 10 Corner 2 Corner 6 Corner four


10563
29185.24 --> 4.96
corner five like that so all of them are


10564
29188.24 --> 4.28
different perfect and we also have the


10565
29190.2 --> 3.92
initial bounds of their width height and


10566
29192.52 --> 5.76
there are coordinates so we can


10567
29194.12 --> 6.278
calculate using those great and now what


10568
29198.28 --> 5.598
we have to do is the functionality to


10569
29200.398 --> 6.56
actually do something when we drag these


10570
29203.878 --> 6.642
items so the way we are going to do that


10571
29206.958 --> 7.322
is by going inside of


10572
29210.52 --> 7.038
our uh let's go ahead and find on


10573
29214.28 --> 6.88
pointer up or on pointer move I'm not


10574
29217.558 --> 5.042
sure which one would be uh the correct


10575
29221.16 --> 4.96
place to put


10576
29222.6 --> 5.84
this right it should be on pointer move


10577
29226.12 --> 5.64
so let's go inside of on pointer move


10578
29228.44 --> 6.76
right here where right now all we do is


10579
29231.76 --> 4.76
simply set the presence of the cursor so


10580
29235.2 --> 6.24
now what we're going to do is we're


10581
29236.52 --> 10.76
going to check if we have canvas state.


10582
29241.44 --> 9.4
mode to be canvas state do


10583
29247.28 --> 7.96
resizing we have to use a type canvas


10584
29250.84 --> 7
State my apologies canvas mode.


10585
29255.24 --> 5.318
resizing if that is true let's just


10586
29257.84 --> 6.2
conso log


10587
29260.558 --> 6.24
resizing so now if we are correct so


10588
29264.04 --> 4.838
let's find our own resize handle pointer


10589
29266.798 --> 4.882
down what it does it it changes the


10590
29268.878 --> 4.402
convas state to convas mode resizing and


10591
29271.68 --> 4.24
it passes the initial bounds in the


10592
29273.28 --> 5.038
corner we are trying to resize so then


10593
29275.92 --> 5
inside of our on pointer move we should


10594
29278.318 --> 5.362
have this being logged once we are


10595
29280.92 --> 6.6
moving a corner icon so let's try it out


10596
29283.68 --> 5.84
so now if I go ahead and do this right


10597
29287.52 --> 5.08
now just by moving my cursor nothing is


10598
29289.52 --> 6
happening if I randomly drag the element


10599
29292.6 --> 4.64
nothing is happening but if I drag this


10600
29295.52 --> 4
it should should be happening but it


10601
29297.24 --> 5.44
seems like nothing is still happening so


10602
29299.52 --> 5.958
I think we are missing an additional


10603
29302.68 --> 6.198
event handler


10604
29305.478 --> 6.48
here it might be because I forgot to add


10605
29308.878 --> 5.962
a dependency array let's see if that is


10606
29311.958 --> 5
true it could be uh so we need conver


10607
29314.84 --> 4.52
State inside of the dependency array


10608
29316.958 --> 5.242
let's see if that will maybe help


10609
29319.36 --> 4.56
it there we go so I was missing uh the


10610
29322.2 --> 5.118
dependency right there we go you can see


10611
29323.92 --> 5.2
how if I hold and anywhere nothing is


10612
29327.318 --> 4.48
happening but if I specifically grab a


10613
29329.12 --> 5.598
handle then we have a bunch of resizing


10614
29331.798 --> 4.882
events happening so that's exactly what


10615
29334.718 --> 4.402
we want perfect so just make sure that


10616
29336.68 --> 4.4
inside of your own pointer move you've


10617
29339.12 --> 4.72
added an if Clause to check if we are in


10618
29341.08 --> 5.36
the resizing mode and then we are doing


10619
29343.84 --> 5.478
the resizing perfect so what we have to


10620
29346.44 --> 5.358
do now is we have to create a method uh


10621
29349.318 --> 5.882
resize selected layer so that we can


10622
29351.798 --> 6.6
actually well resize it so I want to add


10623
29355.2 --> 6.8
this in here where we have


10624
29358.398 --> 5.122
our uh insert layer so just below that


10625
29362 --> 3.958
let's go ahead and let's add the


10626
29363.52 --> 6
function to resize the layer so const


10627
29365.958 --> 7.202
resize selected layer is going to be


10628
29369.52 --> 5.038
used mutation again and in here let's go


10629
29373.16 --> 5.398
ahead and let's


10630
29374.558 --> 7.482
extract the storage and


10631
29378.558 --> 6.08
self and let me just write this function


10632
29382.04 --> 4.72
so we don't have any prop errors here so


10633
29384.638 --> 4.402
storage and cell


10634
29386.76 --> 3.878
and point which is a type of point which


10635
29389.04 --> 4.598
we have from types


10636
29390.638 --> 5.32
canvas and now in here we're going to go


10637
29393.638 --> 6.802
ahead and check if canvas


10638
29395.958 --> 7.68
state. mode is not canvas mode resizing


10639
29400.44 --> 6.358
so if we somehow fired this function and


10640
29403.638 --> 6.08
we are no longer resizing or just break


10641
29406.798 --> 5.722
the function and now what we have to do


10642
29409.718 --> 4.322
is we have to create a util to resize


10643
29412.52 --> 5.92
the


10644
29414.04 --> 7.2
bounds let's head inside of our utils


10645
29418.44 --> 5.16
file then again you can always visit


10646
29421.24 --> 5.158
this in my GitHub we have the entire


10647
29423.6 --> 5.84
utils file here if you don't feel like


10648
29426.398 --> 6.92
writing this line by line with me if you


10649
29429.44 --> 7.08
do then let's go and write export


10650
29433.318 --> 5.522
function resize bounds which is going to


10651
29436.52 --> 5.52
accept bounds as the first argument


10652
29438.84 --> 7
which is a type of XY width and height


10653
29442.04 --> 6.678
Corner which is a type of side point


10654
29445.84 --> 5.878
which is a type of point and let me just


10655
29448.718 --> 6.08
collapse all of my props


10656
29451.718 --> 6.402
here and it looks like I didn't import


10657
29454.798 --> 6.282
side from types canvas and point from


10658
29458.12 --> 6.8
types canvas so make sure you have the


10659
29461.08 --> 6.04
camera the color the point side and XY


10660
29464.92 --> 7.28
withd and height from types


10661
29467.12 --> 8.16
canvas and it's going to return X Y


10662
29472.2 --> 5.56
width and height so let's prepare the


10663
29475.28 --> 2.48
result


10664
29478.16 --> 11.68
to be X bounds dox y bounds doy width


10665
29485.398 --> 6.442
bounds. width height bounds. height and


10666
29489.84 --> 6.36
let me just fix my typos here so I don't


10667
29491.84 --> 6.68
break the entire app all right and what


10668
29496.2 --> 4.278
we're going to do is return that result


10669
29498.52 --> 4.6
so this will resolve this typescript


10670
29500.478 --> 4.642
error and in between returning the


10671
29503.12 --> 5.04
result and the initial result we have to


10672
29505.12 --> 5.678
do some calculations to change the


10673
29508.16 --> 4.798
actual output which is going to happen


10674
29510.798 --> 4
depending on what the user is dragging


10675
29512.958 --> 5.402
how long they are dragging in what


10676
29514.798 --> 5.76
direction they're dragging it in so if


10677
29518.36 --> 3.84
let's open double parenthesis if we have


10678
29520.558 --> 4.042
a corner


10679
29522.2 --> 6.04
and side.


10680
29524.6 --> 7
left is equal to side.


10681
29528.24 --> 7.44
left in that case result dox is going to


10682
29531.6 --> 8.92
be math.min so the smaller value of this


10683
29535.68 --> 8.198
is point dox or bounce dox plus bounce.


10684
29540.52 --> 4.6
width and result. width is going to be


10685
29543.878 --> 7.482
math.


10686
29545.12 --> 9.278
absolute bounds. X Plus bounds. width


10687
29551.36 --> 7.08
minus point


10688
29554.398 --> 8.762
dox now let's go ahead and check if


10689
29558.44 --> 4.72
corner and side


10690
29564.558 --> 7.16
right is equal to side


10691
29567.958 --> 8.562
right in that case result. X is going to


10692
29571.718 --> 8.68
be math. Min between point x and bounds.


10693
29576.52 --> 9.6
x and result. width is going to be math


10694
29580.398 --> 9.842
absolute point x minus bounds


10695
29586.12 --> 9.758
dox now let's go ahead and write if


10696
29590.24 --> 8.318
corner and side top is equal to side top


10697
29595.878 --> 7.962
in that case result. Y is going to be


10698
29598.558 --> 6.84
map Min between point Y bounds doy plus


10699
29603.84 --> 6
bounce.


10700
29605.398 --> 8.682
height and result. height is going to be


10701
29609.84 --> 8.4
math absolute bounce doy plus bounce.


10702
29614.08 --> 4.16
height minus Point


10703
29618.52 --> 9.24
doy and last thing we have to do is the


10704
29621.36 --> 9.88
bottom so if corner and side bottom is


10705
29627.76 --> 7.958
equal to side bottom like this result


10706
29631.24 --> 8.398
doy is math Min between point Y and


10707
29635.718 --> 9.042
Bounds Y and result. height is going to


10708
29639.638 --> 5.122
be math absolute point


10709
29645.52 --> 5.878
Y and bound minus bounce. y


10710
29649.44 --> 4.56
coordinate like this so let's just


10711
29651.398 --> 5.08
confirm we have the necessary cases so


10712
29654 --> 5.92
we have the side bottom case case we


10713
29656.478 --> 6.362
have the side top case handling here we


10714
29659.92 --> 6.6
have the side right handling here and we


10715
29662.84 --> 5.638
have the side left handling here okay


10716
29666.52 --> 4.52
and now what we can do is go back inside


10717
29668.478 --> 4.16
of our app folder board board ID


10718
29671.04 --> 4.758
components


10719
29672.638 --> 5.92
conas and now what we are going to do is


10720
29675.798 --> 4.882
we're going to actually uh get this


10721
29678.558 --> 5.602
function and get the bounds so let's


10722
29680.68 --> 6.56
write const bounds to be uh resize


10723
29684.16 --> 6.68
bounds from lib utils so just make sure


10724
29687.24 --> 5.28
you import precise bounds from uh lib


10725
29690.84 --> 3.68
utils the same place we have the


10726
29692.52 --> 5.32
connection ID caller and pointer event


10727
29694.52 --> 7.118
to Canvas point and in here we're going


10728
29697.84 --> 5.958
to pass the canvas state. initial bounds


10729
29701.638 --> 5.08
we're going to pass the canvas State


10730
29703.798 --> 5.722
corner and we're going to pass the point


10731
29706.718 --> 4.482
that we have from the event and then


10732
29709.52 --> 4.878
what we're going to do is write con live


10733
29711.2 --> 6.92
layers to be storage. getet


10734
29714.398 --> 7.042
layers and then con layer individually


10735
29718.12 --> 7.48
is going to be live layers.


10736
29721.44 --> 5.48
getet self. presence do selection first


10737
29725.6 --> 5.118
in the


10738
29726.92 --> 6.558
array if we have that


10739
29730.718 --> 4.92
layer we're going to do layer. update


10740
29733.478 --> 4.84
and pass in the new bounds for that


10741
29735.638 --> 5.882
layer and very important passing the


10742
29738.318 --> 5.522
canvas state in the dependency array


10743
29741.52 --> 4.718
like that so let's try it out and


10744
29743.84 --> 4.798
actually not just yet so so right now


10745
29746.238 --> 5.602
it's not going to work because we are


10746
29748.638 --> 7.202
not using this method anywhere so let's


10747
29751.84 --> 9.2
go inside of our pointer move


10748
29755.84 --> 7.52
method uh where is it uh pointer


10749
29761.04 --> 4
move there we go on pointer move use


10750
29763.36 --> 3.878
mutation where we have the console log


10751
29765.04 --> 5.598
resizing now let's actually use the


10752
29767.238 --> 6.842
resize selected layer here and pass in


10753
29770.638 --> 5.24
current and let's go ahead and add some


10754
29774.08 --> 4.238
more values here so we we need the


10755
29775.878 --> 4.282
canvas state but we also now need the


10756
29778.318 --> 5.722
resize selected


10757
29780.16 --> 6.28
layer so let's go ahead and try this out


10758
29784.04 --> 5.8
now let's also add the camera in here I


10759
29786.44 --> 7
forgot that we need camera uh as well


10760
29789.84 --> 5.118
canvas State and this is okay for now so


10761
29793.44 --> 4.798
let's try it out if I click here and if


10762
29794.958 --> 6.28
I start resizing there we go I can


10763
29798.238 --> 7.08
resize in the corner I can resize on the


10764
29801.238 --> 7
side here I can resize up or down I can


10765
29805.318 --> 5.882
size left or right perfect but it does


10766
29808.238 --> 6.282
seem kind of glitchy to me so it could


10767
29811.2 --> 6.16
be that I made some mistakes in one of


10768
29814.52 --> 4.92
the functions so we're going to go ahead


10769
29817.36 --> 3.92
well I'm going to go ahead uh and see


10770
29819.44 --> 3.518
exactly where I did wrong yeah


10771
29821.28 --> 5.24
especially when I grab the complete


10772
29822.958 --> 6.122
opposite side this is not exactly how I


10773
29826.52 --> 5.16
would expect it to behave but yeah we we


10774
29829.08 --> 5.238
are doing something that's good uh so


10775
29831.68 --> 4.198
now I'm just going to go ahead uh throw


10776
29834.318 --> 6.602
out individually


10777
29835.878 --> 8.202
looking at looking through my um well


10778
29840.92 --> 5.24
this method right called reiz Bounce and


10779
29844.08 --> 4.84
I'm also going to go


10780
29846.16 --> 6.238
through is it rectangle no it's


10781
29848.92 --> 5.878
selection box I'm also going to go look


10782
29852.398 --> 4.722
through this here so I'm going to end


10783
29854.798 --> 4.802
the chapter like this for now if you


10784
29857.12 --> 4.88
want to you can go ahead and play around


10785
29859.6 --> 5.08
yourself and try to fix it just make you


10786
29862 --> 4.04
know a commit uh so you don't mess up


10787
29864.68 --> 3.36
your code


10788
29866.04 --> 4.16
and uh in the next chapter I'm going to


10789
29868.04 --> 4.24
go ahead and see how we can improve this


10790
29870.2 --> 5.438
great great


10791
29872.28 --> 7.32
job all right so what we have to do now


10792
29875.638 --> 5.722
is fix this little bug that we have so


10793
29879.6 --> 4.92
the bug seems to


10794
29881.36 --> 5.598
happen it looks like any corner I grab


10795
29884.52 --> 4.92
it translates to me grabbing the lower


10796
29886.958 --> 6.802
right corner so no matter where I start


10797
29889.44 --> 8.038
I end up there right so I compared with


10798
29893.76 --> 6.558
my source code and I forgot that end end


10799
29897.478 --> 6.32
operator and a bitwise operator are not


10800
29900.318 --> 5.16
the same thing so what I intended to use


10801
29903.798 --> 3.52
here but completely forgot about the


10802
29905.478 --> 4.32
importance of is that we're going to use


10803
29907.318 --> 5.842
the bitwise operator here so change all


10804
29909.798 --> 5.642
of your double and end quotes here and


10805
29913.16 --> 5.238
replace them with a bitwise


10806
29915.44 --> 5.4
comparison and now let's go ahead and


10807
29918.398 --> 5.202
check this out so if I go ahead and


10808
29920.84 --> 5.798
expand there we go I can expand in this


10809
29923.6 --> 6.878
corner if I go ahead top I can expand


10810
29926.638 --> 7.962
top and bottom right corner same thing


10811
29930.478 --> 6.24
right here lower right


10812
29934.6 --> 6.68
bottom lower


10813
29936.718 --> 7.202
left left and Corner left all working


10814
29941.28 --> 6.198
perfectly fine so that's all that was


10815
29943.92 --> 5.84
the mistake so inside of my Reise bounds


10816
29947.478 --> 5.4
right here which is inside of our utilus


10817
29949.76 --> 6.558
folder I use the end end operator


10818
29952.878 --> 6.36
instead of the bitwise operator


10819
29956.318 --> 5.92
great so what we're going to do next is


10820
29959.238 --> 5.56
the ability to translate a layer so


10821
29962.238 --> 5.16
right now if I try and drag this nothing


10822
29964.798 --> 4.722
is happening so I can select it I can


10823
29967.398 --> 4.48
resize it and I can kind of move it in


10824
29969.52 --> 5.84
that way right but I would like to move


10825
29971.878 --> 5.6
it by pressing down and dragging it so


10826
29975.36 --> 6.358
let's go ahead inside of


10827
29977.478 --> 7.962
our app folder board board ID components


10828
29981.718 --> 6.322
canvas right here and in here where we


10829
29985.44 --> 6.64
have the layer preview we pass in the on


10830
29988.04 --> 7.4
layer pointer down and in here we


10831
29992.08 --> 5.878
already set the canvas state to


10832
29995.44 --> 4.6
translating which means that we have


10833
29997.958 --> 4.68
that logic finished remember in our


10834
30000.04 --> 6.64
previous module we had to kind of


10835
30002.638 --> 6.522
initiate the resizing logic which we did


10836
30006.68 --> 4.878
on this on pointer down here so when we


10837
30009.16 --> 5.158
click here this switched to resizing


10838
30011.558 --> 6.362
mode so now when I click here this


10839
30014.318 --> 6.56
switches to translating mode so all we


10840
30017.92 --> 6.478
have to do is modify the onp pointer


10841
30020.878 --> 5.84
move if we are translating so let's find


10842
30024.398 --> 5.602
our onp pointer move


10843
30026.718 --> 6.24
method it should be somewhere up here


10844
30030 --> 6.04
there we go so we have the case uh we


10845
30032.958 --> 5.322
have the case for resizing and now we


10846
30036.04 --> 4.16
have to add the case for


10847
30038.28 --> 5.358
translating so we are going to


10848
30040.2 --> 6.08
prioritize translating over resizing so


10849
30043.638 --> 6.522
let's go ahead and write if canvas


10850
30046.28 --> 5.958
state. mode is equal to Canvas mode


10851
30050.16 --> 4.28
translating and then we're going to go


10852
30052.238 --> 4.32
ahead and open this and we're going to


10853
30054.44 --> 5.798
map this with else


10854
30056.558 --> 7.042
if like that and then inside of here


10855
30060.238 --> 6.282
let's go ahead and add a console log


10856
30063.6 --> 4.56
translating like this just so we confirm


10857
30066.52 --> 5.08
that this is actually happening so


10858
30068.16 --> 6.04
inside of my terminal here if I move


10859
30071.6 --> 5.24
this there we go I am translating but if


10860
30074.2 --> 5.72
I move it like like this it's not firing


10861
30076.84 --> 6.32
that event only if I move it strictly on


10862
30079.92 --> 6.558
this layer great now we have to create a


10863
30083.16 --> 6.04
method uh called translate selected


10864
30086.478 --> 5.32
layers so let's go ahead and develop


10865
30089.2 --> 4.678
that method I'm going to develop it


10866
30091.798 --> 5.6
right here where we have resize selected


10867
30093.878 --> 6.162
layer so let's do const translate


10868
30097.398 --> 4.84
selected layers because this is going to


10869
30100.04 --> 5.12
be able to handle multiple layers later


10870
30102.238 --> 6.522
when we add a selection net it's going


10871
30105.16 --> 7.68
to be used mutation as always and let's


10872
30108.76 --> 7
go ahead and prepare this like


10873
30112.84 --> 6.638
that and now I want to D structure from


10874
30115.76 --> 6.84
the first argument the storage and


10875
30119.478 --> 6.4
self and from the second argument the


10876
30122.6 --> 7.32
point which is a type of point from my


10877
30125.878 --> 6.202
types canvas import and now in here I'm


10878
30129.92 --> 6.16
going to check if canvas


10879
30132.08 --> 5.638
State mode is anything other than canvas


10880
30136.08 --> 4.238
mode.


10881
30137.718 --> 5.52
translating in that case we can just


10882
30140.318 --> 5.362
break this function and now let's create


10883
30143.238 --> 5.48
an offset object so there's not going to


10884
30145.68 --> 5.24
be any uh any complicated calculation


10885
30148.718 --> 4.962
for this one so what we have to do is


10886
30150.92 --> 7.52
add an x coordinate to be Point dox


10887
30153.68 --> 8.24
minus canvas state. current dox and then


10888
30158.44 --> 7.48
we're going to have y to be pointy minus


10889
30161.92 --> 6.44
canvas state. current doy


10890
30165.92 --> 7.08
and then let's get all of our live


10891
30168.36 --> 8.038
layers with storage get


10892
30173 --> 7.718
layers and now let's go ahead and do for


10893
30176.398 --> 7.602
con ID of self.


10894
30180.718 --> 6.322
presence do


10895
30184 --> 5.08
selection const individual layer which


10896
30187.04 --> 4.278
we are selecting in the present is going


10897
30189.08 --> 6.92
to be Live


10898
30191.318 --> 8.442
layers. getet ID and if we can get that


10899
30196 --> 7.16
layer we are going to update its


10900
30199.76 --> 6.4
position using the x coordinate layer.


10901
30203.16 --> 8.12
getet X Plus offset


10902
30206.16 --> 8.76
dox and y layer. getet y


10903
30211.28 --> 3.64
plus offset


10904
30215.76 --> 7.638
doy like that and then outside of this


10905
30219.84 --> 9.118
four const we are simply going to do set


10906
30223.398 --> 8.762
State set canvas State mode canvas mode.


10907
30228.958 --> 5.962
translating and current is going to be


10908
30232.16 --> 4.558
the point from our event and now let's


10909
30234.92 --> 4.12
go ahead and add the dependencies here


10910
30236.718 --> 5.802
which are going to be the canvas


10911
30239.04 --> 6.24
State like that perfect so now we have


10912
30242.52 --> 6.08
this and now we can use this so let's


10913
30245.28 --> 8.84
use the uh translate selected layers


10914
30248.6 --> 6.68
down here in our pointer move where is


10915
30254.12 --> 2.72
it


10916
30255.28 --> 4.118
on pointer


10917
30256.84 --> 5.92
move so in here we are simply going to


10918
30259.398 --> 6.802
call translate selected layers and pass


10919
30262.76 --> 5.92
in current as the option and we also


10920
30266.2 --> 6.32
need to add this to our dependency array


10921
30268.68 --> 6.36
now like this so let's try it out if


10922
30272.52 --> 6.278
this is working and there we go as you


10923
30275.04 --> 7.24
can see I can now move my layers around


10924
30278.798 --> 5.802
perfect one thing that seems to be


10925
30282.28 --> 4.56
missing besides all the obvious fact


10926
30284.6 --> 4.92
that we are not controlling which layer


10927
30286.84 --> 5.52
is above another right is that I kind of


10928
30289.52 --> 5.64
cannot deselect this so when I click


10929
30292.36 --> 5.76
outside this should be deselected but it


10930
30295.16 --> 5.078
looks like no matter what I do unless I


10931
30298.12 --> 4.838
click on something else this will always


10932
30300.238 --> 6.72
stay selected so now I want to make sure


10933
30302.958 --> 7.44
that I can create the deselect


10934
30306.958 --> 5.92
option so first let's go back inside of


10935
30310.398 --> 5.84
the convas and let's add onp pointer


10936
30312.878 --> 6.562
down method so I'm going to go ahead and


10937
30316.238 --> 5.762
do this uh right above onp pointer up so


10938
30319.44 --> 5.92
let's do const onp pointer down to be


10939
30322 --> 6.36
used callback so not use memo use


10940
30325.36 --> 6.118
callback sorry not use mutation use


10941
30328.36 --> 8.278
callback and it's going to work with the


10942
30331.478 --> 5.16
event which is a type of react. pointer


10943
30336.92 --> 6.038
event and in here we're going to get the


10944
30339.878 --> 5.08
point using pointer event to Canvas


10945
30342.958 --> 4
Point method which we already have here


10946
30344.958 --> 4.28
we're going to pass the event and the


10947
30346.958 --> 8.122
camera and then we're going to check if


10948
30349.238 --> 8.362
convas state. mode is canvas mode


10949
30355.08 --> 4.878
inserting in that case we can break this


10950
30357.6 --> 5.48
method because obviously we don't want


10951
30359.958 --> 5.6
to prevent them from inserting something


10952
30363.08 --> 7.158
and then we're going to add a little


10953
30365.558 --> 7.08
commment here to do add case for


10954
30370.238 --> 5.08
drawing and for now what we're going to


10955
30372.638 --> 6.442
do is just use set convas


10956
30375.318 --> 6.4
State and do origin to be the point and


10957
30379.08 --> 5.2
mode to be canvas mode


10958
30381.718 --> 5.402
pressing like


10959
30384.28 --> 6.76
this and let's go ahead now and add the


10960
30387.12 --> 8.04
camera let's add the canvas state. mode


10961
30391.04 --> 6.04
set State and start drawing actually


10962
30395.16 --> 5.04
start drawing is what we're going to


10963
30397.08 --> 6.798
have later so we don't have that yet and


10964
30400.2 --> 5.96
we need set cona State here like that


10965
30403.878 --> 5.402
great so we have onp pointer down let's


10966
30406.16 --> 8.2
pend onp pointer down right here in the


10967
30409.28 --> 9.958
SVG element onp pointer down is going to


10968
30414.36 --> 7.08
be on pointer down like this and now I


10969
30419.238 --> 5.08
want to go ahead back inside of my on


10970
30421.44 --> 6.358
pointer up method right here and


10971
30424.318 --> 7.442
currently the only thing we do is we uh


10972
30427.798 --> 6.722
handle the inserting case here so let's


10973
30431.76 --> 6.878
go ahead and modify this a bit by by


10974
30434.52 --> 7
checking if canvas state. mode is in


10975
30438.638 --> 6.522
canvas mode.


10976
30441.52 --> 7.358
none or if


10977
30445.16 --> 5.88
whoops uh where was I okay on pointer up


10978
30448.878 --> 5.042
so we are adding another if Clause so if


10979
30451.04 --> 9.4
canvas State mode is canvas mode none or


10980
30453.92 --> 9.558
if canvas State mode is canvas mode.


10981
30460.44 --> 6.518
pressing in that case we're going to go


10982
30463.478 --> 7.84
ahead and set State set canas state to


10983
30466.958 --> 6.882
be mode canvas mode do none again so


10984
30471.318 --> 5
this will kind of unselect our layers


10985
30473.84 --> 6.718
and then we're going to add this to be


10986
30476.318 --> 5.882
in the else Clause so else if and that's


10987
30480.558 --> 4.84
important because we want this to


10988
30482.2 --> 6.48
overrule anything else and this is not


10989
30485.398 --> 7.802
enough by itself so for now what we can


10990
30488.68 --> 6.76
do is we can simply add a console log


10991
30493.2 --> 4.8
here


10992
30495.44 --> 4.6
unselect and we can try it out so if I


10993
30498 --> 4.68
go ahead here


10994
30500.04 --> 4.838
now and let's say I select something


10995
30502.68 --> 4.4
here and then if I click outside there


10996
30504.878 --> 5.122
we go you can see how unselect is being


10997
30507.08 --> 5.318
fired right because we have the case


10998
30510 --> 4.958
that now handles that and now using this


10999
30512.398 --> 4.722
on select event uh and you can see how


11000
30514.958 --> 5.402
it doesn't fire if you select on a


11001
30517.12 --> 5.358
specific element it only fires if you


11002
30520.36 --> 3.958
click outside of anything on something


11003
30522.478 --> 5
that's not a layer so now we're going to


11004
30524.318 --> 5.16
leverage that unselect event to deselect


11005
30527.478 --> 4.962
all of our


11006
30529.478 --> 4.362
layers so let's create a method called


11007
30532.44 --> 4.68
unselect


11008
30533.84 --> 6.798
layers and we can add that somewhere


11009
30537.12 --> 6.758
where we work with layers on Wheel on


11010
30540.638 --> 6.282
resize Handler pointer H okay here it is


11011
30543.878 --> 7.242
resize selected layer so let's add const


11012
30546.92 --> 6.92
unselect layers here to be use


11013
30551.12 --> 5
mutation let me just prepare this method


11014
30553.84 --> 2.28
here


11015
30556.16 --> 7.638
and in here I'm going to


11016
30558.44 --> 7.64
extract self and set my presence here


11017
30563.798 --> 6.642
and that is it all I'm going to do


11018
30566.08 --> 4.36
inside uh is going to be


11019
30571.2 --> 6.758
if


11020
30573 --> 8.04
self-presence selection length is more


11021
30577.958 --> 5.122
than zero so if we selected something in


11022
30581.04 --> 4.56
that case we're going to reset my


11023
30583.08 --> 5.238
presence by adding selection to be an


11024
30585.6 --> 4.878
empty array and we're also going to do


11025
30588.318 --> 4.24
add to history


11026
30590.478 --> 4.84
true like


11027
30592.558 --> 6.24
this and then let's go ahead and let's


11028
30595.318 --> 6.48
actually use this in the onp pointer up


11029
30598.798 --> 5.68
method which we just added this conso


11030
30601.798 --> 6.122
log so in here we're now going to add


11031
30604.478 --> 6
unselect layers like this and also let's


11032
30607.92 --> 5.718
go ahead and let's add that to our


11033
30610.478 --> 4.522
dependency array here so let's try that


11034
30613.638 --> 4.722
out now


11035
30615 --> 5.478
so if I go here and if I click outside


11036
30618.36 --> 4.72
there we go my layers are now


11037
30620.478 --> 5.32
successfully getting unselected when I


11038
30623.08 --> 5.158
click outside perfect so we can now move


11039
30625.798 --> 5.6
we can resize this is already starting


11040
30628.238 --> 6.522
to look like something right what we


11041
30631.398 --> 5.56
have to do next is we have to create an


11042
30634.76 --> 4.16
additional toolbar here which will open


11043
30636.958 --> 4.52
up when I select which will allow me to


11044
30638.92 --> 5.798
change the color of the element I'm


11045
30641.478 --> 5.802
selecting and also to change change the


11046
30644.718 --> 5.08
layer depth right so for example if I


11047
30647.28 --> 5
want to hide that uh if I want to hide


11048
30649.798 --> 4.562
this white element behind this black


11049
30652.28 --> 5.198
element I'm going to do that using that


11050
30654.36 --> 5.64
toolbar but we made so much progress


11051
30657.478 --> 4.48
already and the great thing about all of


11052
30660 --> 4.2
this is that we only have to write all


11053
30661.958 --> 4.962
of this logic once and then we just have


11054
30664.2 --> 5.278
to Simply add new elements inside of our


11055
30666.92 --> 3.798
layer preview component so don't worry


11056
30669.478 --> 3
it's not like we're going to have to do


11057
30670.718 --> 3.722
some huge amount of work for this


11058
30672.478 --> 4.92
elements the only one that's a little


11059
30674.44 --> 5.358
bit complex is the pen but again we


11060
30677.398 --> 4.642
finished majority of work already and


11061
30679.798 --> 4.562
also yeah if you try all of your undos


11062
30682.04 --> 4.8
should be working so both selecting and


11063
30684.36 --> 5.72
redoing all of that should be working uh


11064
30686.84 --> 6.68
nevertheless great great


11065
30690.08 --> 5.6
job so now let's go ahead and create the


11066
30693.52 --> 4.6
ability to change the color of our


11067
30695.68 --> 3.798
selected layer in order to do that we're


11068
30698.12 --> 3.64
going to have to create a component


11069
30699.478 --> 4
called selection tools which is going to


11070
30701.76 --> 2.92
appear right above our selected


11071
30703.478 --> 3.282
component


11072
30704.68 --> 5
so let's go back inside of our canvas


11073
30706.76 --> 4.4
component so that's in board board ID


11074
30709.68 --> 4.798
components


11075
30711.16 --> 6.6
canvas and right here outside of the SVG


11076
30714.478 --> 6.32
parent and below the toolbar let's go


11077
30717.76 --> 6.36
ahead and create uh our new component


11078
30720.798 --> 3.322
which is going to be called selection


11079
30725.558 --> 4.882
tools and now let's go ahead and passing


11080
30728.08 --> 5.318
the camera prop which is going to be our


11081
30730.44 --> 5.878
camera and set last used color which is


11082
30733.398 --> 5.282
going to be set last used color like


11083
30736.318 --> 4.4
this now let's go inside of the


11084
30738.68 --> 4.798
underscore components folder and let's


11085
30740.718 --> 7
create our selection


11086
30743.478 --> 5.962
tools. TSX let's mark this as use client


11087
30747.718 --> 6
and let's go ahead and create an


11088
30749.44 --> 6.118
interface selection tool tools props to


11089
30753.718 --> 5.642
accept the camera which is a type of


11090
30755.558 --> 7.4
camera from types canvas and let's use


11091
30759.36 --> 5.24
set last used color to accept a prop


11092
30762.958 --> 4
color


11093
30764.6 --> 6.278
oops which we also import from types


11094
30766.958 --> 8.28
canvas and it simply returns a void and


11095
30770.878 --> 6.962
then we can export con selection


11096
30775.238 --> 7.08
tools and very simply let's also


11097
30777.84 --> 4.478
memorize this so we can use Memo from


11098
30785.68 --> 5.92
react and let's add selection tools


11099
30789 --> 6
display name to be selection tools just


11100
30791.6 --> 6.878
so we get rid of the error and in here


11101
30795 --> 7.238
we can return a div selection


11102
30798.478 --> 6.042
tools and now let's just go ahead and D


11103
30802.238 --> 5.442
structure our props which is the camera


11104
30804.52 --> 6.24
and set last used color here and let's


11105
30807.68 --> 7.038
assign the props selection tool props


11106
30810.76 --> 6.6
selection tools props there we go now we


11107
30814.718 --> 5.442
can go back inside of our canvas


11108
30817.36 --> 5.68
component and import selection tools


11109
30820.16 --> 4.76
from do/ selection tools the same way we


11110
30823.04 --> 5.08
did with the code this presentence for


11111
30824.92 --> 6.6
example now let's focus on being inside


11112
30828.12 --> 5.678
of this selection tools right here uh


11113
30831.52 --> 4.878
let's go ahead and decide whether we


11114
30833.798 --> 5.68
should render this or not so con


11115
30836.398 --> 6
selection is going to come from use self


11116
30839.478 --> 6.32
which we can import from live blocks.


11117
30842.398 --> 6.882
config and let's go ahead and get self


11118
30845.798 --> 5.962
using me me. presence.


11119
30849.28 --> 5.118
selection like


11120
30851.76 --> 5.958
that and now we are going to reuse our


11121
30854.398 --> 6.602
hook use selection bounds so let's write


11122
30857.718 --> 7.322
const selection bounds to be use


11123
30861 --> 6.878
selection use selection bounds which we


11124
30865.04 --> 4.678
have from hooks use selection bounds


11125
30867.878 --> 6.722
right here where we have this big


11126
30869.718 --> 7.08
bounding box uh bounding box uh function


11127
30874.6 --> 3.92
so make sure you have that if you don't


11128
30876.798 --> 3.52
you can always visit my


11129
30878.52 --> 4.358
GitHub and now that we have the


11130
30880.318 --> 4.682
selection bounds here let's first do if


11131
30882.878 --> 4.44
there are no sele ction bounds we can


11132
30885 --> 4.318
simply break and return null because


11133
30887.318 --> 4.522
there's nothing we can calculate here


11134
30889.318 --> 4.522
now let's define the x coordinate which


11135
30891.84 --> 5.92
is going to be selection


11136
30893.84 --> 7
bounds. width ided 2 plus selection


11137
30897.76 --> 6.478
bounds. X Plus camera


11138
30900.84 --> 4.92
dox and y coordinate is simply going to


11139
30904.238 --> 7.08
be selection


11140
30905.76 --> 8.76
bounds do y plus camera doy like this


11141
30911.318 --> 6.802
and now let's go ahead and give this


11142
30914.52 --> 7.198
div a class name of


11143
30918.12 --> 8.438
absolute adding three rounded extra


11144
30921.718 --> 7.68
large background white shadow small


11145
30926.558 --> 4.482
border flex and


11146
30929.398 --> 4.48
select


11147
30931.04 --> 3.8
none and now let's go ahead and pass in


11148
30933.878 --> 5.52
the


11149
30934.84 --> 8
style transform open btic


11150
30939.398 --> 8.522
Translate and in here let's go ahead and


11151
30942.84 --> 5.08
let's pass the first argument to be uh


11152
30948.558 --> 9.08
calculate go ahead and write X in


11153
30952.44 --> 7.64
pixels minus 50% like this and then the


11154
30957.638 --> 9.16
second is going to be calculate


11155
30960.08 --> 8.76
again y value Min - 16 in pixels minus


11156
30966.798 --> 5.92
100% like


11157
30968.84 --> 6.558
that and let's see if we can already see


11158
30972.718 --> 5.642
this so so if I select something there


11159
30975.398 --> 6.56
we go you can see how it appears nicely


11160
30978.36 --> 5.4
above and follows my uh follows my


11161
30981.958 --> 4
selection right here and you can see how


11162
30983.76 --> 5.118
it works even when I move the camera


11163
30985.958 --> 4.92
around perfect so using this we are now


11164
30988.878 --> 4.642
going to be able to create a component


11165
30990.878 --> 5.242
called Color Picker which is then going


11166
30993.52 --> 6.52
to change the used color for this


11167
30996.12 --> 5.838
specific layer so let's go ahead and


11168
31000.04 --> 6.16
let's do that so I'm going to replace


11169
31001.958 --> 6.52
this with a Color Picker


11170
31006.2 --> 4.4
component and I'm going to pass in the


11171
31008.478 --> 5.362
onchange prop which for now is just


11172
31010.6 --> 7.198
going to be an empty object so let's go


11173
31013.84 --> 7
inside here and create the Color


11174
31017.798 --> 6.08
Picker let's mark this is use


11175
31020.84 --> 7.558
client and let's go ahead and create an


11176
31023.878 --> 6.402
interface Color Picker props on change


11177
31028.398 --> 3.802
very simply it's going to accept a color


11178
31030.28 --> 5.198
which is a type of color from types


11179
31032.2 --> 6.518
canvas and return aoid and let's export


11180
31035.478 --> 3.24
con Color Picker


11181
31039.12 --> 7
here this one is very simply going to


11182
31042.16 --> 6.798
accept on change from our Color Picker


11183
31046.12 --> 5.96
props here and let's return a div Color


11184
31048.958 --> 6.802
Picker for now just so we can go back


11185
31052.08 --> 7.878
inside of our selection tools and import


11186
31055.76 --> 7.16
the Color Picker from do/ Color Picker


11187
31059.958 --> 5
like this and now when I click here it


11188
31062.92 --> 3.68
should say a Color Picker so we can


11189
31064.958 --> 4.322
continue working in the Color Picker


11190
31066.6 --> 6.358
component now uh so let's go ahead and


11191
31069.28 --> 6.358
quickly create a uh Color Picker sorry a


11192
31072.958 --> 6.6
color button so let's first do interface


11193
31075.638 --> 6
color button props to be on click and it


11194
31079.558 --> 4.482
will send the selected color which we


11195
31081.638 --> 5.202
already have imported from types canvas


11196
31084.04 --> 5.598
and the current color representing that


11197
31086.84 --> 4
button and now let's do const color


11198
31089.638 --> 3.962
button


11199
31090.84 --> 5.32
here and in here we're going to use use


11200
31093.6 --> 5
those color button


11201
31096.16 --> 6
props and we are going to extract on


11202
31098.6 --> 5.798
click and the color like that great so


11203
31102.16 --> 5.68
we have the color button here prepared


11204
31104.398 --> 6.32
so we can return a div color


11205
31107.84 --> 5.28
button so now inside of the Color Picker


11206
31110.718 --> 5.68
we're going to use that color button so


11207
31113.12 --> 9.438
let's go ahead and give this div a class


11208
31116.398 --> 9.962
name Flex Flex wrap Gap to items Center


11209
31122.558 --> 7.68
Max width of 164


11210
31126.36 --> 8.958
pixels adding right of two margin right


11211
31130.238 --> 7.282
of two border right and Border neutral


11212
31135.318 --> 4.56
200 and inside of here I'm going to


11213
31137.52 --> 4.48
render a color button like this and we


11214
31139.878 --> 4.52
can copy and paste it a couple of times


11215
31142 --> 5
and there we go you can now see uh that


11216
31144.398 --> 4.682
we can render multiple color buttons


11217
31147 --> 4.238
here so now obviously we're going to


11218
31149.08 --> 5.84
style this better so it actually shows


11219
31151.238 --> 6.762
just a small picker for the next color


11220
31154.92 --> 5.798
so let me just remove this and let's


11221
31158 --> 4.16
work with one example for now so on


11222
31160.718 --> 3.76
click for now it's just going to be an


11223
31162.16 --> 5.68
empty well we can pass in the actual


11224
31164.478 --> 6.442
onchange right we have it in the props


11225
31167.84 --> 6.638
onchange and the color can be whatever


11226
31170.92 --> 5
we Define in RGB values so for example R


11227
31174.478 --> 5.962
can be to be


11228
31175.92 --> 7.718
243 then G can be 82 and then B can be


11229
31180.44 --> 6.798
35 for example and now let's go ahead


11230
31183.638 --> 5.402
and use this inside of the color button


11231
31187.238 --> 3.48
and let me just show something here so


11232
31189.04 --> 3.08
we can see it so we have color button


11233
31190.718 --> 3.122
here and now we're going to use those


11234
31192.12 --> 3.438
props to actually turn this into


11235
31193.84 --> 4.28
something so first things first I want


11236
31195.558 --> 4.202
to use the actual button element I'm


11237
31198.12 --> 6.518
going to go ahead and give it a class


11238
31199.76 --> 10.038
name of uh width eight height e items


11239
31204.638 --> 11
Center Flex justify Center hover opacity


11240
31209.798 --> 5.84
75 and transition let's give it an on


11241
31216.36 --> 4.72
click to Be an Arrow function which


11242
31219.44 --> 4.438
calls the on click and passes in the


11243
31221.08 --> 5.6
current color for this button and inside


11244
31223.878 --> 8.482
of this button we're going to have a div


11245
31226.68 --> 8.76
a class name of h8 W8 rounded medium


11246
31232.36 --> 6.72
border border neutral


11247
31235.44 --> 6.6
300 and more importantly than


11248
31239.08 --> 5.398
that it's going to have a style


11249
31242.04 --> 4.598
component


11250
31244.478 --> 4.642
background which is going to use our


11251
31246.638 --> 5.882
color to CSS which we've created when we


11252
31249.12 --> 5.56
needed to transfer the fill property in


11253
31252.52 --> 5.4
the rectangle so it's from liby utils


11254
31254.68 --> 7.84
right here color to CSS and it simply


11255
31257.92 --> 7.16
transfers our RGB object into a hex code


11256
31262.52 --> 6.32
so let's use that color to CSS and let's


11257
31265.08 --> 6.12
pass in the color and this can be a self


11258
31268.84 --> 4.558
closing tag it doesn't need an end tag


11259
31271.2 --> 5.518
like this and there we go it can can now


11260
31273.398 --> 6.48
see our beautiful color right here so


11261
31276.718 --> 6.76
this is what I recommend you do


11262
31279.878 --> 5.802
next if you want it you can now create


11263
31283.478 --> 4.92
as many of these color buttons as you


11264
31285.68 --> 5.958
want here or if you want the exact same


11265
31288.398 --> 5.4
ones you can go and find inside of my


11266
31291.638 --> 4.882
repository inside of board ID components


11267
31293.798 --> 5.242
simply find the Color Picker inside of


11268
31296.52 --> 5.76
my repository


11269
31299.04 --> 5.198
here and in here you can just copy uh


11270
31302.28 --> 4.16
all of these buttons which I have


11271
31304.238 --> 4.042
prepared for you right so there's no


11272
31306.44 --> 3.358
point in writing all of this out if you


11273
31308.28 --> 3.438
want to change the colors to something


11274
31309.798 --> 4.042
else so I'm going to replace all of my


11275
31311.718 --> 3.722
color buttons here with those there we


11276
31313.84 --> 4
go let me zoom out so all of this should


11277
31315.44 --> 4.798
be in one line like this and there we go


11278
31317.84 --> 6.558
these are the colors that I like they're


11279
31320.238 --> 6.602
kind of flat colors great and now right


11280
31324.398 --> 4.282
now if you click on them nothing happens


11281
31326.84 --> 4.878
so what we have to do is we have to


11282
31328.68 --> 6.038
actually create this method inside of


11283
31331.718 --> 6.362
our selection tools


11284
31334.718 --> 6.92
or for the onchange of the Color


11285
31338.08 --> 6.96
Picker so inside of the selection tools


11286
31341.638 --> 8.722
here let's go ahead and let's create a


11287
31345.04 --> 8.598
method called Uh set fill so const set


11288
31350.36 --> 5.16
pill is going to be use mutation from


11289
31353.638 --> 5.282
live


11290
31355.52 --> 7.24
blocks uh config right


11291
31358.92 --> 5.958
here and let me just go ahead and return


11292
31362.76 --> 2.118
this


11293
31365.52 --> 4.64
this and we are going to extract from


11294
31368.638 --> 3.32
use mutation


11295
31370.16 --> 5.398
here


11296
31371.958 --> 6.722
storage and we are also going to extract


11297
31375.558 --> 7.522
pill which is a type of color which you


11298
31378.68 --> 7.92
can import uh from types


11299
31383.08 --> 5.92
canvas and now let's go ahead and do con


11300
31386.6 --> 4.718
live layers


11301
31389 --> 6.16
storage get


11302
31391.318 --> 7.282
layers and then set last used color to


11303
31395.16 --> 6.078
be the new fill color which we've just


11304
31398.6 --> 5.718
selected and then we're going to do for


11305
31401.238 --> 6.962
the selection which we loaded right here


11306
31404.318 --> 5.92
above for the layer we are selecting for


11307
31408.2 --> 4.758
each


11308
31410.238 --> 7.802
ID live


11309
31412.958 --> 8.882
layers doget ID question mark in case it


11310
31418.04 --> 5.72
doesn't exist do set the fill value is


11311
31421.84 --> 4.76
going to be


11312
31423.76 --> 6.32
like that and let's go ahead and make


11313
31426.6 --> 6.038
sure that we added selection and set


11314
31430.08 --> 5.638
last used color in the dependency array


11315
31432.638 --> 4.482
of use mutation from live kit uh from


11316
31435.718 --> 3.962
live


11317
31437.12 --> 6.16
blocks let's go ahead and use set fill


11318
31439.68 --> 6.24
here now and let's simply uh pass it


11319
31443.28 --> 4.358
here for the un Change and let's go


11320
31445.92 --> 3.52
ahead and see if this is already working


11321
31447.638 --> 5.32
so if I select this one and change the


11322
31449.44 --> 7.56
color there we go we can now officially


11323
31452.958 --> 7.6
change colors of our uh layers great so


11324
31457 --> 7.718
how and why does this work well you have


11325
31460.558 --> 6.802
to ensure that inside of your app


11326
31464.718 --> 5.6
folder uh board ID components in the


11327
31467.36 --> 5.518
rectangle here you are properly using


11328
31470.318 --> 4.522
the fill extraction from the layer so


11329
31472.878 --> 5
make sure that you didn't let leave this


11330
31474.84 --> 6.2
as hardcoded black right we only use the


11331
31477.878 --> 5.802
black color well initially but also if


11332
31481.04 --> 6.438
for any reason we don't have The Fill


11333
31483.68 --> 5.878
property great so we wrapped that up and


11334
31487.478 --> 4.76
now what I want to do is I want to


11335
31489.558 --> 5.16
create a quick little additional action


11336
31492.238 --> 5.48
here to delete the layer because it's


11337
31494.718 --> 5.482
going to be much simpler to do than our


11338
31497.718 --> 4.76
actions to move layers up and down which


11339
31500.2 --> 7.038
is going to be in a separate


11340
31502.478 --> 8.24
chapter so let's go inside of our hooks


11341
31507.238 --> 6.202
folder and let's create a new hook


11342
31510.718 --> 4.322
called use


11343
31513.44 --> 3.16
delete


11344
31515.04 --> 4.8
layers.


11345
31516.6 --> 6.08
DS let's import use self from live


11346
31519.84 --> 6.038
blocks config and use mutation from live


11347
31522.68 --> 4.958
blocks config as well and Export con use


11348
31525.878 --> 4.6
delete


11349
31527.638 --> 5.882
layers first let's get the selection so


11350
31530.478 --> 7.32
we know which layers to delete so we get


11351
31533.52 --> 6.6
me me. presence do


11352
31537.798 --> 6.402
selection and then let's simply return


11353
31540.12 --> 7.358
use mutation here


11354
31544.2 --> 5.24
let's prepare it like that and in here


11355
31547.478 --> 5.32
we're going to go ahead and


11356
31549.44 --> 5.32
extract uh the storage and set my


11357
31552.798 --> 5.642
presence from the first


11358
31554.76 --> 7.958
argument my presence like that so let's


11359
31558.44 --> 4.278
get live layers to be


11360
31563.238 --> 7.602
storage doget


11361
31566.238 --> 7.442
layers and con live layer IDs to be


11362
31570.84 --> 4.16
storage doget


11363
31573.68 --> 4.84
layer


11364
31575 --> 7.12
IDs and now we're going to do four const


11365
31578.52 --> 6.958
ID of selection which we have live


11366
31582.12 --> 7.24
layers. delete


11367
31585.478 --> 7.24
ID and then const index live


11368
31589.36 --> 7.518
layers dot sorry live layer


11369
31592.718 --> 7
IDs do index of ID which we are trying


11370
31596.878 --> 5.162
to remove we're going to check if index


11371
31599.718 --> 6.802
is not minus one meaning that it exists


11372
31602.04 --> 6.96
in the list of array live layer IDs do


11373
31606.52 --> 4.56
delete using that


11374
31609 --> 7
index and then what we're going to do


11375
31611.08 --> 8.6
outside of this for Loop is set my


11376
31616 --> 7.318
presence selection to be an empty array


11377
31619.68 --> 7.76
and add to history


11378
31623.318 --> 7.92
true like that so now let's go ahead


11379
31627.44 --> 5.518
back inside of our selection tools


11380
31631.238 --> 5.16
component where we just add added the


11381
31632.958 --> 6.76
set fill for the Color Picker and now


11382
31636.398 --> 5.762
what we can do is we can import that


11383
31639.718 --> 6.122
hook so con delete


11384
31642.16 --> 5.68
layers use delete layers from hooks use


11385
31645.84 --> 4.798
delete layers make sure you added the


11386
31647.84 --> 5.118
import uh hooks use delete layers like


11387
31650.638 --> 5.16
that and now what we have to do is


11388
31652.958 --> 4.402
simply add a little button here so let


11389
31655.798 --> 3.84
me go ahead and import the following we


11390
31657.36 --> 5.92
need to import the button component from


11391
31659.638 --> 7.24
component UI button and we also need to


11392
31663.28 --> 6.278
import hint from components hint and I


11393
31666.878 --> 7.44
would also like to


11394
31669.558 --> 8
import trash 2 from Lucid react as an


11395
31674.318 --> 5.442
icon great so now let's go just below


11396
31677.558 --> 5.602
the Color Picker and let's add a div


11397
31679.76 --> 6.84
here with a class name Flex item Center


11398
31683.16 --> 6.88
padding left of two margin left of two


11399
31686.6 --> 8.08
border left and Border


11400
31690.04 --> 6.678
neutral 200 let's add our hint


11401
31694.68 --> 4.16
component and inside we're going to


11402
31696.718 --> 4.92
render our button component so let's


11403
31698.84 --> 6.2
give the hint a label of delete very


11404
31701.638 --> 5.32
simply and let's give the button an icon


11405
31705.04 --> 6.438
of trash


11406
31706.958 --> 8.962
two and let's give it a variant of board


11407
31711.478 --> 6.882
size of Icon and on click delete


11408
31715.92 --> 5.558
layers so make sure you've added delete


11409
31718.36 --> 5.4
layers right here from use delete layers


11410
31721.478 --> 5.48
and there we go and as you can see we


11411
31723.76 --> 4.718
clearly have like extra borders here


11412
31726.958 --> 3.802
that's because in between here there


11413
31728.478 --> 4.16
going to be two more buttons for


11414
31730.76 --> 4.44
position change so let's try it out if I


11415
31732.638 --> 5.16
click delete oh it looks like it is


11416
31735.2 --> 4.678
deleting but our previous one which I


11417
31737.798 --> 5.642
think is because of something missing


11418
31739.878 --> 6.722
inside of our dependencies array okay so


11419
31743.44 --> 6.16
I'm going to go ahead and quickly debug


11420
31746.6 --> 6.48
this so let's try this I didn't change


11421
31749.6 --> 6.878
anything yet but I think I it's inside


11422
31753.08 --> 6.478
of the Ed delete layers uh my dependency


11423
31756.478 --> 5.882
array is empty but I rely on the


11424
31759.558 --> 6.16
selection from here so let's go ahead


11425
31762.36 --> 6.198
and ensure that we passing the


11426
31765.718 --> 5.122
selection inside of my use mutation


11427
31768.558 --> 4.562
right here so this selection gets used


11428
31770.84 --> 4.76
this is inside of used delete layers and


11429
31773.12 --> 6.198
nothing else is changed let's try out


11430
31775.6 --> 7.56
now and there we go now exactly what I


11431
31779.318 --> 5.762
click gets deleted perfect so we have


11432
31783.16 --> 4.88
the this working we can change colors we


11433
31785.08 --> 5.96
can delete we can move we can resize in


11434
31788.04 --> 6.278
every direction perfect what we have to


11435
31791.04 --> 5.678
do next is layer moving layers up and


11436
31794.318 --> 4.842
down above another and then we're going


11437
31796.718 --> 4.322
to go ahead and wrap it up with our


11438
31799.16 --> 4
selection net so that we can select


11439
31801.04 --> 3.56
multiple items at once and then we're


11440
31803.16 --> 3.76
going to go ahead and create a little


11441
31804.6 --> 4.798
pen effect and then easily add all other


11442
31806.92 --> 5.76
elements great great


11443
31809.398 --> 7
job so let's wrap up our sele selection


11444
31812.68 --> 5.84
tools with the ability to change whether


11445
31816.398 --> 5.16
this is in the Forefront or in the


11446
31818.52 --> 6.6
background of an element so let's go


11447
31821.558 --> 6
inside of our selection tools component


11448
31825.12 --> 5.48
so I'm going to close everything here


11449
31827.558 --> 5.32
and go inside of the app folder board


11450
31830.6 --> 5.16
components and in here we have the


11451
31832.878 --> 5.402
selection tools right here and let's go


11452
31835.76 --> 4.958
ahead and just add the buttons so we're


11453
31838.28 --> 5.08
going to go ahead after the Color Picker


11454
31840.718 --> 5.442
and add a div to the two buttons which


11455
31843.36 --> 5.72
we're going to have let's give their wer


11456
31846.16 --> 7.52
a class name of flex Flex column so


11457
31849.08 --> 8.12
they're one above another and GAP y


11458
31853.68 --> 5.44
0.5 and now let's add a hint here and a


11459
31857.2 --> 5.198
button


11460
31859.12 --> 7.518
inside the hint is going to have a label


11461
31862.398 --> 7.602
of bring to front and the icon we're


11462
31866.638 --> 5.32
going to use is bring to front from


11463
31870 --> 4.28
Lucid react so make sure you import


11464
31871.958 --> 6.322
bring bring to front from Lucid react


11465
31874.28 --> 5.598
and you can also import send to back


11466
31878.28 --> 4.32
from Lucid react because we're going to


11467
31879.878 --> 6.242
need that as well so let's go ahead and


11468
31882.6 --> 6.68
give this button a variant of word and


11469
31886.12 --> 5.16
the size of Icon and now we can copy and


11470
31889.28 --> 4.64
paste this hint in the entire button


11471
31891.28 --> 5.358
inside of it with an alternative text


11472
31893.92 --> 6.28
send to back and let's give it this a


11473
31896.638 --> 7.84
side of bottom and this one is going to


11474
31900.2 --> 6.32
render send to back icon so let's go


11475
31904.478 --> 4.042
ahead and see how this looks now there


11476
31906.52 --> 4.16
we go so you can see that this is an


11477
31908.52 --> 4.6
icon which indicates that this is going


11478
31910.68 --> 4.038
to be above those two other elements and


11479
31913.12 --> 4.04
this one is an icon which indicates that


11480
31914.718 --> 4.282
it's kind of going behind those two


11481
31917.16 --> 4.718
elements great so we're going to go


11482
31919 --> 6.52
ahead and Implement those two functions


11483
31921.878 --> 7.122
now so let's go ahead uh and let's


11484
31925.52 --> 6
create our move to back


11485
31929 --> 6.08
function so I'm going to expand this as


11486
31931.52 --> 5.32
much as I can here and I will also like


11487
31935.08 --> 5.2
prepare some two elements here so we can


11488
31936.84 --> 5.68
try it out so let's go ahead here in the


11489
31940.28 --> 6.598
beginning above set fill and let's do


11490
31942.52 --> 4.358
const move to back to be use


11491
31947.2 --> 8.84
mutation let me prepare it like this and


11492
31951.44 --> 4.6
from the props let's extract the


11493
31956.08 --> 4.638
storage and then let's do const live


11494
31958.718 --> 4.202
layer IDs to be


11495
31960.718 --> 3.402
storage. getet


11496
31962.92 --> 5.16
layer


11497
31964.12 --> 8.16
IDs and then let's create the Matrix of


11498
31968.08 --> 8.36
indic indices the the plural for index


11499
31972.28 --> 5.56
const indices is going to be an array


11500
31976.44 --> 3.438
and let's define that it's going to be


11501
31977.84 --> 5.2
an array of numbers like


11502
31979.878 --> 7.52
this and then let's create a temporary


11503
31983.04 --> 6.72
array here live layer IDs to


11504
31987.398 --> 4.762
array and then we're going to iterate


11505
31989.76 --> 5.558
over them and move their position so SEL


11506
31992.16 --> 5.52
let index is going to be zero it's going


11507
31995.318 --> 4.282
to go to the length of the array and


11508
31997.68 --> 5.278
iterate over each


11509
31999.6 --> 7.52
turn if selection


11510
32002.958 --> 7.722
includes array and the current iteration


11511
32007.12 --> 6.56
in that case indices push current


11512
32010.68 --> 5.32
iteration like that and then let's go


11513
32013.68 --> 5.92
ahead and create another for Loop here


11514
32016 --> 6.04
so for let I is equal to z i is less


11515
32019.6 --> 5.24
than indices do length so of the maximum


11516
32022.04 --> 6.198
of that array and let's


11517
32024.84 --> 6.478
increase uh our index at the end live


11518
32028.238 --> 7.362
layer IDs do move


11519
32031.318 --> 6.442
indices I and I here like that and make


11520
32035.6 --> 4.48
sure to add the selection in the


11521
32037.76 --> 5.038
dependency array of the use mutation so


11522
32040.08 --> 5.84
basically our positioning for what is


11523
32042.798 --> 5.362
above and what is behind is going to be


11524
32045.92 --> 4.718
controlled by their position in the


11525
32048.16 --> 5.68
array so let's go ahead and find our


11526
32050.638 --> 4.442
send to back option here and let's add


11527
32053.84 --> 5.118
on click


11528
32055.08 --> 5.76
here move to back let's save the file


11529
32058.958 --> 4.402
and let's see if we can already test


11530
32060.84 --> 6.52
this out whether it's working or not so


11531
32063.36 --> 5.76
for example I have this uh green box and


11532
32067.36 --> 4
I want to move it behind this one if I


11533
32069.12 --> 4.32
click Send to back there we go you can


11534
32071.36 --> 5.4
see how it's being sent to back let me


11535
32073.44 --> 6.16
try with this one there we go if I try


11536
32076.76 --> 5.558
with this great so now we have to create


11537
32079.6 --> 6.08
an equivalent but to bring something to


11538
32082.318 --> 6.042
front so let's go ahead and copy this


11539
32085.68 --> 6.24
method because it's going to be quite


11540
32088.36 --> 6.92
similar so let me just copy the entire


11541
32091.92 --> 6.44
move to back method here and let's


11542
32095.28 --> 5.198
create this one and name it move to


11543
32098.36 --> 4.8
front like


11544
32100.478 --> 5.4
this so the first part of the function


11545
32103.16 --> 5.158
is going to stay the same but we are


11546
32105.878 --> 5.722
going to have a different for Loop here


11547
32108.318 --> 6.4
at the end so the way we create indices


11548
32111.6 --> 7.038
is is going to stay exactly like this


11549
32114.718 --> 6.52
and then let's write here for let I to


11550
32118.638 --> 5.08
be not zero but we're going to start


11551
32121.238 --> 7
from the end of the array so indis say.


11552
32123.718 --> 6.722
length like that minus one and the


11553
32128.238 --> 5.56
maximum iteration is going to be when


11554
32130.44 --> 5.038
the number is higher or equal than zero


11555
32133.798 --> 4.68
and we're going to go in the opposite


11556
32135.478 --> 7.602
direction so IUS minus and then let's do


11557
32138.478 --> 8.562
live layer IDs do remove sorry


11558
32143.08 --> 6.12
move in the first argument indices and


11559
32147.04 --> 6.918
the index and in the second one array.


11560
32149.2 --> 9.88
length -1 minus in parentheses indices


11561
32153.958 --> 7
do length -1 minus I like that and make


11562
32159.08 --> 4.238
sure you have the selection inside of


11563
32160.958 --> 5.042
your dependency array and now let's use


11564
32163.318 --> 5.122
this move to front here and let's go


11565
32166 --> 5.68
ahead and give it to this function to


11566
32168.44 --> 5.56
this button on click where we have the


11567
32171.68 --> 4.638
the icon bring to front so let's go


11568
32174 --> 3.878
ahead if and see if that works so if I


11569
32176.318 --> 3.56
click on the one behind and click bring


11570
32177.878 --> 3.92
to front there we go that brings it to


11571
32179.878 --> 4.36
the front if I go ahead and click bring


11572
32181.798 --> 5.562
to front here brings it to the front if


11573
32184.238 --> 6.08
I click on the white one it's brought to


11574
32187.36 --> 5.48
the front perfect so we just created all


11575
32190.318 --> 5.762
the functionalities uh which we need


11576
32192.84 --> 5.84
here uh for layer positioning for


11577
32196.08 --> 4.84
changing different colors and for


11578
32198.68 --> 4.638
deleting what we're going to do next is


11579
32200.92 --> 5.52
create our selection net so that we can


11580
32203.318 --> 6.56
do this with multiple elements at


11581
32206.44 --> 6.72
once so in order to create the selection


11582
32209.878 --> 6.162
net we have to follow the flow of events


11583
32213.16 --> 6.2
happening to make this easier for us to


11584
32216.04 --> 6.4
understand so the selection net will


11585
32219.36 --> 5.4
start on Mouse Point down so let's


11586
32222.44 --> 5.198
confirm to have that we have an on


11587
32224.76 --> 5.478
pointer down event here so in this on


11588
32227.638 --> 5.08
pointer down event what's important is


11589
32230.238 --> 6
that we set the canvas state with an


11590
32232.718 --> 6.562
origin and conas mode pressing and then


11591
32236.238 --> 6.442
what we can do is go inside of our on


11592
32239.28 --> 5.358
pointer move method and in here add a


11593
32242.68 --> 3.798
case for what we want to happen if we


11594
32244.638 --> 3.76
are just pressing so if we are not


11595
32246.478 --> 5.042
translating and we are not resizing


11596
32248.398 --> 6.16
we're just pressing on the canvas so


11597
32251.52 --> 4.68
let's go ahead and do another main if


11598
32254.558 --> 5.68
which is going to replace this below


11599
32256.2 --> 6.118
with an else if so if canvas state. mode


11600
32260.238 --> 3.442
is canvas mode


11601
32262.318 --> 4.282
do


11602
32263.68 --> 5.24
pressing in that case we're going to go


11603
32266.6 --> 4.198
ahead and change this to be else if


11604
32268.92 --> 4.12
which is important because we want this


11605
32270.798 --> 4.44
to be the


11606
32273.04 --> 6.24
priority in that case we're going to go


11607
32275.238 --> 7.24
ahead and call start multi


11608
32279.28 --> 6.358
selection and we're going to pass in uh


11609
32282.478 --> 5.682
the current and the canvas State


11610
32285.638 --> 6.442
origin so now we have to create the


11611
32288.16 --> 6.638
start multi selection method so let's go


11612
32292.08 --> 5.318
ahead and find where is the right place


11613
32294.798 --> 6
to put this so I want to do it somewhere


11614
32297.398 --> 6.362
where we handle layers so let's do it


11615
32300.798 --> 5.52
just above this resize selected layers


11616
32303.76 --> 5.198
let's write const start M multi


11617
32306.318 --> 4.722
selection to be use callback not use


11618
32308.958 --> 6.122
mutation so just use


11619
32311.04 --> 6.32
callback and inside of here let's repair


11620
32315.08 --> 6.08
this with an empty dependency array we


11621
32317.36 --> 5.84
are going to accept Uh current to be a


11622
32321.16 --> 4.718
type of of point which we have from


11623
32323.2 --> 5.08
canvas types from types canvas and


11624
32325.878 --> 4.08
origin to be Point as well so we we're


11625
32328.28 --> 2.438
going to know where it started and where


11626
32329.958 --> 3.642
it


11627
32330.718 --> 4.6
ends and now let's go ahead and write if


11628
32333.6 --> 6.038
math.


11629
32335.318 --> 9.722
absolute c.x minus origin


11630
32339.638 --> 7.442
dox plus math do whoops so this is uh


11631
32345.04 --> 3.48
yes is still inside of the if Clause so


11632
32347.08 --> 3.878
another math


11633
32348.52 --> 4.718
absolute which is going to say if


11634
32350.958 --> 6.402
current do


11635
32353.238 --> 7
y minus origin doy let me go ahead and


11636
32357.36 --> 5.76
collapse this so it's maybe easier for


11637
32360.238 --> 7.4
all of us to


11638
32363.12 --> 8.72
understand so if math absolute current


11639
32367.638 --> 7.442
dox minus originx plus math absolute


11640
32371.84 --> 5.32
currenty coordinate minus originy


11641
32375.08 --> 5.92
coordinate is


11642
32377.16 --> 6.558
less is sorry High uh higher than five


11643
32381 --> 4.238
inex that case we're going to go ahead


11644
32383.718 --> 5.84
and write set


11645
32385.238 --> 9.602
State set canvas State mode canvas mode.


11646
32389.558 --> 7.68
selection net origin and current so why


11647
32394.84 --> 5.558
more than five what does that mean


11648
32397.238 --> 4.802
basically we decide to start the multi


11649
32400.398 --> 3.56
selection only when the difference


11650
32402.04 --> 4.12
between the two Origin and current


11651
32403.958 --> 4.68
points is larger than five so this is


11652
32406.16 --> 5.28
just a threshold which we've established


11653
32408.638 --> 6.08
that is enough for us to say okay what


11654
32411.44 --> 5.878
this user is trying to do is initiate a


11655
32414.718 --> 4.882
selection net because just by clicking


11656
32417.318 --> 4.122
on our canvas that doesn't mean


11657
32419.6 --> 3.718
necessarily that they are trying to


11658
32421.44 --> 4.68
change the canvas state to to the


11659
32423.318 --> 5
selection net only if they hold and drag


11660
32426.12 --> 4.598
for a bit so that the difference between


11661
32428.318 --> 3.962
these two points is so obvious that we


11662
32430.718 --> 3.402
can use we can notice it on our


11663
32432.28 --> 5.678
threshold that's when we're going to


11664
32434.12 --> 6.48
activate this canvas state right


11665
32437.958 --> 5
here so let's see if we can maybe


11666
32440.6 --> 4.278
console log that already so I'm going to


11667
32442.958 --> 7.242
add a console log


11668
32444.878 --> 6.6
here attempting to selection net it


11669
32450.2 --> 4.72
doesn't matter something that you can


11670
32451.478 --> 6.24
recognize right so let me go ahead


11671
32454.92 --> 5.24
here and just clicking does nothing but


11672
32457.718 --> 5.92
you can see if I hold and


11673
32460.16 --> 5.558
drag and kind of make a space then it


11674
32463.638 --> 5.042
triggers that if I just click nothing


11675
32465.718 --> 6.24
happens if I hold nothing happens but if


11676
32468.68 --> 6.118
I click hold and move it then that


11677
32471.958 --> 5.722
indicates the change right so number


11678
32474.798 --> 4.52
five is just uh like a magic it seems


11679
32477.68 --> 3.118
like it's a magic number usually there


11680
32479.318 --> 3.882
is a practice when you're working


11681
32480.798 --> 4.202
companies this is called a magic number


11682
32483.2 --> 3.88
and this is not like a good thing to


11683
32485 --> 3.6
just put in your code but this is a


11684
32487.08 --> 3.28
tutorial so you know I don't really have


11685
32488.6 --> 4.44
the highest standards right now because


11686
32490.36 --> 4.48
I'm trying to explain something here uh


11687
32493.04 --> 5.438
but you would probably store this in a


11688
32494.84 --> 5.84
constant for example uh selection net


11689
32498.478 --> 4.442
threshold or something like that right


11690
32500.68 --> 3.52
that would be a better practice to do


11691
32502.92 --> 3.44
but I'm going to leave it like this for


11692
32504.2 --> 4.32
now just not to uh create any more


11693
32506.36 --> 4.64
complex code because this is complex


11694
32508.52 --> 5.68
enough already so just confirm that this


11695
32511 --> 5.6
is working for you and now what I we


11696
32514.2 --> 6.278
what I want to do is go back inside of


11697
32516.6 --> 5.878
the onp pointer move method and now


11698
32520.478 --> 6.362
we're going to go ahead and add another


11699
32522.478 --> 7.042
else if here before the uh translate


11700
32526.84 --> 5.958
selected layers here so let's go ahead


11701
32529.52 --> 5.64
and inject our l if here again let's


11702
32532.798 --> 8.362
open it and let's just prepare it like


11703
32535.16 --> 8.718
this so else if canvas state. mode is


11704
32541.16 --> 6.44
equal to Canvas


11705
32543.878 --> 6.76
mode. selection net then we're going to


11706
32547.6 --> 4.48
go ahead and do update selection net and


11707
32550.638 --> 3.362
we're going to pass in the


11708
32552.08 --> 4.68
current and we're going to pass in the


11709
32554 --> 5.28
convas state


11710
32556.76 --> 4.68
origin so we don't have the update


11711
32559.28 --> 5.64
selection n so let's create it just


11712
32561.44 --> 6.64
above our start multi selection so


11713
32564.92 --> 5.16
update selection net is going to be use


11714
32568.08 --> 4.96
mutation because we want this to be


11715
32570.08 --> 6.52
broadcast broadcasted to everyone uh who


11716
32573.04 --> 7.12
is on the screen so use


11717
32576.6 --> 5.92
mutation and let's go ahead and let's


11718
32580.16 --> 7.158
extract the following so from the first


11719
32582.52 --> 6.438
argument the storage and set my presence


11720
32587.318 --> 3.32
and from the second argument we're going


11721
32588.958 --> 2.68
to have a current which is a type of


11722
32590.638 --> 3.202
point


11723
32591.638 --> 4.522
and the last argument is the origin


11724
32593.84 --> 4.08
which is a type of point so it's


11725
32596.16 --> 3.96
basically going to be a continuation of


11726
32597.92 --> 5.16
what was just started with the multi


11727
32600.12 --> 6.48
selection so in here let's go ahead and


11728
32603.08 --> 5.28
write get our layers using storage.


11729
32606.6 --> 3.958
getet


11730
32608.36 --> 5.68
layers. two


11731
32610.558 --> 8.4
immutable and then set canvas


11732
32614.04 --> 7.72
State let's write if mode canvas mode is


11733
32618.958 --> 4.76
going to be selection net


11734
32621.76 --> 3.558
and then we need to pass in the origin


11735
32623.718 --> 3.322
which is going to be our origin and we


11736
32625.318 --> 3.92
need to pass in the current so you can


11737
32627.04 --> 5.64
do it like this in a short hand if you


11738
32629.238 --> 6.48
want to and now we have to create a util


11739
32632.68 --> 4.84
called find inter intersecting layers


11740
32635.718 --> 5.402
with a rectangle so we're going to use


11741
32637.52 --> 6.798
that so that we Define uh which layers


11742
32641.12 --> 6.04
did we just select by dragging using our


11743
32644.318 --> 6.282
coordinates so let's go ahead inside of


11744
32647.16 --> 5.36
our lib utils again if you don't want to


11745
32650.6 --> 3.92
write this methods you can just go


11746
32652.52 --> 4.56
inside of my utilus folder in GitHub and


11747
32654.52 --> 5.958
copy the finished method so expert


11748
32657.08 --> 7.68
function find


11749
32660.478 --> 7.642
intersecting uh find intersecting


11750
32664.76 --> 5.44
layers with


11751
32668.12 --> 3.8
rectangle the first argument is going to


11752
32670.2 --> 4.72
be layer IDs which is going to be a


11753
32671.92 --> 3
readon


11754
32675.28 --> 4.678
string the second argument is going to


11755
32677.478 --> 4.76
be layers which is going to be readon


11756
32679.958 --> 5.122
map


11757
32682.238 --> 6.08
with string and


11758
32685.08 --> 5.52
layer layer is going to be from types


11759
32688.318 --> 5.16
canvas so make sure you import the layer


11760
32690.6 --> 5.44
from types canvas here and then we're


11761
32693.478 --> 4
going to have a which is a point and B


11762
32696.04 --> 5.24
which is another


11763
32697.478 --> 8.282
Point uh like this great and let's go


11764
32701.28 --> 8.08
ahead and write const rectangle to be X


11765
32705.76 --> 6
math Min between a.x and b.x so the


11766
32709.36 --> 5.518
smaller one of the two points


11767
32711.76 --> 6
same thing for math for the uh Y


11768
32714.878 --> 6.202
coordinates so ay and


11769
32717.76 --> 7.76
b.y and the width is going to be the


11770
32721.08 --> 8.878
absolute result of a.x minus B dox so


11771
32725.52 --> 7.56
the two points from one another and the


11772
32729.958 --> 7.68
height is going to be the same thing but


11773
32733.08 --> 5.92
the uh y coordinate so a.y minus b.y


11774
32737.638 --> 3.84
basically the difference between the two


11775
32739 --> 4.44
points on all axis of the


11776
32741.478 --> 3.562
coordinates and now let's create an


11777
32743.44 --> 5.518
array of IDs


11778
32745.04 --> 7.438
here and let's iterate over them so for


11779
32748.958 --> 5.642
const layer ID of layer


11780
32752.478 --> 7.32
IDs we're going to go ahead and write


11781
32754.6 --> 8.4
const layer to be layers. getet layer


11782
32759.798 --> 6.44
ID if we cannot find that layer and


11783
32763 --> 6.64
let's use null specifically like


11784
32766.238 --> 6.52
this let's write


11785
32769.64 --> 5.4
continue and and then let's go ahead and


11786
32772.758 --> 8.364
extract from the


11787
32775.04 --> 6.082
layer XY height and


11788
32782.48 --> 8.52
width let's go ahead and write


11789
32785.64 --> 10.598
If rectangle. X Plus rectangle. width is


11790
32791 --> 7.68
higher than x and if rectangle. x is


11791
32796.238 --> 6.52
smaller than X+


11792
32798.68 --> 9.48
width and if rectangle do y plus


11793
32802.758 --> 9.242
rectangle. height is higher than the y


11794
32808.16 --> 6.04
coordinate uh not react sorry


11795
32812 --> 3.8
rect


11796
32814.2 --> 7.28
rect


11797
32815.8 --> 11.758
height like that and let's do if


11798
32821.48 --> 11.238
rectangle doy again is smaller than y +


11799
32827.558 --> 5.16
height ID is. push layer


11800
32833.078 --> 7.32
ID and finally in the end return the


11801
32838.278 --> 5.042
IDS great so we're going to use this


11802
32840.398 --> 5.36
method to determine which we have


11803
32843.32 --> 3.558
selected and now let's go back inside of


11804
32845.758 --> 4.042
our


11805
32846.878 --> 6.68
canvas and let's go ahead and let's get


11806
32849.8 --> 5.078
our IDs so const IDs find intersecting


11807
32853.558 --> 3.52
layers with


11808
32854.878 --> 5.082
rectangle so make sure you import this


11809
32857.078 --> 5.242
from Libs and now in here we're going to


11810
32859.96 --> 5.56
pass in the lay IDs we're going to pass


11811
32862.32 --> 5.52
in the layers the origin and the


11812
32865.52 --> 3.12
current and then we're going to do set


11813
32867.84 --> 4.2
my


11814
32868.64 --> 7.32
presence selection is going to be


11815
32872.04 --> 6.678
IDs and remember to put the layer IDs


11816
32875.96 --> 5.08
inside of the dependency array right


11817
32878.718 --> 4.72
here and now we have the update


11818
32881.04 --> 4.8
selection net so I think that we can


11819
32883.438 --> 4.44
already try and select multiple items


11820
32885.84 --> 5.598
let's see if I drag there we go you can


11821
32887.878 --> 6.802
see how now my selection box is


11822
32891.438 --> 5.8
expanding on how I move my cursor so I'm


11823
32894.68 --> 4.398
pressing down and holding but obviously


11824
32897.238 --> 3.04
something is missing so this is working


11825
32899.078 --> 3.242
very nicely you can see that we didn't


11826
32900.278 --> 3.922
have to write any additional code that's


11827
32902.32 --> 3.52
it this already works we can change


11828
32904.2 --> 3.28
color we can change them all to the same


11829
32905.84 --> 3.398
elements we can remove all of them


11830
32907.48 --> 3.68
together so all of this works but


11831
32909.238 --> 4.04
obviously what's missing is an actual


11832
32911.16 --> 4.52
indicator of how far I'm actually


11833
32913.278 --> 4.522
reaching because you know it's very hard


11834
32915.68 --> 3.918
to understand what's going on right now


11835
32917.8 --> 3.918
we know what's going on here because we


11836
32919.598 --> 5.602
just coded it but let's go ahead and


11837
32921.718 --> 5.84
create a proper uh preview of our


11838
32925.2 --> 3.96
selection net but that is it for our


11839
32927.558 --> 3.642
code you can see that that works just


11840
32929.16 --> 4.962
fine so now we just have to use those


11841
32931.2 --> 6.96
points and add a new component inside of


11842
32934.122 --> 7.678
our uh SVG element right


11843
32938.16 --> 6.718
here so let's go ahead and let's find


11844
32941.8 --> 5
our selection box component and just


11845
32944.878 --> 7.68
below it we're going to


11846
32946.8 --> 11.078
add a condition if canvas state mode is


11847
32952.558 --> 10.16
canvas mode selection net and if canvas


11848
32957.878 --> 7.802
state. current is not null only then are


11849
32962.718 --> 5.922
we going to render a rectangle


11850
32965.68 --> 8.12
element with the following properties


11851
32968.64 --> 9.4
the class name is going to be Phil blue


11852
32973.8 --> 7.322
500/5 stroke is going to be blue 500 and


11853
32978.04 --> 6.838
stroke is going to be one then we're


11854
32981.122 --> 9.436
going to have the x coordinate to be


11855
32984.878 --> 9.482
math.min canvas state. origin. X and


11856
32990.558 --> 7.16
canvas state. current.


11857
32994.36 --> 7.762
X and let me just see if I made any


11858
32997.718 --> 6.082
mistakes here canvas state. current is


11859
33002.122 --> 5.398
possibly


11860
33003.8 --> 6.72
undefined so let me just confirm that


11861
33007.52 --> 6.16
shouldn't be an issue because of this


11862
33010.52 --> 5.32
canvas state.


11863
33013.68 --> 5.68
current oh we can


11864
33015.84 --> 6.16
use the I use the identical property so


11865
33019.36 --> 4.44
if I just do this there we go now it


11866
33022 --> 4.36
works so don't use the identical


11867
33023.8 --> 6
property use just exclamation point


11868
33026.36 --> 5.918
equals like that and let's just go ahead


11869
33029.8 --> 4.4
and copy this and do the same thing for


11870
33032.278 --> 6.44
the y coordinate but this one is going


11871
33034.2 --> 6.96
to use obviously the Y coordinates here


11872
33038.718 --> 5.84
and now let's determine the width


11873
33041.16 --> 6.64
to be math. absolute and let's use


11874
33044.558 --> 8.04
canvas state. origin


11875
33047.8 --> 7.598
dox minus canvas state. current


11876
33052.598 --> 5.96
dox and let's go ahead and do height to


11877
33055.398 --> 8.68
be very similar so it's going to be math


11878
33058.558 --> 5.52
absolute let's pass in the canvas state.


11879
33064.122 --> 6.038
originy minus canvas state. current doy


11880
33068.278 --> 3.64
so let me zoom out to show you how all


11881
33070.16 --> 4.84
of these are supposed to look like in


11882
33071.918 --> 5.882
one line and that should be it let's try


11883
33075 --> 4.36
it out so now if I just randomly select


11884
33077.8 --> 3.918
there we go you can see how we have a


11885
33079.36 --> 5.558
nice selection net and you can see how


11886
33081.718 --> 4.962
it's very visible exactly what it is


11887
33084.918 --> 4.68
selecting so you can see that we can


11888
33086.68 --> 6.398
move the selected area we can go ahead


11889
33089.598 --> 5.48
and change their layering we can change


11890
33093.078 --> 5.122
all of the elements colors which are


11891
33095.078 --> 6.52
selected we can also delete all the


11892
33098.2 --> 6.078
elements great so we've WRA up all the


11893
33101.598 --> 5.16
functionality for the basic elements


11894
33104.278 --> 4.12
what we're going to build next is the


11895
33106.758 --> 4.52
other elements and then we're finally


11896
33108.398 --> 4.602
going to go ahead and render our pen


11897
33111.278 --> 4.362
great great


11898
33113 --> 5.598
job now let's go ahead and let's add


11899
33115.64 --> 4.798
some more elements to our canvas so


11900
33118.598 --> 3.96
right now if you try and select a


11901
33120.438 --> 4.402
rectangle that's going to work fine but


11902
33122.558 --> 4.52
if you try and select text for example


11903
33124.84 --> 4.878
that will throw an error unknown layer


11904
33127.078 --> 4.922
type and also render a transparent or an


11905
33129.718 --> 5.84
invisible element and same is true for


11906
33132 --> 5.918
everything which is not our rectangle so


11907
33135.558 --> 4.282
we can fix that quite easily we have


11908
33137.918 --> 3.242
pretty much everything prepared for us


11909
33139.84 --> 3.52
and the first thing I want to do is the


11910
33141.16 --> 4.52
ellipse since it is the simplest and the


11911
33143.36 --> 4.518
closest to the rectangle so let's go


11912
33145.68 --> 4.28
inside of our components here my


11913
33147.878 --> 4.68
apologies in the app folder board


11914
33149.96 --> 5.56
components and let's go ahead and let's


11915
33152.558 --> 5.32
pick the layer preview so in here we


11916
33155.52 --> 4.84
only have the case for layer type


11917
33157.878 --> 4.642
rectangle so now let's add a case for


11918
33160.36 --> 5.6
layer type


11919
33162.52 --> 5.28
ellipse and all we have to do is return


11920
33165.96 --> 3.88
and inside of here we're going to go


11921
33167.8 --> 3.322
ahead and render ellipse component which


11922
33169.84 --> 4.48
we don't yet have but we're going to


11923
33171.122 --> 4.796
create in a moment let's pass in the ID


11924
33174.32 --> 6.802
let's pass in the


11925
33175.918 --> 10.922
layer on pointer down to be on pointer


11926
33181.122 --> 10.038
down and selection color to be selection


11927
33186.84 --> 7.598
color like this and this is supposed to


11928
33191.16 --> 5.32
be on layer pointer down my apologies


11929
33194.438 --> 4.84
and now let's go ahead and create this


11930
33196.48 --> 6.56
one so ellipse do


11931
33199.278 --> 5.202
PSX let's go ahead and Mark this as


11932
33203.04 --> 3.838
actually we don't need to mark it as use


11933
33204.48 --> 6
client instead let's just import color


11934
33206.878 --> 5.56
to CSS from Li utils and let's also


11935
33210.48 --> 5.72
import the ellipse


11936
33212.438 --> 6.882
layer from types canvas now in here


11937
33216.2 --> 6.238
let's create an interface ellipse props


11938
33219.32 --> 4.52
to accept an ID layer which is a type of


11939
33222.438 --> 5.84
ellipse


11940
33223.84 --> 8.238
layer and on pointer down which is an


11941
33228.278 --> 5.202
event of react. pointer event and an ID


11942
33232.078 --> 3.922
of


11943
33233.48 --> 5
string selection color is going to be an


11944
33236 --> 6.2
optional


11945
33238.48 --> 7.56
string and now let's export con


11946
33242.2 --> 6.398
ellipse let's assign ellipse


11947
33246.04 --> 5.6
props and let's go ahead and D structure


11948
33248.598 --> 5.64
the ID layer on pointer down and


11949
33251.64 --> 2.598
selection


11950
33254.52 --> 7.198
color and now let's go ahead and let's


11951
33258.04 --> 3.678
return the ellipse


11952
33262.2 --> 4.922
element and let's write class name drop


11953
33265.68 --> 6.078
shadow


11954
33267.122 --> 8.156
MD let's write on pointer down to get


11955
33271.758 --> 5.282
the event and pass in on pointer down


11956
33275.278 --> 6.362
event and the ID of the


11957
33277.04 --> 6.718
layer style is going to use


11958
33281.64 --> 5.638
transform and let's go ahead and open


11959
33283.758 --> 3.52
backx and let's write


11960
33287.32 --> 6.398
translate and let's go ahead and pass


11961
33290.8 --> 5.88
layer dox in pixels as the first


11962
33293.718 --> 4.482
argument and layer. Y in pixels as the


11963
33296.68 --> 5.32
second


11964
33298.2 --> 9.198
argument and let's pass in CX to be


11965
33302 --> 9.238
layer with divided by 2 Cy to be layer


11966
33307.398 --> 7.642
height divided by two now let's pass in


11967
33311.238 --> 8.32
RX to be layer width divided by


11968
33315.04 --> 9.12
two and let's go ahead and add r y to be


11969
33319.558 --> 9.802
layer do height ided by two now let's


11970
33324.16 --> 7.32
pass in fill property to be layer. fill


11971
33329.36 --> 6.762
if we have it it's going to be color to


11972
33331.48 --> 9.118
CSS layer. fill otherwise let's use the


11973
33336.122 --> 6.078
default black color and stroke is either


11974
33340.598 --> 4
going to use the selection color if


11975
33342.2 --> 4.198
someone else is selecting it or it's


11976
33344.598 --> 4.64
going to be


11977
33346.398 --> 4.082
transparent and stroke width is going to


11978
33349.238 --> 4
be


11979
33350.48 --> 4.68
one there we go now we have to go back


11980
33353.238 --> 4.762
inside of the layer preview and import


11981
33355.16 --> 5.16
the ellipse component from do/ ellipse


11982
33358 --> 4.398
the same way with did with the rectangle


11983
33360.32 --> 3.438
and let's go ahead and click here and


11984
33362.398 --> 3.32
there we go you can see how we have an


11985
33363.758 --> 4.282
ellipse now and it picked up the last


11986
33365.718 --> 5.242
color which we used let's confirm that


11987
33368.04 --> 6.16
we can bring it to back bring to front


11988
33370.96 --> 5.758
we can expand it we can move it we can


11989
33374.2 --> 5.198
delete it and if I try it again it's


11990
33376.718 --> 4.88
going to use the last selected color


11991
33379.398 --> 4.402
perfect let's go ahead and confirm that


11992
33381.598 --> 5.8
I can move it with other layers I can do


11993
33383.8 --> 5.918
that as well no problem at all great so


11994
33387.398 --> 6.642
now that we have this let's go ahead and


11995
33389.718 --> 8.04
let's create uh our text


11996
33394.04 --> 5.92
layer so to create the text element


11997
33397.758 --> 5.762
we're going to need to install a package


11998
33399.96 --> 5.88
called react content editable so let me


11999
33403.52 --> 5.918
open a new terminal here and run mpm


12000
33405.84 --> 6.12
install react content


12001
33409.438 --> 6.722
editable like


12002
33411.96 --> 6.2
this and now let's go ahead and let's go


12003
33416.16 --> 5.398
inside of our components here and create


12004
33418.16 --> 5.118
a new file text. TSX you can of course


12005
33421.558 --> 4.282
name it something more specifically if


12006
33423.278 --> 4.522
you wish with a prefix let's go ahead


12007
33425.84 --> 4.48
and import the font I want to use for


12008
33427.8 --> 4.88
text I want so I found this font on


12009
33430.32 --> 3.802
Google fonts that looks like handwriting


12010
33432.68 --> 3.718
so I'm going to use that one you can of


12011
33434.122 --> 4.636
course switch it out with any color with


12012
33436.398 --> 4.802
any other font you want now let's import


12013
33438.758 --> 5.762
content


12014
33441.2 --> 6.398
editable from react content


12015
33444.52 --> 6.198
editable and we are also going to need


12016
33447.598 --> 6.442
the content editable event from react


12017
33450.718 --> 6.404
content editable let's import CN from


12018
33454.04 --> 6.198
Libs and color to CSS from


12019
33457.122 --> 6.918
Libs and let's import text layer


12020
33460.238 --> 8.36
here from types canvas and let's import


12021
33464.04 --> 8.398
use mutation from live blocks.


12022
33468.598 --> 7.762
config and now let's define our font


12023
33472.438 --> 7
here so colum or Calum colum I'm not


12024
33476.36 --> 9.518
sure subsets is going to be


12025
33479.438 --> 6.44
Latin and weight is simply going to be


12026
33486.438 --> 7.48
400 now let's create an interface text


12027
33489.96 --> 6.278
props to accept an ID which is a string


12028
33493.918 --> 3.84
a layer which is a text layer which


12029
33496.238 --> 4.32
we've imported


12030
33497.758 --> 6.68
above and we're going to have on pointer


12031
33500.558 --> 7.88
down to be an event of react pointer


12032
33504.438 --> 7.082
event and an ID of the


12033
33508.438 --> 4.922
layer and selection color is going to be


12034
33511.52 --> 4.602
an optional


12035
33513.36 --> 5.28
string and now let's go ahead and let's


12036
33516.122 --> 4.198
export const


12037
33518.64 --> 5.32
text


12038
33520.32 --> 7.438
let's go ahead and assign the text props


12039
33523.96 --> 6.758
here let's extract the layer on pointer


12040
33527.758 --> 5.68
down ID and selection


12041
33530.718 --> 5.122
color in here we can extract from the


12042
33533.438 --> 7.922
layer all the info we are going to need


12043
33535.84 --> 9.598
like the X Y width height fill and


12044
33541.36 --> 6.398
value and then let's go ahead and return


12045
33545.438 --> 4.8
a foreign object because we are


12046
33547.758 --> 5.202
rendering this inside of an SVG element


12047
33550.238 --> 6.762
so we need to use foreign object and


12048
33552.96 --> 6.476
inside we're going to render a content


12049
33557 --> 6.56
editable and let's go ahead and just


12050
33559.436 --> 7.244
pass in the HTML for now to just be text


12051
33563.56 --> 7.716
let's pass in uh the onchange event for


12052
33566.68 --> 7.68
now to be an empty onchange event like


12053
33571.276 --> 5.084
this and now what I want to do is just a


12054
33574.36 --> 4.44
quick little positioning on this foreign


12055
33576.36 --> 6.04
object so we can start seeing this so X


12056
33578.8 --> 6.72
is going to be X X Y is going to be y


12057
33582.4 --> 5.6
width is going to be width height is


12058
33585.52 --> 5.04
going to be


12059
33588 --> 6.24
height and we're going to have on


12060
33590.56 --> 6.52
pointer down here to fire an event on


12061
33594.24 --> 6.56
pointer down and pass in that and the ID


12062
33597.08 --> 6.48
of our layer and style we're going to


12063
33600.8 --> 5.24
have the outline here to look for the


12064
33603.56 --> 5.44
selection color if we have it we're


12065
33606.04 --> 6.716
going to write 1px solid and then we're


12066
33609 --> 8.8
going to use selection


12067
33612.756 --> 5.044
color otherwise it's going to be


12068
33617.88 --> 6.556
none uh actually I think we need to use


12069
33620.84 --> 8.84
color to CSS


12070
33624.436 --> 7.964
here uh oh actually do we let's check


12071
33629.68 --> 4.52
ellipse no no no selection color is a


12072
33632.4 --> 5.08
string yes my apologies now so this will


12073
33634.2 --> 5.716
work just fine okay uh yes let's try it


12074
33637.48 --> 5.24
out just like this so now I'm going to


12075
33639.916 --> 5.764
go back inside of my layer preview and


12076
33642.72 --> 2.96
let me import


12077
33645.756 --> 6.724
text from do/ text the component I just


12078
33650.24 --> 3.356
created and let's go ahead and create a


12079
33652.48 --> 7.2
case


12080
33653.596 --> 6.084
layer type. text here and let's


12081
33659.84 --> 6.56
return the text element


12082
33663.36 --> 5.076
here and we're going to go ahead now and


12083
33666.4 --> 4.28
pass in the


12084
33668.436 --> 7
ID


12085
33670.68 --> 8.96
which is ID layer on pointer


12086
33675.436 --> 5.644
down which is on layer pointer down and


12087
33679.64 --> 5.6
we're going to pass in the selection


12088
33681.08 --> 6.356
color to be selection color and let's


12089
33685.24 --> 4.16
see if this will already start showing


12090
33687.436 --> 4.364
something so when I click Text there we


12091
33689.4 --> 4.68
go you can see that we have text written


12092
33691.8 --> 4.92
here and we can already start writing


12093
33694.08 --> 5.64
here but this is obviously not saved and


12094
33696.72 --> 4.6
it's also not transmitted to other users


12095
33699.72 --> 4.24
so yeah always make sure that you also


12096
33701.32 --> 4.116
do a little testing on multiplayer right


12097
33703.96 --> 3.636
so you can see how I'm selecting in


12098
33705.436 --> 4.244
another browser here and you can see how


12099
33707.596 --> 4.244
that looks like so I have an indicator


12100
33709.68 --> 4.68
that this user is selecting and moving


12101
33711.84 --> 4.64
this the resizing Works in real time so


12102
33714.36 --> 5.2
always you know do a double check that


12103
33716.48 --> 5.68
all of those things are working as well


12104
33719.56 --> 4.68
uh all right so now what I want to do is


12105
33722.16 --> 4.48
I want to complete my text component so


12106
33724.24 --> 4.32
it looks a little bit better so let's go


12107
33726.64 --> 5.24
ahead here inside of the content


12108
33728.56 --> 5.56
editable and let's give it a class name


12109
33731.88 --> 6.36
let's use a CN and let's give it default


12110
33734.12 --> 9.12
values of H full with full PL items


12111
33738.24 --> 6.196
Center justify Center text Center who


12112
33743.24 --> 3.88
text


12113
33744.436 --> 5.124
Center drop shadow


12114
33747.12 --> 6.156
MD outline


12115
33749.56 --> 6
none and let's add Dynamic font. class


12116
33753.276 --> 5.16
name there we go so now you can see how


12117
33755.56 --> 5.92
this font now looks like uh it looks


12118
33758.436 --> 4.964
like it's handwritten kind of and now


12119
33761.48 --> 4.64
what I want to do is I want to define


12120
33763.4 --> 5.876
the color for this font so let's give


12121
33766.12 --> 5.28
this a style let's give it a color let's


12122
33769.276 --> 4.044
check for fill if we have fill we're


12123
33771.4 --> 4.44
going to use color to CSS and passing


12124
33773.32 --> 5.48
the fill option otherwise we're going to


12125
33775.84 --> 4.436
use the default black option like this


12126
33778.8 --> 3.04
there we go so now it picked up the


12127
33780.276 --> 5.32
color from the last time and I can now


12128
33781.84 --> 5.916
change it to Black Blue uh yellow green


12129
33785.596 --> 4.32
red perfect so now let's go ahead and


12130
33787.756 --> 4.044
kind of enlarge our font and what I want


12131
33789.916 --> 4.604
to do is I want to create a function


12132
33791.8 --> 6.16
which will increase the font size if I


12133
33794.52 --> 5.88
increase my uh rectangle right so if you


12134
33797.96 --> 6.4
want to you can also revisit your


12135
33800.4 --> 6.16
selection tools for example and the same


12136
33804.36 --> 4.76
way we created the Color Picker you can


12137
33806.56 --> 4.4
create the font picker or the font size


12138
33809.12 --> 4.12
picker right you would create an


12139
33810.96 --> 6.16
equivalent action instead of set fill


12140
33813.24 --> 6.516
you would create set font or Set uh


12141
33817.12 --> 5.44
weight whatever you want right and then


12142
33819.756 --> 5.204
you would simply uh look for that inside


12143
33822.56 --> 4.96
of let me find the text component you


12144
33824.96 --> 5
would extract that from the layer right


12145
33827.52 --> 5.8
here and of course you would also in


12146
33829.96 --> 5.36
your types canvas allow that to be


12147
33833.32 --> 3.76
accepted inside of the text layer so you


12148
33835.32 --> 3.436
would have to add the font and stuff


12149
33837.08 --> 4.44
like that just in case you're interested


12150
33838.756 --> 4.564
how would you go around doing that right


12151
33841.52 --> 3.56
let's focus on wrapping up the text


12152
33843.32 --> 3.72
component now so I'm going to create


12153
33845.08 --> 4.96
this little function here it's not going


12154
33847.04 --> 7.36
to be too complicated so just con


12155
33850.04 --> 6.76
calculate font size is going to accept


12156
33854.4 --> 3.68
width which is a number and height which


12157
33856.8 --> 4.16
is a


12158
33858.08 --> 5.48
number we're going to define the max


12159
33860.96 --> 4.84
Fone size so for me that's going to be


12160
33863.56 --> 4.48
96 if you want to you don't even have to


12161
33865.8 --> 5.72
use the maximum font size but I want to


12162
33868.04 --> 5.716
use that now let's add the scale factor


12163
33871.52 --> 5.396
so this is going to be multiplied by the


12164
33873.756 --> 6.644
amount of our box now let's do con font


12165
33876.916 --> 6.044
size based on height is going to be


12166
33880.4 --> 5.8
height times scale


12167
33882.96 --> 6.56
factor and let's do con font size based


12168
33886.2 --> 4.84
on width that's going to be width times


12169
33889.52 --> 4.88
scale


12170
33891.04 --> 6.36
factor and let's return math. Min so the


12171
33894.4 --> 6.24
smaller of the two values font size


12172
33897.4 --> 6.92
based on height font size based on width


12173
33900.64 --> 7.44
and Max font size so three Arguments for


12174
33904.32 --> 5.596
our math m


12175
33908.08 --> 3.76
method


12176
33909.916 --> 5.924
like that and now let's use the


12177
33911.84 --> 7.52
calculate font size in our style here so


12178
33915.84 --> 6.64
font size calculate font size width and


12179
33919.36 --> 5.48
height of our layer and there we go you


12180
33922.48 --> 5.32
can see how now it's much bigger so if I


12181
33924.84 --> 6.12
want to I can make it even bigger by


12182
33927.8 --> 6.476
expanding until it reaches a limit or I


12183
33930.96 --> 5.68
can make it smaller like that and you


12184
33934.276 --> 4.48
can see how you can expand the text oh


12185
33936.64 --> 4.72
we have to it's going to have more sense


12186
33938.756 --> 4.724
when we actually had a feature to uh


12187
33941.36 --> 6.84
well synchronize the text so how about


12188
33943.48 --> 6.64
we uh Implement that instead first so


12189
33948.2 --> 3.556
let's go ahead and let's create a method


12190
33950.12 --> 4.72
called update


12191
33951.756 --> 4.084
value const update value is going to be


12192
33954.84 --> 3.64
used


12193
33955.84 --> 5.48
mutation from do we already have use


12194
33958.48 --> 6.276
mutation we do use mutation from live


12195
33961.32 --> 6.04
blocks config all right so use mutation


12196
33964.756 --> 4.84
is going to go ahead and call this


12197
33967.36 --> 4.96
method here


12198
33969.596 --> 6.644
we're going to go ahead and extract the


12199
33972.32 --> 6.8
storage from the first argument here and


12200
33976.24 --> 5.64
we're going to go ahead and extract the


12201
33979.12 --> 5.4
new value which is a string from the


12202
33981.88 --> 5.8
second argument here and we're going to


12203
33984.52 --> 5.44
do const live layers to be storage.


12204
33987.68 --> 5.04
getet


12205
33989.96 --> 6.52
layers and then live


12206
33992.72 --> 5.876
layers. getet using the ID of the layer


12207
33996.48 --> 5.76
which we have question mark in case we


12208
33998.596 --> 5.284
don't find it do set the value field is


12209
34002.24 --> 5.196
going to be new


12210
34003.88 --> 6
value and we don't have to add uh


12211
34007.436 --> 4.644
anything inside of the dependency array


12212
34009.88 --> 4.2
because we are not depending on anything


12213
34012.08 --> 5.48
and let's go ahead and create a Handler


12214
34014.08 --> 6.24
so const handle content change is going


12215
34017.56 --> 4.52
to be an event which looks for Content


12216
34020.32 --> 4.4
editable


12217
34022.08 --> 4.76
event which we have imported above and


12218
34024.72 --> 6.196
simply call the above function update


12219
34026.84 --> 4.076
value with event. target. value


12220
34031 --> 6
there we go and let's now assign our


12221
34034.08 --> 4.76
content here so on change is now going


12222
34037 --> 4.52
to just simply call handle content


12223
34038.84 --> 6.24
change and this is going to be uh the


12224
34041.52 --> 6.12
value which we've extracted from the uh


12225
34045.08 --> 5.12
layer object right here above there we


12226
34047.64 --> 5
go so that should already be working so


12227
34050.2 --> 6.8
let me just demonstrate that so if we go


12228
34052.64 --> 6.36
here and change this there we go it is


12229
34057 --> 4.8
preserved let me go in my another


12230
34059 --> 7.2
browser here so if I move this that


12231
34061.8 --> 6.72
works if I make it smaller there we go


12232
34066.2 --> 4.48
let's refresh just to confirm this is


12233
34068.52 --> 3.16
all still working I'm going to refresh


12234
34070.68 --> 4.56
here as


12235
34071.68 --> 7.2
well there we go it is fully


12236
34075.24 --> 8.6
preserved amazing and now we can easily


12237
34078.88 --> 8.68
reuse this and create our sticky note


12238
34083.84 --> 6.64
component so luckily for us the note


12239
34087.56 --> 5.036
component is very very very similar to


12240
34090.48 --> 4.52
the text component so let me close


12241
34092.596 --> 4.16
everything here and let me copy the text


12242
34095 --> 4.12
component inside of the underscore


12243
34096.756 --> 6.284
components folder and let me rename it


12244
34099.12 --> 6.08
to note like this so let's go ahead and


12245
34103.04 --> 5.16
import note


12246
34105.2 --> 5.236
layer let's go ahead and let's assign


12247
34108.2 --> 3.236
note layer here let's rename this to


12248
34110.436 --> 4.48
note


12249
34111.436 --> 5.524
props let's make this be note props this


12250
34114.916 --> 4.604
is also going to be a component called


12251
34116.96 --> 4.76
note like this


12252
34119.52 --> 4.36
and now what we are going to do is we


12253
34121.72 --> 5.716
are simply going to modify how the


12254
34123.88 --> 6.76
foreign object looks and acts like so


12255
34127.436 --> 5.124
the outline can stay the same but what


12256
34130.64 --> 6.24
we're going to do is we're going to pass


12257
34132.56 --> 7.84
the background color to be fill and use


12258
34136.88 --> 8.08
color to CSS with the fill option or


12259
34140.4 --> 7.876
it's going to use a default black


12260
34144.96 --> 7.4
color like that and we're also going to


12261
34148.276 --> 7.924
add a class name here of drop shadow


12262
34152.36 --> 6.72
MD and sorry we're going to use Shadow


12263
34156.2 --> 5.716
MD and drop shadow


12264
34159.08 --> 6.72
Excel and inside of the content editable


12265
34161.916 --> 5.52
here let's go ahead and modify uh this a


12266
34165.8 --> 4.08
little bit as well so we no longer need


12267
34167.436 --> 5.084
the drop shadow MD on the text itself


12268
34169.88 --> 5.24
because we are having it on the entire


12269
34172.52 --> 5.16
uh on the entire for in


12270
34175.12 --> 5.36
object and now what we are going to do


12271
34177.68 --> 4.8
here is is we are not going to use the


12272
34180.48 --> 3.956
fill color because now it's going to be


12273
34182.48 --> 3.956
just black on black right because the


12274
34184.436 --> 3.764
background color is the same here so


12275
34186.436 --> 4.444
instead what we're going to do is we're


12276
34188.2 --> 4.92
going to go ahead and create a util


12277
34190.88 --> 4.716
component called get contrasting text


12278
34193.12 --> 4.44
color so let me just go ahead inside of


12279
34195.596 --> 4.604
my util here lib


12280
34197.56 --> 4.876
utils let me go to the bottom here and


12281
34200.2 --> 3.76
let's go ahead and


12282
34202.436 --> 4.604
Export


12283
34203.96 --> 6.476
function get


12284
34207.04 --> 7.12
contrasting text color it's a function


12285
34210.436 --> 6.244
which accepts our color object and this


12286
34214.16 --> 4.68
was honestly done using chat GPT I don't


12287
34216.68 --> 4.596
know how it works but basically it gets


12288
34218.84 --> 4.4
the luminance Val threshold values and


12289
34221.276 --> 6.764
it just Returns the opposite color I


12290
34223.24 --> 10.8
guess so luminance is going to be


12291
34228.04 --> 6
0.299 time color. R plus


12292
34234.36 --> 9.076
0.587 * color. G Plus 0 114 * color. B


12293
34241.596 --> 6
and then what we're going to do is


12294
34243.436 --> 6.644
return if luminance value is higher than


12295
34247.596 --> 4.68
228 the font is going to be black


12296
34250.08 --> 5.32
otherwise it's going to be white and


12297
34252.276 --> 5.084
surprisingly this works very very well


12298
34255.4 --> 5.16
so let's go inside of our note now and


12299
34257.36 --> 4.64
let's use get contrasting text color


12300
34260.56 --> 6.28
from lib


12301
34262 --> 7.276
utils like this there we go and we can


12302
34266.84 --> 4.64
leave this as as this and now we have to


12303
34269.276 --> 4.684
go back inside of the layer preview and


12304
34271.48 --> 5.52
let's copy and paste this case


12305
34273.96 --> 6.68
here let's make it for type note and


12306
34277 --> 5.96
let's render the note from slote like


12307
34280.64 --> 4.56
this let's try it out now so if I go


12308
34282.96 --> 4.44
ahead and click on sticky note there we


12309
34285.2 --> 4.76
go you can see how it this is a sticky


12310
34287.4 --> 5.12
note now the only thing I don't like is


12311
34289.96 --> 4.44
the text initially looks too big and I


12312
34292.52 --> 4.12
just think that generally the text is


12313
34294.4 --> 5.516
too big for the sticky note so what we


12314
34296.64 --> 6.116
can do is we can go inside of the notes


12315
34299.916 --> 5.324
itself and we can just quickly modify


12316
34302.756 --> 4.84
our font size for the note so I'm going


12317
34305.24 --> 5.4
to leave the same Max font size but I'm


12318
34307.596 --> 6.284
going to reduce the scale factor to be


12319
34310.64 --> 7.04
uh 0.15 so this is going to make it uh


12320
34313.88 --> 8.36
look more like a sticky note there we go


12321
34317.68 --> 7.44
perfect so let's try this out like that


12322
34322.24 --> 6.76
and let me test it out right


12323
34325.12 --> 6.04
here perfect so our sticky notes are


12324
34329 --> 5.2
officially working I will refresh here


12325
34331.16 --> 5.36
and I will refresh here there we go so


12326
34334.2 --> 4.8
we just wrapped up pretty much all of


12327
34336.52 --> 4.2
the elements which we need to work with


12328
34339 --> 3.52
and let's just write out this so if I


12329
34340.72 --> 5.196
change the color to Black you can see


12330
34342.52 --> 5.756
that the font here has changed to White


12331
34345.916 --> 5.564
if I change to red it's white if I


12332
34348.276 --> 6.32
change to Yellow it's uh black right so


12333
34351.48 --> 6.08
that contrasting thing obviously works


12334
34354.596 --> 5.124
I'm not sure how but Chad GPT sometimes


12335
34357.56 --> 3.64
does really really well great so let's


12336
34359.72 --> 5.44
just confirm we can do all of those


12337
34361.2 --> 6.52
things and perfect so now what I want to


12338
34365.16 --> 6.52
do next is and the last thing I want to


12339
34367.72 --> 7.76
do is my drawing board great great


12340
34371.68 --> 6.68
job so in order to implement the pencil


12341
34375.48 --> 5.636
mode let's start from the beginning so


12342
34378.36 --> 5.84
the beginning starts with the event on


12343
34381.116 --> 5.884
pointer down so let's go ahead and see


12344
34384.2 --> 4.88
what existing code we have around that


12345
34387 --> 6.84
so inside of board compon component


12346
34389.08 --> 6.6
canvas let's go ahead and find our event


12347
34393.84 --> 6.276
on our SVG


12348
34395.68 --> 6.88
element on pointer down so in here it


12349
34400.116 --> 5.604
looks like we already prepared a little


12350
34402.56 --> 7.64
to-do here so let's go ahead and write


12351
34405.72 --> 8.24
if canvas state. mode is identical to


12352
34410.2 --> 6.076
Canvas mode. pencil in that case let's


12353
34413.96 --> 6
break the function but before we do that


12354
34416.276 --> 6.284
let's cons the log and let's write


12355
34419.96 --> 5.4
drawing just so we see whether this is


12356
34422.56 --> 6.24
working or not so I'm going to go inside


12357
34425.36 --> 5.756
of here if I just randomly click nothing


12358
34428.8 --> 5.04
happens but if I select a pencil and I


12359
34431.116 --> 6.48
click it says that I'm drawing exactly


12360
34433.84 --> 5.64
what we want so instead of conso log


12361
34437.596 --> 4.924
drawing we're going to go ahead and call


12362
34439.48 --> 6.276
a function start drawing and we're going


12363
34442.52 --> 6.596
to pass in the point and we're going to


12364
34445.756 --> 6.764
pass in the event. pressure


12365
34449.116 --> 5.724
like that so now let's go ahead and


12366
34452.52 --> 4.236
let's add this start drawing to our


12367
34454.84 --> 5.68
dependency array so we don't forget to


12368
34456.756 --> 5.84
do that so right now start drawing does


12369
34460.52 --> 5.56
not exist but we're going to go ahead


12370
34462.596 --> 5.404
and create it right now so let me just


12371
34466.08 --> 4.8
go somewhere where we are not doing all


12372
34468 --> 5.64
of these pointer events like reiz


12373
34470.88 --> 6.036
selected layer so let's add const start


12374
34473.64 --> 3.276
drawing is going to be use


12375
34477.2 --> 4.076
mutation


12376
34479.04 --> 4.76
there we go so that should now resolve


12377
34481.276 --> 5.16
the start drawing error from here and


12378
34483.8 --> 6.24
here we just have to align the


12379
34486.436 --> 6.284
props so inside of start drawing


12380
34490.04 --> 7
here we are going to go ahead and


12381
34492.72 --> 7.68
extract the following props set my


12382
34497.04 --> 6.48
presence point which is a type of point


12383
34500.4 --> 5.516
from types canvas and pressure which is


12384
34503.52 --> 5.64
going to be a


12385
34505.916 --> 8.884
number like that now now let's go ahead


12386
34509.16 --> 8.04
inside of here and let's do uh set my


12387
34514.8 --> 6.2
presence pencil


12388
34517.2 --> 7.88
draft is going to be an array and then


12389
34521 --> 8.04
inside of it another array point dox


12390
34525.08 --> 7.92
point doy and pressure so make sure you


12391
34529.04 --> 8.076
do a matrix of arrays like this and then


12392
34533 --> 7.56
let's add pan color to be last used


12393
34537.116 --> 6.404
color and make sure you add last used


12394
34540.56 --> 5.68
color to the dependency array right here


12395
34543.52 --> 6.48
so now what we have to do is we have to


12396
34546.24 --> 6.516
revisit uh our live blocks config so


12397
34550 --> 5.2
that we can extend it with the pencil


12398
34552.756 --> 5.964
draft and the pencil


12399
34555.2 --> 5.96
color so let's head inside of our


12400
34558.72 --> 5.6
config so that's going to be in the root


12401
34561.16 --> 3.16
here live blocks.


12402
34567.08 --> 9.196
config.sys pencil draft to be an


12403
34572.24 --> 5.676
array X number as the first argument y


12404
34576.276 --> 4.044
number as the second argument and


12405
34577.916 --> 4.324
pressure number as the third argument


12406
34580.32 --> 6.08
and that itself is going to be an array


12407
34582.24 --> 6.84
of arrays so a matrix and null and Pen


12408
34586.4 --> 5.56
color is going to be the type of color


12409
34589.08 --> 7.12
or null I believe we already have color


12410
34591.96 --> 7.04
imported from types canvas great and now


12411
34596.2 --> 6.2
what I want to do is I also want to go


12412
34599 --> 7.04
inside of my reusable room component so


12413
34602.4 --> 6.24
components room and let's pass in the


12414
34606.04 --> 6.64
pencil draft to be null and let's pass


12415
34608.64 --> 6.72
in the pen color to be null as well and


12416
34612.68 --> 5.28
now if you revisit your canvas. DSX


12417
34615.36 --> 4.396
again there we go set my presence now


12418
34617.96 --> 5.636
throws no


12419
34619.756 --> 5.84
errors now the next part of the flow


12420
34623.596 --> 4.604
after we call set drawing which is


12421
34625.596 --> 6
initialized in on pointer down the the


12422
34628.2 --> 5.52
next one is onp pointer move so let me


12423
34631.596 --> 4.204
just find where do I have onp pointer


12424
34633.72 --> 3.92
move there we go onp pointer move right


12425
34635.8 --> 5.4
here so we have the stat for pressing


12426
34637.64 --> 6.68
selection net translating and resizing


12427
34641.2 --> 6.88
so after resizing last one let's add


12428
34644.32 --> 5.956
else if canvas State


12429
34648.08 --> 6.836
mode sorry


12430
34650.276 --> 7.404
mode is identical to Canvas mode.


12431
34654.916 --> 4.164
pencil in that case we're going to go


12432
34657.68 --> 3.96
ahead then create a method called


12433
34659.08 --> 6.676
continue drawing and we're going to pass


12434
34661.64 --> 7.116
in the current and the event like this


12435
34665.756 --> 5.68
and let's also add the current drawing


12436
34668.756 --> 5.564
here and let me just continue drawing


12437
34671.436 --> 6.244
here and let me just also ensure that we


12438
34674.32 --> 5.32
added all the necessary elements here so


12439
34677.68 --> 4.12
we should be having start multi


12440
34679.64 --> 4.88
selection inside of this dependency


12441
34681.8 --> 4.76
array we should also be having the


12442
34684.52 --> 4.64
update selection net inside of this


12443
34686.56 --> 4.76
dependency array


12444
34689.16 --> 4.84
great and now let's go ahead and let's


12445
34691.32 --> 7.04
actually create this method continue


12446
34694 --> 7.32
drawing so I'm going to do that right


12447
34698.36 --> 5.236
here uh above my continue uh start


12448
34701.32 --> 5.52
drawing so con continue drawing is going


12449
34703.596 --> 3.244
to be use mutation


12450
34709.596 --> 4
again there we go so just by


12451
34711.56 --> 5.16
initializing this this should resolve


12452
34713.596 --> 5
that error here and here and now let's


12453
34716.72 --> 4.68
go ahead and let's Destro structure from


12454
34718.596 --> 5.364
here self and set my


12455
34721.4 --> 5.716
presence and now let's get the point to


12456
34723.96 --> 4.68
be type of point and event to be react.


12457
34727.116 --> 5.044
pointer


12458
34728.64 --> 6.52
event now let's go inside of this method


12459
34732.16 --> 4.16
and we're going to do extraction of


12460
34735.16 --> 4.24
pencil


12461
34736.32 --> 5.52
draft from self.


12462
34739.4 --> 6.68
presence and then we're going to do


12463
34741.84 --> 7.12
if canvas state.


12464
34746.08 --> 5.32
mode is not


12465
34748.96 --> 8.56
canvas mode.


12466
34751.4 --> 10.24
pencil or if event. buttons is not equal


12467
34757.52 --> 8.88
to one or if pencil


12468
34761.64 --> 7.16
draft is null but I'm using uh this


12469
34766.4 --> 7.64
equal sign I'm not using identical here


12470
34768.8 --> 7.956
keep that in mind and let's also return


12471
34774.04 --> 5.076
this and now let's go ahead and do set


12472
34776.756 --> 6.284
my presence


12473
34779.116 --> 9.924
and let's pass in the cursor to be Point


12474
34783.04 --> 9.36
pencil draft to be pencil draft. length


12475
34789.04 --> 8.6
is equal to one


12476
34792.4 --> 8.92
and pencil draft the first first array


12477
34797.64 --> 7.92
from the first array is equal to point


12478
34801.32 --> 8.276
dox and pencil draft from the first


12479
34805.56 --> 6.96
array the second element is is point


12480
34809.596 --> 5.084
doy if that is true we're going to add a


12481
34812.52 --> 4.396
Turner to use the pencil


12482
34814.68 --> 4.32
draft otherwise we're going to go ahead


12483
34816.916 --> 5.124
and create a matrix by spreading the


12484
34819 --> 7.72
existing pencil draft and then creating


12485
34822.04 --> 6.68
a new stroke using point dox point doy


12486
34826.72 --> 5.84
and e.


12487
34828.72 --> 8.24
pressure there we go and make sure to


12488
34832.56 --> 7.6
pass in the canvas state. mode inside


12489
34836.96 --> 6.88
like this there we go so now we have our


12490
34840.16 --> 5.116
continue drawing but there is one more


12491
34843.84 --> 5.84
event


12492
34845.276 --> 6.364
left and that is inside of on pointer up


12493
34849.68 --> 4.12
so let's go ahead and find our on


12494
34851.64 --> 7.24
pointer up


12495
34853.8 --> 8.28
event and in here what we have to do is


12496
34858.88 --> 5.876
right after this first if Clause let's


12497
34862.08 --> 6.24
intercept the


12498
34864.756 --> 7.404
inserting with the check for a pen so


12499
34868.32 --> 5.08
else if canvas state. mode is canvas


12500
34872.16 --> 3.596
mode


12501
34873.4 --> 4.64
pencil open up this and then we're going


12502
34875.756 --> 5.36
to chain this with the else event like


12503
34878.04 --> 6.84
that then we're going to call insert


12504
34881.116 --> 6.964
path without any props and make sure


12505
34884.88 --> 5.36
that you pass in insert path here and


12506
34888.08 --> 4.12
let's see if we are missing anything


12507
34890.24 --> 4.28
here so we should also pass in the set


12508
34892.2 --> 5.68
canvas State here looks like we are


12509
34894.52 --> 6.8
missing that we have the history we have


12510
34897.88 --> 6.12
the camera we have insert layer we have


12511
34901.32 --> 4.64
unselect layer so it's just set convas


12512
34904 --> 4.8
State and insert path that we were


12513
34905.96 --> 5.476
missing so now let's go ahead and let's


12514
34908.8 --> 5.56
create this method to actually insert


12515
34911.436 --> 6.084
the path so we have to go


12516
34914.36 --> 6.8
somewhere related to our drawings let's


12517
34917.52 --> 5.8
go ahead and find start drawing let's go


12518
34921.16 --> 4.48
ahead and write con insert path to be


12519
34923.32 --> 2.32
used


12520
34926.04 --> 5.04
mutation so this should resolve those


12521
34928.276 --> 5.724
errors from on pointer up you should now


12522
34931.08 --> 4.88
normally be able to use those and let's


12523
34934 --> 3.84
go ahead and extract the following from


12524
34935.96 --> 5.636
the first parameter which is going to be


12525
34937.84 --> 6.24
storage self and set my


12526
34941.596 --> 5.404
presence and that's it no other


12527
34944.08 --> 4.16
arguments here let's go ahead and call


12528
34947 --> 6.04
the live


12529
34948.24 --> 7.48
layers and use storage. getet layers


12530
34953.04 --> 8.04
here then let's go ahead and write


12531
34955.72 --> 8.64
const pencil draft to be


12532
34961.08 --> 4.28
self-presence and then let's check if


12533
34964.36 --> 4.68
pencil


12534
34965.36 --> 5.68
draft is null keep in mind I'm using the


12535
34969.04 --> 6
equal not the identical


12536
34971.04 --> 5.92
sign pencil draft. length is smaller


12537
34975.04 --> 4.16
than


12538
34976.96 --> 6.72
two live


12539
34979.2 --> 7.8
layers. size overflows our Max layers


12540
34983.68 --> 4.48
constant which is 100 in any of those


12541
34987 --> 3
cases


12542
34988.16 --> 4.24
set my


12543
34990 --> 4.916
presence pencil draft is going to be


12544
34992.4 --> 5.84
reset to null and the function will be


12545
34994.916 --> 5.404
broken so if we broke any of those rules


12546
34998.24 --> 4.6
we will not be able to insert our


12547
35000.32 --> 4.88
drawing other than that let's create the


12548
35002.84 --> 4.24
ID using Nano ID which we already have


12549
35005.2 --> 4.6
imported because we are using it in our


12550
35007.08 --> 4.036
insert layer method as you can see right


12551
35009.8 --> 4.116
here so we're going to do a similar


12552
35011.116 --> 4.684
thing here and before we can do the


12553
35013.916 --> 4.964
following thing we have to go inside of


12554
35015.8 --> 6.76
utils and we have to create a method


12555
35018.88 --> 6.16
called pinpoints to path layer so let's


12556
35022.56 --> 5.84
go ahead inside of our util again you


12557
35025.04 --> 5.2
can simply copy this directly from my


12558
35028.4 --> 4.356
source code if you're not into writing


12559
35030.24 --> 5.92
this so let's export function penp


12560
35032.756 --> 6.36
points to path later like this it's


12561
35036.16 --> 5.2
going to accept points which is a matrix


12562
35039.116 --> 2.244
of


12563
35041.88 --> 7.68
numbers whoops like that and a color


12564
35046.84 --> 7.916
which is a type of


12565
35049.56 --> 8.24
color and it's going to return a path


12566
35054.756 --> 5.044
layer which we need from types canvas so


12567
35057.8 --> 4.116
just make sure you import path layer


12568
35059.8 --> 5.04
from types canvas it looks like this and


12569
35061.916 --> 4.764
it has the points which is a number of


12570
35064.84 --> 5.24
uh which is a matrix of


12571
35066.68 --> 5.96
numbers all right now inside of here


12572
35070.08 --> 4.836
let's write if points. length is smaller


12573
35072.64 --> 6.52
than two we're going to go ahead and


12574
35074.916 --> 8
throw new error cannot transform points


12575
35079.16 --> 7.68
with less than two points so we cannot


12576
35082.916 --> 7.084
work with that params other than that


12577
35086.84 --> 4.32
let's define the left to be number.


12578
35090 --> 5.436
positive


12579
35091.16 --> 5.56
Infinity the top to be number positive


12580
35095.436 --> 6.084
Infinity as


12581
35096.72 --> 9.036
well the right to be number negative


12582
35101.52 --> 6.756
infinity and the bottom be number


12583
35105.756 --> 5
negative Infinity as well


12584
35108.276 --> 5.48
and now let's iterate over our points


12585
35110.756 --> 5.204
for const point of


12586
35113.756 --> 5.244
points we're going to go ahead and


12587
35115.96 --> 6.636
extract the X and Y coordinates from a


12588
35119 --> 7.756
point from the individual Point like


12589
35122.596 --> 6.16
that if left is bigger than the x


12590
35126.756 --> 5.604
coordinate in that case left is going to


12591
35128.756 --> 7
become the x coordinate if top is bigger


12592
35132.36 --> 5.44
than y coordinate in that case our Top


12593
35135.756 --> 5.964
Value is going to become the Y


12594
35137.8 --> 6.28
coordinate if right is smaller than our


12595
35141.72 --> 3.64
x coordinate in that case right will


12596
35144.08 --> 5.44
become the x


12597
35145.36 --> 6.556
coordinate and if bottom is smaller than


12598
35149.52 --> 4.72
y coordinate in that case bottom is


12599
35151.916 --> 4.484
going to become the y


12600
35154.24 --> 7.676
coordinate and now let's go ahead and


12601
35156.4 --> 8.24
let's return our type to be layer type.


12602
35161.916 --> 4.564
path uh let me just see if I'm having


12603
35164.64 --> 3.44
any M so return is missing the following


12604
35166.48 --> 3.276
properties


12605
35168.08 --> 2.676
do I need to import oh I need to import


12606
35169.756 --> 3.964
layer


12607
35170.756 --> 5.644
type import layer type from types canvas


12608
35173.72 --> 6.44
here and now we have to add X to be our


12609
35176.4 --> 7.16
left value uh y coordinate to be our Top


12610
35180.16 --> 5.04
Value width to be our difference between


12611
35183.56 --> 4.44
right and


12612
35185.2 --> 5.076
left and our height is going to be the


12613
35188 --> 6.8
difference between our bottom and


12614
35190.276 --> 7.564
top and fill is going to be our color


12615
35194.8 --> 4.92
and points is going to be points. map


12616
35197.84 --> 5.436
we're going to go ahead and D structure


12617
35199.72 --> 6.64
x y and pressure from an array here and


12618
35203.276 --> 5.48
we're going to return x minus left y


12619
35206.36 --> 5.12
minus stop and


12620
35208.756 --> 4.244
pressure like that so let me see if I


12621
35211.48 --> 4.6
can collapse this like this so you can


12622
35213 --> 6.32
see it uh there we go and you can see no


12623
35216.08 --> 5.6
more type errors here so what we can do


12624
35219.32 --> 4.956
now is we can go back inside of the


12625
35221.68 --> 5.52
canvas here and we can wrap up our


12626
35224.276 --> 4.84
insert path function so basically what


12627
35227.2 --> 4.76
this util does is it uses the


12628
35229.116 --> 5.524
information we have from our drawing


12629
35231.96 --> 5.28
mechanism and it's going to transform


12630
35234.64 --> 5.476
that into uh something that we can


12631
35237.24 --> 5.24
render in an SVG element right so I wish


12632
35240.116 --> 4.604
I could tell you more about you know


12633
35242.48 --> 4
this comparison and everything if you


12634
35244.72 --> 4.68
want you can research it yourself but


12635
35246.48 --> 6.32
it's basically a bunch of existing code


12636
35249.4 --> 6.56
that I found chat GPT uh examples from


12637
35252.8 --> 5.36
live blocks and you know just a a bunch


12638
35255.96 --> 3.796
of trial and error so that's why I know


12639
35258.16 --> 3.276
this part seems a little bit tedious


12640
35259.756 --> 4.244
because I'm not because I'm just writing


12641
35261.436 --> 5.204
what I'm just saying what I'm writing


12642
35264 --> 5.68
but yeah uh it's the best I can do for


12643
35266.64 --> 7.636
now uh now let's go ahead and continue


12644
35269.68 --> 7.596
doing this by adding live layers do set


12645
35274.276 --> 6.764
and pass in the ID and new live object


12646
35277.276 --> 6.604
inside is going to be pen points to Pat


12647
35281.04 --> 6.04
layer which you can now import from lib


12648
35283.88 --> 6.396
utils because we just created that and


12649
35287.08 --> 5.88
inside pass in the pencil draft as the


12650
35290.276 --> 6.924
first argument and the last used color


12651
35292.96 --> 4.24
as the second argument like


12652
35297.96 --> 5.316
that and then let's go ahead and write


12653
35300.756 --> 5.244
con live layer IDs is going to be


12654
35303.276 --> 5.444
storage. getet layer


12655
35306 --> 5.116
IDs and let's go ahead and write live


12656
35308.72 --> 6.556
layer id. push and pass in the


12657
35311.116 --> 7.204
individual ID and then let's update our


12658
35315.276 --> 7.204
presence by resetting the pencil draft


12659
35318.32 --> 7.32
back to null and let's set our canvas


12660
35322.48 --> 5.48
State mode V canvas mode at pencil so we


12661
35325.64 --> 5.56
can continue drawing by pressing down


12662
35327.96 --> 5.796
again and let's make sure to put last


12663
35331.2 --> 6.68
used color inside of our dependency


12664
35333.756 --> 6.604
array so now what will happen is the


12665
35337.88 --> 4.12
following so I'm going to prepare my


12666
35340.36 --> 4.12
terminal here at least I think that's


12667
35342 --> 4.24
what what will happen if I try and draw


12668
35344.48 --> 5.08
something once I release I'm going to


12669
35346.24 --> 5.876
get an error unknown layer type but as


12670
35349.56 --> 5.036
you can see this layer actually exists


12671
35352.116 --> 4.724
so we did draw something we just have no


12672
35354.596 --> 5.724
idea how to render that that's because


12673
35356.84 --> 5.56
we have to revisit our uh layer preview


12674
35360.32 --> 4.4
component and in there we have to create


12675
35362.4 --> 5.44
a new component called


12676
35364.72 --> 5.68
path so let's go back inside of our


12677
35367.84 --> 4.84
layer preview


12678
35370.4 --> 6.196
component and in here we're going to add


12679
35372.68 --> 4.72
a new case for layer type. path like


12680
35376.596 --> 3.16
this


12681
35377.4 --> 5.08
and this one should not have any


12682
35379.756 --> 6.36
semicolons and we are very simply going


12683
35382.48 --> 5.48
to return a new element called path so


12684
35386.116 --> 5.284
let's already prepare everything we're


12685
35387.96 --> 5.84
going to need key is going to be ID


12686
35391.4 --> 4.8
points is going to be layer do


12687
35393.8 --> 6.84
points then we're going to have on


12688
35396.2 --> 7.52
pointer down to be on layer pointer down


12689
35400.64 --> 5.2
and selection color is going to be our


12690
35403.72 --> 3.84
selection


12691
35405.84 --> 3.8
color


12692
35407.56 --> 6.44
like that and now let's go ahead and


12693
35409.64 --> 7.6
actually create our path. TSX component


12694
35414 --> 5.36
right here so I'm first going to install


12695
35417.24 --> 5.4
a package called perfect


12696
35419.36 --> 5.32
freehand so mpm install Perfect freehand


12697
35422.64 --> 5.84
which is going to be used for us to


12698
35424.68 --> 8.68
beautifully render our Strokes so let me


12699
35428.48 --> 7.6
just close this can I please close this


12700
35433.36 --> 6.756
okay now inside of here let's go ahead


12701
35436.08 --> 7.44
and import get stroke from perfect


12702
35440.116 --> 6.884
freehand and now what we have to do is


12703
35443.52 --> 6.396
create an interface path props with a


12704
35447 --> 7
number for the x coordinate for the y


12705
35449.916 --> 7.724
coordinate a matrix of numbers for the


12706
35454 --> 6.436
points and fill is going to be a string


12707
35457.64 --> 4.88
on pointer down is going to be an


12708
35460.436 --> 5.564
optional


12709
35462.52 --> 6.2
void let's pass in event to be react.


12710
35466 --> 2.72
pointer event


12711
35469.36 --> 2.396
and


12712
35472 --> 6.596
stroke is going to be an optional


12713
35475.72 --> 5.036
string and now let's export const path


12714
35478.596 --> 5
component like


12715
35480.756 --> 5.52
this let's go ahead and D structure the


12716
35483.596 --> 5.364
props path


12717
35486.276 --> 6.16
props which is going to come to XY


12718
35488.96 --> 5.796
points fill pointer down on pointer down


12719
35492.436 --> 5.924
and stroke


12720
35494.756 --> 7.124
itself and now we are simply going to


12721
35498.36 --> 7.72
return a path element for now like this


12722
35501.88 --> 6
so enough for us to import this inside


12723
35506.08 --> 4.036
of the layer preview


12724
35507.88 --> 6.48
component so make sure you import this


12725
35510.116 --> 7.244
from do/ path and let's go ahead and see


12726
35514.36 --> 6.32
what error do we have here


12727
35517.36 --> 5.556
so let me go back inside of my layer


12728
35520.68 --> 5.64
preview here so we are not just passing


12729
35522.916 --> 5.564
on layer pointer down instead in here


12730
35526.32 --> 4.52
we're going going to call the event and


12731
35528.48 --> 6
call on layer


12732
35530.84 --> 5.96
pointer uh actually do I need to do this


12733
35534.48 --> 5.56
like that let's do it like this let's


12734
35536.8 --> 6.04
pass in the id id here let's keep this


12735
35540.04 --> 7
to be on layer pointer down like


12736
35542.84 --> 5.56
this let's go ahead inside of here let's


12737
35547.04 --> 4.76
accept the


12738
35548.4 --> 6.196
ID to be a string and let me open


12739
35551.8 --> 5.116
something for reference like a text so


12740
35554.596 --> 4.564
let's just confirm yes the ID is a Str


12741
35556.916 --> 6.084
and then this will be on pointer down


12742
35559.16 --> 6.16
event let me just change this oh no no


12743
35563 --> 4.32
no we can't use it like this so no no no


12744
35565.32 --> 4.64
let me refactor this let's go back


12745
35567.32 --> 4.68
inside of on pointer down my apologies


12746
35569.96 --> 5.6
so yeah no need to add this


12747
35572 --> 6.48
ID and inside of your path simply remove


12748
35575.56 --> 4.76
that ID from the path props so what


12749
35578.48 --> 4.636
we're going to do here is open an events


12750
35580.32 --> 4.56
and passing on layer pointer down and


12751
35583.116 --> 5.524
individually pass the event and then the


12752
35584.88 --> 6.2
ID like that and the selection color


12753
35588.64 --> 6.6
let's see what is wrong with the


12754
35591.08 --> 6.836
selection color selection color doesn't


12755
35595.24 --> 6.356
exist yes it doesn't exist because I


12756
35597.916 --> 5.564
passed in the wrong attributes here so


12757
35601.596 --> 6.564
we are using stroke instead of selection


12758
35603.48 --> 7.24
color here and we are also missing the x


12759
35608.16 --> 5.56
value to be layer. X and we are missing


12760
35610.72 --> 5.876
y value to be layer doy and we are


12761
35613.72 --> 5.16
missing the field value to be layer do


12762
35616.596 --> 7.084
fill and then we're going to use color


12763
35618.88 --> 7.84
to CSS and pass in layer. fill or it's


12764
35623.68 --> 3.04
going to be the


12765
35626.756 --> 5.244
default black color so make sure you


12766
35629.16 --> 2.84
import color to


12767
35632.88 --> 6.76
CSS okay and now that we have that we


12768
35636.96 --> 4.72
are still not done so now what we have


12769
35639.64 --> 4.52
to do is we have to create a method


12770
35641.68 --> 5.72
which is going to calculate uh using


12771
35644.16 --> 5.36
this get stroke freehand here and that


12772
35647.4 --> 6.44
fun function is going to be called get


12773
35649.52 --> 6.96
SVG path from stroke and now I would


12774
35653.84 --> 4.64
highly highly recommend that you copy


12775
35656.48 --> 4.6
this from my GitHub not because it's


12776
35658.48 --> 4.24
long but because I have no idea how to


12777
35661.08 --> 3.08
explain this function to you you're


12778
35662.72 --> 3.24
going to see what I'm talking about in a


12779
35664.16 --> 3.32
second so this is the method which we


12780
35665.96 --> 5.4
have to create right now I'm going to


12781
35667.48 --> 7.796
paste it here not not that one


12782
35671.36 --> 6.076
sorry this one get SVG path from stroke


12783
35675.276 --> 5.16
so I wish I could have explain to you


12784
35677.436 --> 4.924
what's going on here but I have no idea


12785
35680.436 --> 4.284
all I know is that it successfully


12786
35682.36 --> 5.52
transforms using the points that we


12787
35684.72 --> 5.76
have uh so you can find this function


12788
35687.88 --> 4.52
get SVG path from stroke either by


12789
35690.48 --> 4.6
pausing pausing the video and writing it


12790
35692.4 --> 5.64
out yourself if you want to or you can


12791
35695.08 --> 5.08
go inside of my utils here and in here


12792
35698.04 --> 5.68
you have that method specifically get


12793
35700.16 --> 5.52
SVG pad from stroke great so that will


12794
35703.72 --> 3.8
speed things up again it's not a Long


12795
35705.68 --> 3.916
Function it's just just so confusing


12796
35707.52 --> 4.396
that honestly uh you're going to see


12797
35709.596 --> 4.724
where we use it so we use it inside of


12798
35711.916 --> 5.36
our app folder board


12799
35714.32 --> 5.116
components uh where is it our path right


12800
35717.276 --> 4.124
here so in here we're going to use it in


12801
35719.436 --> 3.724
combination with our G stroke so it's


12802
35721.4 --> 3.876
specifically tailored for this get


12803
35723.16 --> 3.48
stroke perfect freehand so if you want


12804
35725.276 --> 3.764
to explore it yourself that's the


12805
35726.64 --> 3.84
direction you would go to and now let's


12806
35729.04 --> 6
go ahead and do the following let's give


12807
35730.48 --> 6.48
our path here a class name of drop


12808
35735.04 --> 5.236
shadow MD


12809
35736.96 --> 7.52
let's give it on pointer down to be on


12810
35740.276 --> 7.804
pointer down and let's pass in D value


12811
35744.48 --> 6.956
to be get SVG path from stroke which you


12812
35748.08 --> 6.6
can now import from your lib utils like


12813
35751.436 --> 5.044
this so get SVG path from stroke and


12814
35754.68 --> 4.56
then inside of it you're going to fire


12815
35756.48 --> 5
your get stroke which you can import


12816
35759.24 --> 4.08
from perfect freehand like this and


12817
35761.48 --> 3.72
inside of get stroke you're going to


12818
35763.32 --> 4.72
pass in your points which you have from


12819
35765.2 --> 6.236
the props and and then give it a size of


12820
35768.04 --> 8.76
16 a thinning of


12821
35771.436 --> 8.244
0.5 a smoothing of 0.5 and a streamline


12822
35776.8 --> 5.476
of 0.5 as well now of course you can


12823
35779.68 --> 5.12
tweak these values until you get exactly


12824
35782.276 --> 5.84
what you want but this ones work great


12825
35784.8 --> 6.316
for me now let's give it a style of


12826
35788.116 --> 3
transform


12827
35791.64 --> 6.92
translate and let's go ahead and open X


12828
35795.32 --> 7.52
in pixels and Y in


12829
35798.56 --> 6.4
pixels the individual values of X and Y


12830
35802.84 --> 5.64
are going to be zero as


12831
35804.96 --> 5.636
props and fill is going to be fill


12832
35808.48 --> 5.796
stroke is going to be


12833
35810.596 --> 7.084
stroke and stroke width is going to be


12834
35814.276 --> 5.404
one and I think that we can already try


12835
35817.68 --> 4.4
this out the only thing is we are not


12836
35819.68 --> 5.2
going to see it in real time only when


12837
35822.08 --> 5.92
we release our Mouse button so I'm going


12838
35824.88 --> 5.96
to draw an eight here and there we go


12839
35828 --> 6.52
you can see how it appears but only when


12840
35830.84 --> 6
I release my uh key right and I should


12841
35834.52 --> 4.96
be able to change the color normally I


12842
35836.84 --> 4.84
should also be able to play around with


12843
35839.48 --> 4.796
layers I could also use it in


12844
35841.68 --> 6.32
combination with something else great so


12845
35844.276 --> 6.284
that is working but what I want to do is


12846
35848 --> 4.52
I want to enable real time seeing of


12847
35850.56 --> 5.84
what I'm drawing because it doesn't make


12848
35852.52 --> 7.12
much sense otherwise so for that we're


12849
35856.4 --> 5.92
going to go back inside of our uh


12850
35859.64 --> 4.796
cursor's presence component so let's


12851
35862.32 --> 4.92
find our cursor's presence inside of


12852
35864.436 --> 5.564
components and in here I left a comment


12853
35867.24 --> 4.76
to do draft a pencil so that's what


12854
35870 --> 5.4
we're going to do


12855
35872 --> 6.116
now so my apologies just before we do


12856
35875.4 --> 5.48
that this will actually uh work for when


12857
35878.116 --> 4.564
other people are drawing in real time


12858
35880.88 --> 3.96
right so when another person is doing


12859
35882.68 --> 3.596
that first let's do it for ourselves


12860
35884.84 --> 4.436
inside of the canvas which is is going


12861
35886.276 --> 4.64
to be a little bit simpler than that so


12862
35889.276 --> 4.444
what we have to do is go inside of the


12863
35890.916 --> 5.484
SVG right here and find the cursor


12864
35893.72 --> 7.16
presence and then let's go ahead and use


12865
35896.4 --> 7
our pencil draft let me just see uh


12866
35900.88 --> 4.48
where we can extract our pencil draft


12867
35903.4 --> 4.12
from so let's go all the way to the top


12868
35905.36 --> 4.88
of our


12869
35907.52 --> 5.44
application where we start with our live


12870
35910.24 --> 5.4
layer IDs right here where we have the


12871
35912.96 --> 6.36
layer IDs the canvas State and in here


12872
35915.64 --> 6.32
let's go ahead and let's add our pencil


12873
35919.32 --> 6
draft to come from use


12874
35921.96 --> 6.92
self you can import this from live


12875
35925.32 --> 7.596
blocks config and in here we're going to


12876
35928.88 --> 6.96
use me. presence. pencil not pen color


12877
35932.916 --> 5.84
but pencil draft specifically like this


12878
35935.84 --> 4.96
there we go so now we're going to go all


12879
35938.756 --> 6.604
the way to the bottom here where we


12880
35940.8 --> 6.2
started this if we have the pencil draft


12881
35945.36 --> 4.84
we're going to go if if pencil draft is


12882
35947 --> 7.88
not null but using equal sign not


12883
35950.2 --> 7.88
identical and if pencil draft. length is


12884
35954.88 --> 5.036
larger than zero in that case we're


12885
35958.08 --> 4.76
going to start rendering our path


12886
35959.916 --> 5.804
component from do/ path so the same path


12887
35962.84 --> 6.076
which we are reusing uh where is it


12888
35965.72 --> 4.92
which we are reusing for our layer


12889
35968.916 --> 4.444
preview component so that's the same


12890
35970.64 --> 4.72
component which we just created and then


12891
35973.36 --> 4.36
we're just going to have to pass all the


12892
35975.36 --> 6.48
necessary so points are going to be


12893
35977.72 --> 8.36
pencil draft and our fill is going to be


12894
35981.84 --> 7.52
color to CSS from lib SL utils so make


12895
35986.08 --> 6.32
sure you add lib utils


12896
35989.36 --> 4.756
here and we're going to use the last


12897
35992.4 --> 5.56
used


12898
35994.116 --> 6.64
color and did I import color to CSS I


12899
35997.96 --> 6.56
did not so make sure you import color to


12900
36000.756 --> 7.884
CSS and passing the X to be zero and Y


12901
36004.52 --> 7.2
to be Z zero like this and let me just


12902
36008.64 --> 5.276
see what did I break inside of my app so


12903
36011.72 --> 5.396
I think I broke something just a second


12904
36013.916 --> 5.804
I think I deleted some major


12905
36017.116 --> 5.32
key okay I'm just going to go ahead and


12906
36019.72 --> 4.76
type it out again I think I'm selected


12907
36022.436 --> 5.804
something above and accidentally removed


12908
36024.48 --> 7.48
it so fill is going to be get sorry


12909
36028.24 --> 4.64
color to CSS from lib utils and last use


12910
36031.96 --> 4.08
the


12911
36032.88 --> 6.2
color and X is going to be zero and Y is


12912
36036.04 --> 5.64
going to be zero yeah okay looks like I


12913
36039.08 --> 4.4
deleted somehow something from above


12914
36041.68 --> 5.076
previously uh and I think we should


12915
36043.48 --> 5.88
already be seeing our own drawings here


12916
36046.756 --> 6.124
so if I select a pen and start drawing


12917
36049.36 --> 6.48
there we go you can see how this is now


12918
36052.88 --> 5.28
uh real time for us but here's another


12919
36055.84 --> 3.2
user and another user will will draw


12920
36058.16 --> 3.52
something


12921
36059.04 --> 5.28
now you can see how it only appears


12922
36061.68 --> 5.68
after they leave the mouse so now we


12923
36064.32 --> 5.56
have to do the same thing but for them


12924
36067.36 --> 4.28
to for us to see they're drawing in real


12925
36069.88 --> 3.96
time and for that we're going to go back


12926
36071.64 --> 3.72
inside of our cursor's presence and


12927
36073.84 --> 4.32
we're going to go ahead and create


12928
36075.36 --> 4.916
something called drafts so let's go


12929
36078.16 --> 6.116
ahead and the same way we created


12930
36080.276 --> 7.32
cursors let's go ahead and create a con


12931
36084.276 --> 6.684
drafts so drafts is going to use others


12932
36087.596 --> 5.964
using use others maap which you can


12933
36090.96 --> 5.76
import from live blocks.


12934
36093.56 --> 4.876
config so in use others mapped we're


12935
36096.72 --> 4.44
going to go ahead and extract the other


12936
36098.436 --> 6.48
user and then we're going to immediately


12937
36101.16 --> 9.436
return an object and write pencil draft


12938
36104.916 --> 8.68
to be other. presence. pencil


12939
36110.596 --> 6
draft and Pen color is going to be


12940
36113.596 --> 5.644
other. presence. pen


12941
36116.596 --> 5
color and we're going to go ahead and


12942
36119.24 --> 4.6
use shallow


12943
36121.596 --> 5.884
here which we can


12944
36123.84 --> 5.52
import uh from live blocks client let me


12945
36127.48 --> 5.436
just see that there we


12946
36129.36 --> 6.396
go and let me just collapse these two so


12947
36132.916 --> 5
they look nicer all right so make sure


12948
36135.756 --> 5.724
you've added the shallow


12949
36137.916 --> 5.36
here and then we are simply going to


12950
36141.48 --> 6.116
return a


12951
36143.276 --> 6.364
fragment and others. map we get the D


12952
36147.596 --> 4.724
structure of key and


12953
36149.64 --> 6.16
other and then inside of here let's go


12954
36152.32 --> 6.08
ahead and return let's check sorry if


12955
36155.8 --> 6.44
other pencil


12956
36158.4 --> 7.64
draft return our path which you can


12957
36162.24 --> 6.48
import from SL paath so let me just show


12958
36166.04 --> 4.48
you this/ path so the same component


12959
36168.72 --> 4.96
which we've just used in the canvas and


12960
36170.52 --> 7.88
layer preview pass in the key to be the


12961
36173.68 --> 10.32
key pass in the x value to be zero the Y


12962
36178.4 --> 8.12
value to be zero points to be other.


12963
36184 --> 5.4
pencil draft


12964
36186.52 --> 7.36
pill to be other. pen color question


12965
36189.4 --> 8.56
mark color to CSS from lib utils so just


12966
36193.88 --> 9.036
make sure you import this from here and


12967
36197.96 --> 7.52
pass in other pen color or use the


12968
36202.916 --> 6.36
default black


12969
36205.48 --> 6.72
color otherwise return null if we don't


12970
36209.276 --> 7.16
have other pencil. draft and now what we


12971
36212.2 --> 8.04
have to do is render those drafts here


12972
36216.436 --> 5.364
like this and let's try it out finally


12973
36220.24 --> 3
so I'm going to go ahead and move my


12974
36221.8 --> 5.16
screen here a


12975
36223.24 --> 5.56
bit and now if I start drawing something


12976
36226.96 --> 5.92
there we go we can now see the other


12977
36228.8 --> 6.28
user drawing in real time perfect


12978
36232.88 --> 4.64
amazing amazing job you finished the


12979
36235.08 --> 4.196
entire project there are just a couple


12980
36237.52 --> 5.68
of more hooks that I want to show you


12981
36239.276 --> 6.884
which can help you uh improve your


12982
36243.2 --> 5.076
project so I want to show you


12983
36246.16 --> 3.956
uh a little hook that you can create


12984
36248.276 --> 4.124
basically what can happen is that if


12985
36250.116 --> 4.524
another user has a much larger screen


12986
36252.4 --> 4.96
than you and they move their cursor


12987
36254.64 --> 7.116
around it can happen that they trigger a


12988
36257.36 --> 6.236
scroll inside of your uh element here so


12989
36261.756 --> 3.204
I couldn't really reproduce that here


12990
36263.596 --> 3.364
but it did happen to me during


12991
36264.96 --> 4.72
development and here's a useful hook


12992
36266.96 --> 4.56
that you can create uh to prevent that


12993
36269.68 --> 4.96
so let's go inside of hooks and we're


12994
36271.52 --> 6.68
going to go ahead and create use disable


12995
36274.64 --> 7.08
scroll down so use disable scroll


12996
36278.2 --> 5.6
bounce. DS and inside of this method is


12997
36281.72 --> 5.32
going to be very simple we're going to


12998
36283.8 --> 6.44
import use effect from react and then


12999
36287.04 --> 4.96
we're going to export const use disable


13000
36290.24 --> 4.676
scroll


13001
36292 --> 5.64
bounce and we're going to call use


13002
36294.916 --> 6.564
effect and very simply


13003
36297.64 --> 8
inside on the mount we're going to call


13004
36301.48 --> 7.4
document.body do class list. add


13005
36305.64 --> 5.52
overflow hidden and


13006
36308.88 --> 5.64
overscroll Das


13007
36311.16 --> 8.36
none and let's go ahead and


13008
36314.52 --> 8.596
return document body class list remove


13009
36319.52 --> 5.28
overflow hidden and


13010
36323.116 --> 4.32
overscroll


13011
36324.8 --> 6.28
none so that happens on


13012
36327.436 --> 5.804
unmount great and now let's go and


13013
36331.08 --> 5.32
simply include this inside of our


13014
36333.24 --> 4.84
canvas. CSX component so I'm going to go


13015
36336.4 --> 4.28
all the way to the top


13016
36338.08 --> 6.24
here right here where we start with all


13017
36340.68 --> 7.596
of our hooks we can simply add another


13018
36344.32 --> 7.276
one use disable scroll bounce you can do


13019
36348.276 --> 6.724
that from hooks right here and let me


13020
36351.596 --> 6.284
just move that with these elements here


13021
36355 --> 4.56
like that and here's another thing I


13022
36357.88 --> 4.036
want to show you and that is shortcuts


13023
36359.56 --> 4.84
for example if you want to use contrl Z


13024
36361.916 --> 5.2
or backspace to delete something we can


13025
36364.4 --> 5.68
do that as well so so let's just import


13026
36367.116 --> 6.244
use effect from


13027
36370.08 --> 5
react and let's go ahead and let's do it


13028
36373.36 --> 4.396
just above this so we're going to call


13029
36375.08 --> 2.676
use effect


13030
36377.96 --> 6.4
here and we're going to add delete


13031
36381.52 --> 5.48
layers and history inside of our


13032
36384.36 --> 5.916
dependency array so make sure you do


13033
36387 --> 5.436
that before you add the delete layers so


13034
36390.276 --> 3.84
how about I actually do that just before


13035
36392.436 --> 3.564
our render function to ensure we have


13036
36394.116 --> 5.444
all of those functions from above


13037
36396 --> 5.24
yeah uh let me move it okay here is the


13038
36399.56 --> 3.876
return function so I'm going to this is


13039
36401.24 --> 5.036
where I'm going to add it and I still


13040
36403.436 --> 2.84
don't have delete


13041
36407.16 --> 4.16
layers that is


13042
36409.64 --> 4.32
weird


13043
36411.32 --> 5.72
oh just a


13044
36413.96 --> 4.88
second I forgot that we need to add


13045
36417.04 --> 3.76
delete layers because we don't use it


13046
36418.84 --> 3.88
here we use it in the selection tools


13047
36420.8 --> 5.476
but luckily that is a hook so all we


13048
36422.72 --> 6.036
have to do is add delete layers and do


13049
36426.276 --> 6.044
use delete layers from hooks use delete


13050
36428.756 --> 6.244
layers there we go so I'm going to move


13051
36432.32 --> 5.116
that here as well


13052
36435 --> 6.04
now okay so now we have delete layers


13053
36437.436 --> 7.124
and history and what we can do now is we


13054
36441.04 --> 4.52
can go ahead and write uh function on


13055
36444.56 --> 3.16
key


13056
36445.56 --> 3.876
down event is going to be a type of


13057
36447.72 --> 4.76
keyboard


13058
36449.436 --> 7.044
event and in here you can do a switch on


13059
36452.48 --> 7.16
the E do key and for example example if


13060
36456.48 --> 6.92
Case is


13061
36459.64 --> 8.2
Zed you can go ahead uh and do the


13062
36463.4 --> 7.68
following check if e is control key or


13063
36467.84 --> 3.24
if e is meta


13064
36472.48 --> 7.16
key and if e is shift key in that case


13065
36476.916 --> 6.644
you can call history.


13066
36479.64 --> 8.4
redo else history.


13067
36483.56 --> 6.876
undo and for for the other cases you can


13068
36488.04 --> 2.396
simply


13069
36491 --> 8.96
break uh sorry let's add break right


13070
36495.916 --> 6.644
here like that and let's go ahead now


13071
36499.96 --> 5.156
and simply add document add event


13072
36502.56 --> 6.556
listener and pass in key


13073
36505.116 --> 7.524
down and on key


13074
36509.116 --> 6.084
down and always make sure that you


13075
36512.64 --> 7.6
unmount the event listener to prevent


13076
36515.2 --> 5.04
any overflows so document remove event


13077
36521.116 --> 6.404
listener and pass in key


13078
36524.24 --> 5.96
down and on key


13079
36527.52 --> 4.756
down okay so let me just try this out


13080
36530.2 --> 4.64
now I will refresh


13081
36532.276 --> 5.16
this so now I should be able to use my


13082
36534.84 --> 4.8
shortcuts so if I add a new sticky note


13083
36537.436 --> 5.524
here and change the color and I press


13084
36539.64 --> 5.76
command Z there we go I can remove that


13085
36542.96 --> 4.04
if I move this around let's do a a lot


13086
36545.4 --> 4.6
of changes let's go ahead and draw


13087
36547 --> 5.36
something if I do command Z I remove


13088
36550 --> 4.596
that if I do command shift Z I bring it


13089
36552.36 --> 5.48
back perfect and if you want to you can


13090
36554.596 --> 5.32
do the same thing for example to remove


13091
36557.84 --> 7.36
an element using backspace so for


13092
36559.916 --> 5.284
example you can add a case to be uh


13093
36566.436 --> 5.48
backspace and then you can do delete


13094
36569.84 --> 5.916
layers and


13095
36571.916 --> 7.964
break so for example you can now select


13096
36575.756 --> 6.52
a sticky note and press delete right the


13097
36579.88 --> 5.6
issue with this is that if you are in


13098
36582.276 --> 4.964
the middle of typing something and press


13099
36585.48 --> 4.956
backspace that's going to remove the


13100
36587.24 --> 5.196
entire element so that's why I commented


13101
36590.436 --> 4
this out you can probably fix this with


13102
36592.436 --> 3.764
event propagation or more strictly


13103
36594.436 --> 4.564
checking what's going on while you're


13104
36596.2 --> 4.68
writing but yeah just comment that out


13105
36599 --> 5.52
if you want to allow people to remove


13106
36600.88 --> 6.76
text while they're typing uh great but


13107
36604.52 --> 6
what I want want to show you next is


13108
36607.64 --> 4.24
just that there are a couple of stuff


13109
36610.52 --> 4.36
which I've been told from the live


13110
36611.88 --> 6.28
blocks team are deprecated and that


13111
36614.88 --> 4.96
should be our usage of two array I think


13112
36618.16 --> 4.56
there we go so we have two instances of


13113
36619.84 --> 6.4
two array and they've told me that we


13114
36622.72 --> 7.24
can do replace those with uh two


13115
36626.24 --> 4.84
immutable like this so let's find so the


13116
36629.96 --> 3.44
first one


13117
36631.08 --> 5.28
was uh I'm not sure where where this


13118
36633.4 --> 7.24
last one was


13119
36636.36 --> 6.2
H too immutable where did I use you now


13120
36640.64 --> 4.4
so I think I changed this one yes 13


13121
36642.56 --> 5.356
seconds ago inside of selection tools so


13122
36645.04 --> 5.16
this is the move to front function here


13123
36647.916 --> 4.52
I believe


13124
36650.2 --> 4.76
right and the second one seems to be


13125
36652.436 --> 3.84
here in move to back so change those two


13126
36654.96 --> 4.36
to


13127
36656.276 --> 5.084
immutable because apparently uh the is


13128
36659.32 --> 4.68
the two array is deprecated so let me


13129
36661.36 --> 4.32
check if two array exists anywhere looks


13130
36664 --> 4.32
like it doesn't


13131
36665.68 --> 7
so the way we can test this out is by


13132
36668.32 --> 7.04
checking out if our layering works oh


13133
36672.68 --> 5.48
and it seems to not be working when I


13134
36675.36 --> 5.52
switch to


13135
36678.16 --> 5.48
immutable well yeah interestingly it


13136
36680.88 --> 6.08
doesn't seem to work for me if I move it


13137
36683.64 --> 5.4
to to immutable but regardless that's


13138
36686.96 --> 3.84
just a tip for you if yours isn't


13139
36689.04 --> 4.32
working in the future it could be


13140
36690.8 --> 5.04
because you're using two array so it


13141
36693.36 --> 4.556
could be just the version live kit of


13142
36695.84 --> 4.276
live blocks that I have so let me go


13143
36697.916 --> 4.164
ahead and find my selection tools again


13144
36700.116 --> 6.084
here and see how we can refactor this


13145
36702.08 --> 7.676
back so live layer IDs to


13146
36706.2 --> 5.48
array and the one in move to back is


13147
36709.756 --> 4.284
going to go back to to


13148
36711.68 --> 4.596
array and let's see if that's going to


13149
36714.04 --> 5.76
work now so


13150
36716.276 --> 5.964
now or maybe I'm just using a completely


13151
36719.8 --> 4.796
wrong way of testing my apologies let me


13152
36722.24 --> 4.56
please try it out like this so this is


13153
36724.596 --> 4.68
what working yes it could be that I just


13154
36726.8 --> 5.316
did a completely wrong test here so if I


13155
36729.276 --> 5.604
go back to immutable my


13156
36732.116 --> 4.8
apologies uh yeah I'm pretty sure it's


13157
36734.88 --> 4.556
going to be visible now let's try it out


13158
36736.916 --> 4.36
so if I try going back yeah it works


13159
36739.436 --> 3.404
completely with two immutable and you


13160
36741.276 --> 4.524
should be using two immutable I just


13161
36742.84 --> 5.076
tested it literally on a black on black


13162
36745.8 --> 4.636
uh line so that's why it was not it was


13163
36747.916 --> 7
not visible great so if you have any


13164
36750.436 --> 7.244
instance of converting to array you you


13165
36754.916 --> 6.444
should refactor it to use two immutable


13166
36757.68 --> 6.36
like this there we go that is it you


13167
36761.36 --> 5.36
finished the entire entire project if


13168
36764.04 --> 4.68
you're interested in even more content


13169
36766.72 --> 3.84
on this project you can visit the link


13170
36768.72 --> 4.16
in the description and purchase


13171
36770.56 --> 3.64
additional content on my platform where


13172
36772.88 --> 3.236
we are going to turn this into a


13173
36774.2 --> 5.076
software as a service and Implement a


13174
36776.116 --> 5
stripe payment great great job thank you


13175
36779.276 --> 2.964
so much for watching and see you in the


13176
36781.116 --> 3.48
next


13177
36782.24 --> 4.516
tutorial so I already said goodbye to


13178
36784.596 --> 5.68
you you but I forgot that I want to


13179
36786.756 --> 5.484
explain to you how to deploy so first


13180
36790.276 --> 4.404
things first let's check if we are ready


13181
36792.24 --> 4.356
to deploy at all so I'm going to go


13182
36794.68 --> 3.436
ahead and do the following inside of


13183
36796.596 --> 2.644
your project you can now close


13184
36798.116 --> 5.16
everything you don't need to have


13185
36799.24 --> 7.16
anything running go ahead and do mpm run


13186
36803.276 --> 5.84
build this must not have any errors for


13187
36806.4 --> 5.32
us to be able to deploy so we can save


13188
36809.116 --> 5.084
some time instead of uh wasting time on


13189
36811.72 --> 4.876
ver cell and as you can see at least on


13190
36814.2 --> 4.8
my version of nextjs I am getting an


13191
36816.596 --> 5.444
error export encountered errors on the


13192
36819 --> 5.16
following paths dashboard and not found


13193
36822.04 --> 5.076
it looks like there is a pre-rendering


13194
36824.16 --> 5.68
error so let's go ahead and see what's


13195
36827.116 --> 5.204
going on I believe that is because of


13196
36829.84 --> 4.32
our convex provider so let's go ahead


13197
36832.32 --> 5.36
and do the following inside of our app


13198
36834.16 --> 6.08
folder inside of layout. vsx let's wrap


13199
36837.68 --> 6.8
our entire convex client provider in a


13200
36840.24 --> 6.72
suspense from react so let me do this


13201
36844.48 --> 4.08
like like that make sure you import


13202
36846.96 --> 4.316
suspense from react and I'm going to


13203
36848.56 --> 6.24
move it here to the top and we're going


13204
36851.276 --> 6.804
to have a nice full back here to be our


13205
36854.8 --> 5.636
loading from components out loading we


13206
36858.08 --> 4.44
already have this prepared we use it


13207
36860.436 --> 5.48
it's just our logo in the


13208
36862.52 --> 5.04
center great and let's go ahead and try


13209
36865.916 --> 4.564
that out now so I'm going to go ahead


13210
36867.56 --> 6.32
and do mpm run build again so let's see


13211
36870.48 --> 5.84
if that resolved our pre-rendering error


13212
36873.88 --> 3.48
and do we have any more errors we need


13213
36876.32 --> 3.56
to


13214
36877.36 --> 6.04
resolve so it looks like this is now


13215
36879.88 --> 5.64
working completely fine great and here's


13216
36883.4 --> 4.716
one more thing I want to do before we


13217
36885.52 --> 6.72
push this to GitHub and that is that


13218
36888.116 --> 7.564
inside of your app folder API live


13219
36892.24 --> 5.64
blocks out we are just plainly passing


13220
36895.68 --> 3.596
this secret key here so let's copy it


13221
36897.88 --> 3.96
from here and let's add it to our


13222
36899.276 --> 4.524
environment variables and you can see


13223
36901.84 --> 4.276
that I already did that here because I


13224
36903.8 --> 5
was practicing before this chapter so


13225
36906.116 --> 6
just create a new key live blocks secret


13226
36908.8 --> 6.76
key and paste it inside with your key


13227
36912.116 --> 5.16
like this and then go ahead back here


13228
36915.56 --> 4.12
and replace this with process.


13229
36917.276 --> 5.524
environment live blocks secret key and


13230
36919.68 --> 6.96
add an exclamation point at the end like


13231
36922.8 --> 5.956
that perfect so now we are ready let's


13232
36926.64 --> 5.636
go ahead and do the following let's go


13233
36928.756 --> 7.124
ahead and write get add and then do get


13234
36932.276 --> 5.604
commit and write your message


13235
36935.88 --> 3.92
and then go ahead inside of your GitHub


13236
36937.88 --> 5.716
and create a new repository so I'm going


13237
36939.8 --> 4.76
to call this next1 14 board clone or


13238
36943.596 --> 3.204
board


13239
36944.56 --> 4.16
tutorial I'm going to mark this as a


13240
36946.8 --> 5.16
private repository and I'm going to


13241
36948.72 --> 5.44
click create repository after this go


13242
36951.96 --> 4.636
ahead and copy this second option for an


13243
36954.16 --> 3.72
existing repository right here and paste


13244
36956.596 --> 5
it and run the


13245
36957.88 --> 6.28
commands after this has been uh pushed


13246
36961.596 --> 5.804
you can reset refresh this page right


13247
36964.16 --> 6.68
here and now you should see uh your


13248
36967.4 --> 5.196
repository right here perfect now let's


13249
36970.84 --> 3.72
go ahead and let's see what we have to


13250
36972.596 --> 5.404
do next so I'm following the


13251
36974.56 --> 6.28
instructions here uh from convex to


13252
36978 --> 5.72
deploy on versell so let's go ahead and


13253
36980.84 --> 4.64
deploy something on ver.com slne so I'm


13254
36983.72 --> 3.8
going to choose this latest repository


13255
36985.48 --> 4.76
that I have here which I just added in


13256
36987.52 --> 4.48
my GitHub and what we're going to do


13257
36990.24 --> 3.92
first is we're going to override the


13258
36992 --> 5.96
build command so let's use npx convex


13259
36994.16 --> 5.24
deploy -- CMD npm run build here so I'm


13260
36997.96 --> 3.636
going to go ahead and click on build and


13261
36999.4 --> 4.876
output settings override and I'm going


13262
37001.596 --> 4.444
to paste that here and then we have to


13263
37004.276 --> 3.32
do the environment variables so I'm


13264
37006.04 --> 4.556
going to go ahead inside of my


13265
37007.596 --> 5.16
environment. loal here copy everything


13266
37010.596 --> 4.884
and I'm going to go ahead and paste that


13267
37012.756 --> 4.644
here like this but there is something we


13268
37015.48 --> 4.52
have to change here and that is inside


13269
37017.4 --> 5.516
of here we need to request our convex


13270
37020 --> 5.04
deploy key and we need to use the


13271
37022.916 --> 5.52
production version so so let's go ahead


13272
37025.04 --> 6.12
inside of our uh dashboard here on


13273
37028.436 --> 5.524
convex and switch from Dev to production


13274
37031.16 --> 5.16
right here and in here go ahead and go


13275
37033.96 --> 4.956
to settings and click on generate a


13276
37036.32 --> 5.88
production deploy key so go ahead and


13277
37038.916 --> 6.804
copy this and now we need to add a new


13278
37042.2 --> 6.04
convex unor deploy key if I believe


13279
37045.72 --> 4.8
that's the correct one convex deploy key


13280
37048.24 --> 5.84
and we have to add that here so you can


13281
37050.52 --> 6.04
just click add and now if you want to


13282
37054.08 --> 5.56
you can also go ahead inside of your


13283
37056.56 --> 5.356
live blocks and you can change uh from


13284
37059.64 --> 3.76
development to production right so you


13285
37061.916 --> 3.484
have two instances here so you can


13286
37063.4 --> 5.036
change to production and change the API


13287
37065.4 --> 6.716
Keys here as well generate a new secret


13288
37068.436 --> 7.204
key let me try and generate


13289
37072.116 --> 7.444
it uh for some reason I


13290
37075.64 --> 5.68
cannot copy it also now it's appearing


13291
37079.56 --> 3.28
okay no I'm just not going to do it for


13292
37081.32 --> 3.116
this tutorial but you can get the new


13293
37082.84 --> 3.64
key from there and then you can change


13294
37084.436 --> 4.32
it to production here and you can do the


13295
37086.48 --> 3.796
same thing for the clerk secret key and


13296
37088.756 --> 3.084
the clerk publishable key if you want to


13297
37090.276 --> 3.044
change them you don't have to if you


13298
37091.84 --> 4.076
just want to deploy for testing you


13299
37093.32 --> 4.596
don't have to change any of those uh


13300
37095.916 --> 4.884
great and I think this should be enough


13301
37097.916 --> 4.36
for us to click deploy and see if this


13302
37100.8 --> 3.68
is going to work so I'm going to pause


13303
37102.276 --> 5.48
my screen and then we're going to see


13304
37104.48 --> 5.36
what happens and there we go let me go


13305
37107.756 --> 6.644
ahead and continue to dashboard here so


13306
37109.84 --> 7.276
I can see my domain link right here and


13307
37114.4 --> 5.92
let's see there we go let me log


13308
37117.116 --> 5.604
in and here we are so let me go inside


13309
37120.32 --> 4.796
of my project here your will probably be


13310
37122.72 --> 4.44
empty uh because you are now in


13311
37125.116 --> 4.404
production with convex so you have a new


13312
37127.16 --> 4.756
database right I already tested this out


13313
37129.52 --> 4.96
that's why I have this one and look at


13314
37131.916 --> 6.444
this everything seems to be working just


13315
37134.48 --> 6.956
fine you successfully deployed great


13316
37138.36 --> 5.076
great job thank you so much for watching


13317
37141.436 --> 3.884
and make sure to check out the website


13318
37143.436 --> 3.884
if you want addition content where I


13319
37145.32 --> 4.68
turn this into a software as a service


13320
37147.32 --> 5.92
by introducing a stripe see you in the


13321
37150 --> 3.24
next video
